show system grpc sessions history
----------------------------------

**Minimum user role:** viewer

To display the last 100 terminated gRPC sessions in the system:



**Command syntax: show system grpc sessions history** [session-id]

**Command mode:** operational



..
	**Internal Note**

	- command without secpecified session-id will output last 100 terminated gRPC sessions

**Parameter table**

+------------+----------------------------------------------------------------------------------+----------+
| Parameter  | Description                                                                      | Range    |
+============+==================================================================================+==========+
| session-id | Optionally filter the output for a specific session (according to the socket-id) | 1..65535 |
+------------+----------------------------------------------------------------------------------+----------+

For each history GNMI session, the following information is displayed:

+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Parameter       | Description                                                      | Range                                                                                                        |
+=================+==================================================================+==============================================================================================================+
| ID              | History id                                                       | 0..99                                                                                                        |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Session-ID      | The socket ID                                                    | 1..65535                                                                                                     |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| User            | The gRPC user name                                               | String                                                                                                       |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Terminated date | The date of the terminated session                               | DD-MM-YYYY HH:MM:SS                                                                                          |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Uptime          | The amount of time that the session has been up                  | DD days, HH:MM:SS                                                                                            |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Request         | The type of session request                                      | SUBSCRIBE                                                                                                    |
|                 |                                                                  | GET                                                                                                          |
|                 |                                                                  | SET                                                                                                          |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Mode            | The Subscribe Response mode.                                     | Stream - upon subscription, the session will remain open forever and DNOS will stream updates to the client. |
|                 | gNMI allows STREAM, ONCE, POLL.                                  |                                                                                                              |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Status Code     | The status code of the executed RPC                              | OK, CANCELLED, UNKNOWN, INVALID_ARGUMENT, DEADLINE_EXCEEDED, NOT_FOUND, ALREADY_EXISTS, PERMISSION_DENIED,   |
|	          |								     | RESOURCE_EXHAUSTED, FAILED_PRECONDITION, ABORTED, OUT_OF_RANGE, UNIMPLEMENTED, INTERNAL, UNAVAILABLE,        |
|	          |								     | DATA_LOSS, UNAUTHENTICATED                                                                                   |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| VRF             | Displays whether the gRPC session is in-band or out-of-band      | default (in-band)                                                                                            |
|                 |                                                                  | non-default-vrf (in-band)                                                                                    |
|                 |                                                                  | mgmt0 (out-of-band)                                                                                          |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Remote Address  | The IPv4/IPv6 address of the client that opened the gRPC session | A.B.C.D:port                                                                                                 |
|                 |                                                                  | x:x::x:x:port                                                                                                |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Export Leaves   | The total number of exported telemetry updates                   | 64-bit counter                                                                                               |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+

For each history GNOI session, the following information is displayed:

+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Parameter       | Description                                                      | Range                                                                                                        |
+=================+==================================================================+==============================================================================================================+
| ID              | History id                                                       | 0..99                                                                                                        |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Session-ID      | The socket ID                                                    | 1..65535                                                                                                     |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| User            | The gRPC user name                                               | String                                                                                                       |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Terminated date | The date of the terminated session                               | DD-MM-YYYY HH:MM:SS                                                                                          |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Uptime          | The amount of time that the session has been up                  | DD days, HH:MM:SS                                                                                            |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Service         | The name of the GNOI Service                                     | String                    										    |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| RPC             | The name of the executed RPC                                     | String                    										    |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Status Code     | The status code of the executed RPC                              | OK, CANCELLED, UNKNOWN, INVALID_ARGUMENT, DEADLINE_EXCEEDED, NOT_FOUND, ALREADY_EXISTS, PERMISSION_DENIED,   |
|                 |								     | RESOURCE_EXHAUSTED, FAILED_PRECONDITION, ABORTED, OUT_OF_RANGE, UNIMPLEMENTED, INTERNAL, UNAVAILABLE,        |
|                 |								     | DATA_LOSS, UNAUTHENTICATED                                                                                   |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| VRF             | Displays whether the gRPC session is in-band or out-of-band      | default (in-band)                                                                                            |
|                 |                                                                  | non-default-vrf (in-band)                                                                                    |
|                 |                                                                  | mgmt0 (out-of-band)                                                                                          |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Remote Address  | The IPv4/IPv6 address of the client that opened the gRPC session | A.B.C.D:port                                                                                                 |
|                 |                                                                  | x:x::x:x:port                                                                                                |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Requests        | Number of request messages                                       | Integer                                                                                                      |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+
| Responses       | Number of response messages                                      | Integer                                                                                                      |
+-----------------+------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------+

**Example**
::

	dnRouter# show system grpc sessions history

	gNMI Sessions History:

	| ID   | Session-ID | User  | Terminated date         | Uptime            | Request       | Mode         | Status Code  | Vrf          | Remote Address | Export Leaves|
	|------+------------+-------+-------------------------+-------------------+---------------+--------------+--------------+--------------+----------------+--------------|
	|  1   |        776 | test  | 27-03-2019 22:11:00 UTC | 10 Days, 00:01:30 | SUBSCRIBE     | STREAM       | OK           | default      | 1.1.1.1:22214  |  1,221,233   |
	|  5   |        806 | test2 | 27-03-2019 22:09:12 UTC | 2 Days, 10:21:30  | SUBSCRIBE     | STREAM       | OK           | mgmt0        |                |  123,222     |
	|  7   |        684 | test3 | 27-03-2019 22:19:14 UTC | 7 Days, 12:44:53  | SUBSCRIBE     | POLL         | OK           | mgmt0        |                |  137,244     |
	|  3   |        772 | test5 | 27-03-2019 22:10:52 UTC | 0 Days, 0:00:01   | SUBSCRIBE     | ONCE         | OK           | mgmt0        |                |  21,354      |
	|      |        752 | test4 | 27-03-2019 22:19:14 UTC | 7 Days, 12:44:53  | SUBSCRIBE     | POLL         | OK           | my_vrf       | 1.2.3.9:34363  |  118,025     |
	|  2   |        891 | test2 | 27-03-2019 22:07:10 UTC | 0 Days, 0:00:01   | GET           |              | OK           | mgmt0        |                |  221,222     |

	gNOI Sessions History:

	| ID   | Session-ID | User  | Terminated date         | Uptime            | Service  | RPC         | Status Code  | Vrf          | Remote Address | Requests  | Responses |
	|------|------------+-------+-------------------------+-------------------+----------+-------------+--------------+--------------+----------------+-----------+-----------|
	|  8   |        779 | test  | 27-03-2019 22:35:00 UTC | 0 Days, 00:00:05  | System   | Reboot      | OK           | default      | 1.1.1.1:22214  | 1         | 0         |
	|  9   |        850 | test2 | 27-03-2019 22:40:12 UTC | 0 Days, 00:00:01  | system   | KillProcess | OK           | mgmt0        | 1.1.2.2:33114  | 1         | 0         | 


	dnRouter# show system grpc sessions history 1

	| ID   | Session-ID | User  | Terminated date         | Uptime            | Request       | Mode         | Vrf          | Remote Address | Export Leaves|
	|------+------------+-------+-------------------------+-------------------+---------------+--------------+--------------+----------------+--------------|
	|  1   |        776 | test  | 27-03-2019 22:11:00 UTC | 10 Days, 00:01:30 | SUBSCRIBE     | STREAM       | default      | 1.1.1.1:22214  |  1,221,233   |

	dnRouter# show system grpc sessions history 777
	Error: session 777 does not exist!

.. **Help line:** show system grpc sessions history

**Command History**

+---------+---------------------------------------------------------------------+
| Release | Modification                                                        |
+=========+=====================================================================+
| 13.0    | Command introduced                                                  |
+---------+---------------------------------------------------------------------+
| 13.1    | Added support for in-band (default VRF) and out-of-band (mgmt0 VRF) |
+---------+---------------------------------------------------------------------+
| 15.0    | Updated the 'Mode' parameter to support POLL and ONCE               |
+---------+---------------------------------------------------------------------+
| 16.1    | Added support for in-band (non-default VRF)                         |
+---------+---------------------------------------------------------------------+
| 25.2    | Added support for GNOI                                              |
+---------+---------------------------------------------------------------------+
