# Network and System Services Complete Aggregation

This file contains the complete content from all RST files in:
1. Network-services folder
2. Services folder

This comprehensive documentation covers all network services and system services including:
- DNS, DHCP, NTP, SNMP, Syslog
- SSH, Telnet, TACACS+, RADIUS
- gRPC, NETCONF, ZTP
- BMP, TWAMP, LLDP
- Event management, Performance monitoring
- System management services


---

# SECTION 1: NETWORK-SERVICES

Files from Network-services folder:      630 files

## bridge-domain/bridge-domain.rst

network-services bridge-domain
------------------------------

**Minimum user role:** operator

Bridge domains (Ethernet Virtual Private Network) refer to a Layer 2 broadcast domain consisting of a set of physical ports (“All-to-one bundling”, “port-mode”), and virtual ports (Attachment Circuits).
Data frames are switched within a bridge domain based on the destination MAC address.  Source MAC address learning is performed on all incoming packets.
Multicast, broadcast, and unknown destination unicast frames are flooded within the bridge domain.
Incoming frames are mapped to a bridge domain by their incoming VLAN/VLANs.
Traffic cannot leak between one bridge domain to another. Each bridge domain is totally independent (a leak is possible only via routing through IRBs).
The bridge domain connects the layer 2 interface(s) of one PE with the layer 2 interface(s) of other PEs, across the layer 3 core mpls network. The EVPN service uses an MPLS or VxLAN transport layer and a BGP control layer.
To enter the Bridge Domain service configuration mode:

**Command syntax: bridge-domain**

**Command mode:** config

**Hierarchies**

- network-services

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# bridge-domain
    dnRouter(cfg-network-services-bd)#


**Removing Configuration**

To remove all EVPN services:
::

    dnRouter(cfg-network-services)# no brifge-domain

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/admin-state.rst

network-services bridge-domain instance admin-state
---------------------------------------------------

**Minimum user role:** operator

Configure the Bridge-Domain Instance admin-state. Once disabled, the BD service is down, no traffic will flow

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance

**Parameter table**

+-------------+---------------------------+--------------+---------+
| Parameter   | Description               | Range        | Default |
+=============+===========================+==============+=========+
| admin-state | Disable the Bridge Domain | | enabled    | enabled |
|             |                           | | disabled   |         |
+-------------+---------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# admin-state disabled


**Removing Configuration**

To revert admin-state to default:
::

    dnRouter(cfg-netsrv-bd-inst)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/description.rst

network-services bridge-domain instance description
---------------------------------------------------

**Minimum user role:** operator

To add an optional description of the Bridge Domain Instance

**Command syntax: description [description]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance

**Parameter table**

+-------------+---------------------------+------------------+---------+
| Parameter   | Description               | Range            | Default |
+=============+===========================+==================+=========+
| description | bridge-domain description | | string         | \-      |
|             |                           | | length 1-255   |         |
+-------------+---------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# description "my bridge-domain service"


**Removing Configuration**

To revert description to default:
::

    dnRouter(cfg-netsrv-bd-inst)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/instance.rst

network-services bridge-domain instance
---------------------------------------

**Minimum user role:** operator

Configure a Bridge-Domain service

**Command syntax: instance [bd-name]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain

**Note**

- The Bridge-Domain service must use a unique name.

- The number of Bridge-Domain instances that can be defined is limited to 1000.

**Parameter table**

+-----------+------------------------------------------------------+------------------+---------+
| Parameter | Description                                          | Range            | Default |
+===========+======================================================+==================+=========+
| bd-name   | The name of the bd -- used to address the bd service | | string         | \-      |
|           |                                                      | | length 1-255   |         |
+-----------+------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)#


**Removing Configuration**

To revert the specified Bridge-Domain service to default:
::

    dnRouter(cfg-netsrv-bd)# no instance bd1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/interface/interface.rst

network-services bridge-domain instance interface
-------------------------------------------------

**Minimum user role:** operator

Configure an interface for the Bridge-Domain service instance

 - The Interface must be a l2-service enabled interface.

 - An Interface cannot be assigned to multiple services

**Command syntax: interface [name]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance

**Note**

- support only interface of type <geX-X/X/X/bundle-X/<geX-X/X/X.Y>/<bundle-X.Y>

**Parameter table**

+-----------+--------------------------------------------------------------+------------------+---------+
| Parameter | Description                                                  | Range            | Default |
+===========+==============================================================+==================+=========+
| name      | Associate an interface to the Bridge Domian service instance | | string         | \-      |
|           |                                                              | | length 1-255   |         |
+-----------+--------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# interface ge100-0/0/0
    dnRouter(cfg-bd-inst-ge100-0/0/0)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# interface bundle-1
    dnRouter(cfg-bd-inst-bundle-1)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# interface ge100-0/0/0.10
    dnRouter(cfg-bd-inst-ge100-0/0/0.10)#


**Removing Configuration**

To remove the interface from its association with the Bridge Domain instance
::

    dnRouter(cfg-netsrv-bd-inst)# no interface ge100-0/0/0

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/interface/storm-control/broadcast-packet-rate.rst

network-services bridge-domain instance interface storm-control broadcast-packet-rate
-------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum broadcast packet rate allowed. When this limit is reached, packets will be dropped. This limit is per specific interface. If not configured the per instance or per global bridge-domain storm-control configurations will be applied unless this knob is set to 'disabled'.

**Command syntax: broadcast-packet-rate [broadcast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance interface storm-control

**Parameter table**

+-----------------------+------------------------------------------+---------------------------+---------+
| Parameter             | Description                              | Range                     | Default |
+=======================+==========================================+===========================+=========+
| broadcast-packet-rate | Allowed packet rate of broadcast packets | disabled | 10 - 100000000 | \-      |
+-----------------------+------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# interface ge100-0/0/0
    dnRouter(cfg-bd-inst-ge100-0/0/0)# storm-control
    dnRouter(cfg-inst-ge100-0/0/0-sc)# broadcast-packet-rate 10000
    dnRouter(cfg-inst-ge100-0/0/0-sc)#


**Removing Configuration**

To remove the broadcast-packet-rate limit.
::

    dnRouter(cfg-inst-ge100-0/0/0-sc)# no broadcast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/interface/storm-control/multicast-packet-rate.rst

network-services bridge-domain instance interface storm-control multicast-packet-rate
-------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum multicast packet rate allowed. When this limit is reached, packets will be dropped. This limit is per specific interface. If not configured the per instance or per global bridge-domain storm-control configurations will be applied unless this knob is set to 'disabled'.

**Command syntax: multicast-packet-rate [multicast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance interface storm-control

**Parameter table**

+-----------------------+------------------------------------------+---------------------------+---------+
| Parameter             | Description                              | Range                     | Default |
+=======================+==========================================+===========================+=========+
| multicast-packet-rate | Allowed packet rate of multicast packets | disabled | 10 - 100000000 | \-      |
+-----------------------+------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# interface ge100-0/0/0
    dnRouter(cfg-bd-inst-ge100-0/0/0)# storm-control
    dnRouter(cfg-inst-ge100-0/0/0-sc)# multicast-packet-rate 10000
    dnRouter(cfg-inst-ge100-0/0/0-sc)#


**Removing Configuration**

To remove the multicast-packet-rate limit.
::

    dnRouter(cfg-inst-ge100-0/0/0-sc)# no multicast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/interface/storm-control/storm-control.rst

network-services bridge-domain instance interface storm-control
---------------------------------------------------------------

**Minimum user role:** operator

Storm Control rate separately limits each of the broadcast, multicast and unknown-unicast packets.
As these packets are replicated to flood all the interfaces attached to the service, it is important
to ensure that these packets are rate limited. The rate limits configured at this interface level are applied
to the specific interface.

**Command syntax: storm-control**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance interface

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# interface ge100-0/0/0
    dnRouter(cfg-bd-inst-ge100-0/0/0)# storm-control
    dnRouter(cfg-inst-ge100-0/0/0-sc)#


**Removing Configuration**

To remove all global storm control configurations
::

    dnRouter(cfg-bd-inst-ge100-0/0/0)# no storm-control

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/interface/storm-control/unknown-unicast-packet-rate.rst

network-services bridge-domain instance interface storm-control unknown-unicast-packet-rate
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum unknown-unicast packet rate allowed. When this limit is reached, packets will be dropped. This limit is per specific interface. If not configured the per instance or per global bridge-domain storm-control configurations will be applied unless this knob is set to 'disabled'.

**Command syntax: unknown-unicast-packet-rate [unknown-unicast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance interface storm-control

**Parameter table**

+-----------------------------+------------------------------------------------+---------------------------+---------+
| Parameter                   | Description                                    | Range                     | Default |
+=============================+================================================+===========================+=========+
| unknown-unicast-packet-rate | Allowed packet rate of unknown-unicast packets | disabled | 10 - 100000000 | \-      |
+-----------------------------+------------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# interface ge100-0/0/0
    dnRouter(cfg-bd-inst-ge100-0/0/0)# storm-control
    dnRouter(cfg-inst-ge100-0/0/0-sc)# unknown-unicast-packet-rate 10000
    dnRouter(cfg-inst-ge100-0/0/0-sc)#


**Removing Configuration**

To remove the unknown-unicast-packet-rate limit.
::

    dnRouter(cfg-inst-ge100-0/0/0-sc)# no unknown-unicast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/mac-handling/loop-prevention/admin-state.rst

network-services bridge-domain instance mac-handling loop-prevention admin-state
--------------------------------------------------------------------------------

**Minimum user role:** operator

Loop-protection for this Bridge-Domain Instance may be enabled/disabled. The default value is defined at the Bridge-Domain level.

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance mac-handling loop-prevention

**Parameter table**

+-------------+------------------------------------------------+--------------+---------+
| Parameter   | Description                                    | Range        | Default |
+=============+================================================+==============+=========+
| admin-state | Enable or Disable the loop-prevention handling | | enabled    | \-      |
|             |                                                | | disabled   |         |
+-------------+------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# mac-handling
    dnRouter(cfg-bd-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# admin-state disabled
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To revert the admin-state configuration to its default value as defined at the Bridge-Domain level
::

    dnRouter(cfg-inst-mh-lp)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/mac-handling/loop-prevention/local-loop-prevention/admin-state.rst

network-services bridge-domain instance mac-handling loop-prevention local-loop-prevention admin-state
------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Local Loop-protection for this Bridge-Domain Instance may be enabled/disabled. The default value is defined at the Bridge-Domain level.

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance mac-handling loop-prevention local-loop-prevention

**Parameter table**

+-------------+------------------------------------------------+--------------+---------+
| Parameter   | Description                                    | Range        | Default |
+=============+================================================+==============+=========+
| admin-state | Enable or Disable the loop-prevention handling | | enabled    | \-      |
|             |                                                | | disabled   |         |
+-------------+------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# mac-handling
    dnRouter(cfg-bd-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-detection
    dnRouter(cfg-mh-lp-llp)# admin-state disabled


**Removing Configuration**

To revert the admin-state configuration to its default value as defined at the Bridge-Domain level
::

    dnRouter(cfg-mh-lp-llp)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/mac-handling/loop-prevention/local-loop-prevention/local-loop-prevention.rst

network-services bridge-domain instance mac-handling loop-prevention local-loop-prevention
------------------------------------------------------------------------------------------

**Minimum user role:** operator

Enter the local-loop-prevention hierarchy to modify the local-loop-prevention attributes for this Bridge-Domain instance.

**Command syntax: local-loop-prevention**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance mac-handling loop-prevention

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# mac-handling
    dnRouter(cfg-bd-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-detection
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To revert the loop-prevention configuration for this instance to the defaults.
::

    dnRouter(cfg-inst-mh-lp)# no local-loop-prevention

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/mac-handling/loop-prevention/local-loop-prevention/loop-detection-threshold.rst

network-services bridge-domain instance mac-handling loop-prevention local-loop-prevention loop-detection-threshold
-------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of moves allowed within the loop-detection-window period. If the loop-detection-threshold is reached within this period all AC interfaces involved, except the first AC interface, are shutdown. Default is defined at the Bridge-Domain level.

**Command syntax: loop-detection-threshold [loop-detection-threshold]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance mac-handling loop-prevention local-loop-prevention

**Parameter table**

+--------------------------+----------------------------------+-------+---------+
| Parameter                | Description                      | Range | Default |
+==========================+==================================+=======+=========+
| loop-detection-threshold | the number of mac moves allowed. | 2-30  | \-      |
+--------------------------+----------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# mac-handling
    dnRouter(cfg-bd-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-detection
    dnRouter(cfg-mh-lp-llp)# loop-detection-threshold 6
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To restore the loop-detection-window period to its default value.
::

    dnRouter(cfg-mh-lp-llp)# no loop-detection-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/mac-handling/loop-prevention/local-loop-prevention/loop-detection-window.rst

network-services bridge-domain instance mac-handling loop-prevention local-loop-prevention loop-detection-window
----------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the period of the loop-detection-window in seconds for this Bridge-Domain instance. The default is defined at the Bridge-Domain level. If the loop-detection-threshold is reached within this period all AC interfaces involved, except the first AC interface, are shutdown.

**Command syntax: loop-detection-window [loop-detection-window]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance mac-handling loop-prevention local-loop-prevention

**Parameter table**

+-----------------------+----------------------------+---------+---------+
| Parameter             | Description                | Range   | Default |
+=======================+============================+=========+=========+
| loop-detection-window | the loop detection period. | 1-10000 | \-      |
+-----------------------+----------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# mac-handling
    dnRouter(cfg-bd-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-detection
    dnRouter(cfg-mh-lp-llp)# loop-detection-window 300
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To restore the loop-detection-window period to its default value.
::

    dnRouter(cfg-mh-lp-llp)# no loop-detection-window

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/mac-handling/loop-prevention/local-loop-prevention/reset-restore-cycles-interval.rst

network-services bridge-domain instance mac-handling loop-prevention local-loop-prevention reset-restore-cycles-interval
------------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure (for this Bridge-Domain instance) the reset-restore-cycles-interval timer in hours, the default is 24 hours. The AC Interface shutdown count is cleared if no shutdown events occur for this period.

**Command syntax: reset-restore-cycles-interval [reset-restore-cycles-interval]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance mac-handling loop-prevention local-loop-prevention

**Parameter table**

+-------------------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter                     | Description                                                                      | Range | Default |
+===============================+==================================================================================+=======+=========+
| reset-restore-cycles-interval | Time interval to be applied following removal of suppression, before clearing    | 1-72  | \-      |
|                               | the restore-cycles counter, assuming no further sanctions are applied.           |       |         |
+-------------------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# mac-handling
    dnRouter(cfg-bd-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-detection
    dnRouter(cfg-mh-lp-llp)# reset-restore-cycles-interval 50


**Removing Configuration**

To restore the reset-restore-cycles-interval period to its default value of 24 hours.
::

    dnRouter(cfg-mh-lp-llp)# no reset-restore-cycles-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/mac-handling/loop-prevention/local-loop-prevention/restore-max-cycles.rst

network-services bridge-domain instance mac-handling loop-prevention local-loop-prevention restore-max-cycles
-------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of AC shutdown restore cycles allowed before permanent shutdown. When an AC Interface is permanently shutdown only a manual command will release the AC Interface. Default is defined at the Bridge-Domain level.

**Command syntax: restore-max-cycles [restore-max-cycles]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance mac-handling loop-prevention local-loop-prevention

**Parameter table**

+--------------------+-------------------------------------------+----------------------+---------+
| Parameter          | Description                               | Range                | Default |
+====================+===========================================+======================+=========+
| restore-max-cycles | the number of AC shutdown cycles allowed. | | 1-10               | \-      |
|                    |                                           | | infinite           |         |
|                    |                                           | | restore-manually   |         |
+--------------------+-------------------------------------------+----------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# mac-handling
    dnRouter(cfg-bd-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-detection
    dnRouter(cfg-mh-lp-llp)# restore-max-cycles 6


**Removing Configuration**

To restore the restore-max-cycles period to its default value of infinite.
::

    dnRouter(cfg-mh-lp-llp)# no restore-max-cycles

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/mac-handling/loop-prevention/local-loop-prevention/restore-timer.rst

network-services bridge-domain instance mac-handling loop-prevention local-loop-prevention restore-timer
--------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the period of the restore timer in seconds for this Bridge-Domain instance. The AC Interface is automatically restored after being shutdown for the restore-timer period. The default is defined at the Bridge-Domain level. 

**Command syntax: restore-timer [restore-timer]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance mac-handling loop-prevention local-loop-prevention

**Parameter table**

+---------------+---------------------+------------+---------+
| Parameter     | Description         | Range      | Default |
+===============+=====================+============+=========+
| restore-timer | the Restore period. | 10-1000000 | \-      |
+---------------+---------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# mac-handling
    dnRouter(cfg-bd-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-detection
    dnRouter(cfg-mh-lp-llp)#  restore-timer 600


**Removing Configuration**

To restore the restore period to its default value.
::

    dnRouter(cfg-mh-lp-llp)# no restore-timer

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/mac-handling/loop-prevention/loop-prevention.rst

network-services bridge-domain instance mac-handling loop-prevention
--------------------------------------------------------------------

**Minimum user role:** operator

Enter the loop-prevention hierarchy to modify the loop-prevention attributes for this Bridge Domain instance.

**Command syntax: loop-prevention**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance mac-handling

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# mac-handling
    dnRouter(cfg-bd-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To revert the loop-prevention configuration for this instance to the defaults.
::

    dnRouter(cfg-bd-inst-mh)# no loop-prevention

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/mac-handling/mac-handling.rst

network-services bridge-domain instance mac-handling
----------------------------------------------------

**Minimum user role:** operator

Enter the mac-learning hierarchy to modify the mac-learning attributes for this bridge-domain instance.

**Command syntax: mac-handling**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# mac-handling
    dnRouter(cfg-bd-inst-mh)#


**Removing Configuration**

To revert the mac-handling configurations to defaults
::

    dnRouter(cfg-bd-inst)# no mac-handling

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/mac-handling/mac-learning.rst

network-services bridge-domain instance mac-handling mac-learning
-----------------------------------------------------------------

**Minimum user role:** operator

The default mac-learning setting is defined by the global Bridge Domain settings. 
This knob, allows the mac-learning to be enabled/disabled on all the AC interfaces of this Bridge-Domain instance.

**Command syntax: mac-learning [mac-learning]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance mac-handling

**Parameter table**

+--------------+----------------------+--------------+---------+
| Parameter    | Description          | Range        | Default |
+==============+======================+==============+=========+
| mac-learning | Disable MAC Learning | | enabled    | \-      |
|              |                      | | disabled   |         |
+--------------+----------------------+--------------+---------+

**Example**
::

    dev-dnRouter#
    dev-dnRouter# configure
    dev-dnRouter(cfg)# network-services
    dev-dnRouter(cfg-netsrv-bd)# instance bd1
    dev-dnRouter(cfg-netsrv-bd-inst)# mac-handling
    dev-dnRouter(cfg-bd-inst-mh)# mac-learning disabled
    dev-dnRouter(cfg-bd-inst-mh)#


**Removing Configuration**

To revert the mac-learning configuration to its default of enabled.
::

    dnRouter(cfg-bd-inst-mh)# no mac-learning

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/mac-handling/mac-table-aging-time.rst

network-services bridge-domain instance mac-handling mac-table-aging-time
-------------------------------------------------------------------------

**Minimum user role:** operator

"Configure the aging time for the entries in the MAC Table for this EVPN instance.
Allowed aging time values are: 0 (no aging), 60, 120, 320, 640, 1280 seconds.
If the aging time is set to zero, no aging will be applied. The entries will remain until removed manually via the clear command.
The aging mechanism implementation has some variabilities such that the actual aging time is:

60 +/- 20 seconds 
120 +/- 40 seconds 
320 +/- 160 seconds 
640 +/- 320 seconds 
1280 +/- 640 seconds"

**Command syntax: mac-table-aging-time [mac-table-aging-time]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance mac-handling

**Parameter table**

+----------------------+----------------------------------------------------------------------------------+----------------------------+---------+
| Parameter            | Description                                                                      | Range                      | Default |
+======================+==================================================================================+============================+=========+
| mac-table-aging-time | the aging time (in seconds) for the entries in the mac-table for this            | 0, 60, 120, 320, 640, 1280 | \-      |
|                      | Bridge-Domain instance                                                           |                            |         |
+----------------------+----------------------------------------------------------------------------------+----------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bd
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# mac-handling
    dnRouter(cfg-bd-inst-mh)# mac-table-aging-time 320
    dnRouter(cfg-bd-inst-mh)#


**Removing Configuration**

To restore the MAC Table aging time to its default value.
::

    dnRouter(cfg-bd-inst-mh)# no mac-table-aging-time

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/mac-handling/mac-table-limit.rst

network-services bridge-domain instance mac-handling mac-table-limit
--------------------------------------------------------------------

**Minimum user role:** operator

Configure the maximum number of entries in the MAC Table for this Bridge-Domain instance. When this limit is reached, new MAC addresses will not be added to the MAC Table.

**Command syntax: mac-table-limit [mac-table-limit]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance mac-handling

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+----------+---------+
| Parameter       | Description                                                                      | Range    | Default |
+=================+==================================================================================+==========+=========+
| mac-table-limit | the maximum number of entries allowed in the mac-table for this Bridge-Domain    | 20-64000 | \-      |
|                 | instance                                                                         |          |         |
+-----------------+----------------------------------------------------------------------------------+----------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# mac-handling
    dnRouter(cfg-bd-inst-mh)# mac-table-limit 10000
    dnRouter(cfg-bd-inst-mh)#


**Removing Configuration**

To restore the MAC Table limit to its default value.
::

    dnRouter(cfg-bd-inst-mh)# no mac-table-limit

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/router-interface.rst

network-services bridge-domain instance router-interface
--------------------------------------------------------

**Minimum user role:** operator

Configure a router-interface for the Bridge-Domain service instance

 - The Interface must be an IRB interface.

 - An IRB cannot be assigned to multiple Bridge-Domain services.

**Command syntax: router-interface [router-interface]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance

**Note**

- Only supports <irbX> type interface.

**Parameter table**

+------------------+-------------------+------------------+---------+
| Parameter        | Description       | Range            | Default |
+==================+===================+==================+=========+
| router-interface | the IRB interface | | string         | \-      |
|                  |                   | | length 1-255   |         |
+------------------+-------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# router-interface irb10
    dnRouter(cfg-evpn-inst-ge100-0/0/0)#



**Removing Configuration**

To remove the interface from its association with the bridge-domain instance
::

    dnRouter(cfg-netsrv-bd-inst)# no router-interface irb10

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/storm-control/broadcast-packet-rate.rst

network-services bridge-domain instance storm-control broadcast-packet-rate
---------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum broadcast packet rate allowed. When this limit is reached, packets will be dropped. This limit is per instance and can be overridden by per interface storm-control configurations. If not configured the global bridge-domain storm-control configurations will be applied unless this knob is set to 'disabled'.

**Command syntax: broadcast-packet-rate [broadcast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance storm-control

**Parameter table**

+-----------------------+------------------------------------------+---------------------------+---------+
| Parameter             | Description                              | Range                     | Default |
+=======================+==========================================+===========================+=========+
| broadcast-packet-rate | Allowed packet rate of broadcast packets | disabled | 10 - 100000000 | \-      |
+-----------------------+------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# storm-control
    dnRouter(cfg-bd-inst-sc)# broadcast-packet-rate 10000
    dnRouter(cfg-bd-inst-sc)#


**Removing Configuration**

To remove the broadcast-packet-rate limit.
::

    dnRouter(cfg-bd-inst-sc)# no broadcast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/storm-control/multicast-packet-rate.rst

network-services bridge-domain instance storm-control multicast-packet-rate
---------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum multicast packet rate allowed. When this limit is reached, packets will be dropped. This limit is per instance and can be overridden by per interface storm-control configurations. If not configured the global bridge-domain storm-control configurations will be applied unless this knob is set to 'disabled'.

**Command syntax: multicast-packet-rate [multicast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance storm-control

**Parameter table**

+-----------------------+------------------------------------------+---------------------------+---------+
| Parameter             | Description                              | Range                     | Default |
+=======================+==========================================+===========================+=========+
| multicast-packet-rate | Allowed packet rate of multicast packets | disabled | 10 - 100000000 | \-      |
+-----------------------+------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# storm-control
    dnRouter(cfg-bd-inst-sc)# multicast-packet-rate 10000
    dnRouter(cfg-bd-inst-sc)#


**Removing Configuration**

To remove the multicast-packet-rate limit.
::

    dnRouter(cfg-bd-inst-sc)# no multicast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/storm-control/storm-control.rst

network-services bridge-domain instance storm-control
-----------------------------------------------------

**Minimum user role:** operator

Storm Control rate separately limits each of the broadcast, multicast and unknown-unicast packets.
As these packets are replicated to flood all the interfaces attached to the service, it is important
to ensure that these packets are rate limited. The rate limits configured at this instance level are applied
to all interfaces within the specific instance as their default unless configured otherwise at the interface level.

**Command syntax: storm-control**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# storm-control
    dnRouter(cfg-bd-inst-sc)#


**Removing Configuration**

To remove all global storm control configurations
::

    dnRouter(cfg-netsrv-bd-inst)# no storm-control

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## bridge-domain/instance/storm-control/unknown-unicast-packet-rate.rst

network-services bridge-domain instance storm-control unknown-unicast-packet-rate
---------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum unknown-unicast packet rate allowed. When this limit is reached, packets will be dropped. This limit is per instance and can be overridden by per interface storm-control configurations. If not configured the global bridge-domain storm-control configurations will be applied unless this knob is set to 'disabled'.

**Command syntax: unknown-unicast-packet-rate [unknown-unicast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain instance storm-control

**Parameter table**

+-----------------------------+------------------------------------------------+---------------------------+---------+
| Parameter                   | Description                                    | Range                     | Default |
+=============================+================================================+===========================+=========+
| unknown-unicast-packet-rate | Allowed packet rate of unknown-unicast packets | disabled | 10 - 100000000 | \-      |
+-----------------------------+------------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# instance bd1
    dnRouter(cfg-netsrv-bd-inst)# storm-control
    dnRouter(cfg-bd-inst-sc)# unknown-unicast-packet-rate 10000
    dnRouter(cfg-bd-inst-sc)#


**Removing Configuration**

To remove the unknown-unicast-packet-rate limit.
::

    dnRouter(cfg-bd-inst-sc)# no unknown-unicast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## bridge-domain/mac-handling/loop-prevention/admin-state.rst

network-services bridge-domain mac-handling loop-prevention admin-state
-----------------------------------------------------------------------

**Minimum user role:** operator

Loop-protection enabled is the default setting for all bridge-domain instances that are created.
The loop-protection may be disabled by default if this admin-state is set to disabled.
Individual bridge-domain instances can be configured otherwise to override this default setting.

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain mac-handling loop-prevention

**Parameter table**

+-------------+------------------------------------------------+--------------+---------+
| Parameter   | Description                                    | Range        | Default |
+=============+================================================+==============+=========+
| admin-state | Enable or Disable the loop-prevention handling | | enabled    | enabled |
|             |                                                | | disabled   |         |
+-------------+------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# mac-handling
    dnRouter(cfg-netsrv-bd-mh)# loop-prevention
    dnRouter(cfg-bd-mh-lp)# admin-state disabled
    dnRouter(cfg-bd-mh-lp)#


**Removing Configuration**

To revert the admin-state configuration to its default of enabled
::

    dnRouter(cfg-bd-mh-lp)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/mac-handling/loop-prevention/local-loop-prevention/admin-state.rst

network-services bridge-domain mac-handling loop-prevention local-loop-prevention admin-state
---------------------------------------------------------------------------------------------

**Minimum user role:** operator

Local-Loop-protection enabled is the default setting for all bridge-domain instances that are created.
The local-loop-protection may be disabled by default if this admin-state is set to disabled.
Individual bridge-domain instances can be configured otherwise to override this default setting. 
If the admin-state of the local-loop-prevention is not configured, then the admin-state of the loop-prevention is taken. 

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain mac-handling loop-prevention local-loop-prevention

**Parameter table**

+-------------+------------------------------------------------+--------------+---------+
| Parameter   | Description                                    | Range        | Default |
+=============+================================================+==============+=========+
| admin-state | Enable or Disable the loop-prevention handling | | enabled    | enabled |
|             |                                                | | disabled   |         |
+-------------+------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# mac-handling
    dnRouter(cfg-netsrv-bd-mh)# loop-prevention
    dnRouter(cfg-bd-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# admin-state disabled
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To revert the admin-state configuration to its default of enabled
::

    dnRouter(cfg-mh-lp-llp)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/mac-handling/loop-prevention/local-loop-prevention/local-loop-prevention.rst

network-services bridge-domain mac-handling loop-prevention local-loop-prevention
---------------------------------------------------------------------------------

**Minimum user role:** operator

Enter the local-loop-prevention hierarchy to modify the default local-loop-prevention attributes for the Bridge-Domain instances.

**Command syntax: local-loop-prevention**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain mac-handling loop-prevention

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# mac-handling
    dnRouter(cfg-netsrv-bd-mh)# loop-prevention
    dnRouter(cfg-bd-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To revert the local-loop-prevention configurations to defaults
::

    dnRouter(cfg-bd-mh-lp))# no local-loop-prevention

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/mac-handling/loop-prevention/local-loop-prevention/loop-detection-threshold.rst

network-services bridge-domain mac-handling loop-prevention local-loop-prevention loop-detection-threshold
----------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of moves allowed within the loop-detection-window period. The default is 5. If the loop-detection-threshold is reached within this period all AC interfaces involved, except the first AC interface, are shutdown.

**Command syntax: loop-detection-threshold [loop-detection-threshold]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain mac-handling loop-prevention local-loop-prevention

**Parameter table**

+--------------------------+----------------------------------+-------+---------+
| Parameter                | Description                      | Range | Default |
+==========================+==================================+=======+=========+
| loop-detection-threshold | the number of mac moves allowed. | 2-30  | 5       |
+--------------------------+----------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# mac-handling
    dnRouter(cfg-netsrv-bd-mh)# loop-prevention
    dnRouter(cfg-bd-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# loop-detection-threshold 6
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To restore the loop-detection-window period to its default value of 5.
::

    dnRouter(cfg-mh-lp-llp)# no loop-detection-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/mac-handling/loop-prevention/local-loop-prevention/loop-detection-window.rst

network-services bridge-domain mac-handling loop-prevention local-loop-prevention loop-detection-window
-------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default period of the local loop-detection-window in seconds. The default is 30 seconds. If the local loop-detection-threshold is reached within this period all AC interfaces involved, except the first AC interface, are shutdown .

**Command syntax: loop-detection-window [loop-detection-window]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain mac-handling loop-prevention local-loop-prevention

**Parameter table**

+-----------------------+------------------------------------+---------+---------+
| Parameter             | Description                        | Range   | Default |
+=======================+====================================+=========+=========+
| loop-detection-window | the default loop detection period. | 1-10000 | 30      |
+-----------------------+------------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# mac-handling
    dnRouter(cfg-netsrv-bd-mh)# loop-prevention
    dnRouter(cfg-bd-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# loop-detection-window 300
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To restore the loop-detection-window period to its default value.
::

    dnRouter(cfg-mh-lp-llp)# no loop-detection-window

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/mac-handling/loop-prevention/local-loop-prevention/reset-restore-cycles-interval.rst

network-services bridge-domain mac-handling loop-prevention local-loop-prevention reset-restore-cycles-interval
---------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default period of the reset-restore-cycles-interval timer in hours. The default is 24 hours. The AC Interface is automatically restored after being shutdown for the restore-timer period.

**Command syntax: reset-restore-cycles-interval [reset-restore-cycles-interval]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain mac-handling loop-prevention local-loop-prevention

**Parameter table**

+-------------------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter                     | Description                                                                      | Range | Default |
+===============================+==================================================================================+=======+=========+
| reset-restore-cycles-interval | Time interval to be applied following removal of suppression, before clearing    | 1-72  | 24      |
|                               | the restore-cycles counter, assuming no further sanctions are applied.           |       |         |
+-------------------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# mac-handling
    dnRouter(cfg-netsrv-bd-mh)# loop-prevention
    dnRouter(cfg-bd-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# loop-detection-window 300
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To restore the reset-restore-cycles-interval period to its default value of 24 hours.
::

    dnRouter(cfg-mh-lp-llp)# no reset-restore-cycles-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/mac-handling/loop-prevention/local-loop-prevention/restore-max-cycles.rst

network-services bridge-domain mac-handling loop-prevention local-loop-prevention restore-max-cycles
----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of AC shutdown restore cycles allowed before permanent shutdown. Default is infinite. When an AC Interface is permanently shutdown only a manual command will release the AC Interface. Default is defined at the Bridge-Domain level.

**Command syntax: restore-max-cycles [restore-max-cycles]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain mac-handling loop-prevention local-loop-prevention

**Parameter table**

+--------------------+-------------------------------------------+----------------------+----------+
| Parameter          | Description                               | Range                | Default  |
+====================+===========================================+======================+==========+
| restore-max-cycles | the number of AC shutdown cycles allowed. | | 1-10               | infinite |
|                    |                                           | | infinite           |          |
|                    |                                           | | restore-manually   |          |
+--------------------+-------------------------------------------+----------------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# mac-handling
    dnRouter(cfg-netsrv-bd-mh)# loop-prevention
    dnRouter(cfg-bdn-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# restore-max-cycles 6
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To restore the restore-max-cycles period to its default value of infinite.
::

    dnRouter(cfg-mh-lp-llp)# no restore-max-cycles

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/mac-handling/loop-prevention/local-loop-prevention/restore-timer.rst

network-services bridge-domain mac-handling loop-prevention local-loop-prevention restore-timer
-----------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default period of the restore-timer in seconds. The default is 300 seconds. The AC Interface is automatically restored after being suppressed for the restore-timer period.

**Command syntax: restore-timer [restore-timer]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain mac-handling loop-prevention local-loop-prevention

**Parameter table**

+---------------+---------------------+------------+---------+
| Parameter     | Description         | Range      | Default |
+===============+=====================+============+=========+
| restore-timer | the Restore period. | 10-1000000 | 300     |
+---------------+---------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# mac-handling
    dnRouter(cfg-netsrv-bd-mh)# loop-prevention - dnRouter(cfg-bd-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# restore-timer 600
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To restore the restore-timer period to its default value.
::

    dnRouter(cfg-mh-lp-llp)# no restore-timer

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/mac-handling/loop-prevention/loop-prevention.rst

network-services bridge-domain mac-handling loop-prevention
-----------------------------------------------------------

**Minimum user role:** operator

Enter the loop-prevention hierarchy to modify the default loop-prevention attributes for the Bridge-Domain instances.

**Command syntax: loop-prevention**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain mac-handling

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# mac-handling
    dnRouter(cfg-netsrv-bd-mh)# loop-prevention
    dnRouter(cfg-bd-mh-lp)#


**Removing Configuration**

To revert the loop-prevention configurations to defaults
::

    dnRouter(cfg-netsrv-bd-mh)# no loop-prevention

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## bridge-domain/mac-handling/mac-handling.rst

network-services bridge-domain mac-handling
-------------------------------------------

**Minimum user role:** operator

Enter the mac-learning hierarchy to modify the mac-learning attributes for this bridge-domain instance.

**Command syntax: mac-handling**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dev-dnRouter(cfg-netsrv-bd)# mac-handling
    dev-dnRouter(cfg-netsrv-bd-mh)#


**Removing Configuration**

To revert the mac-handling configurations to defaults
::

    dnRouter(cfg-netsrv-bd)# no mac-handling

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/mac-handling/mac-learning.rst

network-services bridge-domain mac-handling mac-learning
--------------------------------------------------------

**Minimum user role:** operator

This default mac-learning setting defines the default value that will be set for any new bridge-domain instances. 

**Command syntax: mac-learning [mac-learning]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain mac-handling

**Parameter table**

+--------------+----------------------+--------------+---------+
| Parameter    | Description          | Range        | Default |
+==============+======================+==============+=========+
| mac-learning | Disable MAC Learning | | enabled    | enabled |
|              |                      | | disabled   |         |
+--------------+----------------------+--------------+---------+

**Example**
::

    dev-dnRouter#
    dev-dnRouter# configure
    dev-dnRouter(cfg)# network-services
    dev-dnRouter(cfg-netsrv-bd)# mac-handling
    dev-dnRouter(cfg-netsrv-bd-mh)# mac-learning disabled
    dev-dnRouter(cfg-netsrv-bd-mh)#


**Removing Configuration**

To revert the mac-learning configuration to its default of enabled.
::

    dnRouter(cfg-netsrv-bd-mh)# no mac-learning

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/mac-handling/mac-table-aging-time.rst

network-services bridge-domain mac-handling mac-table-aging-time
----------------------------------------------------------------

**Minimum user role:** operator

"Configure the default aging time for the entries in the MAC Table that will be set for any new bridge-domain instances.
Allowed aging time values are: 0 (no aging), 60, 120, 320, 640, 1280 seconds.
If the aging time is set to zero, no aging will be applied. The entries will remain until removed manually via the clear command.
The aging mechanism implementation has some variabilities such that the actual aging time is:

 60 +/- 20 seconds 
 120 +/- 40 seconds 
 320 +/- 160 seconds 
 640 +/- 320 seconds 
 1280 +/- 640 seconds"

**Command syntax: mac-table-aging-time [mac-table-aging-time]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain mac-handling

**Parameter table**

+----------------------+----------------------------------------------------------------------------------+----------------------------+---------+
| Parameter            | Description                                                                      | Range                      | Default |
+======================+==================================================================================+============================+=========+
| mac-table-aging-time | the default mac-table aging time (in seconds), to be applied to Bridge-Domain    | 0, 60, 120, 320, 640, 1280 | 320     |
|                      | instances.                                                                       |                            |         |
+----------------------+----------------------------------------------------------------------------------+----------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bd
    dnRouter(cfg-netsrv-bd)# mac-handling
    dnRouter(cfg-netsrv-bd-mh)# mac-table-aging-time 320
    dnRouter(cfg-netsrv-bd-mh)#


**Removing Configuration**

To restore the MAC Table aging time to its default value.
::

    dnRouter(cfg-netsrv-bd-mh)# no mac-table-aging-time

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/mac-handling/mac-table-limit.rst

network-services bridge-domain mac-handling mac-table-limit
-----------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 20-6400)for the maximum number of entries in the MAC Table for any new Bridge-Domain instances defined. When this limit is reached, new MAC addresses will not be added to the MAC Table.

**Command syntax: mac-table-limit [mac-table-limit]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain mac-handling

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+----------+---------+
| Parameter       | Description                                                                      | Range    | Default |
+=================+==================================================================================+==========+=========+
| mac-table-limit | the default value for the maximum number of entries allowed in the mac-table     | 20-64000 | 64000   |
|                 | that will be applied to any new Bridge-Domain instances subsequently created.    |          |         |
+-----------------+----------------------------------------------------------------------------------+----------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# mac-handling
    dnRouter(cfg-netsrv-bd-mh)# mac-table-limit 10000
    dnRouter(cfg-netsrv-bd-mh)#


**Removing Configuration**

To restore the MAC Table limit to its default value.
::

    dnRouter(cfg-netsrv-bd-mh)# no mac-table-limit

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## bridge-domain/storm-control/broadcast-packet-rate.rst

network-services bridge-domain storm-control broadcast-packet-rate
------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum broadcast packet rate allowed. When this limit is reached, packets will be dropped. This limit can be overridden by per instance or per interface storm-control configurations.

**Command syntax: broadcast-packet-rate [broadcast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain storm-control

**Parameter table**

+-----------------------+------------------------------------------+--------------+---------+
| Parameter             | Description                              | Range        | Default |
+=======================+==========================================+==============+=========+
| broadcast-packet-rate | Allowed packet rate of broadcast packets | 10-100000000 | \-      |
+-----------------------+------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# storm-control
    dnRouter(cfg-netsrv-bd-sc)# broadcast-packet-rate 10000
    dnRouter(cfg-netsrv-bd-sc)#


**Removing Configuration**

To remove the broadcast-packet-rate limit.
::

    dnRouter(cfg-netsrv-bd-sc)# no broadcast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## bridge-domain/storm-control/multicast-packet-rate.rst

network-services bridge-domain storm-control multicast-packet-rate
------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum multicast packet rate allowed. When this limit is reached, packets will be dropped. This limit can be overridden by per instance or per interface storm-control configurations.

**Command syntax: multicast-packet-rate [multicast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain storm-control

**Parameter table**

+-----------------------+------------------------------------------+--------------+---------+
| Parameter             | Description                              | Range        | Default |
+=======================+==========================================+==============+=========+
| multicast-packet-rate | Allowed packet rate of multicast packets | 10-100000000 | \-      |
+-----------------------+------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# storm-control
    dnRouter(cfg-netsrv-bd-sc)# multicast-packet-rate 10000
    dnRouter(cfg-netsrv-bd-sc)#


**Removing Configuration**

To remove the multicast-packet-rate limit.
::

    dnRouter(cfg-netsrv-bd-sc)# no multicast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## bridge-domain/storm-control/storm-control.rst

network-services bridge-domain storm-control
--------------------------------------------

**Minimum user role:** operator

Storm Control rate separately limits each of the broadcast, multicast and unknown-unicast packets.
As these packets are replicated to flood all the interfaces attached to the service, it is important
to ensure that these packets are rate limited. The rate limits configured at this level are applied
to all instances as their default unless configured otherwise at the instance or interface levels.

**Command syntax: storm-control**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# storm-control
    dnRouter(cfg-netsrv-bd-sc)


**Removing Configuration**

To remove all global storm control configurations
::

    dnRouter(cfg-netsrv-bd)# no storm-control

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## bridge-domain/storm-control/unknown-unicast-packet-rate.rst

network-services bridge-domain storm-control unknown-unicast-packet-rate
------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum unknown-unicast packet rate allowed. When this limit is reached, packets will be dropped. This limit can be overridden by per instance or per interface storm-control configurations.

**Command syntax: unknown-unicast-packet-rate [unknown-unicast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services bridge-domain storm-control

**Parameter table**

+-----------------------------+------------------------------------------------+--------------+---------+
| Parameter                   | Description                                    | Range        | Default |
+=============================+================================================+==============+=========+
| unknown-unicast-packet-rate | Allowed packet rate of unknown-unicast packets | 10-100000000 | \-      |
+-----------------------------+------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-bd)# storm-control
    dnRouter(cfg-netsrv-bd-sc)# unknown-unicast-packet-rate 10000
    dnRouter(cfg-netsrv-bd-sc)#


**Removing Configuration**

To remove the unknown-unicast-packet-rate limit.
::

    dnRouter(cfg-netsrv-bd-sc)# no unknown-unicast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/counters/counters.rst

network-services evpn-vpws-fxc counters
---------------------------------------

**Minimum user role:** operator

Define whether counters should be allocated for the EVPN-VPWS-FXC instances by default. 

**Command syntax: counters**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# counters
    dnRouter(cfg-netsrv-evpn-vpws-fxc-counters)


**Removing Configuration**

To remove the global evpn-vpws-fxc services counter configuration, restoring to their default:
::

    dnRouter(cfg-netsrv-evpn-vpws-fxc)# no counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/counters/service-counters.rst

network-services evpn-vpws-fxc counters service-counters
--------------------------------------------------------

**Minimum user role:** operator

Service-counters disabled is the default setting for EVPN-VPWS-FXC services.
By disabling this knob, service-counters will be disabled for all EVPN-VPWS-FXC instances that do not have a per-instance configuration.

**Command syntax: service-counters [service-counters]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc counters

**Parameter table**

+------------------+--------------------------------------------------------------------------------+--------------+----------+
| Parameter        | Description                                                                    | Range        | Default  |
+==================+================================================================================+==============+==========+
| service-counters | Define whether service-counters should be allocated for EVPN-VPWS-FXC services | | enabled    | disabled |
|                  |                                                                                | | disabled   |          |
+------------------+--------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# counters
    dnRouter(cfg-netsrv-evpn-vpws-fxc-counters) service-counters enabled


**Removing Configuration**

To revert the service-counters configuration to its default of disabled
::

    dnRouter(cfg-netsrv-evpn-vpws-fxc)# no service-counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/evpn-vpws-fxc.rst

network-services evpn-vpws-fxc
------------------------------

**Minimum user role:** operator

EVPN-VPWS-FXC (Ethernet Virtual Private Network Flexible Cross-connect) is a point-to-point layer 2 VPN service that connects one or more                                                                                                                                                                                                                                                  layer 2 interface(s) of
ACs of a PE device with one or more layer 2 interface(s) of another PE device, across the layer 3 core MPLS network. The EVPN service uses
an MPLS or VxLAN transport layer and a BGP control layer.

To enter the EVPN-VPWS-FXC service configuration mode:

**Command syntax: evpn-vpws-fxc**

**Command mode:** config

**Hierarchies**

- network-services

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# evpn-vpws-fxc
    dnRouter(cfg-network-services-evpn-vpws-fxc)#


**Removing Configuration**

To remove all EVPN VPWS FXC services:
::

    dnRouter(cfg-network-services)# no evpn-vpws-fxc

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/admin-state.rst

network-services evpn-vpws-fxc instance admin-state
---------------------------------------------------

**Minimum user role:** operator

Define the EVPN-VPWS-FXC service instance admin-state. By default the admin-state is enabled.

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance

**Parameter table**

+-------------+------------------------------------+--------------+---------+
| Parameter   | Description                        | Range        | Default |
+=============+====================================+==============+=========+
| admin-state | evpn-vpws-fxc instance admin-state | | enabled    | enabled |
|             |                                    | | disabled   |         |
+-------------+------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# admin-state disabled
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)#


**Removing Configuration**

To revert the admin-state to its default: enabled
::

    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/counters/counters.rst

network-services evpn-vpws-fxc instance counters
------------------------------------------------

**Minimum user role:** operator

Define whether counters should be allocated for this EVPN-VPWS-FXC service instance. 

**Command syntax: counters**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# counters
    dnRouter(cfg-evpn-vpws-fxc-inst-counters)


**Removing Configuration**

To remove counter configurations for this instance
::

    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# no counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/counters/service-counters.rst

network-services evpn-vpws-fxc instance counters service-counters
-----------------------------------------------------------------

**Minimum user role:** operator

The Service-counters global setting defines the default setting for EVPN-VPWS-FXC services.
This knob, specifies whether service-counters will be allocated for this EVPN-VPWS-FXC instance.

**Command syntax: service-counters [service-counters]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance counters

**Parameter table**

+------------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter        | Description                                                                      | Range        | Default |
+==================+==================================================================================+==============+=========+
| service-counters | Define whether service-counters should be allocated for this EVPN-VPWS-FXC       | | enabled    | \-      |
|                  | service                                                                          | | disabled   |         |
+------------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# counters
    dnRouter(cfg-evpn-vpws-inst-counters) service-counters enabled


**Removing Configuration**

To revert the service-counters configuration to the evpn-vpws-fxc global default value
::

    dnRouter(cfg-evpn-vpws-inst-counters)# no service-counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/description.rst

network-services evpn-vpws-fxc instance description
---------------------------------------------------

**Minimum user role:** operator

To add an optional description of the L2VPN EVPN-VPWS-FXC:

**Command syntax: description [description]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance

**Parameter table**

+-------------+---------------------------+------------------+---------+
| Parameter   | Description               | Range            | Default |
+=============+===========================+==================+=========+
| description | evpn-vpws-fxc description | | string         | \-      |
|             |                           | | length 1-255   |         |
+-------------+---------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# description "my evpn-vpws-fxc service"
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)#


**Removing Configuration**

To remove the description:
::

    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/evpn-vpws-fxc-protocols/bgp/bgp.rst

network-services evpn-vpws-fxc instance protocols bgp
-----------------------------------------------------

**Minimum user role:** operator

To start the BGP process:

**Command syntax: bgp [as-number]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance protocols

**Note**

- The AS-number cannot be changed. To change it, you need to delete the BGP protocol configuration and configure a new process with a different AS-number.

- Notice the change in prompt.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter | Description                                                                      | Range        | Default |
+===========+==================================================================================+==============+=========+
| as-number | The autonomous system number of the router for the evpn-vpws services.  Uses the | 1-4294967295 | \-      |
|           | 32-bit as-number type from the model in RFC 6991.                                |              |         |
+-----------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# protocols
    dnRouter(cfg-evpn-vpws-fxc-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To disable the BGP process:
::

    dnRouter(cfg-evpn-vpws-fxc-inst-protocols)# no bgp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/evpn-vpws-fxc-protocols/bgp/export-l2vpn-evpn-policy.rst

network-services evpn-vpws-fxc instance protocols bgp export-l2vpn-evpn policy
------------------------------------------------------------------------------

**Minimum user role:** operator

To export routes according to the route policy definition:

**Command syntax: export-l2vpn-evpn policy [export-l2vpn-evpn-policy]** [, export-l2vpn-evpn-policy, export-l2vpn-evpn-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| export-l2vpn-evpn-policy | Enable export of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# evpn-vpws-fxc-protocols
    dnRouter(cfg-evpn-vpws-fxc-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# export-l2vpn-evpn policy VPN_EXP_POL1, VPN_EXP_POL2
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-evpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/evpn-vpws-fxc-protocols/bgp/export-l2vpn-evpn-route-target.rst

network-services evpn-vpws-fxc instance protocols bgp export-l2vpn-evpn route-target
------------------------------------------------------------------------------------

**Minimum user role:** operator

To export routes with the route-target tag:

**Command syntax: export-l2vpn-evpn route-target [export-l2vpn-evpn-route-target]** [, export-l2vpn-evpn-route-target, export-l2vpn-evpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------+-------+---------+
| Parameter                      | Description                                   | Range | Default |
+================================+===============================================+=======+=========+
| export-l2vpn-evpn-route-target | Enable export of routes with route-target tag | \-    | \-      |
+--------------------------------+-----------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# evpn-vpws-protocols
    dnRouter(cfg-evpn-vpws-fxc-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# export-l2vpn-evpn route-target 49844:20, 49844:30
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-evpn route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/evpn-vpws-fxc-protocols/bgp/import-l2vpn-evpn-policy.rst

network-services evpn-vpws-fxc instance protocols bgp import-l2vpn-evpn policy
------------------------------------------------------------------------------

**Minimum user role:** operator

To import routes according to the route policy definition:

**Command syntax: import-l2vpn-evpn policy [import-l2vpn-evpn-policy]** [, import-l2vpn-evpn-policy, import-l2vpn-evpn-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| import-l2vpn-evpn-policy | Enable import of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# evpn-vpws-fxc-protocols
    dnRouter(cfg-evpn-vpws-fxc-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# import-l2vpn-evpn policy L2_VPN_IMP_POL1, L2_VPN_IMP_POL2
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-evpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/evpn-vpws-fxc-protocols/bgp/import-l2vpn-evpn-route-target.rst

network-services evpn-vpws-fxc instance protocols bgp import-l2vpn-evpn route-target
------------------------------------------------------------------------------------

**Minimum user role:** operator

To import BGP routes with the route-target specified into the L2VPN-EVPN-VPWS-FXC service.

**Command syntax: import-l2vpn-evpn route-target [import-l2vpn-evpn-route-target]** [, import-l2vpn-evpn-route-target, import-l2vpn-evpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------------------------------+-------+---------+
| Parameter                      | Description                                                           | Range | Default |
+================================+=======================================================================+=======+=========+
| import-l2vpn-evpn-route-target | Enable import of routes with route-target specified to the vrf tables | \-    | \-      |
+--------------------------------+-----------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# evpn-vpws-fxc-protocols
    dnRouter(cfg-evpn-vpws-fxc-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# import-l2vpn-evpn route-target 49844:20, 49844:30
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop importing routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-evpn route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/evpn-vpws-fxc-protocols/bgp/maximum-paths_ebgp.rst

network-services evpn-vpws-fxc instance protocols bgp maximum-paths ebgp
------------------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple equal cost paths in the routing table, when some paths are eBGP and others are iBGP:

**Command syntax: maximum-paths ebgp [ebgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance protocols bgp

**Note**

- BGP will only advertise one best path to its eBGP neighbors.

- This command is relevant only to Unicast and Multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

- ECMP between eBGP and iBGP paths are only possible if all paths are imported from other VRFs.

**Parameter table**

+--------------------+-------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                             | Range | Default |
+====================+=========================================================================+=======+=========+
| ebgp-maximum-paths | Maximum number of parallel paths to consider when using eBGP multipath. | 1-32  | 16      |
+--------------------+-------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# protocols
    dnRouter(cfg-evpn-vpws-fxc-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# maximum-paths ebgp 5
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-inst-protocols-bgp)# no maximum-paths ebgp

**Command History**

+---------+------------------------------------------------+
| Release | Modification                                   |
+=========+================================================+
| 19.2    | Command introduced                             |
+---------+------------------------------------------------+
| 25.3    | Changed default value to 16 for EVPN instances |
+---------+------------------------------------------------+

---

## evpn-vpws-fxc/instance/evpn-vpws-fxc-protocols/bgp/maximum-paths_ibgp.rst

network-services evpn-vpws-fxc instance protocols bgp maximum-paths ibgp
------------------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple paths in the routing table:

**Command syntax: maximum-paths ibgp [ibgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance protocols bgp

**Note**

- This command is relevant only to Unicast and Multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

**Parameter table**

+--------------------+-------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                             | Range | Default |
+====================+=========================================================================+=======+=========+
| ibgp-maximum-paths | Maximum number of parallel paths to consider when using iBGP multipath. | 1-32  | 16      |
+--------------------+-------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# protocols
    dnRouter(cfg-evpn-vpws-fxc-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# maximum-paths ibgp 5
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-inst-protocols-bgp)# no maximum-paths ibgp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/evpn-vpws-fxc-protocols/bgp/route-distinguisher.rst

network-services evpn-vpws-fxc instance protocols bgp route-distinguisher
-------------------------------------------------------------------------

**Minimum user role:** operator

To configure the route-distinguisher to enable the EVPN to use a L2VPN service.

**Command syntax: route-distinguisher [route-distinguisher]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance protocols bgp

**Note**

- The route-distinguisher must be unique amongst the EVPN, EVPN-VPWS and EVPN-VPWS-FXC services; it may be identical to an RD of a VPN service.

- Reconfiguring the route-distinguisher causes all routes to be withdrawn from the EVPN peers in the EVPN safi, and then to be re-advertised with an updated route-distinguisher.

- When set to auto, the system will generate the route-distinguisher in format <router-id>:<16bit>, BGP router-id must be configured and 16 bit is randomnly selected.

- The user cannot configure a route-distinguisher value that matches a different route-distinguisher regardless of how the route-distinguisher was generated (manual/auto).

**Parameter table**

+---------------------+-------------------------------------------------------------+-------+---------+
| Parameter           | Description                                                 | Range | Default |
+=====================+=============================================================+=======+=========+
| route-distinguisher | the route distinguisher for BGP as part of the EVPN service | \-    | \-      |
+---------------------+-------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# protocols
    dnRouter(cfg-evpn-vpws-fxc-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To remove the route-distinguisher:
::

    dnRouter(cfg-inst-protocols-bgp)# no route-distinguisher

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/evpn-vpws-fxc-protocols/evpn-vpws-fxc-protocols.rst

network-services evpn-vpws-fxc instance protocols
-------------------------------------------------

**Minimum user role:** operator

Enter the protocols hierarchy to modify the attributes for this EVPN-VPWS-FXC instance.

**Command syntax: protocols**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# protocols
    dnRouter(cfg-evpn-vpws-fxc-inst-protocols)#


**Removing Configuration**

To revert the protocols configuration to default:
::

    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# no protocols

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/fxc-mode.rst

network-services evpn-vpws-fxc instance fxc-mode
------------------------------------------------

**Minimum user role:** operator

The EVPN-VPWS Flexible Cross-connect Service has two modes of operation but currently vlan-aware is the available option.

**Command syntax: fxc-mode [fxc-mode]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance

**Parameter table**

+-----------+------------------------------------------+------------+------------+
| Parameter | Description                              | Range      | Default    |
+===========+==========================================+============+============+
| fxc-mode  | Define whether the service is vlan-aware | vlan-aware | vlan-aware |
+-----------+------------------------------------------+------------+------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-evpn-vpws-fxc-inst)# fxc-mode vlan-aware


**Removing Configuration**

To revert the fxc-mode to its default
::

    dnRouter(cfg-evpn-vpws-fxc-inst)# no fxc-mode

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/instance.rst

network-services evpn-vpws-fxc instance
---------------------------------------

**Minimum user role:** operator

Configure a L2VPN EVPN-VPWS-FXC service instance.

**Command syntax: instance [evpn-vpws-fxc-name]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc

**Note**

- The EVPN-VPWS-FXC service must use a unique name.

**Parameter table**

+--------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter          | Description                                                                | Range            | Default |
+====================+============================================================================+==================+=========+
| evpn-vpws-fxc-name | The name of the evpn-vpws-fxc -- used to address the evpn-vpws-fxc service | | string         | \-      |
|                    |                                                                            | | length 1-255   |         |
+--------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-fxc-evpn-vpws-fxc1)#


**Removing Configuration**

To revert the specified EVPN-VPWS-FXC service to default:
::

    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# no instance evpn-vpws-fxc1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/interface/interface.rst

network-services evpn-vpws-fxc instance interface
-------------------------------------------------

**Minimum user role:** operator

Configure an interface for the EVPN VPWS FXC service.

 - An interface must be a L2-service enabled interface.

 - An Interface cannot be assigned to multiple services. 

 The Designated Forwarder Election Algorithm is defined under multihoming. When the Prefernce Algorithm (Highest or Lowest) is defined on the ES, the invert preference algorithm knob allows that per EVI this can be inverted to allow the DF role to be shared between two PE devices for the different service instances.

**Command syntax: interface [fxc-interface-name]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance

**Note**

- Support only interface of type <geX-X/X/X.Y>/<bundle-X.Y>.

**Parameter table**

+--------------------+------------------------------------------------------+------------------+---------+
| Parameter          | Description                                          | Range            | Default |
+====================+======================================================+==================+=========+
| fxc-interface-name | Associate an interface to the EVPN-VPWS-FXC instance | | string         | \-      |
|                    |                                                      | | length 1-255   |         |
+--------------------+------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# interface ge100-0/0/0.10
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# interface bundle-1.120 df-invert-preference enabled
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)#



**Removing Configuration**

To remove the interface from its association with the EVPN VPWS FXC instance
::

    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# no interface ge100-0/0/0

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/interface/invert-preference-algorithm.rst

network-services evpn-vpws-fxc instance interface df-invert-preference
----------------------------------------------------------------------

**Minimum user role:** operator

While the Designated Forwarder Election Algorithm is defined under multihoming, and the Preference Algorithm (Highest or Lowest) is defined, this knob allows that per EVI, this can be inverted to allow the DF role to be shared between two PE devices for the different service instances.

**Command syntax: df-invert-preference [invert-preference-algorithm]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance interface

**Parameter table**

+-----------------------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter                   | Description                                                                      | Range        | Default  |
+=============================+==================================================================================+==============+==========+
| invert-preference-algorithm | When the AC interface is connected to a multihomed Ethernet Segment and the DF   | | enabled    | disabled |
|                             | Election algorithm is the preference algorithm (highest or lowest) then enabling | | disabled   |          |
|                             | this knob will invert the algorithm for this EVPN VPWS FXC instance, example     |              |          |
|                             | instead of highest election it will elect the lowest preference as the DF        |              |          |
+-----------------------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# interface ge100-0/0/0
    dnRouter(cfg-evpn-vpws-fxc-inst-ge100-0/0/0)# df-invert-preference enabled
    dnRouter(cfg-evpn-vpws-fxc-inst-ge100-0/0/0)#


**Removing Configuration**

To revert df-invert-preference to disabled.
::

    dnRouter(cfg-evpn-vpws-fxc-inst-ge100-0/0/0)# no df-invert-preference

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/l2-mtu.rst

network-services evpn-vpws-fxc instance l2-mtu
----------------------------------------------

**Minimum user role:** operator

Configure the MTU value of this instance to be sent (signaled) in the BGP, which must be identical with the peer value. If zero is used, no mtu check is carried out.

**Command syntax: l2-mtu [l2-mtu]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance

**Note**

- The reconfiguration of Pseudowire MTU causes the Pseudowire to flap.

**Parameter table**

+-----------+---------------------------------+--------------+---------+
| Parameter | Description                     | Range        | Default |
+===========+=================================+==============+=========+
| l2-mtu    | MTU value to be signaled in BGP | 0, 1514-9300 | \-      |
+-----------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# l2-mtu 2000
    dnRouter(cfg-network-services-evpn-vpws)#


**Removing Configuration**

To revert the MTU to the default value:
::

    dnRouter(cfg-network-services-evpn-vpws)# no mtu

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/transport-protocol/mpls-srv6-migration/control-word.rst

network-services evpn-vpws-fxc instance transport-protocol mpls-srv6-migration control-word
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

Define the MPLS control word option. The Control-word is always zero when enabled and is used as a marker to identify between the inner layer 2 packet and the layer 3 encapsulation. The Control-word is only used with MPLS.

**Command syntax: control-word [control-word]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance transport-protocol mpls-srv6-migration

**Parameter table**

+--------------+---------------------------------+--------------+---------+
| Parameter    | Description                     | Range        | Default |
+==============+=================================+==============+=========+
| control-word | Set control-word usage for evpn | | enabled    | \-      |
|              |                                 | | disabled   |         |
+--------------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# transport-protocol
    dnRouter(cfg-evpn-vpws-fxc-inst-tp)# mpls-srv6-migration
    dnRouter(cfg-inst-tp-migration)# control-word disabled
    dnRouter(cfg-inst-tp-migration)#


**Removing Configuration**

To revert control-word to default:
::

    dnRouter(cfg-inst-tp-migration)# no control-word

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/transport-protocol/mpls-srv6-migration/fat-label.rst

network-services evpn-vpws-fxc instance transport-protocol mpls-srv6-migration fat-label
----------------------------------------------------------------------------------------

**Minimum user role:** operator

Flow Aware Transport (FAT) label is an identifier used to load balance packets as they pass through the network. The first PE device looks into the inner packet and calculates a hash, the FAT label. As the packet passes through intermediate routers the FAT label is considered for load-balancing decisions. All packets of the same flow result in the same FAT label and are sent on the same path.

**Command syntax: fat-label [fat-label]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance transport-protocol mpls-srv6-migration

**Parameter table**

+-----------+----------------------------------+--------------+---------+
| Parameter | Description                      | Range        | Default |
+===========+==================================+==============+=========+
| fat-label | Define Requested FAT Label Usage | | enabled    | \-      |
|           |                                  | | disabled   |         |
+-----------+----------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-fxc-inst-tp)# mpls-srv6-migration
    dnRouter(cfg-inst-tp-migration)# fat-label enabled
    dnRouter(cfg-inst-tp-migration)#


**Removing Configuration**

To revert fat-label to default:
::

    dnRouter(cfg-inst-tp-migration)# no fat-label

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/transport-protocol/mpls-srv6-migration/locator.rst

network-services evpn-vpws-fxc instance transport-protocol mpls-srv6-migration locator
--------------------------------------------------------------------------------------

**Minimum user role:** operator

Define the SRV6 locator. When a locator is associated with the EVPN-VPWS instance an END.dx2v behavior will be dynamically allocated for that locator for this service. The locator-prefix+END.dx2v will be installed into the RIB and FIB.

**Command syntax: locator [locator]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance transport-protocol mpls-srv6-migration

**Parameter table**

+-----------+--------------------------+------------------+---------+
| Parameter | Description              | Range            | Default |
+===========+==========================+==================+=========+
| locator   | Select srv6 locator name | | string         | \-      |
|           |                          | | length 1-255   |         |
+-----------+--------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-fxc-inst-tp)# mpls-srv6-migration
    dnRouter(cfg-inst-tp-migration)# locator LOCATOR_1
    dnRouter(cfg-inst-tp-migration)#


**Removing Configuration**

To remove locator configuration
::

    dnRouter(cfg-inst-tp-migration)# no locator

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/transport-protocol/mpls-srv6-migration/mpls-srv6-migration.rst

network-services evpn-vpws-fxc instance transport-protocol mpls-srv6-migration
------------------------------------------------------------------------------

**Minimum user role:** operator

Enter the MPLS and SRV6 Transport hierarchy to configure the relevant options - control word,fat-label and SRV6 locator.

**Command syntax: mpls-srv6-migration**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# mpls-srv6-migration
    dnRouter(cfg-inst-tp-migration)#


**Removing Configuration**

To remove the mpls-srv6-migration definition
::

    dnRouter(cfg-evpn-vpws-inst-tp)# no mpls-srv6-migration

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/transport-protocol/mpls/control-word.rst

network-services evpn-vpws-fxc instance transport-protocol mpls control-word
----------------------------------------------------------------------------

**Minimum user role:** operator

Define the MPLS control word option for this service instance. The Control-word is always zero when enabled and is used as a marker to identify between the inner layer 2 packet and the MPLS encapsulation. The Control-word is only used with MPLS.

**Command syntax: control-word [control-word]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance transport-protocol mpls

**Parameter table**

+--------------+---------------------------------+--------------+---------+
| Parameter    | Description                     | Range        | Default |
+==============+=================================+==============+=========+
| control-word | Set control-word usage for evpn | | enabled    | \-      |
|              |                                 | | disabled   |         |
+--------------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws-fxc1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-fxc-inst-tp)# mpls
    dnRouter(cfg-inst-tp-mpls)# control-word disabled
    dnRouter(cfg-inst-tp-mpls)#


**Removing Configuration**

To revert control-word to default:
::

    dnRouter(cfg-inst-tp-mpls)# no control-word

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/transport-protocol/mpls/fat-label.rst

network-services evpn-vpws-fxc instance transport-protocol mpls fat-label
-------------------------------------------------------------------------

**Minimum user role:** operator

Flow Aware Transport (FAT) label is an identifier used to load balance packets as they pass through the network. The first PE device looks into the inner packet and calculates a hash, the FAT label. As the packet passes through intermediate routers, the FAT label is considered for load-balancing decisions. All packets of the same flow result in the same FAT label and are sent on the same path.

**Command syntax: fat-label [fat-label]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance transport-protocol mpls

**Parameter table**

+-----------+----------------------------------+--------------+---------+
| Parameter | Description                      | Range        | Default |
+===========+==================================+==============+=========+
| fat-label | Define Requested FAT Label Usage | | enabled    | \-      |
|           |                                  | | disabled   |         |
+-----------+----------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-fxc-inst-tp)# mpls
    dnRouter(cfg-inst-tp-mpls)# fat-label enabled
    dnRouter(cfg-inst-tp-mpls)#


**Removing Configuration**

To revert fat-label to default:
::

    dnRouter(cfg-inst-tp-mpls)# no fat-label

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/transport-protocol/mpls/mpls.rst

network-services evpn-vpws-fxc instance transport-protocol mpls
---------------------------------------------------------------

**Minimum user role:** operator

Enter the MPLS Transport hierarchy to configure the relevant options - control-word and fat-label.

**Command syntax: mpls**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-fxc-inst-tp)# mpls
    dnRouter(cfg-inst-tp-mpls)#


**Removing Configuration**

To remove the mpls definition
::

    dnRouter(cfg-evpn-vpws-fxc-inst-tp)# no mpls

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/transport-protocol/srv6/locator.rst

network-services evpn-vpws-fxc instance transport-protocol srv6 locator
-----------------------------------------------------------------------

**Minimum user role:** operator

Define the SRV6 locator. When a locator is associated with the EVPN-VPWS instance an END.dx2v behavior will be dynamically allocated for that locator for this service. The locator-prefix+END.dx2v will be installed into the RIB and FIB.

**Command syntax: locator [locator]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance transport-protocol srv6

**Parameter table**

+-----------+--------------------------+------------------+---------+
| Parameter | Description              | Range            | Default |
+===========+==========================+==================+=========+
| locator   | Select srv6 locator name | | string         | \-      |
|           |                          | | length 1-255   |         |
+-----------+--------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-fxc-inst-tp)# srv6
    dnRouter(cfg-inst-tp-srv6)# locator LOCATOR_1
    dnRouter(cfg-inst-tp-srv6)#


**Removing Configuration**

To remove locator configuration
::

    dnRouter(cfg-inst-tp-srv6)# no locator

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/transport-protocol/srv6/srv6.rst

network-services evpn-vpws-fxc instance transport-protocol srv6
---------------------------------------------------------------

**Minimum user role:** operator

Enter the SRV6 Transport hierarchy to configure the relevant options - locator name.

**Command syntax: srv6**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-fxc-inst-tp)# srv6
    dnRouter(cfg-inst-tp-srv6)#


**Removing Configuration**

To remove the srv6 definition
::

    dnRouter(cfg-evpn-vpws-inst-tp)# no srv6

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/instance/transport-protocol/transport-protocol.rst

network-services evpn-vpws-fxc instance transport-protocol
----------------------------------------------------------

**Minimum user role:** operator

The transport-protocol should be set to MPLS.

**Command syntax: transport-protocol**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-fxc-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-fxc-inst-tp)#


**Removing Configuration**

To remove transport-protocol definitions - reverting them to their default values.
::

    dnRouter(cfg-netsrv-evpn-vpws-fxc)# no transport-protocol

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/l2-mtu.rst

network-services evpn-vpws-fxc l2-mtu
-------------------------------------

**Minimum user role:** operator

Configure the default (can be modified per instance) MTU value to be sent (signaled) in the BGP, which must be identical with the peer value. If zero is used no mtu check is carried out.

**Command syntax: l2-mtu [l2-mtu]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc

**Note**

- The reconfiguration of Pseudowire MTU causes the Pseudowire to flap.

**Parameter table**

+-----------+---------------------------------+--------------+---------+
| Parameter | Description                     | Range        | Default |
+===========+=================================+==============+=========+
| l2-mtu    | MTU value to be signaled in BGP | 0, 1514-9300 | 0       |
+-----------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# evpn-vpws-fxc
    dnRouter(cfg-network-services-evpn-vpws-fxc)# l2-mtu 2000
    dnRouter(cfg-network-services-evpn-vpws-fxc)#


**Removing Configuration**

To revert the MTU to the default value:
::

    dnRouter(cfg-network-services-evpn-vpws-fxc)# no mtu

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/transport-protocol/mpls/control-word.rst

network-services evpn-vpws-fxc transport-protocol mpls control-word
-------------------------------------------------------------------

**Minimum user role:** operator

Configure the default (can be modified per instance) MPLS control-word option. The Control-word is always zero when enabled and is used as a marker to identify between the inner layer 2 packet and the layer 3 encapsulation. The Control-word is only used with MPLS.

**Command syntax: control-word [control-word]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc transport-protocol mpls

**Parameter table**

+--------------+------------------------------------------+--------------+---------+
| Parameter    | Description                              | Range        | Default |
+==============+==========================================+==============+=========+
| control-word | Set control-word usage for evpn-vpws-fxc | | enabled    | enabled |
|              |                                          | | disabled   |         |
+--------------+------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# transport-protocol
    dnRouter(cfg-netsrv-evpn-vpws-fxc-tp)# mpls
    dnRouter(cfg-netsrv-evpn-vpws-fxc-tp-mpls)# control-word disabled
    dnRouter(cfg-netsrv-evpn-vpws-fxc-tp-mpls)#


**Removing Configuration**

To revert control-word to default:
::

    dnRouter(cfg-netsrv-evpn-vpws-fxc-tp-mpls)# no control-word

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/transport-protocol/mpls/fat-label.rst

network-services evpn-vpws-fxc transport-protocol mpls fat-label
----------------------------------------------------------------

**Minimum user role:** operator

Configure the default (can be modified per instance) value for the fat-label. Flow Aware Transport (FAT) label is an identifier used to load balance packets as they pass through the network. The first PE device looks into the inner packet and calculates a hash, the FAT label. As the packet passes through the intermediate routers the FAT label is considered for load-balancing decisions. All packets of the same flow will result in the same FAT label and are sent on the same path.

**Command syntax: fat-label [fat-label]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc transport-protocol mpls

**Parameter table**

+-----------+----------------------------------+--------------+----------+
| Parameter | Description                      | Range        | Default  |
+===========+==================================+==============+==========+
| fat-label | Define Requested FAT Label Usage | | enabled    | disabled |
|           |                                  | | disabled   |          |
+-----------+----------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# transport-protocol
    dnRouter(cfg-netsrv-evpn-vpws-fxc-tp)# mpls
    dnRouter(cfg-netsrv-evpn-vpws-fxc-tp-mpls)# fat-label enabled
    dnRouter(cfg-netsrv-evpn-vpws-fxc-tp-mpls)#


**Removing Configuration**

To revert fat-label to default:
::

    dnRouter(cfg-netsrv-evpn-vpws-fxc-tp-mpls)# no fat-label

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/transport-protocol/mpls/mpls.rst

network-services evpn-vpws-fxc transport-protocol mpls
------------------------------------------------------

**Minimum user role:** operator

Define the MPLS Transport and the relevant options - control word and fat-label.

**Command syntax: mpls**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# transport-protocol
    dnRouter(cfg-netsrv-evpn-vpws-fxc-tp)# mpls
    dnRouter(cfg-netsrv-evpn-vpws-fxc-tp-mpls)#


**Removing Configuration**

To remove the mpls definition
::

    dnRouter(cfg-evpn-vpws-fxc-tp)# no mpls

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws-fxc/transport-protocol/transport-protocol.rst

network-services evpn-vpws-fxc transport-protocol
-------------------------------------------------

**Minimum user role:** operator

The transport-protocol should be set to MPLS.

**Command syntax: transport-protocol**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws-fxc

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws-fxc
    dnRouter(cfg-netsrv-evpn-vpws-fxc)# transport-protocol
    dnRouter(cfg-netsrv-evpn-vpws-fxc-tp)#


**Removing Configuration**

To remove transport-protocol definitions - reverting then to their default values.
::

    dnRouter(cfg-netsrv-evpn-vpws-fxc)# no transport-protocol

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/counters/counters.rst

network-services evpn-vpws counters
-----------------------------------

**Minimum user role:** operator

Defines whether counters should be allocated for the EVPN-VPWS service instances by default. 

**Command syntax: counters**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# counters
    dnRouter(cfg-netsrv-evpn-vpws-counters)


**Removing Configuration**

To remove all global storm control configurations
::

    dnRouter(cfg-netsrv-evpn-vpws)# no counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/counters/service-counters.rst

network-services evpn-vpws counters service-counters
----------------------------------------------------

**Minimum user role:** operator

Service-counters enabled is the default setting for EVPN-VPWS services.
By disabling this knob, service-counters will be disabled for all EVPN-VPWS instances, that do not have a per-instance configuration.

**Command syntax: service-counters [service-counters]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws counters

**Parameter table**

+------------------+-----------------------------------------------------------------------+--------------+----------+
| Parameter        | Description                                                           | Range        | Default  |
+==================+=======================================================================+==============+==========+
| service-counters | Define whether service-counters should be allocated for EVPN services | | enabled    | disabled |
|                  |                                                                       | | disabled   |          |
+------------------+-----------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# counters
    dnRouter(cfg-netsrv-evpn-vpws-counters) service-counters disabled


**Removing Configuration**

To revert the service-counters configuration to its default of disabled
::

    no service-counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/evpn-vpws.rst

network-services evpn-vpws
--------------------------

**Minimum user role:** operator

EVPN-VPWS (Ethernet Virtual Private Network) is a point-to-point layer 2 VPN service that connects one layer 2 interface(s) of
a PE device with one layer 2 interface(s) of another PE device, across the layer 3 core MPLS network. The EVPN service uses
an MPLS or VxLAN transport layer and a BGP control layer.

To enter the EVPN-VPWS service configuration mode:

**Command syntax: evpn-vpws**

**Command mode:** config

**Hierarchies**

- network-services

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# evpn-vpws
    dnRouter(cfg-network-services-evpn-vpws)#


**Removing Configuration**

To remove all EVPN VPWS services:
::

    dnRouter(cfg-network-services)# no evpn-vpws

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/admin-state.rst

network-services evpn-vpws instance admin-state
-----------------------------------------------

**Minimum user role:** operator

Define the EVPN_VPWS service instance admin-state. By default the admin-state is enabled.

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance

**Parameter table**

+-------------+--------------------------------+--------------+---------+
| Parameter   | Description                    | Range        | Default |
+=============+================================+==============+=========+
| admin-state | evpn-vpws instance admin-state | | enabled    | enabled |
|             |                                | | disabled   |         |
+-------------+--------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# admin-state disabled
    dnRouter(cfg-netsrv-evpn-vpws-inst)#


**Removing Configuration**

To revert the admin-state to its default: enabled
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/counters/counters.rst

network-services evpn-vpws instance counters
--------------------------------------------

**Minimum user role:** operator

Defines whether counters should be allocated for this EVPN-VPWS instance. 

**Command syntax: counters**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# counters
    dnRouter(cfg-evpn-vpws-inst-counters)


**Removing Configuration**

To remove counter configurations for this instance
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/counters/service-counters.rst

network-services evpn-vpws instance counters service-counters
-------------------------------------------------------------

**Minimum user role:** operator

The Service-counters global setting defines the default setting for EVPN-VPWS services.
This knob, specifies whether service-counters will be alloocated for this EVPN-VPWS instance.

**Command syntax: service-counters [service-counters]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance counters

**Parameter table**

+------------------+---------------------------------------------------------------------------+--------------+---------+
| Parameter        | Description                                                               | Range        | Default |
+==================+===========================================================================+==============+=========+
| service-counters | Define whether service-counters should be allocated for this EVPN service | | enabled    | \-      |
|                  |                                                                           | | disabled   |         |
+------------------+---------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# counters
    dnRouter(cfg-evpn-vpws-inst-counters) service-counters disabled


**Removing Configuration**

To revert the service-counters configuration to the evpn-vpws global default value
::

    dnRouter(cfg-evpn-vpws-inst-counters)# no service-counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/description.rst

network-services evpn-vpws instance description
-----------------------------------------------

**Minimum user role:** operator

To add an optional description of the L2VPN EVPN VPWS:

**Command syntax: description [description]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance

**Parameter table**

+-------------+-----------------------+------------------+---------+
| Parameter   | Description           | Range            | Default |
+=============+=======================+==================+=========+
| description | evpn-vpws description | | string         | \-      |
|             |                       | | length 1-255   |         |
+-------------+-----------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# description "my evpn-vpws service"
    dnRouter(cfg-netsrv-evpn-vpws-inst)#


**Removing Configuration**

To remove description
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-protocols/bgp/bgp.rst

network-services evpn-vpws instance protocols bgp
-------------------------------------------------

**Minimum user role:** operator

To start the BGP process:

**Command syntax: bgp [as-number]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance protocols

**Note**

- The AS-number cannot be changed. To change it, you need to delete the BGP protocol configuration and configure a new process with a different AS-number.

- Notice the change in prompt.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter | Description                                                                      | Range        | Default |
+===========+==================================================================================+==============+=========+
| as-number | The autonomous system number of the router for the evpn-vpws services.  Uses the | 1-4294967295 | \-      |
|           | 32-bit as-number type from the model in RFC 6991.                                |              |         |
+-----------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# protocols
    dnRouter(cfg-evpn-vpws-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To disable the BGP process:
::

    dnRouter(cfg-evpn-vpws-inst-protocols)# no bgp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-protocols/bgp/export-l2vpn-evpn-policy.rst

network-services evpn-vpws instance protocols bgp export-l2vpn-evpn policy
--------------------------------------------------------------------------

**Minimum user role:** operator

To export routes according to the route policy definition:

**Command syntax: export-l2vpn-evpn policy [export-l2vpn-evpn-policy]** [, export-l2vpn-evpn-policy, export-l2vpn-evpn-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| export-l2vpn-evpn-policy | Enable export of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# evpn-vpws-protocols
    dnRouter(cfg-evpn-vpws-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# export-l2vpn-evpn policy VPN_EXP_POL1, VPN_EXP_POL2
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-evpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-protocols/bgp/export-l2vpn-evpn-route-target.rst

network-services evpn-vpws instance protocols bgp export-l2vpn-evpn route-target
--------------------------------------------------------------------------------

**Minimum user role:** operator

To export routes with the route-target tag:

**Command syntax: export-l2vpn-evpn route-target [export-l2vpn-evpn-route-target]** [, export-l2vpn-evpn-route-target, export-l2vpn-evpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------+-------+---------+
| Parameter                      | Description                                   | Range | Default |
+================================+===============================================+=======+=========+
| export-l2vpn-evpn-route-target | Enable export of routes with route-target tag | \-    | \-      |
+--------------------------------+-----------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# evpn-vpws-protocols
    dnRouter(cfg-evpn-vpws-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# export-l2vpn-evpn route-target 49844:20, 49844:30
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-evpn route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-protocols/bgp/import-l2vpn-evpn-policy.rst

network-services evpn-vpws instance protocols bgp import-l2vpn-evpn policy
--------------------------------------------------------------------------

**Minimum user role:** operator

To import routes according to the route policy definition:

**Command syntax: import-l2vpn-evpn policy [import-l2vpn-evpn-policy]** [, import-l2vpn-evpn-policy, import-l2vpn-evpn-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| import-l2vpn-evpn-policy | Enable import of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# evpn-vpws-protocols
    dnRouter(cfg-evpn-vpws-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# import-l2vpn-evpn policy L2_VPN_IMP_POL1, L2_VPN_IMP_POL2
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-evpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-protocols/bgp/import-l2vpn-evpn-route-target.rst

network-services evpn-vpws instance protocols bgp import-l2vpn-evpn route-target
--------------------------------------------------------------------------------

**Minimum user role:** operator

To import BGP routes with the route-target specified into the L2VPN-EVPN-VPWS service.

**Command syntax: import-l2vpn-evpn route-target [import-l2vpn-evpn-route-target]** [, import-l2vpn-evpn-route-target, import-l2vpn-evpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------------------------------+-------+---------+
| Parameter                      | Description                                                           | Range | Default |
+================================+=======================================================================+=======+=========+
| import-l2vpn-evpn-route-target | Enable import of routes with route-target specified to the vrf tables | \-    | \-      |
+--------------------------------+-----------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# evpn-vpws-protocols
    dnRouter(cfg-evpn-vpws-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# import-l2vpn-evpn route-target 49844:20, 49844:30
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop importing routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-evpn route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-protocols/bgp/maximum-paths_ebgp.rst

network-services evpn-vpws instance protocols bgp maximum-paths ebgp
--------------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple equal cost paths in the routing table, when some paths are eBGP and others are iBGP:

**Command syntax: maximum-paths ebgp [ebgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance protocols bgp

**Note**

- BGP will only advertise one best path to its eBGP neighbors.

- This command is relevant only to unicast and multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

- ECMP between eBGP and iBGP paths are only possible if all paths are imported from other VRFs.

**Parameter table**

+--------------------+-------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                             | Range | Default |
+====================+=========================================================================+=======+=========+
| ebgp-maximum-paths | Maximum number of parallel paths to consider when using eBGP multipath. | 1-32  | 16      |
+--------------------+-------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ebgp 5

    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ebgp 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast

::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths ebgp

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 6.0     | Command introduced                                  |
+---------+-----------------------------------------------------+
| 13.1    | Updated maximum-paths value to 32                   |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+
| 25.3    | Changed default value to 16 for EVPN instances      |
+---------+-----------------------------------------------------+

---

## evpn-vpws/instance/evpn-vpws-protocols/bgp/maximum-paths_ibgp.rst

network-services evpn-vpws instance protocols bgp maximum-paths ibgp
--------------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple paths in the routing table:

**Command syntax: maximum-paths ibgp [ibgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance protocols bgp
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-vpn
- protocols bgp address-family ipv6-vpn
- network-services vrf instance protocols bgp address-family ipv4-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast
- network-services evpn instance protocols bgp
- network-services evpn instance interconnect protocols bgp

**Note**

- This command is relevant only to unicast and multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

**Parameter table**

+--------------------+-------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                             | Range | Default |
+====================+=========================================================================+=======+=========+
| ibgp-maximum-paths | Maximum number of parallel paths to consider when using iBGP multipath. | 1-32  | 16      |
+--------------------+-------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ibgp 5

    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ibgp 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast

::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths ibgp

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 6.0     | Command introduced                                  |
+---------+-----------------------------------------------------+
| 13.1    | Updated maximum-paths value to 32                   |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+

---

## evpn-vpws/instance/evpn-vpws-protocols/bgp/route-distinguisher.rst

network-services evpn-vpws instance protocols bgp route-distinguisher
---------------------------------------------------------------------

**Minimum user role:** operator

To configure the route-distinguisher to enable the EVPN to use a L2VPN service.

**Command syntax: route-distinguisher [route-distinguisher]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance protocols bgp

**Note**

- The route-distinguisher must be unique amongst the EVPN services, it may be identical to an RD of a VPN service.

- Reconfiguring the route-distinguisher causes all routes to be withdrawn from the EVPN peers in the EVPN safi, and then to be re-advertised with an updated route-distinguisher.

- When set to auto, system will generate route-distinguisher in format <router-id>:<16bit>, BGP router-id must be configured and 16 bit are randomnly choosen.

- User cannot configure route-distinguisher value that match a different route-distinguisher regardless how route-distinguisher was generated (manual/auto)

**Parameter table**

+---------------------+-------------------------------------------------------------+-------+---------+
| Parameter           | Description                                                 | Range | Default |
+=====================+=============================================================+=======+=========+
| route-distinguisher | the route distinguisher for BGP as part of the EVPN service | \-    | \-      |
+---------------------+-------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# evpn-protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To remove the route-distinguisher:
::

    dnRouter(cfg-inst-protocols-bgp)# no route-distinguisher

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+
| 19.1    | Add auto option    |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-protocols/evpn-vpws-protocols.rst

network-services evpn-vpws instance protocols
---------------------------------------------

**Minimum user role:** operator

Enter the protocols hierarchy to modify the attributes for this EVPN-VPWS instance.

**Command syntax: protocols**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# protocols
    dnRouter(cfg-evpn-vpws-inst-protocols)#


**Removing Configuration**

To revert the protocols configuration to default:
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no protocols

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-seamless-integration/encapsulation.rst

network-services evpn-vpws instance evpn-vpws-seamless-integration encapsulation
--------------------------------------------------------------------------------

**Minimum user role:** operator

The Pseudowire encapsulation type by default matches the VPWS interface. The encapsulation type must be equal between neighbors for the Pseudowire to be established, if the ignore-encapsulation-mismatch parameter is disabled. The encapsulation types are:
- Type 5 - Ethernet (Raw) encapsulation
- Type 4 - Vlan (Raw) encapsulation

Default values for EVPN-VPWS interface:
- For physical interfaces (either GE or bundle) the encapsulation type is Ethernet.
- For sub-interfaces the encapsulation type is VLAN.
- User can override the encapsulation with this command

To configure the Pseudowire encapsulation type:

**Command syntax: encapsulation [encapsulation]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance evpn-vpws-seamless-integration

**Parameter table**

+---------------+---------------------------+--------------+---------+
| Parameter     | Description               | Range        | Default |
+===============+===========================+==============+=========+
| encapsulation | Set PW encapsulation type | | ethernet   | \-      |
|               |                           | | vlan       |         |
+---------------+---------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# evpn-vpws-seamless-integration
    dnRouter(cfg-netsrv-evpn-vpws-evsi)# encapsulation ethernet
    dnRouter(cfg-netsrv-evpn-vpws-evsi)#


**Removing Configuration**

To revert encapsulation to default use no encapsulation
::

    dnRouter(cfg-netsrv-evpn-vpws-evsi)# no encapsulation

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-seamless-integration/evpn-vpws-seamless-integration.rst

network-services evpn-vpws instance evpn-vpws-seamless-integration
------------------------------------------------------------------

**Minimum user role:** operator

configure seamless-integration for evpn with legacy BGP-VPWS (Kompella)

**Command syntax: evpn-vpws-seamless-integration**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance

**Example**
::

    dnRouter#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# evpn-vpws-seamless-integration
    dnRouter(cfg-evpn-vpws-inst-evsi)#


**Removing Configuration**

To remove evpn-vpws-seamless-integration definitions - reverting them to their default values.
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no evpn-vpws-seamless-integration

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-seamless-integration/l2-mtu.rst

network-services evpn-vpws instance evpn-vpws-seamless-integration l2-mtu
-------------------------------------------------------------------------

**Minimum user role:** operator

Configure the MTU value of this instance to be sent (signaled) in the BGP, which must be identical with the peer value. If zero is used, no mtu check is carried out.

**Command syntax: l2-mtu [l2-mtu]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance evpn-vpws-seamless-integration

**Note**

- The reconfiguration of Pseudowire MTU causes the Pseudowire to flap.

**Parameter table**

+-----------+---------------------------------+--------------+---------+
| Parameter | Description                     | Range        | Default |
+===========+=================================+==============+=========+
| l2-mtu    | MTU value to be signaled in BGP | 0, 1514-9300 | 0       |
+-----------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# l2-mtu 2000
    dnRouter(cfg-network-services-evpn-vpws)#


**Removing Configuration**

To revert the MTU to the default value:
::

    dnRouter(cfg-network-services-evpn-vpws)# no mtu

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-seamless-integration/site-id.rst

network-services evpn-vpws instance evpn-vpws-seamless-integration site-id remote-site-id
-----------------------------------------------------------------------------------------

**Minimum user role:** operator

The local and remote VPWS site IDs are a mandatory configuration. Changing their values will result in service interruption.

**Command syntax: site-id [local-site-id] remote-site-id [remote-site-id]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance evpn-vpws-seamless-integration

**Note**

- The reconfiguration of the site IDs causes the Pseudowire to flap.

**Parameter table**

+----------------+----------------------------------+---------+---------+
| Parameter      | Description                      | Range   | Default |
+================+==================================+=========+=========+
| local-site-id  | the unique VPWS site identifiers | 1-65534 | \-      |
+----------------+----------------------------------+---------+---------+
| remote-site-id | Remote VPWS site Id              | 1-65534 | \-      |
+----------------+----------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# evpn-vpws-seamless-integration
    dnRouter(cfg-netsrv-evpn-vpws-evsi)# site-id 1 remote-site-id 2
    dnRouter(cfg-netsrv-evpn-vpws-evsi)#


**Removing Configuration**

To remove the site-id
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no site-id

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-seamless-integration/site-preference.rst

network-services evpn-vpws instance evpn-vpws-seamless-integration site-preference
----------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the site-preference that will be signaled in BGP

**Command syntax: site-preference [site-preference]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance evpn-vpws-seamless-integration

**Parameter table**

+-----------------+---------------------------------------------+---------+---------+
| Parameter       | Description                                 | Range   | Default |
+=================+=============================================+=========+=========+
| site-preference | site-preference value to be signaled in BGP | 1-65535 | 100     |
+-----------------+---------------------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# evpn-vpws-seamless-integration
    dnRouter(cfg-netsrv-evpn-vpws-evsi)# site-preference 65535
    dnRouter(cfg-netsrv-evpn-vpws-evsi)#


**Removing Configuration**

To remove the site-preference to default value
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no site-preference

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-seamless-integration/transport-protocol/mpls/control-word.rst

network-services evpn-vpws instance evpn-vpws-seamless-integration transport-protocol mpls control-word
-------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Define the MPLS control word option. The Control-word is always zero when enabled and is used as a marker to identify between the inner layer 2 packet and the layer 3 encapsulation. The Control-word is only used with MPLS.

**Command syntax: control-word [control-word]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance evpn-vpws-seamless-integration transport-protocol mpls

**Parameter table**

+--------------+---------------------------------+--------------+---------+
| Parameter    | Description                     | Range        | Default |
+==============+=================================+==============+=========+
| control-word | Set control-word usage for evpn | | enabled    | \-      |
|              |                                 | | disabled   |         |
+--------------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# evpn-vpws-seamless-integration
    dnRouter(cfg-netsrv-evpn-vpws-evsi)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# mpls
    dnRouter(cfg-inst-tp-mpls)# control-word disabled
    dnRouter(cfg-inst-tp-mpls)#


**Removing Configuration**

To revert control-word to default:
::

    dnRouter(cfg-inst-tp-mpls)# no control-word

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-seamless-integration/transport-protocol/mpls/fat-label.rst

network-services evpn-vpws instance evpn-vpws-seamless-integration transport-protocol mpls fat-label
----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Flow Aware Transport (FAT) label is an identifier used to load balance packets as they pass through the network. The first PE looks into the inner packet and calculates a hash, the FAT label. As the packet passes through intermediate routers the FAT label is considered for load-balancing decisions. All packets of same flow will result in the same FAT label and are sent on the same path.

**Command syntax: fat-label [fat-label]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance evpn-vpws-seamless-integration transport-protocol mpls

**Parameter table**

+-----------+----------------------------------+------------------+----------+
| Parameter | Description                      | Range            | Default  |
+===========+==================================+==================+==========+
| fat-label | Define Requested FAT Label Usage | | enabled        | disabled |
|           |                                  | | send-only      |          |
|           |                                  | | receive-only   |          |
|           |                                  | | disabled       |          |
+-----------+----------------------------------+------------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance EVPN_VPWS_1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# evpn-vpws-seamless-integration
    dnRouter(cfg-netsrv-evpn-vpws-evsi)# transport-protocol
    dnRouter(cfg-netsrv-evpn-vpws-tp)# mpls
    dnRouter(cfg-inst-tp-mpls)# fat-label enabled


**Removing Configuration**

To revert FAT-label to default:
::

    dnRouter(cfg-vpws-inst-pw)# no fat-label

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-seamless-integration/transport-protocol/mpls/mpls.rst

network-services evpn-vpws instance evpn-vpws-seamless-integration transport-protocol mpls
------------------------------------------------------------------------------------------

**Minimum user role:** operator

Enter the MPLS Transport hierarchy to configure the relevant options - control word and fat-label.

**Command syntax: mpls**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance evpn-vpws-seamless-integration transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# mpls
    dnRouter(cfg-inst-tp-mpls)#


**Removing Configuration**

To remove the mpls definition
::

    dnRouter(cfg-evpn-vpws-inst-tp)# no mpls

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/evpn-vpws-seamless-integration/transport-protocol/transport-protocol.rst

network-services evpn-vpws instance evpn-vpws-seamless-integration transport-protocol
-------------------------------------------------------------------------------------

**Minimum user role:** operator

The transport-protocol should be set to MPLS.

**Command syntax: transport-protocol**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance evpn-vpws-seamless-integration

**Example**
::

    dnRouter#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws)# evpn-vpws-seamless-integration
    dnRouter(cfg-netsrv-evpn-vpws-evsi)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-evsitp)#


**Removing Configuration**

To remove transport-protocol definitions - reverting them to their default values.
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no transport-protocol

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/instance.rst

network-services evpn-vpws instance
-----------------------------------

**Minimum user role:** operator

Configure a L2VPN EVPN-VPWS instance.

**Command syntax: instance [evpn-vpws-name]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws

**Note**

- The EVPN VPWS service must use a unique name.

**Parameter table**

+----------------+--------------------------------------------------------------------+------------------+---------+
| Parameter      | Description                                                        | Range            | Default |
+================+====================================================================+==================+=========+
| evpn-vpws-name | The name of the evpn-vpws -- used to address the evpn-vpws service | | string         | \-      |
|                |                                                                    | | length 1-255   |         |
+----------------+--------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)#


**Removing Configuration**

To revert the specified EVPN VPWS service to default:
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no instance evpn-vpws1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/interface.rst

network-services evpn-vpws instance interface
---------------------------------------------

**Minimum user role:** operator

Configure an interface for the EVPN VPWS service.

 - An interface must be a L2-service enabled interface.

 - An Interface cannot be assigned to multiple services. 

 The Designated Forwarder Election Algorithm is defined under multihoming. When the Prefernce Algorithm (Highest or Lowest) is defined on the ES, the invert preference algorithm knob allows that per EVI this can be inverted to allow the DF role to be shared between two PE devices for the different service instances.

 The propagation of service failures allows the CE to redirect traffic via other network elements when the the EVPN-VPWS service has not been established. This option is only valid in port-mode on whole physical or bundle interfaces. It is not valid for sub-interfaces

**Command syntax: interface [name]** df-invert-preference [invert-preference-algorithm] propagate-failures [action]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance

**Note**

- Support only interface of type <geX-X/X/X/bundle-X/<geX-X/X/X.Y>/<bundle-X.Y>.

**Parameter table**

+-----------------------------+----------------------------------------------------------------------------------+------------------+----------+
| Parameter                   | Description                                                                      | Range            | Default  |
+=============================+==================================================================================+==================+==========+
| name                        | the evpn-vpws service attachment circuit                                         | | string         | \-       |
|                             |                                                                                  | | length 1-255   |          |
+-----------------------------+----------------------------------------------------------------------------------+------------------+----------+
| invert-preference-algorithm | When the AC interface is connected to a multihomed Ethernet Segment and the DF   | | enabled        | disabled |
|                             | Election algorithm is the preference algorithm (highest or lowest) then enabling | | disabled       |          |
|                             | this knob will invert the algorithm for this EVPN instance, example instead of   |                  |          |
|                             | highest election it will elect the lowest preference as the DF                   |                  |          |
+-----------------------------+----------------------------------------------------------------------------------+------------------+----------+
| action                      | Action to perform on failure                                                     | | disabled       | disabled |
|                             |                                                                                  | | laser-off      |          |
+-----------------------------+----------------------------------------------------------------------------------+------------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-evpn-vpws-inst)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# interface bundle-1 df-invert-preference enabled
    dnRouter(cfg-netsrv-evpn-vpws-inst)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# interface ge100-0/0/0.10
    dnRouter(cfg-netsrv-evpn-vpws-inst)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# interface ge100-0/0/5 propagate-failures laser-off
    dnRouter(cfg-netsrv-evpn-vpws-inst)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# interface ge100-0/0/5 propagate-failures laser-off
    dnRouter(cfg-netsrv-evpn-vpws-inst)#



**Removing Configuration**

To remove the interface from its association with the EVPN VPWS instance
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no interface ge100-0/0/0

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/l2-mtu.rst

network-services evpn-vpws instance l2-mtu
------------------------------------------

**Minimum user role:** operator

Configure the MTU value of this instance to be sent (signaled) in the BGP, which must be identical with the peer value. If zero is used, no mtu check is carried out.

**Command syntax: l2-mtu [l2-mtu]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance

**Note**

- The reconfiguration of Pseudowire MTU causes the Pseudowire to flap.

**Parameter table**

+-----------+---------------------------------+--------------+---------+
| Parameter | Description                     | Range        | Default |
+===========+=================================+==============+=========+
| l2-mtu    | MTU value to be signaled in BGP | 0, 1514-9300 | \-      |
+-----------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# l2-mtu 2000
    dnRouter(cfg-network-services-evpn-vpws)#


**Removing Configuration**

To revert the MTU to the default value:
::

    dnRouter(cfg-network-services-evpn-vpws)# no mtu

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/mpls-oam/mpls-oam.rst

network-services evpn-vpws instance mpls-oam
--------------------------------------------

**Minimum user role:** operator

Attach mpls-oam profile to probe the evpn-vpws instance. 

**Command syntax: mpls-oam**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# mpls-oam
    dnRouter(cfg-evpn-vpws-inst-oam)


**Removing Configuration**

To remove mpls-oam configurations for this instance
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no mpls-oam

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/encapsulation.rst

network-services evpn-vpws instance seamless-integration encapsulation
----------------------------------------------------------------------

**Minimum user role:** operator

The Pseudowire encapsulation type by default matches the VPWS interface. The encapsulation type must be equal between neighbors for the Pseudowire to be established, if the ignore-encapsulation-mismatch parameter is disabled. The encapsulation types are:
- Type 5 - Ethernet (Raw) encapsulation
- Type 4 - Vlan (Raw) encapsulation

Default values for EVPN-VPWS interface:
- For physical interfaces (either GE or bundle) the encapsulation type is Ethernet.
- For sub-interfaces the encapsulation type is VLAN.
- User can override the encapsulation with this command

To configure the Pseudowire encapsulation type:

**Command syntax: encapsulation [encapsulation]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration

**Parameter table**

+---------------+---------------------------+--------------+---------+
| Parameter     | Description               | Range        | Default |
+===============+===========================+==============+=========+
| encapsulation | Set PW encapsulation type | | ethernet   | \-      |
|               |                           | | vlan       |         |
+---------------+---------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# encapsulation ethernet
    dnRouter(cfg-evpn-vpws-inst-si)#


**Removing Configuration**

To revert encapsulation to default use no encapsulation
::

    dnRouter(cfg-evpn-vpws-inst-si)# no encapsulation

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/l2-mtu.rst

network-services evpn-vpws instance seamless-integration l2-mtu
---------------------------------------------------------------

**Minimum user role:** operator

Configure the MTU value of this instance to be sent (signaled) in the BGP, which must be identical with the peer value. If zero is used, no mtu check is carried out.

**Command syntax: l2-mtu [l2-mtu]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration

**Note**

- The reconfiguration of Pseudowire MTU causes the Pseudowire to flap.

**Parameter table**

+-----------+---------------------------------+--------------+---------+
| Parameter | Description                     | Range        | Default |
+===========+=================================+==============+=========+
| l2-mtu    | MTU value to be signaled in BGP | 0, 1514-9300 | 0       |
+-----------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# l2-mtu 2000
    dnRouter(cfg-evpn-vpws-inst-si)#


**Removing Configuration**

To revert the MTU to the default value:
::

    dnRouter(cfg-evpn-vpws-inst-si)# no l2-mtu

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/protocols/bgp/bgp.rst

network-services evpn-vpws instance seamless-integration protocols bgp
----------------------------------------------------------------------

**Minimum user role:** operator

To start the BGP process:

**Command syntax: bgp**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration protocols

**Note**

- The AS-number cannot be changed. To change it, you need to delete the BGP protocol configuration and configure a new process with a different AS-number.

- Notice the change in prompt.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws)# seamless-integration
    dnRouter(cfg-netsrv-evpn-vpws-si)# protocols
    dnRouter(cfg-netsrv-evpn-vpws-si-protocols)# bgp
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To disable the BGP process:
::

    dnRouter(cfg-evpn-vpws-inst-protocols)# no bgp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/protocols/bgp/export-l2vpn-vpls-policy.rst

network-services evpn-vpws instance seamless-integration protocols bgp export-l2vpn-vpls policy
-----------------------------------------------------------------------------------------------

**Minimum user role:** operator

To export routes according to the route policy definition:

**Command syntax: export-l2vpn-vpls policy [export-l2vpn-vpls-policy]** [, export-l2vpn-vpls-policy, export-l2vpn-vpls-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| export-l2vpn-vpls-policy | Enable export of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# protocols
    dnRouter(cfg-si-protocols)# bgp
    dnRouter(cfg-si-protocols-bgp)# export-l2vpn-vpls policy VPN_EXP_POL1, VPN_EXP_POL2
    dnRouter(cfg-si-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-evpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/protocols/bgp/export-l2vpn-vpls-route-target.rst

network-services evpn-vpws instance seamless-integration protocols bgp export-l2vpn-vpls route-target
-----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To export routes with the route-target tag:

**Command syntax: export-l2vpn-vpls route-target [export-l2vpn-vpls-route-target]** [, export-l2vpn-vpls-route-target, export-l2vpn-vpls-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------+-------+---------+
| Parameter                      | Description                                   | Range | Default |
+================================+===============================================+=======+=========+
| export-l2vpn-vpls-route-target | Enable export of routes with route-target tag | \-    | \-      |
+--------------------------------+-----------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-evpn-vpws-inst-si)# seamless-integration
    dnRouter(cfg-evsi)# protocols
    dnRouter(cfg-evsi-protocols)# bgp
    dnRouter(cfg-evsi-protocols-bgp)# export-l2vpn-vpls route-target 49844:20, 49844:30


**Removing Configuration**

To stop exporting routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-vpls route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/protocols/bgp/import-l2vpn-vpls-policy.rst

network-services evpn-vpws instance seamless-integration protocols bgp import-l2vpn-vpls policy
-----------------------------------------------------------------------------------------------

**Minimum user role:** operator

To import routes according to the route policy definition:

**Command syntax: import-l2vpn-vpls policy [import-l2vpn-vpls-policy]** [, import-l2vpn-vpls-policy, import-l2vpn-vpls-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| import-l2vpn-vpls-policy | Enable import of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-evpn-vpws-inst-si)# seamless-integration
    dnRouter(cfg-netsrv-evpn-vpws-inst)# protocols
    dnRouter(cfg-evpn-vpws-inst-protocols)# bgp
    dnRouter(cfg-inst-protocols-bgp)# import-l2vpn-vpls policy L2_VPN_IMP_POL1, L2_VPN_IMP_POL2
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-vpls policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/protocols/bgp/import-l2vpn-vpls-route-target.rst

network-services evpn-vpws instance seamless-integration protocols bgp import-l2vpn-vpls route-target
-----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To import BGP routes with the route-target specified into the L2VPN-EVPN-VPWS service.

**Command syntax: import-l2vpn-vpls route-target [import-l2vpn-vpls-route-target]** [, import-l2vpn-vpls-route-target, import-l2vpn-vpls-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------------------------------+-------+---------+
| Parameter                      | Description                                                           | Range | Default |
+================================+=======================================================================+=======+=========+
| import-l2vpn-vpls-route-target | Enable import of routes with route-target specified to the vrf tables | \-    | \-      |
+--------------------------------+-----------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# evpn-vpws-protocols
    dnRouter(cfg-evpn-vpws-inst-protocols)# bgp
    dnRouter(cfg-inst-protocols-bgp)# import-l2vpn-vpls route-target 49844:20, 49844:30
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop importing routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-vpls route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/protocols/protocols.rst

network-services evpn-vpws instance seamless-integration protocols
------------------------------------------------------------------

**Minimum user role:** operator

Enter the protocols hierarchy to modify the attributes for this EVPN-VPWS seamless-integration instance.

**Command syntax: protocols**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# seamless-integration
    dnRouter(cfg-evsi)# protocols
    dnRouter(cfg-evsi-protocols)#


**Removing Configuration**

To revert the protocols configuration to default:
::

    dnRouter(cfg-evsi)# no protocols

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/seamless-integration-protocols/bgp/bgp.rst

network-services evpn-vpws instance seamless-integration protocols bgp
----------------------------------------------------------------------

**Minimum user role:** operator

To start the BGP process:

**Command syntax: bgp**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration protocols

**Note**

- The AS-number cannot be changed. To change it, you need to delete the BGP protocol configuration and configure a new process with a different AS-number.

- Notice the change in prompt.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# protocols
    dnRouter(cfg-inst-si-protocols)# bgp
    dnRouter(cfg-si-protocols-bgp)#


**Removing Configuration**

To disable the BGP process:
::

    dnRouter(cfg-evpn-vpws-inst-protocols)# no bgp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/seamless-integration-protocols/bgp/export-l2vpn-vpls-policy.rst

network-services evpn-vpws instance seamless-integration protocols bgp export-l2vpn-vpls policy
-----------------------------------------------------------------------------------------------

**Minimum user role:** operator

To export routes according to the route policy definition:

**Command syntax: export-l2vpn-vpls policy [export-l2vpn-vpls-policy]** [, export-l2vpn-vpls-policy, export-l2vpn-vpls-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| export-l2vpn-vpls-policy | Enable export of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-evpn-vpws-inst-si)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# protocols
    dnRouter(cfg-inst-si-protocols)# bgp
    dnRouter(cfg-inst-si-protocols-bgp)# export-l2vpn-vpls policy VPN_EXP_POL1, VPN_EXP_POL2
    dnRouter(cfg-inst-si-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-vpls policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/seamless-integration-protocols/bgp/export-l2vpn-vpls-route-target.rst

network-services evpn-vpws instance seamless-integration protocols bgp export-l2vpn-vpls route-target
-----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To export routes with the route-target tag:

**Command syntax: export-l2vpn-vpls route-target [export-l2vpn-vpls-route-target]** [, export-l2vpn-vpls-route-target, export-l2vpn-vpls-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------+-------+---------+
| Parameter                      | Description                                   | Range | Default |
+================================+===============================================+=======+=========+
| export-l2vpn-vpls-route-target | Enable export of routes with route-target tag | \-    | \-      |
+--------------------------------+-----------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# protocols
    dnRouter(cfg-inst-si-protocols)# bgp
    dnRouter(cfg-inst-si-protocols-bgp)# export-l2vpn-vpls route-target 49844:20, 49844:30


**Removing Configuration**

To stop exporting routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-vpls route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/seamless-integration-protocols/bgp/import-l2vpn-vpls-policy.rst

network-services evpn-vpws instance seamless-integration protocols bgp import-l2vpn-vpls policy
-----------------------------------------------------------------------------------------------

**Minimum user role:** operator

To import routes according to the route policy definition:

**Command syntax: import-l2vpn-vpls policy [import-l2vpn-vpls-policy]** [, import-l2vpn-vpls-policy, import-l2vpn-vpls-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| import-l2vpn-vpls-policy | Enable import of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# protocols
    dnRouter(cfg-inst-si-protocols)# bgp
    dnRouter(cfg-inst-si-protocols-bgp)# import-l2vpn-vpls policy L2_VPN_IMP_POL1, L2_VPN_IMP_POL2
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop importing routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-vpls policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/seamless-integration-protocols/bgp/import-l2vpn-vpls-route-target.rst

network-services evpn-vpws instance seamless-integration protocols bgp import-l2vpn-vpls route-target
-----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To import BGP routes with the route-target specified into the L2VPN-EVPN-VPWS service.

**Command syntax: import-l2vpn-vpls route-target [import-l2vpn-vpls-route-target]** [, import-l2vpn-vpls-route-target, import-l2vpn-vpls-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------------------------------+-------+---------+
| Parameter                      | Description                                                           | Range | Default |
+================================+=======================================================================+=======+=========+
| import-l2vpn-vpls-route-target | Enable import of routes with route-target specified to the vrf tables | \-    | \-      |
+--------------------------------+-----------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# protocols
    dnRouter(cfg-inst-si-protocols)# bgp
    dnRouter(cfg-inst-si-protocols-bgp)# import-l2vpn-vpls route-target 49844:20, 49844:30
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop importing routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-vpls route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/seamless-integration-protocols/seamless-integration-protocols.rst

network-services evpn-vpws instance seamless-integration protocols
------------------------------------------------------------------

**Minimum user role:** operator

Enter the protocols hierarchy to modify the attributes for this EVPN-VPWS seamless-integration instance.

**Command syntax: protocols**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-evpn-vpws-inst-si)# seamless-integration
    dnRouter(cfg-inst-si-protocols)# protocols
    dnRouter(cfg-inst-si-protocols)#


**Removing Configuration**

To revert the protocols configuration to default:
::

    dnRouter(cfg-inst-si-protocols)# no protocols

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/seamless-integration.rst

network-services evpn-vpws instance seamless-integration
--------------------------------------------------------

**Minimum user role:** operator

configure seamless-integration for evpn with legacy BGP-VPWS (Kompella)

**Command syntax: seamless-integration**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance

**Example**
::

    dnRouter#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)#


**Removing Configuration**

To remove seamless-integration definitions - reverting them to their default values.
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no seamless-integration

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/site-id.rst

network-services evpn-vpws instance seamless-integration site-id remote-site-id
-------------------------------------------------------------------------------

**Minimum user role:** operator

The local and remote VPWS site IDs are a mandatory configuration. Changing their values will result in service interruption.

**Command syntax: site-id [local-site-id] remote-site-id [remote-site-id]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration

**Note**

- The reconfiguration of the site IDs causes the Pseudowire to flap.

**Parameter table**

+----------------+----------------------------------+---------+---------+
| Parameter      | Description                      | Range   | Default |
+================+==================================+=========+=========+
| local-site-id  | the unique VPWS site identifiers | 1-65534 | \-      |
+----------------+----------------------------------+---------+---------+
| remote-site-id | Remote VPWS site Id              | 1-65534 | \-      |
+----------------+----------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# site-id 1 remote-site-id 2
    dnRouter(cfg-evpn-vpws-inst-si)#


**Removing Configuration**

To remove the site-id
::

    dnRouter(cfg-evpn-vpws-inst-si)# no site-id

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/site-preference.rst

network-services evpn-vpws instance seamless-integration site-preference
------------------------------------------------------------------------

**Minimum user role:** operator

Configure the site-preference that will be signaled in BGP

**Command syntax: site-preference [site-preference]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration

**Parameter table**

+-----------------+---------------------------------------------+---------+---------+
| Parameter       | Description                                 | Range   | Default |
+=================+=============================================+=========+=========+
| site-preference | site-preference value to be signaled in BGP | 1-65535 | 100     |
+-----------------+---------------------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# site-preference 65535
    dnRouter(cfg-evpn-vpws-inst-si)#


**Removing Configuration**

To remove the site-preference to default value
::

    dnRouter(cfg-evpn-vpws-inst-si)# no site-preference

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/transport-protocol/mpls/control-word.rst

network-services evpn-vpws instance seamless-integration transport-protocol mpls control-word
---------------------------------------------------------------------------------------------

**Minimum user role:** operator

Define the MPLS control word option. The Control-word is always zero when enabled and is used as a marker to identify between the inner layer 2 packet and the layer 3 encapsulation. The Control-word is only used with MPLS.

**Command syntax: control-word [control-word]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration transport-protocol mpls

**Parameter table**

+--------------+---------------------------------+--------------+---------+
| Parameter    | Description                     | Range        | Default |
+==============+=================================+==============+=========+
| control-word | Set control-word usage for evpn | | enabled    | enabled |
|              |                                 | | disabled   |         |
+--------------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# transport-protocol
    dnRouter(cfg-inst-si-tp)# mpls
    dnRouter(cfg-inst-si-tp-mpls)# control-word disabled
    dnRouter(cfg-inst-si-tp-mpls)#


**Removing Configuration**

To revert control-word to default:
::

    dnRouter(cfg-inst-tp-mpls)# no control-word

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/transport-protocol/mpls/fat-label.rst

network-services evpn-vpws instance seamless-integration transport-protocol mpls fat-label
------------------------------------------------------------------------------------------

**Minimum user role:** operator

Flow Aware Transport (FAT) label is an identifier used to load balance packets as they pass through the network. The first PE looks into the inner packet and calculates a hash, the FAT label. As the packet passes through intermediate routers the FAT label is considered for load-balancing decisions. All packets of same flow will result in the same FAT label and are sent on the same path.

**Command syntax: fat-label [fat-label]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration transport-protocol mpls

**Parameter table**

+-----------+----------------------------------+------------------+----------+
| Parameter | Description                      | Range            | Default  |
+===========+==================================+==================+==========+
| fat-label | Define Requested FAT Label Usage | | enabled        | disabled |
|           |                                  | | send-only      |          |
|           |                                  | | receive-only   |          |
|           |                                  | | disabled       |          |
+-----------+----------------------------------+------------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance EVPN_VPWS_1
    dnRouter(cfg-netsrv-evpn-vpws)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# transport-protocol
    dnRouter(cfg-inst-si-tp)# mpls
    dnRouter(cfg-inst-si-tp-mpls)# fat-label enabled
    dnRouter(cfg-inst-si-tp-mpls)#


**Removing Configuration**

To revert FAT-label to default:
::

    dnRouter(cfg-inst-tp-mpls)# no fat-label

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/transport-protocol/mpls/mpls.rst

network-services evpn-vpws instance seamless-integration transport-protocol mpls
--------------------------------------------------------------------------------

**Minimum user role:** operator

Enter the MPLS Transport hierarchy to configure the relevant options - control word and fat-label.

**Command syntax: mpls**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# transport-protocol
    dnRouter(cfg-inst-si-tp)# mpls
    dnRouter(cfg-si-tp-mpls)#


**Removing Configuration**

To remove the mpls definition
::

    dnRouter(cfg-evpn-vpws-inst-tp)# no mpls

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/transport-protocol/transport-protocol.rst

network-services evpn-vpws instance seamless-integration transport-protocol
---------------------------------------------------------------------------

**Minimum user role:** operator

The transport-protocol should be set to MPLS.

**Command syntax: transport-protocol**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration

**Example**
::

    dnRouter#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# transport-protocol
    dnRouter(cfg-inst-si-tp)#


**Removing Configuration**

To remove transport-protocol definitions - reverting them to their default values.
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no transport-protocol

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/seamless-integration/vpws-source-if.rst

network-services evpn-vpws instance seamless-integration vpws-source-if
-----------------------------------------------------------------------

**Minimum user role:** operator

Configure the source interface that its IP will be used for seamless integration DF election

**Command syntax: vpws-source-if [interface-name]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance seamless-integration

**Parameter table**

+----------------+----------------------------------------------------------------------------------+--------------------------------+---------+
| Parameter      | Description                                                                      | Range                          | Default |
+================+==================================================================================+================================+=========+
| interface-name | The name of the interface from which ip address is taken to be used for seamless | | configured interface name.   | \-      |
|                | integration DF election                                                          | | lo<0-65535>                  |         |
+----------------+----------------------------------------------------------------------------------+--------------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# seamless-integration
    dnRouter(cfg-evpn-vpws-inst-si)# vpws-source-if lo0
    dnRouter(cfg-evpn-vpws-inst-si)#


**Removing Configuration**

To remove the seamless-integration vpws-source-if
::

    dnRouter(cfg-evpn-vpws-inst-si)# no vpws-source-if

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/transport-protocol/mpls-srv6-migration/control-word.rst

network-services evpn-vpws instance transport-protocol mpls-srv6-migration control-word
---------------------------------------------------------------------------------------

**Minimum user role:** operator

Define the MPLS control word option. The Control-word is always zero when enabled and is used as a marker to identify between the inner layer 2 packet and the layer 3 encapsulation. The Control-word is only used with MPLS.

**Command syntax: control-word [control-word]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance transport-protocol mpls-srv6-migration

**Parameter table**

+--------------+---------------------------------+--------------+---------+
| Parameter    | Description                     | Range        | Default |
+==============+=================================+==============+=========+
| control-word | Set control-word usage for evpn | | enabled    | \-      |
|              |                                 | | disabled   |         |
+--------------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# mpls-srv6-migration
    dnRouter(cfg-inst-tp-migration)# control-word disabled
    dnRouter(cfg-inst-tp-migration)#


**Removing Configuration**

To revert control-word to default:
::

    dnRouter(cfg-inst-tp-migration)# no control-word

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/transport-protocol/mpls-srv6-migration/fat-label.rst

network-services evpn-vpws instance transport-protocol mpls-srv6-migration fat-label
------------------------------------------------------------------------------------

**Minimum user role:** operator

Flow Aware Transport (FAT) label is an identifier used to load balance packets as they pass through the network. The first PE device looks into the inner packet and calculates a hash, the FAT label. As the packet passes through intermediate routers the FAT label is considered for load-balancing decisions. All packets of the same flow result in the same FAT label and are sent on the same path.

**Command syntax: fat-label [fat-label]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance transport-protocol mpls-srv6-migration

**Parameter table**

+-----------+----------------------------------+--------------+---------+
| Parameter | Description                      | Range        | Default |
+===========+==================================+==============+=========+
| fat-label | Define Requested FAT Label Usage | | enabled    | \-      |
|           |                                  | | disabled   |         |
+-----------+----------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# mpls-srv6-migration
    dnRouter(cfg-inst-tp-migration)# fat-label enabled
    dnRouter(cfg-inst-tp-migration)#


**Removing Configuration**

To revert fat-label to default:
::

    dnRouter(cfg-inst-tp-migration)# no fat-label

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/transport-protocol/mpls-srv6-migration/locator.rst

network-services evpn-vpws instance transport-protocol mpls-srv6-migration locator
----------------------------------------------------------------------------------

**Minimum user role:** operator

Define the SRV6 locator. When a locator is associated with the EVPN-VPWS instance an END.dx2 behavior will be dynamically allocated for that locator for this service. The locator-prefix+END.dx2 will be installed into the RIB and FIB.

**Command syntax: locator [locator]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance transport-protocol mpls-srv6-migration

**Parameter table**

+-----------+--------------------------+------------------+---------+
| Parameter | Description              | Range            | Default |
+===========+==========================+==================+=========+
| locator   | Select srv6 locator name | | string         | \-      |
|           |                          | | length 1-255   |         |
+-----------+--------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# mpls-srv6-migration
    dnRouter(cfg-inst-tp-migration)# locator LOCATOR_1
    dnRouter(cfg-inst-tp-migration)#


**Removing Configuration**

To remove locator configuration
::

    dnRouter(cfg-inst-tp-migration)# no locator

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/transport-protocol/mpls-srv6-migration/mpls-srv6-migration.rst

network-services evpn-vpws instance transport-protocol mpls-srv6-migration
--------------------------------------------------------------------------

**Minimum user role:** operator

Enter the MPLS and SRV6 Transport hierarchy to configure the relevant options - control word,fat-label and SRV6 locator.

**Command syntax: mpls-srv6-migration**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# mpls-srv6-migration
    dnRouter(cfg-inst-tp-migration)#


**Removing Configuration**

To remove the mpls-srv6-migration definition
::

    dnRouter(cfg-evpn-vpws-inst-tp)# no mpls-srv6-migration

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/transport-protocol/mpls/control-word.rst

network-services evpn-vpws instance transport-protocol mpls control-word
------------------------------------------------------------------------

**Minimum user role:** operator

Define the MPLS control word option. The Control-word is always zero when enabled and is used as a marker to identify between the inner layer 2 packet and the layer 3 encapsulation. The Control-word is only used with MPLS.

**Command syntax: control-word [control-word]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance transport-protocol mpls

**Parameter table**

+--------------+---------------------------------+--------------+---------+
| Parameter    | Description                     | Range        | Default |
+==============+=================================+==============+=========+
| control-word | Set control-word usage for evpn | | enabled    | \-      |
|              |                                 | | disabled   |         |
+--------------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# mpls
    dnRouter(cfg-inst-tp-mpls)# control-word disabled
    dnRouter(cfg-inst-tp-mpls)#


**Removing Configuration**

To revert control-word to default:
::

    dnRouter(cfg-inst-tp-mpls)# no control-word

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/transport-protocol/mpls/fat-label.rst

network-services evpn-vpws instance transport-protocol mpls fat-label
---------------------------------------------------------------------

**Minimum user role:** operator

Flow Aware Transport (FAT) label is an identifier used to load balance packets as they pass through the network. The first PE device looks into the inner packet and calculates a hash, the FAT label. As the packet passes through intermediate routers the FAT label is considered for load-balancing decisions. All packets of the same flow result in the same FAT label and are sent on the same path.

**Command syntax: fat-label [fat-label]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance transport-protocol mpls

**Parameter table**

+-----------+----------------------------------+--------------+---------+
| Parameter | Description                      | Range        | Default |
+===========+==================================+==============+=========+
| fat-label | Define Requested FAT Label Usage | | enabled    | \-      |
|           |                                  | | disabled   |         |
+-----------+----------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# mpls
    dnRouter(cfg-inst-tp-mpls)# fat-label enabled
    dnRouter(cfg-inst-tp-mpls)#


**Removing Configuration**

To revert fat-label to default:
::

    dnRouter(cfg-inst-tp-mpls)# no fat-label

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/transport-protocol/mpls/mpls-oam/mpls-oam.rst

network-services evpn-vpws instance transport-protocol mpls mpls-oam
--------------------------------------------------------------------

**Minimum user role:** operator

Attach mpls-oam profile to probe the evpn-vpws instance. 

**Command syntax: mpls-oam**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance transport-protocol mpls

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# mpls
    dnRouter(cfg-inst-tp-mpls)# mpls-oam
    dnRouter(cfg-inst-tp-mpls-oam)#


**Removing Configuration**

To remove mpls-oam configurations for this instance
::

    dnRouter(cfg-inst-tp-mpls)# no mpls-oam

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/transport-protocol/mpls/mpls-oam/profile-name.rst

network-services evpn-vpws instance transport-protocol mpls mpls-oam profile
----------------------------------------------------------------------------

**Minimum user role:** operator

This command associates an MPLS-OAM profile ("services mpls-oam profile") defining a periodic LSP ping test with the specific service. When a profile is associated with the service, and the profile is enabled ("services mpls-oam profile admin-state"), MPLS echo request packets will be sent over the service as part of the periodic probe. 

To associate a profile with a service:

**Command syntax: profile [profile-name]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance transport-protocol mpls mpls-oam

**Note**
.. -  Changing mpls-oam profile configuration, attaching a different profile or removing the currently atteched profile will immiditaly stop current running probe an act by the probe .. result.
..
.. -  'no profile' - remove mpls-oam profile attached to the service

**Parameter table**

+--------------+------------------------------------------+------------------+---------+
| Parameter    | Description                              | Range            | Default |
+==============+==========================================+==================+=========+
| profile-name | The profile name of the mpls oam service | | string         | \-      |
|              |                                          | | length 1-255   |         |
+--------------+------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# mpls
    dnRouter(cfg-inst-tp-mpls)# mpls-oam
    dnRouter(cfg-inst-tp-mpls-oam)# profile P_1


**Removing Configuration**

To remove the profile association:
::

    dnRouter(cfg-evpn-vpws-inst-oam)# no profile

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/transport-protocol/mpls/mpls.rst

network-services evpn-vpws instance transport-protocol mpls
-----------------------------------------------------------

**Minimum user role:** operator

Enter the MPLS Transport hierarchy to configure the relevant options - control word and fat-label.

**Command syntax: mpls**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# mpls
    dnRouter(cfg-inst-tp-mpls)#


**Removing Configuration**

To remove the mpls definition
::

    dnRouter(cfg-evpn-vpws-inst-tp)# no mpls

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/transport-protocol/srv6/locator.rst

network-services evpn-vpws instance transport-protocol srv6 locator
-------------------------------------------------------------------

**Minimum user role:** operator

Define the SRV6 locator. When a locator is associated with the EVPN-VPWS instance an END.dx2 behavior will be dynamically allocated for that locator for this service. The locator-prefix+END.dx2 will be installed into the RIB and FIB.

**Command syntax: locator [locator]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance transport-protocol srv6

**Parameter table**

+-----------+--------------------------+------------------+---------+
| Parameter | Description              | Range            | Default |
+===========+==========================+==================+=========+
| locator   | Select srv6 locator name | | string         | \-      |
|           |                          | | length 1-255   |         |
+-----------+--------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# srv6
    dnRouter(cfg-inst-tp-srv6)# locator LOCATOR_1
    dnRouter(cfg-inst-tp-srv6)#


**Removing Configuration**

To remove locator configuration
::

    dnRouter(cfg-inst-tp-srv6)# no locator

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/transport-protocol/srv6/srv6.rst

network-services evpn-vpws instance transport-protocol srv6
-----------------------------------------------------------

**Minimum user role:** operator

Enter the SRV6 Transport hierarchy to configure the relevant options - locator name.

**Command syntax: srv6**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)# srv6
    dnRouter(cfg-inst-tp-srv6)#


**Removing Configuration**

To remove the srv6 definition
::

    dnRouter(cfg-evpn-vpws-inst-tp)# no srv6

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.3    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/transport-protocol/transport-protocol.rst

network-services evpn-vpws instance transport-protocol
------------------------------------------------------

**Minimum user role:** operator

The transport-protocol should be set to MPLS.

**Command syntax: transport-protocol**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance

**Example**
::

    dnRouter#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# transport-protocol
    dnRouter(cfg-evpn-vpws-inst-tp)#


**Removing Configuration**

To remove transport-protocol definitions - reverting them to their default values.
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no transport-protocol

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/instance/vpws-service-id.rst

network-services evpn-vpws instance vpws-service-id local remote
----------------------------------------------------------------

**Minimum user role:** operator

The local and remote VPWS Service IDs are a mandatory configuration. Changing their values will result in service interruption.

**Command syntax: vpws-service-id local [local-vpws-service-id] remote [remote-vpws-service-id]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws instance

**Note**

- The reconfiguration of the VPWS service IDs causes the Pseudowire to flap.

- The VPWS Service ID and neighbor-address & Ethernet Segment ID must be unique across all L2VPN services.

**Parameter table**

+------------------------+--------------------------------------+------------+---------+
| Parameter              | Description                          | Range      | Default |
+========================+======================================+============+=========+
| local-vpws-service-id  | The vpws-service-id of the local PE  | 1-16777215 | \-      |
+------------------------+--------------------------------------+------------+---------+
| remote-vpws-service-id | The vpws-service-id of the remote PE | 1-16777215 | \-      |
+------------------------+--------------------------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# instance evpn-vpws1
    dnRouter(cfg-netsrv-evpn-vpws-inst)# vpws-service-id local 1000 remote 5000
    dnRouter(cfg-netsrv-evpn-vpws-inst)#


**Removing Configuration**

To remove the vpws-service-id
::

    dnRouter(cfg-netsrv-evpn-vpws-inst)# no vpws-service-id

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/l2-mtu.rst

network-services evpn-vpws l2-mtu
---------------------------------

**Minimum user role:** operator

Configure the default (can be modified per instance) MTU value to be sent (signaled) in the BGP, which must be identical with the peer value. If zero is used no mtu check is carried out.

**Command syntax: l2-mtu [l2-mtu]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws

**Note**

- The reconfiguration of Pseudowire MTU causes the Pseudowire to flap.

**Parameter table**

+-----------+---------------------------------+--------------+---------+
| Parameter | Description                     | Range        | Default |
+===========+=================================+==============+=========+
| l2-mtu    | MTU value to be signaled in BGP | 0, 1514-9300 | 0       |
+-----------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# evpn-vpws
    dnRouter(cfg-network-services-evpn-vpws)# l2-mtu 2000
    dnRouter(cfg-network-services-evpn-vpws)#


**Removing Configuration**

To revert the MTU to the default value:
::

    dnRouter(cfg-network-services-evpn-vpws)# no mtu

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/transport-protocol/mpls/control-word.rst

network-services evpn-vpws transport-protocol mpls control-word
---------------------------------------------------------------

**Minimum user role:** operator

Define the MPLS control word option. The Control-word is always zero when enabled and is used as a marker to identify between the inner layer 2 packet and the layer 3 encapsulation. The Control-word is only used with MPLS.

**Command syntax: control-word [control-word]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws transport-protocol mpls

**Parameter table**

+--------------+---------------------------------+--------------+---------+
| Parameter    | Description                     | Range        | Default |
+==============+=================================+==============+=========+
| control-word | Set control-word usage for evpn | | enabled    | enabled |
|              |                                 | | disabled   |         |
+--------------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# transport-protocol
    dnRouter(cfg-netsrv-evpn-vpws-tp)# mpls
    dnRouter(cfg-netsrv-evpn-vpws-tp-mpls)# control-word disabled
    dnRouter(cfg-netsrv-evpn-vpws-tp-mpls)#


**Removing Configuration**

To revert control-word to default:
::

    dnRouter(cfg-netsrv-evpn-vpws-tp-mpls)# no control-word

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/transport-protocol/mpls/fat-label.rst

network-services evpn-vpws transport-protocol mpls fat-label
------------------------------------------------------------

**Minimum user role:** operator

Flow Aware Transport (FAT) label is an identifier used to load balance packets as they pass through the network. The first PE device looks into the inner packet and calculates a hash, the FAT label. As the packet passes through the intermediate routers the FAT label is considered for load-balancing decisions. All packets of the same flow will result in the same FAT label and are sent on the same path.

**Command syntax: fat-label [fat-label]**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws transport-protocol mpls

**Parameter table**

+-----------+----------------------------------+--------------+----------+
| Parameter | Description                      | Range        | Default  |
+===========+==================================+==============+==========+
| fat-label | Define Requested FAT Label Usage | | enabled    | disabled |
|           |                                  | | disabled   |          |
+-----------+----------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# transport-protocol
    dnRouter(cfg-netsrv-evpn-vpws-tp)# mpls
    dnRouter(cfg-netsrv-evpn-vpws-tp-mpls)# fat-label enabled
    dnRouter(cfg-netsrv-evpn-vpws-tp-mpls)#


**Removing Configuration**

To revert fat-label to default:
::

    dnRouter(cfg-netsrv-evpn-vpws-tp-mpls)# no fat-label

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/transport-protocol/mpls/mpls.rst

network-services evpn-vpws transport-protocol mpls
--------------------------------------------------

**Minimum user role:** operator

Define the MPLS Transport and the relevant options - control word and fat-label.

**Command syntax: mpls**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# transport-protocol
    dnRouter(cfg-netsrv-evpn-vpws-tp)# mpls
    dnRouter(cfg-netsrv-evpn-vpws-tp-mpls)#


**Removing Configuration**

To remove the mpls definition
::

    dnRouter(cfg-evpn-vpws-tp)# no mpls

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn-vpws/transport-protocol/transport-protocol.rst

network-services evpn-vpws transport-protocol
---------------------------------------------

**Minimum user role:** operator

The transport-protocol should be set to MPLS.

**Command syntax: transport-protocol**

**Command mode:** config

**Hierarchies**

- network-services evpn-vpws

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn-vpws
    dnRouter(cfg-netsrv-evpn-vpws)# transport-protocol
    dnRouter(cfg-netsrv-evpn-vpws-tp)#


**Removing Configuration**

To remove transport-protocol definitions - reverting then to their default values.
::

    dnRouter(cfg-netsrv-evpn-vpws)# no transport-protocol

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn/counters/counters.rst

network-services evpn counters
------------------------------

**Minimum user role:** operator

Defines whether counters should be allocated for the EVPN service instances by default. 

**Command syntax: counters**

**Command mode:** config

**Hierarchies**

- network-services evpn

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# counters
    dnRouter(cfg-netsrv-evpn-counters)


**Removing Configuration**

To remove all global storm control configurations
::

    dnRouter(cfg-netsrv-evpn)# no counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## evpn/counters/service-counters.rst

network-services evpn counters service-counters
-----------------------------------------------

**Minimum user role:** operator

Service-counters enabled is the default setting for EVPN services.
By disabling this knob, service-counters will be disabled for all EVPN instances, that do not have a per-instance configuration.

**Command syntax: service-counters [service-counters]**

**Command mode:** config

**Hierarchies**

- network-services evpn counters

**Parameter table**

+------------------+-----------------------------------------------------------------------+--------------+----------+
| Parameter        | Description                                                           | Range        | Default  |
+==================+=======================================================================+==============+==========+
| service-counters | Define whether service-counters should be allocated for EVPN services | | enabled    | disabled |
|                  |                                                                       | | disabled   |          |
+------------------+-----------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# counters
    dnRouter(cfg-netsrv-evpn-counters) service-counters disabled


**Removing Configuration**

To revert the service-counters configuration to its default value
::

    no service-counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## evpn/evpn.rst

network-services evpn
---------------------

**Minimum user role:** operator

EVPN (Ethernet Virtual Private Network) is a layer 2 VPN service that connects layer2 interface(s) of one PE with the layer 2 interface(s) of other PEs, across the layer 3 core MPLS network. The EVPN service uses an MPLS or VxLAN transport layer and a BGP control layer.

To enter the EVPN service configuration mode:

**Command syntax: evpn**

**Command mode:** config

**Hierarchies**

- network-services

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# evpn
    dnRouter(cfg-network-services-evpn)#


**Removing Configuration**

To remove all EVPN services:
::

    dnRouter(cfg-network-services)# no evpn

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/counters/counters.rst

network-services evpn instance counters
---------------------------------------

**Minimum user role:** operator

Defines whether counters should be allocated for this EVPN instance. 

**Command syntax: counters**

**Command mode:** config

**Hierarchies**

- network-services evpn instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# counters
    dnRouter(cfg-evpn-inst-counters)#


**Removing Configuration**

To remove counter configurations for this instance
::

    dnRouter(cfg-netsrv-evpn-inst)# no counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## evpn/instance/counters/service-counters.rst

network-services evpn instance counters service-counters
--------------------------------------------------------

**Minimum user role:** operator

The Service-counters global setting defines the default setting for EVPN services.
This knob, specifies whether service-counters will be alloocated for this EVPN instance.

**Command syntax: service-counters [service-counters]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance counters

**Parameter table**

+------------------+---------------------------------------------------------------------------+--------------+---------+
| Parameter        | Description                                                               | Range        | Default |
+==================+===========================================================================+==============+=========+
| service-counters | Define whether service-counters should be allocated for this EVPN service | | enabled    | \-      |
|                  |                                                                           | | disabled   |         |
+------------------+---------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# counters
    dnRouter(cfg-evpn-inst-counters)# service-counters disabled


**Removing Configuration**

To revert the service-counters configuration to the evpn global default value
::

    dnRouter(cfg-evpn-inst-counters)# no service-counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## evpn/instance/counters/vtep-counter.rst

network-services evpn instance counters vtep-counters
-----------------------------------------------------

**Minimum user role:** operator

VTEP counters support traffic statistics for a given vxlan tunnel in a given service, both Rx and Tx.
The vxlan tunnel is identified by remote PE address in the context of a given evpn instance.
A local system unique identifier is allocated per VTEP. 
To configure VTEP counters: 

**Command syntax: vtep-counters [vtep-counters]** [, vtep-counters, vtep-counters]

**Command mode:** config

**Hierarchies**

- network-services evpn instance counters

**Note**
- vtep-counter can be configured only when service transport-protocol is vxlan
- Counters will be allocated only per system available HW resources, commit validation expected if no resource available 
- Counter resource is allocated regardless if VxLAN tunnel to remote PE exist or not.
- Tx statistics: byte&pkt counter for traffic sent to VxLAN tunnel in given service
- Rx statistics: byte&pkt counter for  traffic received from VxLAN tunnel in given service
- Counters are reset in case VTEP is withdrawn 

**Parameter table**

+---------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter     | Description                                                                      | Range        | Default |
+===============+==================================================================================+==============+=========+
| vtep-counters | Configure remote PE address to enable VxLAN VTEP Rx & Tx Byte & Pkt counters in  | | A.B.C.D    | \-      |
|               | case a VxLAN tunnel is formed with that PE in the context of the service         | | X:X::X:X   |         |
+---------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# counters
    dnRouter(cfg-evpn-inst-counters)# vtep-counters 1.1.1.1
    dnRouter(cfg-evpn-inst-counters)# vtep-counters 2.2.2.2, 3.3.3.3


**Removing Configuration**

To remove vtep counter requirement for a given remote address
::

    dnRouter(cfg-evpn-inst-counters)# no vtep-counters 2.2.2.2

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/description.rst

network-services evpn instance description
------------------------------------------

**Minimum user role:** operator

To add an optional description of the L2VPN EVPN:

**Command syntax: description [description]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance

**Parameter table**

+-------------+------------------+------------------+---------+
| Parameter   | Description      | Range            | Default |
+=============+==================+==================+=========+
| description | evpn description | | string         | \-      |
|             |                  | | length 1-255   |         |
+-------------+------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# description "my evpn service"
    dnRouter(cfg-netsrv-evpn-inst)#


**Removing Configuration**

To remove description
::

    dnRouter(cfg-netsrv-evpn-inst)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/e-tree-leaf.rst

network-services evpn instance e-tree-leaf
------------------------------------------

**Minimum user role:** operator

An e-tree-leaf is not defined or disabled as the default setting for all evpn instances that are created.  
By defining this knob, the e-tree-leaf is enabled, and all interfaces associated with this EVPN instance will by default be defined as leaf interfaces
(unless configured otherwise per AC) and any traffic will need to be forwarded to root ACs.

**Command syntax: e-tree-leaf**

**Command mode:** config

**Hierarchies**

- network-services evpn instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# e-tree-leaf
    dnRouter(cfg-netsrv-evpn-inst)#


**Removing Configuration**

To revert the e-tree-leaf configuration to its default of root
::

    dnRouter(cfg-netsrv-evpn-inst)# no e-tree-leaf

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## evpn/instance/evpn-protocols/bgp/bgp.rst

network-services evpn instance protocols bgp
--------------------------------------------

**Minimum user role:** operator

To start the BGP process:

**Command syntax: bgp [as-number]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance protocols
- network-services evpn instance interconnect protocols

**Note**

- The AS-number cannot be changed. To change it, you need to delete the BGP protocol configuration and configure a new process with a different AS-number.

- Notice the change in prompt.

**Parameter table**

+-----------+------------------------+--------------+---------+
| Parameter | Description            | Range        | Default |
+===========+========================+==============+=========+
| as-number | peer-group unique name | 1-4294967295 | \-      |
+-----------+------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp-services
    dnRouter(cfg-inst-protocols-bgps)# bgp 65000
    dnRouter(cfg-protocols-bgps-bgp)#


**Removing Configuration**

To disable the BGP process:
::

    dnRouter(cfg-inst-protocols-bgps)# no bgp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/evpn-protocols/bgp/export-l2vpn-evpn-policy.rst

network-services evpn instance protocols bgp export-l2vpn-evpn policy
---------------------------------------------------------------------

**Minimum user role:** operator

To export routes according to route policy definition:

**Command syntax: export-l2vpn-evpn policy [export-l2vpn-evpn-policy]** [, export-l2vpn-evpn-policy, export-l2vpn-evpn-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn instance protocols bgp
- network-services evpn instance interconnect protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| export-l2vpn-evpn-policy | Enable export of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# export-l2vpn-evpn policy L2_VPN_EXP_POL1, L2_EXP_IMP_POL2
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-evpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/evpn-protocols/bgp/export-l2vpn-evpn-route-target.rst

network-services evpn instance protocols bgp export-l2vpn-evpn route-target
---------------------------------------------------------------------------

**Minimum user role:** operator

To export routes with the route-target tag:

**Command syntax: export-l2vpn-evpn route-target [export-l2vpn-evpn-route-target]** [, export-l2vpn-evpn-route-target, export-l2vpn-evpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn instance protocols bgp
- network-services evpn instance interconnect protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------+-------+---------+
| Parameter                      | Description                                   | Range | Default |
+================================+===============================================+=======+=========+
| export-l2vpn-evpn-route-target | Enable export of routes with route-target tag | \-    | \-      |
+--------------------------------+-----------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# evpn-protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# export-l2vpn-evpn route-target 49844:20, 49844:30
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-evpn route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/evpn-protocols/bgp/import-l2vpn-evpn-policy.rst

network-services evpn instance protocols bgp import-l2vpn-evpn policy
---------------------------------------------------------------------

**Minimum user role:** operator

To import routes according to route policy definition:

**Command syntax: import-l2vpn-evpn policy [import-l2vpn-evpn-policy]** [, import-l2vpn-evpn-policy, import-l2vpn-evpn-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn instance protocols bgp
- network-services evpn instance interconnect protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| import-l2vpn-evpn-policy | Enable import of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# evpn-protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# import-l2vpn-evpn policy L2_VPN_IMP_POL1, L2_VPN_IMP_POL2
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-evpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/evpn-protocols/bgp/import-l2vpn-evpn-route-target.rst

network-services evpn instance protocols bgp import-l2vpn-evpn route-target
---------------------------------------------------------------------------

**Minimum user role:** operator

To import BGP routes with the route-target specified into the L2VPN-EVPN service.

**Command syntax: import-l2vpn-evpn route-target [import-l2vpn-evpn-route-target]** [, import-l2vpn-evpn-route-target, import-l2vpn-evpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn instance protocols bgp
- network-services evpn instance interconnect protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------------------------------+-------+---------+
| Parameter                      | Description                                                           | Range | Default |
+================================+=======================================================================+=======+=========+
| import-l2vpn-evpn-route-target | Enable import of routes with route-target specified to the vrf tables | \-    | \-      |
+--------------------------------+-----------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# evpn-protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# import-l2vpn-evpn route-target 49844:20, 49844:30
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop importing routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-evpn route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/evpn-protocols/bgp/maximum-paths_ebgp.rst

network-services evpn instance protocols bgp maximum-paths ebgp
---------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple equal cost paths in the routing table, when some paths are eBGP and others are iBGP:

**Command syntax: maximum-paths ebgp [ebgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance protocols bgp
- network-services evpn instance interconnect protocols bgp

**Note**

- BGP will only advertise one best path to its eBGP neighbors.

- This command is relevant only to unicast and multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

- ECMP between eBGP and iBGP paths are only possible if all paths are imported from other VRFs.

**Parameter table**

+--------------------+-------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                             | Range | Default |
+====================+=========================================================================+=======+=========+
| ebgp-maximum-paths | Maximum number of parallel paths to consider when using eBGP multipath. | 1-32  | 16      |
+--------------------+-------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ebgp 5

    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ebgp 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast

::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths ebgp

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 6.0     | Command introduced                                  |
+---------+-----------------------------------------------------+
| 13.1    | Updated maximum-paths value to 32                   |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+
| 25.3    | Changed default value to 16 for EVPN instances      |
+---------+-----------------------------------------------------+

---

## evpn/instance/evpn-protocols/bgp/maximum-paths_ibgp.rst

network-services evpn instance protocols bgp maximum-paths ibgp
---------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple paths in the routing table:

**Command syntax: maximum-paths ibgp [ibgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance protocols bgp
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-vpn
- protocols bgp address-family ipv6-vpn
- network-services vrf instance protocols bgp address-family ipv4-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast
- network-services evpn instance interconnect protocols bgp
- network-services evpn-vpws instance protocols bgp

**Note**

- This command is relevant only to unicast and multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

**Parameter table**

+--------------------+-------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                             | Range | Default |
+====================+=========================================================================+=======+=========+
| ibgp-maximum-paths | Maximum number of parallel paths to consider when using iBGP multipath. | 1-32  | 16      |
+--------------------+-------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ibgp 5

    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ibgp 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast

::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths ibgp

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 6.0     | Command introduced                                  |
+---------+-----------------------------------------------------+
| 13.1    | Updated maximum-paths value to 32                   |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+

---

## evpn/instance/evpn-protocols/bgp/route-distinguisher.rst

network-services evpn instance protocols bgp route-distinguisher
----------------------------------------------------------------

**Minimum user role:** operator

To configure the route-distinguisher to enable the EVPN to use a L2VPN service.

**Command syntax: route-distinguisher [route-distinguisher]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance protocols bgp
- network-services evpn instance interconnect protocols bgp

**Note**

- The route-distinguisher must be unique amongst EVPN services, including interconnect, it may be identical to an RD of a VPN service

- Reconfiguring the route-distinguisher causes all routes to be withdrawn from the EVPN peers in the EVPN safi, and then to be re-advertised with an updated route-distinguisher.

- When set to auto, the system will generate a route-distinguisher in format <router-id>:<16bit>, BGP router-id must be configured and 16 bits are randomnly chosen.

- User cannot configure route-distinguisher value that matches a different route-distinguisher, regardless of how the route-distinguisher was generated (manual/auto).

**Parameter table**

+---------------------+-------------------------------------------------------------+-------+---------+
| Parameter           | Description                                                 | Range | Default |
+=====================+=============================================================+=======+=========+
| route-distinguisher | the route distinguisher for BGP as part of the EVPN service | \-    | \-      |
+---------------------+-------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# evpn-protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To remove the route-distinguisher:
::

    dnRouter(cfg-inst-protocols-bgp)# no route-distinguisher

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+
| 19.1    | Add auto option    |
+---------+--------------------+

---

## evpn/instance/evpn-protocols/evpn-protocols.rst

network-services evpn instance protocols
----------------------------------------

**Minimum user role:** operator

Enter the protocols hierarchy to modify the attributes for this EVPN instance.

**Command syntax: protocols**

**Command mode:** config

**Hierarchies**

- network-services evpn instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# protocols
    dnRouter(cfg-evpn-inst-protocols)#


**Removing Configuration**

To revert the protocols configuration to default:
::

    dnRouter(cfg-netsrv-evpn-inst)# no protocols

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/instance.rst

network-services evpn instance
------------------------------

**Minimum user role:** operator

Configure a L2VPN EVPN instance

**Command syntax: instance [evpn-name]**

**Command mode:** config

**Hierarchies**

- network-services evpn

**Note**

- The EVPN instance must use a unique name.

**Parameter table**

+-----------+----------------------------------------------------------+------------------+---------+
| Parameter | Description                                              | Range            | Default |
+===========+==========================================================+==================+=========+
| evpn-name | The name of the evpn -- used to address the evpn service | | string         | \-      |
|           |                                                          | | length 1-255   |         |
+-----------+----------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)#


**Removing Configuration**

To revert the specified EVPN instance to default:
::

    dnRouter(cfg-netsrv-evpn-inst)# no instance evpn1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/counters/counters.rst

network-services evpn instance interconnect counters
----------------------------------------------------

**Minimum user role:** operator

Defines whether counters should be allocated for this EVPN service instance. 

**Command syntax: counters**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# counters
    dnRouter(cfg-inst-ic-counters)#


**Removing Configuration**

To remove counter configurations for this instance
::

    dnRouter(cfg-evpn-inst-ic)# no counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/counters/service-counters.rst

network-services evpn instance interconnect counters service-counters
---------------------------------------------------------------------

**Minimum user role:** operator

The Service-counters global setting defines the default setting for EVPN services.
This knob specifies whether service-counters will be alloocated for this EVPN instance.

**Command syntax: service-counters [service-counters]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect counters

**Parameter table**

+------------------+---------------------------------------------------------------------------+--------------+---------+
| Parameter        | Description                                                               | Range        | Default |
+==================+===========================================================================+==============+=========+
| service-counters | Define whether service-counters should be allocated for this EVPN service | | enabled    | \-      |
|                  |                                                                           | | disabled   |         |
+------------------+---------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# counters
    dnRouter(cfg-inst-ic-counters)# service-counters disabled


**Removing Configuration**

To revert the service-counters configuration to the evpn global default value
::

    dnRouter(cfg-inst-ic-counters)# no service-counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/counters/vtep-counter.rst

network-services evpn instance interconnect counters vtep-counters
------------------------------------------------------------------

**Minimum user role:** operator

VTEP counters support traffic statistics for a given vxlan tunnel in a given service, both Rx and Tx.
The vxlan tunnel is identified by remote PE address in the context of a given evpn instance.
A local system unique identifier is allocated per VTEP. 
To configure VTEP counters: 

**Command syntax: vtep-counters [vtep-counters]** [, vtep-counters, vtep-counters]

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect counters

**Note**
- vtep-counters can be configured only when service transport-protocol is vxlan
- Counters will be allocated only per system available HW resources; commit validation is expected if no resource is available 
- Counter resource is allocated regardless if VxLAN tunnel to remote PE exists or not.
- Tx statistics: byte&pkt counter for traffic sent to VxLAN tunnel in given service
- Rx statistics: byte&pkt counter for traffic received from VxLAN tunnel in given service
- Counters are reset in case VTEP is withdrawn. 

**Parameter table**

+---------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter     | Description                                                                      | Range        | Default |
+===============+==================================================================================+==============+=========+
| vtep-counters | Configure remote PE address to enable VxLAN VTEP Rx & Tx Byte & Pkt counters in  | | A.B.C.D    | \-      |
|               | case a VxLAN tunnel is formed with that PE in the context of the service         | | X:X::X:X   |         |
+---------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# counters
    dnRouter(cfg-inst-ic-counters)# vtep-counters 1.1.1.1
    dnRouter(cfg-inst-ic-counters)# vtep-counters 2.2.2.2, 3.3.3.3


**Removing Configuration**

To remove vtep counter requirement for a given remote address
::

    dnRouter(cfg-inst-ic-counters)# no vtep-counters 2.2.2.2

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/interconnect-protocols/bgp/bgp.rst

network-services evpn instance interconnect protocols bgp
---------------------------------------------------------

**Minimum user role:** operator

To start the BGP process:

**Command syntax: bgp [as-number]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols
- network-services evpn instance protocols

**Note**

- The AS-number cannot be changed. To change it, you need to delete the BGP protocol configuration and configure a new process with a different AS-number.

- Notice the change in prompt.

**Parameter table**

+-----------+------------------------+--------------+---------+
| Parameter | Description            | Range        | Default |
+===========+========================+==============+=========+
| as-number | peer-group unique name | 1-4294967295 | \-      |
+-----------+------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp-services
    dnRouter(cfg-inst-protocols-bgps)# bgp 65000
    dnRouter(cfg-protocols-bgps-bgp)#


**Removing Configuration**

To disable the BGP process:
::

    dnRouter(cfg-inst-protocols-bgps)# no bgp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/interconnect-protocols/bgp/export-l2vpn-evpn-policy.rst

network-services evpn instance interconnect protocols bgp export-l2vpn-evpn policy
----------------------------------------------------------------------------------

**Minimum user role:** operator

To export routes according to route policy definition:

**Command syntax: export-l2vpn-evpn policy [export-l2vpn-evpn-policy]** [, export-l2vpn-evpn-policy, export-l2vpn-evpn-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- network-services evpn instance protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| export-l2vpn-evpn-policy | Enable export of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# evpn-protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# export-l2vpn-evpn policy L2_VPN_EXP_POL1, L2_EXP_IMP_POL2
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-evpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/interconnect-protocols/bgp/export-l2vpn-evpn-route-target.rst

network-services evpn instance interconnect protocols bgp export-l2vpn-evpn route-target
----------------------------------------------------------------------------------------

**Minimum user role:** operator

To export routes with the route-target tag:

**Command syntax: export-l2vpn-evpn route-target [export-l2vpn-evpn-route-target]** [, export-l2vpn-evpn-route-target, export-l2vpn-evpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- network-services evpn instance protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------+-------+---------+
| Parameter                      | Description                                   | Range | Default |
+================================+===============================================+=======+=========+
| export-l2vpn-evpn-route-target | Enable export of routes with route-target tag | \-    | \-      |
+--------------------------------+-----------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# evpn-protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# export-l2vpn-evpn route-target 49844:20, 49844:30
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-evpn route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/interconnect-protocols/bgp/import-l2vpn-evpn-policy.rst

network-services evpn instance interconnect protocols bgp import-l2vpn-evpn policy
----------------------------------------------------------------------------------

**Minimum user role:** operator

To import routes according to route policy definition:

**Command syntax: import-l2vpn-evpn policy [import-l2vpn-evpn-policy]** [, import-l2vpn-evpn-policy, import-l2vpn-evpn-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- network-services evpn instance protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| import-l2vpn-evpn-policy | Enable import of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# evpn-protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# import-l2vpn-evpn policy L2_VPN_IMP_POL1, L2_VPN_IMP_POL2
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-evpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/interconnect-protocols/bgp/import-l2vpn-evpn-route-target.rst

network-services evpn instance interconnect protocols bgp import-l2vpn-evpn route-target
----------------------------------------------------------------------------------------

**Minimum user role:** operator

To import BGP routes with the route-target specified into the L2VPN-EVPN service.

**Command syntax: import-l2vpn-evpn route-target [import-l2vpn-evpn-route-target]** [, import-l2vpn-evpn-route-target, import-l2vpn-evpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- network-services evpn instance protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------------------------------+-------+---------+
| Parameter                      | Description                                                           | Range | Default |
+================================+=======================================================================+=======+=========+
| import-l2vpn-evpn-route-target | Enable import of routes with route-target specified to the vrf tables | \-    | \-      |
+--------------------------------+-----------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# evpn-protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# import-l2vpn-evpn route-target 49844:20, 49844:30
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop importing routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-evpn route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/interconnect-protocols/bgp/maximum-paths_ebgp.rst

network-services evpn instance interconnect protocols bgp maximum-paths ebgp
----------------------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple equal cost paths in the routing table, when some paths are eBGP and others are iBGP:

**Command syntax: maximum-paths ebgp [ebgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- network-services evpn instance protocols bgp

**Note**

- BGP will only advertise one best path to its eBGP neighbors.

- This command is relevant only to unicast and multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

- ECMP between eBGP and iBGP paths are only possible if all paths are imported from other VRFs.

**Parameter table**

+--------------------+-------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                             | Range | Default |
+====================+=========================================================================+=======+=========+
| ebgp-maximum-paths | Maximum number of parallel paths to consider when using eBGP multipath. | 1-32  | 16      |
+--------------------+-------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ebgp 5

    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ebgp 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast

::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths ebgp

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 6.0     | Command introduced                                  |
+---------+-----------------------------------------------------+
| 13.1    | Updated maximum-paths value to 32                   |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+
| 25.3    | Changed default value to 16 for EVPN instances      |
+---------+-----------------------------------------------------+

---

## evpn/instance/interconnect/interconnect-protocols/bgp/maximum-paths_ibgp.rst

network-services evpn instance interconnect protocols bgp maximum-paths ibgp
----------------------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple paths in the routing table:

**Command syntax: maximum-paths ibgp [ibgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-vpn
- protocols bgp address-family ipv6-vpn
- network-services vrf instance protocols bgp address-family ipv4-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast
- network-services evpn instance protocols bgp
- network-services evpn-vpws instance protocols bgp

**Note**

- This command is relevant only to unicast and multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

**Parameter table**

+--------------------+-------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                             | Range | Default |
+====================+=========================================================================+=======+=========+
| ibgp-maximum-paths | Maximum number of parallel paths to consider when using iBGP multipath. | 1-32  | 16      |
+--------------------+-------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ibgp 5

    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ibgp 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast

::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths ibgp

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 6.0     | Command introduced                                  |
+---------+-----------------------------------------------------+
| 13.1    | Updated maximum-paths value to 32                   |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+

---

## evpn/instance/interconnect/interconnect-protocols/bgp/route-distinguisher.rst

network-services evpn instance interconnect protocols bgp route-distinguisher
-----------------------------------------------------------------------------

**Minimum user role:** operator

To configure the route-distinguisher to enable the EVPN to use a L2VPN service.

**Command syntax: route-distinguisher [route-distinguisher]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- network-services evpn instance protocols bgp

**Note**

- The route-distinguisher must be unique amongst EVPN services, including interconnect, it may be identical to an RD of a VPN service

- Reconfiguring the route-distinguisher causes all routes to be withdrawn from the EVPN peers in the EVPN safi, and then to be re-advertised with an updated route-distinguisher.

- When set to auto, system will generate route-distinguisher in format <router-id>:<16bit>, BGP router-id must be configured and 16 bit are randomnly choosen.

- User cannot configure route-distinguisher value that match a different route-distinguisher regardless how route-distinguisher was generated (manual/auto)

**Parameter table**

+---------------------+-------------------------------------------------------------+-------+---------+
| Parameter           | Description                                                 | Range | Default |
+=====================+=============================================================+=======+=========+
| route-distinguisher | the route distinguisher for BGP as part of the EVPN service | \-    | \-      |
+---------------------+-------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# evpn-protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To remove the route-distinguisher:
::

    dnRouter(cfg-inst-protocols-bgp)# no route-distinguisher

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+
| 19.3    | Add auto option    |
+---------+--------------------+

---

## evpn/instance/interconnect/interconnect-protocols/interconnect-protocols.rst

network-services evpn instance interconnect protocols
-----------------------------------------------------

**Minimum user role:** operator

Enter the protocols hierarchy to modify the attributes for this EVPN instance.

**Command syntax: protocols**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# protocols
    dnRouter(cfg-inst-ic-protocols)#


**Removing Configuration**

To revert the protocols configuration to default:
::

    dnRouter(cfg-inst-ic-protocols)# no protocols

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/interconnect.rst

network-services evpn instance interconnect
-------------------------------------------

**Minimum user role:** operator

Interconnect service allows to stitch, in Layer 2, between two EVPN domains under a single EVI. 
A possible use case is to stitch between EVPN-VxLAN domain and EVPN-MPLS domain and consolidate them under a single EVPN service (EVI) sharing same local MAC table, while some remote PEs are mpls reachable and others are vxlan reachable
Traffic between the two domains is gained according to local mac lookup table, for example, ingress vxlan service traffic is terminated locally and per mac lookup will be forwarded to remote PE via mpls service label and mpls transport
Split-horizon is enforced only in the scope of a given domain.
To enter interconnect service configuration level:

**Command syntax: interconnect**

**Command mode:** config

**Hierarchies**

- network-services evpn instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)#


**Removing Configuration**

To remove all interconnect configuration
::

    dnRouter(cfg-evpn-inst)# no interconnect

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/protocols/bgp/bgp.rst

network-services evpn instance interconnect protocols bgp
---------------------------------------------------------

**Minimum user role:** operator

To start the BGP process:

**Command syntax: bgp [as-number]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols
- network-services evpn instance protocols

**Note**

- The AS-number cannot be changed. To change it, you need to delete the BGP protocol configuration and configure a new process with a different AS-number.

- Notice the change in prompt.

**Parameter table**

+-----------+------------------------+--------------+---------+
| Parameter | Description            | Range        | Default |
+===========+========================+==============+=========+
| as-number | peer-group unique name | 1-4294967295 | \-      |
+-----------+------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp-services
    dnRouter(cfg-inst-protocols-bgps)# bgp 65000
    dnRouter(cfg-protocols-bgps-bgp)#


**Removing Configuration**

To disable the BGP process:
::

    dnRouter(cfg-inst-protocols-bgps)# no bgp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/protocols/bgp/export-l2vpn-evpn-policy.rst

network-services evpn instance interconnect protocols bgp export-l2vpn-evpn policy
----------------------------------------------------------------------------------

**Minimum user role:** operator

To export routes according to route policy definition:

**Command syntax: export-l2vpn-evpn policy [export-l2vpn-evpn-policy]** [, export-l2vpn-evpn-policy, export-l2vpn-evpn-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- network-services evpn instance protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+----------------+---------+
| Parameter                | Description                                                                | Range          | Default |
+==========================+============================================================================+================+=========+
| export-l2vpn-evpn-policy | Enable export of excommunity routes which comply with the specified policy | string         | \-      |
|                          |                                                                            | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+----------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# protocols
    dnRouter(cfg-inst-ic-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# export-l2vpn-evpn policy L2_VPN_EXP_POL1, L2_EXP_IMP_POL2
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-evpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/protocols/bgp/export-l2vpn-evpn-route-target.rst

network-services evpn instance interconnect protocols bgp export-l2vpn-evpn route-target
----------------------------------------------------------------------------------------

**Minimum user role:** operator

To export routes with the route-target tag:

**Command syntax: export-l2vpn-evpn route-target [export-l2vpn-evpn-route-target]** [, export-l2vpn-evpn-route-target, export-l2vpn-evpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- network-services evpn instance protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------+-------+---------+
| Parameter                      | Description                                   | Range | Default |
+================================+===============================================+=======+=========+
| export-l2vpn-evpn-route-target | Enable export of routes with route-target tag | \-    | \-      |
+--------------------------------+-----------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# export-l2vpn-evpn route-target 49844:20, 49844:30
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no export-l2vpn-evpn route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/protocols/bgp/import-l2vpn-evpn-policy.rst

network-services evpn instance interconnect protocols bgp import-l2vpn-evpn policy
----------------------------------------------------------------------------------

**Minimum user role:** operator

To import routes according to route policy definition:

**Command syntax: import-l2vpn-evpn policy [import-l2vpn-evpn-policy]** [, import-l2vpn-evpn-policy, import-l2vpn-evpn-policy]

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- network-services evpn instance protocols bgp

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+----------------+---------+
| Parameter                | Description                                                                | Range          | Default |
+==========================+============================================================================+================+=========+
| import-l2vpn-evpn-policy | Enable import of excommunity routes which comply with the specified policy | string         | \-      |
|                          |                                                                            | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+----------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# evpn-protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# import-l2vpn-evpn policy L2_VPN_IMP_POL1, L2_VPN_IMP_POL2
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop exporting routes with policy:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-evpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/protocols/bgp/import-l2vpn-evpn-route-target.rst

network-services evpn instance interconnect protocols bgp import-l2vpn-evpn route-target
----------------------------------------------------------------------------------------

**Minimum user role:** operator

To import BGP routes with the route-target specified into the L2VPN-EVPN service.

**Command syntax: import-l2vpn-evpn route-target [import-l2vpn-evpn-route-target]** [, import-l2vpn-evpn-route-target, import-l2vpn-evpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- network-services evpn instance protocols bgp

**Parameter table**

+--------------------------------+-----------------------------------------------------------------------+-------+---------+
| Parameter                      | Description                                                           | Range | Default |
+================================+=======================================================================+=======+=========+
| import-l2vpn-evpn-route-target | Enable import of routes with route-target specified to the vrf tables | \-    | \-      |
+--------------------------------+-----------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# evpn-protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# import-l2vpn-evpn route-target 49844:20, 49844:30
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To stop importing routes with the specified route-target:
::

    dnRouter(cfg-inst-protocols-bgp)# no import-l2vpn-evpn route-target 49844:30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/protocols/bgp/maximum-paths_ebgp.rst

network-services evpn instance interconnect protocols bgp maximum-paths ebgp
----------------------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple equal cost paths in the routing table, when some paths are eBGP and others are iBGP:

**Command syntax: maximum-paths ebgp [ebgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- network-services evpn instance protocols bgp

**Note**

- BGP will only advertise one best path to its eBGP neighbors.

- This command is relevant only to unicast and multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

- ECMP between eBGP and iBGP paths are only possible if all paths are imported from other VRFs.

**Parameter table**

+--------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                                      | Range | Default |
+====================+==================================================================================+=======+=========+
| ebgp-maximum-paths | Maximum number of parallel paths to consider when using eBGP multipath. The      | 1-32  | 1       |
|                    | default is to use a single path                                                  |       |         |
+--------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ebgp 5

    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ebgp 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast

::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths ebgp

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 6.0     | Command introduced                                  |
+---------+-----------------------------------------------------+
| 13.1    | Updated maximum-paths value to 32                   |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+

---

## evpn/instance/interconnect/protocols/bgp/maximum-paths_ibgp.rst

network-services evpn instance interconnect protocols bgp maximum-paths ibgp
----------------------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple paths in the routing table:

**Command syntax: maximum-paths ibgp [ibgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-vpn
- protocols bgp address-family ipv6-vpn
- network-services vrf instance protocols bgp address-family ipv4-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast
- network-services evpn instance protocols bgp
- network-services evpn-vpws instance protocols bgp

**Note**

- This command is relevant only to unicast and multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

**Parameter table**

+--------------------+-------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                             | Range | Default |
+====================+=========================================================================+=======+=========+
| ibgp-maximum-paths | Maximum number of parallel paths to consider when using iBGP multipath. | 1-32  | 16      |
+--------------------+-------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ibgp 5

    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ibgp 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast

::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths ibgp

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 6.0     | Command introduced                                  |
+---------+-----------------------------------------------------+
| 13.1    | Updated maximum-paths value to 32                   |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+

---

## evpn/instance/interconnect/protocols/bgp/route-distinguisher.rst

network-services evpn instance interconnect protocols bgp route-distinguisher
-----------------------------------------------------------------------------

**Minimum user role:** operator

To configure the route-distinguisher to enable the EVPN to use a L2VPN service.

**Command syntax: route-distinguisher [route-distinguisher]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect protocols bgp
- network-services evpn instance protocols bgp

**Note**

- The route-distinguisher must be unique amongst EVPN services, including interconnect, it may be identical to an RD of a VPN service

- Reconfiguring the route-distinguisher causes all routes to be withdrawn from the EVPN peers in the EVPN safi, and then to be re-advertised with an updated route-distinguisher.

- When set to auto, system will generate route-distinguisher in format <router-id>:<16bit>, BGP router-id must be configured and 16 bit are randomnly choosen.

- User cannot configure route-distinguisher value that match a different route-distinguisher regardless how route-distinguisher was generated (manual/auto)

**Parameter table**

+---------------------+-------------------------------------------------------------+-------+---------+
| Parameter           | Description                                                 | Range | Default |
+=====================+=============================================================+=======+=========+
| route-distinguisher | the route distinguisher for BGP as part of the EVPN service | \-    | \-      |
+---------------------+-------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# evpn-protocols
    dnRouter(cfg-evpn-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)#


**Removing Configuration**

To remove the route-distinguisher:
::

    dnRouter(cfg-inst-protocols-bgp)# no route-distinguisher

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+
| 19.3    | Add auto option    |
+---------+--------------------+

---

## evpn/instance/interconnect/protocols/protocols.rst

network-services evpn instance interconnect protocols
-----------------------------------------------------

**Minimum user role:** operator

Enter the protocols hierarchy to modify the attributes for this EVPN instance.

**Command syntax: protocols**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# protocols
    dnRouter(cfg-inst-ic-protocols)#


**Removing Configuration**

To revert the protocols configuration to default:
::

    dnRouter(cfg-inst-ic-protocols)# no protocols

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/mpls/control-word.rst

network-services evpn instance interconnect transport-protocol mpls control-word
--------------------------------------------------------------------------------

**Minimum user role:** operator

Defines the MPLS control word option. The Control-word is always set to zero. When enabled it is added to the packets as a marker indicating that the inner layer 2 packet is an Ethernet packet. The Control-word is only used with the MPLS transport layer."

**Command syntax: control-word [control-word]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect transport-protocol mpls

**Parameter table**

+--------------+---------------------------------+--------------+---------+
| Parameter    | Description                     | Range        | Default |
+==============+=================================+==============+=========+
| control-word | Set control-word usage for evpn | | enabled    | \-      |
|              |                                 | | disabled   |         |
+--------------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# mpls
    dnRouter(cfg-ic-tp-mpls)# control-word disabled
    dnRouter(cfg-ic-tp-mpls)#


**Removing Configuration**

To revert control-word to default:
::

    dnRouter(cfg-ic-tp-mpls)# no control-word

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/mpls/fat-label.rst

network-services evpn instance interconnect transport-protocol mpls fat-label
-----------------------------------------------------------------------------

**Minimum user role:** operator

The Flow Aware Transport (FAT) label is an identifier used to load-balance packets as they pass through the network. The first PE looks into the inner packet and calculates a hash, the FAT label. As the packet passes through intermediate routers, the FAT label is considered for load-balancing decisions. All packets of the same flow will result in the same FAT label and are sent on the same path."

**Command syntax: fat-label [fat-label]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect transport-protocol mpls

**Parameter table**

+-----------+----------------------------------+--------------+---------+
| Parameter | Description                      | Range        | Default |
+===========+==================================+==============+=========+
| fat-label | Define Requested FAT Label Usage | | enabled    | \-      |
|           |                                  | | disabled   |         |
+-----------+----------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# mpls
    dnRouter(cfg-ic-tp-mpls)# fat-label enabled
    dnRouter(cfg-ic-tp-mpls)#


**Removing Configuration**

To revert fat-label to default:
::

    dnRouter(cfg-ic-tp-mpls)# no fat-label

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/mpls/mpls.rst

network-services evpn instance interconnect transport-protocol mpls
-------------------------------------------------------------------

**Minimum user role:** operator

Enter the MPLS Transport hierarchy to configure the relevant options - control word and fat-label.

**Command syntax: mpls**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# mpls
    dnRouter(cfg-ic-tp-mpls)#


**Removing Configuration**

To remove the mpls definition
::

    dnRouter(cfg-inst-ic-tp)# no mpls

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/transport-protocol.rst

network-services evpn instance interconnect transport-protocol
--------------------------------------------------------------

**Minimum user role:** operator

The transport-protocol should be set to MPLS or VxLAN

**Command syntax: transport-protocol**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect

**Note**

- interconnect transport-protocol must differ from evpn instance transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)#


**Removing Configuration**

To remove transport-protocol definitions - reverting then to their default values.
::

    dnRouter(cfg-evpn-inst-ic)# no transport-protocol

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/vxlan/qos/in/in.rst

network-services evpn instance interconnect transport-protocol vxlan qos in
---------------------------------------------------------------------------

**Minimum user role:** operator

To enter qos in configuration level:

**Command syntax: in**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect transport-protocol vxlan qos
- network-services evpn instance transport-protocol vxlan qos

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# in
    dnRouter(cfg-vxlan-qos-in)#

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# in
    dnRouter(cfg-vxlan-qos-in)#


**Removing Configuration**

To revert all vxlan qos in settings to default values
::

    dnRouter(cfg-tp-vxlan-qos)# no in

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/vxlan/qos/in/known-unicast-bit-rate.rst

network-services evpn instance interconnect transport-protocol vxlan qos in known-unicast-bit-rate
--------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the maximum known-unicast traffic bit rate allowed.
When this limit is reached, known-unicast packets will be dropped.

**Command syntax: known-unicast-bit-rate [known-unicast-bit-rate] [rate-units]** burst [known-unicast-burst-size]

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect transport-protocol vxlan qos in
- network-services evpn instance transport-protocol vxlan qos in

**Parameter table**

+--------------------------+----------------------------------------------------------------------------------+---------------+---------+
| Parameter                | Description                                                                      | Range         | Default |
+==========================+==================================================================================+===============+=========+
| known-unicast-bit-rate   | Committed rate in killo bits per second for all received known-unicast l2        | 64-1000000000 | \-      |
|                          | traffic from different vteps in the vxlan evpn instance                          |               |         |
+--------------------------+----------------------------------------------------------------------------------+---------------+---------+
| rate-units               |                                                                                  | | kbps        | kbps    |
|                          |                                                                                  | | mbps        |         |
|                          |                                                                                  | | gbps        |         |
+--------------------------+----------------------------------------------------------------------------------+---------------+---------+
| known-unicast-burst-size | Committed burst size in killo bytes (1000 bytes) for all received known-unicast  | 50-255000     | 200     |
|                          | l2 traffic from different vteps in the vxlan evpn instance                       |               |         |
+--------------------------+----------------------------------------------------------------------------------+---------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# in
    dnRouter(cfg-vxlan-qos-in)# known-unicast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-in)# known-unicast-bit-rate 150 kbps burst 50

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# in
    dnRouter(cfg-vxlan-qos-in)# known-unicast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-in)# known-unicast-bit-rate 150 kbps burst 50


**Removing Configuration**

To remove the known-unicast-bit-rate limit:
::

    dnRouter(cfg-vxlan-qos-sc)# known-unicast-bit-rate 150

To revert burst value to default value:
::

    dnRouter(cfg-netsrv-evpn-sc)# no known-unicast-packet-rate 150 kbps burst

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/vxlan/qos/qos.rst

network-services evpn instance interconnect transport-protocol vxlan qos
------------------------------------------------------------------------

**Minimum user role:** operator

QoS configuration applies traffic behavior for evpn instance traffic recevied or transmitted over vxlan vteps.
To enter the qos configuration level:

**Command syntax: qos**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect transport-protocol vxlan
- network-services evpn instance transport-protocol vxlan

**Note**

- QoS settings apply to traffic received/sent over vxlan related to service vni

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)#

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)#


**Removing Configuration**

To revert all vxlan qos settings to default values
::

    dnRouter(cfg-inst-tp-vxlan)# no qos

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/vxlan/qos/storm-control/broadcast-bit-rate.rst

network-services evpn instance interconnect transport-protocol vxlan qos storm-control broadcast-bit-rate
---------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the maximum broadcast traffic bit rate allowed.
When this limit is reached, broadcast packets will be dropped.

**Command syntax: broadcast-bit-rate [broadcast-bit-rate] [rate-units]** burst [broadcast-burst-size]

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect transport-protocol vxlan qos storm-control
- network-services evpn instance transport-protocol vxlan qos storm-control

**Parameter table**

+----------------------+-----------------------------------------+---------------+---------+
| Parameter            | Description                             | Range         | Default |
+======================+=========================================+===============+=========+
| broadcast-bit-rate   | Allowed bit rate of broadcast packets   | 64-1000000000 | \-      |
+----------------------+-----------------------------------------+---------------+---------+
| rate-units           |                                         | | kbps        | kbps    |
|                      |                                         | | mbps        |         |
|                      |                                         | | gbps        |         |
+----------------------+-----------------------------------------+---------------+---------+
| broadcast-burst-size | Allowed burst size of broadcast packets | 50-255000     | 200     |
+----------------------+-----------------------------------------+---------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)# broadcast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-sc)# broadcast-bit-rate 150 kbps burst 50

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)# broadcast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-sc)# broadcast-bit-rate 150 kbps burst 50


**Removing Configuration**

To remove the broadcast-bit-rate limit:
::

    dnRouter(cfg-vxlan-qos-sc)# broadcast-bit-rate 150

To revert burst value to default value:
::

    dnRouter(cfg-netsrv-evpn-sc)# no broadcast-packet-rate 150 kbps burst

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/vxlan/qos/storm-control/multicast-bit-rate.rst

network-services evpn instance interconnect transport-protocol vxlan qos storm-control multicast-bit-rate
---------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the maximum multicast traffic bit rate allowed.
When this limit is reached, multicast packets will be dropped.

**Command syntax: multicast-bit-rate [multicast-bit-rate] [rate-units]** burst [multicast-burst-size]

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect transport-protocol vxlan qos storm-control
- network-services evpn instance transport-protocol vxlan qos storm-control

**Parameter table**

+----------------------+-----------------------------------------+---------------+---------+
| Parameter            | Description                             | Range         | Default |
+======================+=========================================+===============+=========+
| multicast-bit-rate   | Allowed bit rate of multicast packets   | 64-1000000000 | \-      |
+----------------------+-----------------------------------------+---------------+---------+
| rate-units           |                                         | | kbps        | kbps    |
|                      |                                         | | mbps        |         |
|                      |                                         | | gbps        |         |
+----------------------+-----------------------------------------+---------------+---------+
| multicast-burst-size | Allowed burst size of multicast packets | 50-255000     | 200     |
+----------------------+-----------------------------------------+---------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)# multicast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-sc)# multicast-bit-rate 150 kbps burst 50

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)# multicast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-sc)# multicast-bit-rate 150 kbps burst 50


**Removing Configuration**

To remove the multicast-bit-rate limit:
::

    dnRouter(cfg-vxlan-qos-sc)# multicast-bit-rate 150

To revert burst value to default value:
::

    dnRouter(cfg-netsrv-evpn-sc)# no multicast-packet-rate 150 kbps burst

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/vxlan/qos/storm-control/storm-control.rst

network-services evpn instance interconnect transport-protocol vxlan qos storm-control
--------------------------------------------------------------------------------------

**Minimum user role:** operator

Storm Control rate separately limits each of the broadcast, multicast and unknown-unicast packets.
As these packets are replicated to flood all the interfaces attached to the service and all remote PEs in the oppisite inerconnect service, it is important to ensure that these packets are rate limited. 

To enter vxlan qos storm-control configuration level:

**Command syntax: storm-control**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect transport-protocol vxlan qos
- network-services evpn instance transport-protocol vxlan qos

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)#

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)#


**Removing Configuration**

To revert all storm-control configurations to default behavior
::

    dnRouter(cfg-tp-vxlan-qos)# no storm-control

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/vxlan/qos/storm-control/unknown-unicast-bit-rate.rst

network-services evpn instance interconnect transport-protocol vxlan qos storm-control unknown-unicast-bit-rate
---------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the maximum unknown-unicast traffic bit rate allowed.
When this limit is reached, unknown-unicast packets will be dropped.

**Command syntax: unknown-unicast-bit-rate [unknown-unicast-bit-rate] [rate-units]** burst [unknown-unicast-burst-size]

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect transport-protocol vxlan qos storm-control
- network-services evpn instance transport-protocol vxlan qos storm-control

**Parameter table**

+----------------------------+-----------------------------------------------+---------------+---------+
| Parameter                  | Description                                   | Range         | Default |
+============================+===============================================+===============+=========+
| unknown-unicast-bit-rate   | Allowed bit rate of unknown-unicast packets   | 64-1000000000 | \-      |
+----------------------------+-----------------------------------------------+---------------+---------+
| rate-units                 |                                               | | kbps        | kbps    |
|                            |                                               | | mbps        |         |
|                            |                                               | | gbps        |         |
+----------------------------+-----------------------------------------------+---------------+---------+
| unknown-unicast-burst-size | Allowed burst size of unknown-unicast packets | 50-255000     | 200     |
+----------------------------+-----------------------------------------------+---------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)# unknown-unicast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-sc)# unknown-unicast-bit-rate 150 kbps burst 50

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)# unknown-unicast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-sc)# unknown-unicast-bit-rate 150 kbps burst 50


**Removing Configuration**

To remove the unknown-unicast-bit-rate limit:
::

    dnRouter(cfg-vxlan-qos-sc)# unknown-unicast-bit-rate 150

To revert burst value to default value:
::

    dnRouter(cfg-netsrv-evpn-sc)# no unknown-unicast-packet-rate 150 kbps burst

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/vxlan/vni.rst

network-services evpn instance interconnect transport-protocol vxlan vni
------------------------------------------------------------------------

**Minimum user role:** operator

Virtual Network Identifier (VNI) associated to the EVI. This VNI is used for ingress and egress in the EVPN VXLAN domain
To set VNI:

**Command syntax: vni [vni]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect transport-protocol vxlan

**Note**
- Mandatory configuration when vxlan is selected as transport-protocol
- VNI value must be unique among all vxlan vni setting on system
- VNI value require to be coordinated with PEs in same service
- Reconfiguration of vni value is service effecting and may result in traffic loss

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------+---------+
| Parameter | Description                                                                      | Range      | Default |
+===========+==================================================================================+============+=========+
| vni       | Virtual Network Identifier (VNI) associated to the EVI. This VNI is used for     | 1-16777215 | \-      |
|           | ingress and egress in the VXLAN domain.                                          |            |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# vni 3300


**Removing Configuration**

To remove vni configuration
::

    dnRouter(cfg-ic-tp-vxlan)# no vni

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/vxlan/vtep-source-if.rst

network-services evpn instance interconnect transport-protocol vxlan vtep-source-if
-----------------------------------------------------------------------------------

**Minimum user role:** operator

Specify a local interface from which the IP address is taken for egress VTEP (VxLAN) tunnels as outer IP source address
To set the source interface:

**Command syntax: vtep-source-if [loopback interface-name]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect transport-protocol vxlan

**Note**
- Mandatory configuration when vxlan is selected as transport-protocol
- Interface must have the desired address-family ip address configure on it
- For proper evpn vxlan signaling is that the evpn nlri nexthop value be equal to address retrieved from configured vtep-source-ip
- Reconfiguration of vni value is service effecting and may result in traffic loss

**Parameter table**

+-------------------------+----------------------------------------------------------------------------------+--------------------------------+---------+
| Parameter               | Description                                                                      | Range                          | Default |
+=========================+==================================================================================+================================+=========+
| loopback interface-name | The name of the loopback interface from which ip address is taken to be used for | | configured interface name.   | \-      |
|                         | vxlan tunnels source address.                                                    | | lo<0-65535>                  |         |
+-------------------------+----------------------------------------------------------------------------------+--------------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# vtep-source-if lo0


**Removing Configuration**

To remove vtep-source-if configuration
::

    dnRouter(cfg-ic-tp-vxlan)# no vtep-source-if

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interconnect/transport-protocol/vxlan/vxlan.rst

network-services evpn instance interconnect transport-protocol vxlan
--------------------------------------------------------------------

**Minimum user role:** operator

VXLAN - Virtual Extensible LAN (VXLAN) as defined in RFC 7348 is an overlay technology designed to provide Layer 2 and Layer 3 connectivity services over a generic IP network. 
IP networks provide increased scalability, balanced performance and predictable failure recovery (especially in comparison to L2 based data-center networks in the old days). 
VXLAN achieves this by tunneling Layer 2 frames inside of IP packets. VXLAN requires only IP reachability between the VXLAN edge devices (no MPLS), provided by an IP routing protocol.

In order to set service instance to use VxLAN as transport protocol:

**Command syntax: vxlan**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interconnect transport-protocol

**Note**

- System default behavior is to leverage MPLS as EVPN transport protocol

- When vxlan is configured for a given EVPN instance, vni and vtep-source-if must be configured

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)#


**Removing Configuration**

To return to default transport protocol (mpls)
::

    dnRouter(cfg-evpn-inst-tp)# no vxlan

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interface/e-tree.rst

network-services evpn instance interface e-tree
-----------------------------------------------

**Minimum user role:** operator

The e-tree configuration defines for the AC whether it should act as an e-tree root or an e-tree leaf.
As an e-tree root traffic may be forwarded to all ACs (local or remote) attached to the EVPN instance. As an e-tree leaf this AC may only forward traffic to root ACs (local or remote) attached to the EVPN instance.

**Command syntax: e-tree [e-tree]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interface

**Parameter table**

+-----------+-------------------------------------------------------+----------+---------+
| Parameter | Description                                           | Range    | Default |
+===========+=======================================================+==========+=========+
| e-tree    | configure whether this interface is a root or leaf AC | | root   | \-      |
|           |                                                       | | leaf   |         |
+-----------+-------------------------------------------------------+----------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interface ge100-0/0/0
    dnRouter(cfg-evpn-inst-ge100-0/0/0)# e-tree leaf
    dnRouter(cfg-evpn-inst-ge100-0/0/0)#


**Removing Configuration**

To revert the e-tree configuration for this interface to its default value.
::

    dnRouter(cfg-evpn-inst-ge100-0/0/0)# no e-tree

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interface/interface.rst

network-services evpn instance interface
----------------------------------------

**Minimum user role:** operator

Configure an interface for the EVPN service

 - Interface must be a l2-service enabled interface.

 - An Interface cannot be assigned to multiple services

**Command syntax: interface [name]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance

**Note**

- support only interface of type <geX-X/X/X/bundle-X/<geX-X/X/X.Y>/<bundle-X.Y>

**Parameter table**

+-----------+---------------------------------------------+------------------+---------+
| Parameter | Description                                 | Range            | Default |
+===========+=============================================+==================+=========+
| name      | Associate an interface to the EVPN instance | | string         | \-      |
|           |                                             | | length 1-255   |         |
+-----------+---------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-evpn-inst)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interface bundle-1
    dnRouter(cfg-netsrv-evpn-inst)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interface ge100-0/0/0.10
    dnRouter(cfg-evpn-inst-int)#



**Removing Configuration**

To remove the interface from its association with the EVPN instance
::

    dnRouter(cfg-netsrv-evpn-inst)# no interface ge100-0/0/0

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interface/invert-preference-algorithm.rst

network-services evpn instance interface df-invert-preference
-------------------------------------------------------------

**Minimum user role:** operator

While the Designated Forwarder Election Algorithm is defined under multihoming, and the Prefernce Algorithm (Highest or Lowest) is defined, this knob allows that per EVI this can be inverted to allow the DF role to be shared between two PE devices for the different service instances.

**Command syntax: df-invert-preference [invert-preference-algorithm]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interface

**Parameter table**

+-----------------------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter                   | Description                                                                      | Range        | Default  |
+=============================+==================================================================================+==============+==========+
| invert-preference-algorithm | When the AC interface is connected to a multihomed Ethernet Segment and the DF   | | enabled    | disabled |
|                             | Election algorithm is the preference algorithm (highest or lowest) then enabling | | disabled   |          |
|                             | this knob will invert the algorithm for this EVPN instance, example instead of   |              |          |
|                             | highest election it will elect the lowest preference as the DF                   |              |          |
+-----------------------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interface ge100-0/0/0
    dnRouter(cfg-evpn-inst-ge100-0/0/0)# df-invert-preference enabled
    dnRouter(cfg-evpn-inst-ge100-0/0/0)#


**Removing Configuration**

To revert df-invert-preference to disabled.
::

    dnRouter(cfg-evpn-inst-ge100-0/0/0)# no df-invert-preference

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interface/sticky-interface.rst

network-services evpn instance interface sticky-interface
---------------------------------------------------------

**Minimum user role:** operator

When an interface is set to sticky, all MAC addresses learnt on that interface will be treated as sticky and will not be able to Move to another interface.

**Command syntax: sticky-interface [sticky-interface]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interface

**Parameter table**

+------------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter        | Description                                                                      | Range        | Default  |
+==================+==================================================================================+==============+==========+
| sticky-interface | If enabled The whole interface will be sticky - all Macs learnt on the interface | | enabled    | disabled |
|                  | will be sticky                                                                   | | disabled   |          |
+------------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interface ge100-0/0/0
    dnRouter(cfg-evpn-inst-ge100-0/0/0)# sticky-interface enabled
    dnRouter(cfg-evpn-inst-ge100-0/0/0)#


**Removing Configuration**

To revert the sticky-interface setting to disabled.
::

    dnRouter(cfg-evpn-inst-ge100-0/0/0)# no sticky-interface

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interface/sticky-mac.rst

network-services evpn instance interface sticky-mac
---------------------------------------------------

**Minimum user role:** operator

Configure an interface for the EVPN service

 - Interface must be a l2-service enabled interface.

 - An Interface cannot be assigned to multiple services

**Command syntax: sticky-mac [sticky-mac]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interface

**Parameter table**

+------------+-----------------------------------------------------------------+-------+---------+
| Parameter  | Description                                                     | Range | Default |
+============+=================================================================+=======+=========+
| sticky-mac | The MAC Address which is configured as sticky on this interface | \-    | \-      |
+------------+-----------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-evpn-inst)# sticky-mac 1a:2b:3c:4d:5e:6f
    dnRouter(cfg-netsrv-evpn-inst)# sticky-mac f1:e2:d3:c4:b5:a6


**Removing Configuration**

To remove the mac-address from the list of sticky macs
::

    dnRouter(cfg-netsrv-evpn-inst)# no sticky-mac 1a:2b:3c:4d:5e:6f

To remove all the mac-addresses on this interface, from the list of sticky macs
::

    dnRouter(cfg-netsrv-evpn-inst)# no sticky-mac

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/interface/storm-control/broadcast-packet-rate.rst

network-services evpn instance interface storm-control broadcast-packet-rate
----------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum broadcast packet rate allowed. When this limit is reached, packets will be dropped. This limit is per specific interface. If not configured the per instance or per global evpn storm-control configurations will be applied unless this knob is set to 'disabled'.

**Command syntax: broadcast-packet-rate [broadcast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interface storm-control

**Parameter table**

+-----------------------+------------------------------------------+---------------------------+---------+
| Parameter             | Description                              | Range                     | Default |
+=======================+==========================================+===========================+=========+
| broadcast-packet-rate | Allowed packet rate of broadcast packets | disabled | 10 - 100000000 | \-      |
+-----------------------+------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interface ge100-0/0/0
    dnRouter(cfg-evpn-inst-ge100-0/0/0)# storm-control
    dnRouter(cfg-inst-ge100-0/0/0-sc)# broadcast-packet-rate 10000
    dnRouter(cfg-inst-ge100-0/0/0-sc)#


**Removing Configuration**

To remove the broadcast-packet-rate limit.
::

    dnRouter(cfg-inst-ge100-0/0/0-sc)# no broadcast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## evpn/instance/interface/storm-control/multicast-packet-rate.rst

network-services evpn instance interface storm-control multicast-packet-rate
----------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum multicast packet rate allowed. When this limit is reached, packets will be dropped. This limit is per specific interface. If not configured the per instance or per global evpn storm-control configurations will be applied unless this knob is set to 'disabled'.

**Command syntax: multicast-packet-rate [multicast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interface storm-control

**Parameter table**

+-----------------------+------------------------------------------+---------------------------+---------+
| Parameter             | Description                              | Range                     | Default |
+=======================+==========================================+===========================+=========+
| multicast-packet-rate | Allowed packet rate of multicast packets | disabled | 10 - 100000000 | \-      |
+-----------------------+------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interface ge100-0/0/0
    dnRouter(cfg-evpn-inst-ge100-0/0/0)# storm-control
    dnRouter(cfg-inst-ge100-0/0/0-sc)# multicast-packet-rate 10000
    dnRouter(cfg-inst-ge100-0/0/0-sc)#


**Removing Configuration**

To remove the multicast-packet-rate limit.
::

    dnRouter(cfg-inst-ge100-0/0/0-sc)# no multicast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## evpn/instance/interface/storm-control/storm-control.rst

network-services evpn instance interface storm-control
------------------------------------------------------

**Minimum user role:** operator

Storm Control rate separately limits each of the broadcast, multicast and unknown-unicast packets.
As these packets are replicated to flood all the interfaces attached to the service, it is important
to ensure that these packets are rate limited. The rate limits configured at this interface level are applied
to the specific interface.

**Command syntax: storm-control**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interface

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interface ge100-0/0/0
    dnRouter(cfg-evpn-inst-ge100-0/0/0)# storm-control
    dnRouter(cfg-inst-ge100-0/0/0-sc)#


**Removing Configuration**

To remove all global storm control configurations
::

    dnRouter(cfg-evpn-inst-ge100-0/0/0)# no storm-control

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## evpn/instance/interface/storm-control/unknown-unicast-packet-rate.rst

network-services evpn instance interface storm-control unknown-unicast-packet-rate
----------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum unknown-unicast packet rate allowed. When this limit is reached, packets will be dropped. This limit is per specific interface. If not configured the per instance or per global evpn storm-control configurations will be applied unless this knob is set to 'disabled'.

**Command syntax: unknown-unicast-packet-rate [unknown-unicast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance interface storm-control

**Parameter table**

+-----------------------------+------------------------------------------------+---------------------------+---------+
| Parameter                   | Description                                    | Range                     | Default |
+=============================+================================================+===========================+=========+
| unknown-unicast-packet-rate | Allowed packet rate of unknown-unicast packets | disabled | 10 - 100000000 | \-      |
+-----------------------------+------------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# interface ge100-0/0/0
    dnRouter(cfg-evpn-inst-ge100-0/0/0)# storm-control
    dnRouter(cfg-inst-ge100-0/0/0-sc)# unknown-unicast-packet-rate 10000
    dnRouter(cfg-inst-ge100-0/0/0-sc)#


**Removing Configuration**

To remove the unknown-unicast-packet-rate limit.
::

    dnRouter(cfg-inst-ge100-0/0/0-sc)# no unknown-unicast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/action.rst

network-services evpn instance mac-handling loop-prevention action
------------------------------------------------------------------

**Minimum user role:** operator

Loop-protection action for these EVPN Instances, the default is suppress.
Supression prevents local learning and moves from remote to local.
Blackholing causes any packets received with a src/dest MAC that is suppressed to be dropped.
The default value is defined at the EVPN level.

**Command syntax: action [action]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention

**Parameter table**

+-----------+------------------------------------------------------------------+---------------+---------+
| Parameter | Description                                                      | Range         | Default |
+===========+==================================================================+===============+=========+
| action    | Set the action to be applied when the MAC Address is suppressed. | | suppress    | \-      |
|           |                                                                  | | blackhole   |         |
|           |                                                                  | | shutdown    |         |
+-----------+------------------------------------------------------------------+---------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# action blackhole
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To revert the action to its default value as defined at the EVPN level
::

    dnRouter(cfg-inst-mh-lp)# no action

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/admin-state.rst

network-services evpn instance mac-handling loop-prevention admin-state
-----------------------------------------------------------------------

**Minimum user role:** operator

Loop-protection for this EVPN Instance may be enabled/disabled. The default value is defined at the EVPN level.

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention

**Parameter table**

+-------------+------------------------------------------------+--------------+---------+
| Parameter   | Description                                    | Range        | Default |
+=============+================================================+==============+=========+
| admin-state | Enable or Disable the loop-prevention handling | | enabled    | \-      |
|             |                                                | | disabled   |         |
+-------------+------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# admin-state disabled
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To revert the admin-state configuration to its default value as defined at the EVPN level
::

    dnRouter(cfg-inst-mh-lp)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/ip-loop-action.rst

network-services evpn instance mac-handling loop-prevention ip-loop-action
--------------------------------------------------------------------------

**Minimum user role:** operator

Loop-protection ip-loop-action for these EVPN Instances, the default is suppress.
Supression prevents moves from remote to local but allows local learning.
The default value is defined at the EVPN level.

**Command syntax: ip-loop-action [ip-loop-action]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention

**Parameter table**

+----------------+-----------------------------------------------------------------+----------+----------+
| Parameter      | Description                                                     | Range    | Default  |
+================+=================================================================+==========+==========+
| ip-loop-action | Set the action to be applied when the IP Address is suppressed. | suppress | suppress |
+----------------+-----------------------------------------------------------------+----------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# ip-loop-action suppress
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To revert the ip-loop-action to its default value as defined at the EVPN level
::

    dnRouter(cfg-inst-mh-lp)# no ip-loop-action

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/ip-loop-detection-threshold.rst

network-services evpn instance mac-handling loop-prevention ip-loop-detection-threshold
---------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of moves allowed within the ip-loop-detection-window period. If the ip-loop-detection-threshold is reached within this period the IP address will be suppressed. Default is defined at the EVPN level.

**Command syntax: ip-loop-detection-threshold [ip-loop-detection-threshold]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention

**Parameter table**

+-----------------------------+----------------------------------+-------+---------+
| Parameter                   | Description                      | Range | Default |
+=============================+==================================+=======+=========+
| ip-loop-detection-threshold | the number of mac moves allowed. | 2-30  | \-      |
+-----------------------------+----------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# ip-loop-detection-threshold 6
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To restore the loop-detection-window period to its default value.
::

    dnRouter(cfg-inst-mh-lp)# no ip-loop-detection-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/ip-loop-detection-window.rst

network-services evpn instance mac-handling loop-prevention ip-loop-detection-window
------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the period of the ip-loop-detection-window in seconds for this EVPN instance. The default is defined at the EVPN level. If the ip-loop-detection-threshold is reached within this period the IP address is suppressed.

**Command syntax: ip-loop-detection-window [ip-loop-detection-window]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention

**Parameter table**

+--------------------------+-------------------------------+-------+---------+
| Parameter                | Description                   | Range | Default |
+==========================+===============================+=======+=========+
| ip-loop-detection-window | the IP loop detection period. | 1-600 | \-      |
+--------------------------+-------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# ip-loop-detection-window 300
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To restore the ip-loop-detection-window period to its default value.
::

    dnRouter(cfg-inst-mh-lp)# no ip-loop-detection-window

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/local-loop-prevention/admin-state.rst

network-services evpn instance mac-handling loop-prevention local-loop-prevention admin-state
---------------------------------------------------------------------------------------------

**Minimum user role:** operator

Local Loop-protection for this EVPN Instance may be enabled/disabled. The default value is defined at the EVPN level.

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention local-loop-prevention

**Parameter table**

+-------------+------------------------------------------------+--------------+---------+
| Parameter   | Description                                    | Range        | Default |
+=============+================================================+==============+=========+
| admin-state | Enable or Disable the loop-prevention handling | | enabled    | \-      |
|             |                                                | | disabled   |         |
+-------------+------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# admin-state disabled


**Removing Configuration**

To revert the admin-state configuration to its default value as defined at the EVPN level
::

    dnRouter(cfg-mh-lp-llp)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/local-loop-prevention/local-loop-prevention.rst

network-services evpn instance mac-handling loop-prevention local-loop-prevention
---------------------------------------------------------------------------------

**Minimum user role:** operator

Enter the loop-prevention hierarchy to modify the loop-prevention attributes for this EVPN instance.

**Command syntax: local-loop-prevention**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To revert the loop-prevention configuration for this instance to the defaults.
::

    dnRouter(cfg-evpn-inst-mh)# no loop-prevention

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/local-loop-prevention/loop-detection-threshold.rst

network-services evpn instance mac-handling loop-prevention local-loop-prevention loop-detection-threshold
----------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of moves allowed within the loop-detection-window period. If the loop-detection-threshold is reached within this period, all AC interfaces involved except the first AC interface, are shutdown. Default is defined at the EVPN level.

**Command syntax: loop-detection-threshold [loop-detection-threshold]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention local-loop-prevention

**Parameter table**

+--------------------------+---------------------------------+-------+---------+
| Parameter                | Description                     | Range | Default |
+==========================+=================================+=======+=========+
| loop-detection-threshold | the number of MAC moves allowed | 2-30  | \-      |
+--------------------------+---------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# loop-detection-threshold 6


**Removing Configuration**

To restore the loop-detection-window period to its default value.
::

    dnRouter(cfg-mh-lp-llp)# no loop-detection-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/local-loop-prevention/loop-detection-window.rst

network-services evpn instance mac-handling loop-prevention local-loop-prevention loop-detection-window
-------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the period of the loop-detection-window, in seconds, for this EVPN instance. The default is defined at the EVPN level. If the loop-detection-threshold is reached within this period, all AC interfaces involved except the first AC interface, are shutdown.

**Command syntax: loop-detection-window [loop-detection-window]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention local-loop-prevention

**Parameter table**

+-----------------------+----------------------------+---------+---------+
| Parameter             | Description                | Range   | Default |
+=======================+============================+=========+=========+
| loop-detection-window | the loop detection period. | 1-10000 | \-      |
+-----------------------+----------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)#
    dnRouter(cfg-inst-mh-lp)# loop-detection-window 300
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To restore the loop-detection-window period to its default value.
::

    dnRouter(cfg-inst-mh-lp)# no loop-detection-window

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/local-loop-prevention/reset-restore-cycles-interval.rst

network-services evpn instance mac-handling loop-prevention local-loop-prevention reset-restore-cycles-interval
---------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure (for this EVPN instance) the reset-restore-cycles-interval timer in hours. The default is 24 hours. The AC Interface shutdown count is cleared if no shutdown events occur for this period.

**Command syntax: reset-restore-cycles-interval [reset-restore-cycles-interval]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention local-loop-prevention

**Parameter table**

+-------------------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter                     | Description                                                                      | Range | Default |
+===============================+==================================================================================+=======+=========+
| reset-restore-cycles-interval | Time interval to be applied following removal of suppression, before clearing    | 1-72  | \-      |
|                               | the restore-cycles counter, assuming no further sanctions are applied.           |       |         |
+-------------------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# reset-restore-cycles-interval 50


**Removing Configuration**

To restore the reset-restore-cycles-interval period to its default value of 24 hours.
::

    dnRouter(cfg-mh-lp-llp)# no reset-restore-cycles-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/local-loop-prevention/restore-max-cycles.rst

network-services evpn instance mac-handling loop-prevention local-loop-prevention restore-max-cycles
----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of AC shutdown restore cycles allowed before permanent shutdown. When an AC Interface is permanently shutdown only a manual command will release the AC Interface. Default is defined at the EVPN level.

**Command syntax: restore-max-cycles [restore-max-cycles]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention local-loop-prevention

**Parameter table**

+--------------------+-------------------------------------------+----------------------+---------+
| Parameter          | Description                               | Range                | Default |
+====================+===========================================+======================+=========+
| restore-max-cycles | the number of AC shutdown cycles allowed. | | 1-10               | \-      |
|                    |                                           | | infinite           |         |
|                    |                                           | | restore-manually   |         |
+--------------------+-------------------------------------------+----------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)#
    dnRouter(cfg-inst-mh-lp)# restore-max-cycles 6
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To restore the restore-max-cycles period to its default value of infinite.
::

    dnRouter(cfg-inst-mh-lp)# no restore-max-cycles

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/local-loop-prevention/restore-timer.rst

network-services evpn instance mac-handling loop-prevention local-loop-prevention restore-timer
-----------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the period of the restore-timer in seconds for this EVPN instance. The AC Interface is automatically restored after being shutdown for the restore-timer period. The default is defined at the EVPN level. 

**Command syntax: restore-timer [restore-timer]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention local-loop-prevention

**Parameter table**

+---------------+---------------------+------------+---------+
| Parameter     | Description         | Range      | Default |
+===============+=====================+============+=========+
| restore-timer | the Restore period. | 10-1000000 | \-      |
+---------------+---------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)#
    dnRouter(cfg-inst-mh-lp)# restore-timer 600
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To restore the restore-timer period to its default value.
::

    dnRouter(cfg-inst-mh-lp)# no restore-timer

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/loop-detection-threshold.rst

network-services evpn instance mac-handling loop-prevention loop-detection-threshold
------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of moves allowed within the loop-detection-window period. If the loop-detection-threshold is reached within this period the mac address will be suppressed. Default is defined at the EVPN level.

**Command syntax: loop-detection-threshold [loop-detection-threshold]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention

**Parameter table**

+--------------------------+----------------------------------+-------+---------+
| Parameter                | Description                      | Range | Default |
+==========================+==================================+=======+=========+
| loop-detection-threshold | The number of MAC moves allowed. | 2-30  | \-      |
+--------------------------+----------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# loop-detection-threshold 6
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To restore the loop-detection-window period to its default value.
::

    dnRouter(cfg-inst-mh-lp)# no loop-detection-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/loop-detection-window.rst

network-services evpn instance mac-handling loop-prevention loop-detection-window
---------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the period of the loop-detection-window in seconds for this EVPN instance. The default is defined at the EVPN level. If the loop-detection-threshold is reached within this period the mac address is suppressed.

**Command syntax: loop-detection-window [loop-detection-window]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention

**Parameter table**

+-----------------------+----------------------------+-------+---------+
| Parameter             | Description                | Range | Default |
+=======================+============================+=======+=========+
| loop-detection-window | The loop detection period. | 1-600 | \-      |
+-----------------------+----------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# loop-detection-window 300
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To restore the loop-detection-window period to its default value.
::

    dnRouter(cfg-inst-mh-lp)# no loop-detection-window

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/loop-prevention.rst

network-services evpn instance mac-handling loop-prevention
-----------------------------------------------------------

**Minimum user role:** operator

Enter the loop-prevention hierarchy to modify the loop-prevention attributes for this EVPN instance.

**Command syntax: loop-prevention**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To revert the loop-prevention configuration for this instance to the defaults.
::

    dnRouter(ccfg-evpn-inst-mh)# no loop-prevention

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/mac-reset-restore-cycles-interval.rst

network-services evpn instance mac-handling loop-prevention mac-reset-restore-cycles-interval
---------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure (for this EVPN instance) the mac-reset-restore-cycles-interval timer in hours, the default is 24 hours. The mac address is automatically restored after being suppressed for the mac-restore timer period.

**Command syntax: mac-reset-restore-cycles-interval [mac-reset-restore-cycles-interval]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention

**Parameter table**

+-----------------------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter                         | Description                                                                      | Range | Default |
+===================================+==================================================================================+=======+=========+
| mac-reset-restore-cycles-interval | Time interval to be applied following removal of suppression, before clearing    | 1-72  | \-      |
|                                   | the restore-cycles counter, assuming no further sanctions are applied.           |       |         |
+-----------------------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# mac-reset-restore-cycles-interval 50
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To restore the mac-reset-restore-cycles-interval period to its default value of 24 hours.
::

    dnRouter(cfg-inst-mh-lp)# no mac-reset-restore-cycles-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/mac-restore-max-cycles.rst

network-services evpn instance mac-handling loop-prevention mac-restore-max-cycles
----------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of suppression-restore cycles allowed before permanent suppression. When a MAC address is permanently suppressed only a manual command will release the MAC address. Default is defined at the EVPN level.

**Command syntax: mac-restore-max-cycles [mac-restore-max-cycles]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention

**Parameter table**

+------------------------+-------------------------------------------+----------------------+---------+
| Parameter              | Description                               | Range                | Default |
+========================+===========================================+======================+=========+
| mac-restore-max-cycles | the number of suppression cycles allowed. | | 1-10               | \-      |
|                        |                                           | | infinite           |         |
|                        |                                           | | restore-manually   |         |
+------------------------+-------------------------------------------+----------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# mac-restore-max-cycles 6
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To restore the mac-restore-max-cycles period to its default value of infinite.
::

    dnRouter(cfg-inst-mh-lp)# no mac-restore-max-cycles

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/loop-prevention/mac-restore-timer.rst

network-services evpn instance mac-handling loop-prevention mac-restore-timer
-----------------------------------------------------------------------------

**Minimum user role:** operator

Configure the period of the mac-restore timer in seconds for this EVPN instance. The mac address is automatically restored after being suppressed for the mac-restore timer period. The default is defined at the EVPN level. 

**Command syntax: mac-restore-timer [mac-restore-timer]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling loop-prevention

**Parameter table**

+-------------------+-------------------------+------------+---------+
| Parameter         | Description             | Range      | Default |
+===================+=========================+============+=========+
| mac-restore-timer | the MAC Restore period. | 10-1000000 | \-      |
+-------------------+-------------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# loop-prevention
    dnRouter(cfg-inst-mh-lp)# mac-restore-timer 600
    dnRouter(cfg-inst-mh-lp)#


**Removing Configuration**

To restore the mac-restore period to its default value.
::

    dnRouter(cfg-inst-mh-lp)# no mac-restore-timer

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/mac-handling.rst

network-services evpn instance mac-handling
-------------------------------------------

**Minimum user role:** operator

Enter the mac-learning hierarchy to modify the mac-learning attributes for this EVPN instance.

**Command syntax: mac-handling**

**Command mode:** config

**Hierarchies**

- network-services evpn instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)#


**Removing Configuration**

To revert the mac-handling configurations to defaults
::

    dnRouter(cfg-evpn-inst)# no mac-handling

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/mac-learning.rst

network-services evpn instance mac-handling mac-learning
--------------------------------------------------------

**Minimum user role:** operator

By default mac-learning is enabled on the local AC interfaces that are associated with this EVPN instance. 
By defining this knob, mac-learning will be disabled on all the AC interfaces of this EVPN instance.

**Command syntax: mac-learning [mac-learning]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling

**Parameter table**

+--------------+----------------------+--------------+---------+
| Parameter    | Description          | Range        | Default |
+==============+======================+==============+=========+
| mac-learning | Disable MAC Learning | | enabled    | \-      |
|              |                      | | disabled   |         |
+--------------+----------------------+--------------+---------+

**Example**
::

    dev-dnRouter#
    dev-dnRouter# configure
    dev-dnRouter(cfg)# network-services
    dev-dnRouter(cfg-netsrv-evpn)# instance evpn1
    dev-dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dev-dnRouter(cfg-evpn-inst-mh)# mac-learning disabled
    dev-dnRouter(cfg-evpn-inst-mh)#


**Removing Configuration**

To revert the mac-learning configuration to its default of enabled.
::

    dnRouter(cfg-evpn-inst-mh)# no mac-learning

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/mac-table-aging-time.rst

network-services evpn instance mac-handling mac-table-aging-time
----------------------------------------------------------------

**Minimum user role:** operator

"Configure the aging time for the entries in the MAC Table for this EVPN instance.
 Allowed aging time values are: 0 (no aging), 60, 120, 320, 640, 1280 seconds.
 If the aging time is set to zero, no aging will be applied, the entries will remain until removed manually via the clear command.
 The aging mechanism implementation has some variabilities such that the actual aging time is:

 60 +/- 20 seconds 
 120 +/- 40 seconds 
 320 +/- 160 seconds 
 640 +/- 320 seconds 
 1280 +/- 640 seconds"

**Command syntax: mac-table-aging-time [mac-table-aging-time]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling

**Parameter table**

+----------------------+----------------------------------------------------------------------------------+----------------------------+---------+
| Parameter            | Description                                                                      | Range                      | Default |
+======================+==================================================================================+============================+=========+
| mac-table-aging-time | the aging time (in seconds) for the entries in the mac-table for this EVPN       | 0, 60, 120, 320, 640, 1280 | \-      |
|                      | instance                                                                         |                            |         |
+----------------------+----------------------------------------------------------------------------------+----------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# mac-table-aging-time 320
    dnRouter(cfg-evpn-inst-mh)#


**Removing Configuration**

To restore the MAC Table aging time to its default value.
::

    dnRouter(cfg-evpn-inst-mh)# no mac-table-aging-time

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/mac-handling/mac-table-limit.rst

network-services evpn instance mac-handling mac-table-limit
-----------------------------------------------------------

**Minimum user role:** operator

Configure the maximum number of entries in the MAC Table for this EVPN instance. When this limit is reached, new MAC addresses will not be added to the MAC Table.

**Command syntax: mac-table-limit [mac-table-limit]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance mac-handling

**Parameter table**

+-----------------+-------------------------------------------------------------------------------+-----------+---------+
| Parameter       | Description                                                                   | Range     | Default |
+=================+===============================================================================+===========+=========+
| mac-table-limit | the maximum number of entries allowed in the mac-table for this EVPN instance | 20-220000 | \-      |
+-----------------+-------------------------------------------------------------------------------+-----------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# mac-handling
    dnRouter(cfg-evpn-inst-mh)# mac-table-limit 10000
    dnRouter(cfg-evpn-inst-mh)#


**Removing Configuration**

To restore the MAC Table limit to its default value.
::

    dnRouter(cfg-evpn-inst-mh)# no mac-table-limit

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/instance/router-interface/default-gateway.rst

network-services evpn instance router-interface default-gateway
---------------------------------------------------------------

**Minimum user role:** operator

When the default-gateway is set to enabled, type 2 local IRB routes will be advertised with default gateway extended-community

**Command syntax: default-gateway [default-gateway]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance router-interface

**Parameter table**

+-----------------+-----------------------------------------------------------------------+--------------+---------+
| Parameter       | Description                                                           | Range        | Default |
+=================+=======================================================================+==============+=========+
| default-gateway | default-gateway extended community to be attached to IRB local routes | | enabled    | enabled |
|                 |                                                                       | | disabled   |         |
+-----------------+-----------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# router-interface irb0
    dnRouter(cfg-evpn-inst-irb0)# default-gateway enabled


**Removing Configuration**

To revert the default-gateway setting to disabled.
::

    dnRouter(cfg-evpn-inst-ge100-0/0/0)#  default-gateway disabled

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn/instance/router-interface/host-routes.rst

network-services evpn instance router-interface host-routes
-----------------------------------------------------------

**Minimum user role:** operator

When the host-routes is set to enabled, type 2 routes will be advertised with the relevant VRF information: label of VRF and RTs.

**Command syntax: host-routes [host-routes]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance router-interface

**Parameter table**

+-------------+---------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                         | Range        | Default  |
+=============+=====================================================================+==============+==========+
| host-routes | host-routes configurations to add label2 and RT's of associated VRF | | enabled    | disabled |
|             |                                                                     | | disabled   |          |
+-------------+---------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# router-interface irb0
    dnRouter(cfg-evpn-inst-irb0)# host-routes enabled


**Removing Configuration**

To revert the host-routes setting to disabled.
::

    dnRouter(cfg-evpn-inst-ge100-0/0/0)#  host-routes disabled

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn/instance/router-interface/irb-mac-ip.rst

network-services evpn instance router-interface irb-mac-ip
----------------------------------------------------------

**Minimum user role:** operator

When the irb-mac-ip is set to enabled, type 2 MAC-IP for the local IRB will be generated and advertised.

**Command syntax: irb-mac-ip [irb-mac-ip]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance router-interface

**Parameter table**

+------------+--------------------------------------+--------------+---------+
| Parameter  | Description                          | Range        | Default |
+============+======================================+==============+=========+
| irb-mac-ip | advertise the local IRB MAC-IP route | | enabled    | enabled |
|            |                                      | | disabled   |         |
+------------+--------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# router-interface irb0
    dnRouter(cfg-evpn-inst-irb0)# irb-mac-ip enabled


**Removing Configuration**

To revert the host-routes setting to disabled.
::

    dnRouter(cfg-evpn-inst-ge100-0/0/0)#  no irb-mac-ip

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## evpn/instance/router-interface/router-interface.rst

network-services evpn instance router-interface
-----------------------------------------------

**Minimum user role:** operator

An integrated-routing-bridging interface (IRB) can be used to provide L3 services, such as Default-GW for the EVPN L2 service.
The IRB interface is associated with an L2 service, such as an EVPN instance or a Bridge-Domain instance, and an L3 VRF (can be the default VRF).
An IRB cannot be assigned to multiple EVPN services or shared between an EVPN and a Bridge-Domains service.
A single IRB interface can be associated per EVPN service instance.
To configure a router-interface for the EVPN service instance:

**Command syntax: router-interface [router-interface]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance

**Note**

- Only supports <irbX> type interface.

- An IRB cannot be assigned to multiple EVPN services or shared between EVPN and Bridge-Domain services.

- A single IRB interface can be associated per EVPN service instance.

- The IRB address must differ from the bgp router-id

**Parameter table**

+------------------+-------------------------------------------------------------------------------+------------------+---------+
| Parameter        | Description                                                                   | Range            | Default |
+==================+===============================================================================+==================+=========+
| router-interface | Associate an integrated-routing-bridging interface (IRB) to the EVPN instance | | string         | \-      |
|                  |                                                                               | | length 1-255   |         |
+------------------+-------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# router-interface irb0
    dnRouter(cfg-evpn-inst-irb0)#


**Removing Configuration**

To remove the association of an IRB interface from the EVPN instance,, and revert all related configuration to default behavior
::

    dnRouter(cfg-netsrv-evpn-inst)# no router-interface irb0

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## evpn/instance/storm-control/broadcast-packet-rate.rst

network-services evpn instance storm-control broadcast-packet-rate
------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum broadcast packet rate allowed. When this limit is reached, packets will be dropped. This limit is per instance and can be overridden by per interface storm-control configurations. If not configured the global evpn storm-control configurations will be applied unless this knob is set to 'disabled'.

**Command syntax: broadcast-packet-rate [broadcast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance storm-control

**Parameter table**

+-----------------------+------------------------------------------+---------------------------+---------+
| Parameter             | Description                              | Range                     | Default |
+=======================+==========================================+===========================+=========+
| broadcast-packet-rate | Allowed packet rate of broadcast packets | disabled | 10 - 100000000 | \-      |
+-----------------------+------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# storm-control
    dnRouter(cfg-evpn-inst-sc)# broadcast-packet-rate 10000
    dnRouter(cfg-evpn-inst-sc)#


**Removing Configuration**

To remove the broadcast-packet-rate limit.
::

    dnRouter(cfg-evpn-inst-sc)# no broadcast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## evpn/instance/storm-control/multicast-packet-rate.rst

network-services evpn instance storm-control multicast-packet-rate
------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum multicast packet rate allowed. When this limit is reached, packets will be dropped. This limit is per instance and can be overridden by per interface storm-control configurations. If not configured the global evpn storm-control configurations will be applied unless this knob is set to 'disabled'.

**Command syntax: multicast-packet-rate [multicast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance storm-control

**Parameter table**

+-----------------------+------------------------------------------+---------------------------+---------+
| Parameter             | Description                              | Range                     | Default |
+=======================+==========================================+===========================+=========+
| multicast-packet-rate | Allowed packet rate of multicast packets | disabled | 10 - 100000000 | \-      |
+-----------------------+------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# storm-control
    dnRouter(cfg-evpn-inst-sc)# multicast-packet-rate 10000
    dnRouter(cfg-evpn-inst-sc)#


**Removing Configuration**

To remove the multicast-packet-rate limit.
::

    dnRouter(cfg-evpn-inst-sc)# no multicast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## evpn/instance/storm-control/storm-control.rst

network-services evpn instance storm-control
--------------------------------------------

**Minimum user role:** operator

Storm Control rate separately  limits each of the broadcast, multicast and unknown-unicast packets.
As these packets are replicated to flood all the interfaces attached to the service, it is important
to ensure that these packets are rate limited. The rate limits configured at this instance level are applied
to all interfaces within the specific instance as their default unless configured otherwise at the interface level.

**Command syntax: storm-control**

**Command mode:** config

**Hierarchies**

- network-services evpn instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# storm-control
    dnRouter(cfg-evpn-inst-sc)#


**Removing Configuration**

To remove all global storm control configurations
::

    dnRouter(cfg-netsrv-evpn-inst)# no storm-control

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## evpn/instance/storm-control/unknown-unicast-packet-rate.rst

network-services evpn instance storm-control unknown-unicast-packet-rate
------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum unknown-unicast packet rate allowed. When this limit is reached, packets will be dropped. This limit is per instance and can be overridden by per interface storm-control configurations. If not configured the global evpn storm-control configurations will be applied unless this knob is set to 'disabled'.

**Command syntax: unknown-unicast-packet-rate [unknown-unicast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance storm-control

**Parameter table**

+-----------------------------+------------------------------------------------+---------------------------+---------+
| Parameter                   | Description                                    | Range                     | Default |
+=============================+================================================+===========================+=========+
| unknown-unicast-packet-rate | Allowed packet rate of unknown-unicast packets | disabled | 10 - 100000000 | \-      |
+-----------------------------+------------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# storm-control
    dnRouter(cfg-evpn-inst-sc)# unknown-unicast-packet-rate 10000
    dnRouter(cfg-evpn-inst-sc)#


**Removing Configuration**

To remove the unknown-unicast-packet-rate limit.
::

    dnRouter(cfg-evpn-inst-sc)# no unknown-unicast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/mpls/control-word.rst

network-services evpn instance transport-protocol mpls control-word
-------------------------------------------------------------------

**Minimum user role:** operator

Define the MPLS control word option. The Control-word is always set to zero. When enabled it is added to the packets as a marker indicating that the the inner layer 2 packet is an ethernet packet. The Control-word is only used with MPLS transport layer.

**Command syntax: control-word [control-word]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance transport-protocol mpls

**Parameter table**

+--------------+---------------------------------+--------------+---------+
| Parameter    | Description                     | Range        | Default |
+==============+=================================+==============+=========+
| control-word | Set control-word usage for evpn | | enabled    | \-      |
|              |                                 | | disabled   |         |
+--------------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# transport-protocol
    dnRouter(cfg-netsrv-evpn-tp)# mpls
    dnRouter(cfg-netsrv-evpn-tp-mpls)# control-word disabled
    dnRouter(cfg-netsrv-evpn-tp-mpls)#


**Removing Configuration**

To revert control-word to default:
::

    dnRouter(cfg-netsrv-evpn-tp-mpls)# no control-word

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/mpls/fat-label.rst

network-services evpn instance transport-protocol mpls fat-label
----------------------------------------------------------------

**Minimum user role:** operator

Flow Aware Transport (FAT) label is an identifier used to load balance packets as they pass through the network. The first PE looks into the inner packet and calculates a hash, the FAT label. As the packet passes through intermediate routers the FAT label is considered for load-balancing decisions. All packets of same flow will result in the same FAT label and are sent on the same path.

**Command syntax: fat-label [fat-label]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance transport-protocol mpls

**Parameter table**

+-----------+----------------------------------+--------------+---------+
| Parameter | Description                      | Range        | Default |
+===========+==================================+==============+=========+
| fat-label | Define Requested FAT Label Usage | | enabled    | \-      |
|           |                                  | | disabled   |         |
+-----------+----------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# transport-protocol
    dnRouter(cfg-netsrv-evpn-tp)# mpls
    dnRouter(cfg-netsrv-evpn-tp-mpls)# fat-label enabled
    dnRouter(cfg-netsrv-evpn-tp-mpls)#


**Removing Configuration**

To revert fat-label to default:
::

    dnRouter(cfg-netsrv-evpn-tp-mpls)# no fat-label

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/mpls/mpls.rst

network-services evpn instance transport-protocol mpls
------------------------------------------------------

**Minimum user role:** operator

Enter the MPLS Transport hierarchy to configure the relevant options - control word and fat-label.

**Command syntax: mpls**

**Command mode:** config

**Hierarchies**

- network-services evpn instance transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# mpls
    dnRouter(cfg-inst-tp-mpls)#


**Removing Configuration**

To remove the mpls definition
::

    dnRouter(cfg-evpn-inst-tp)# no mpls

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/transport-protocol.rst

network-services evpn instance transport-protocol
-------------------------------------------------

**Minimum user role:** operator

The transport-protocol should be set to MPLS or VxLAN

**Command syntax: transport-protocol**

**Command mode:** config

**Hierarchies**

- network-services evpn instance

**Example**
::

    dnRouter#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)#


**Removing Configuration**

To remove transport-protocol definitions - reverting then to their default values.
::

    dnRouter(cfg-netsrv-evpn-inst)# no transport-protocol

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/vxlan/qos/in/in.rst

network-services evpn instance transport-protocol vxlan qos in
--------------------------------------------------------------

**Minimum user role:** operator

To enter qos in configuration level:

**Command syntax: in**

**Command mode:** config

**Hierarchies**

- network-services evpn instance transport-protocol vxlan qos
- network-services evpn instance interconnect transport-protocol vxlan qos

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# in
    dnRouter(cfg-vxlan-qos-in)#

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# in
    dnRouter(cfg-vxlan-qos-in)#


**Removing Configuration**

To revert all vxlan qos in settings to default values
::

    dnRouter(cfg-tp-vxlan-qos)# no in

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/vxlan/qos/in/known-unicast-bit-rate.rst

network-services evpn instance transport-protocol vxlan qos in known-unicast-bit-rate
-------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the maximum known-unicast traffic bit rate allowed.
When this limit is reached, known-unicast packets will be dropped.

**Command syntax: known-unicast-bit-rate [known-unicast-bit-rate] [rate-units]** burst [known-unicast-burst-size]

**Command mode:** config

**Hierarchies**

- network-services evpn instance transport-protocol vxlan qos in
- network-services evpn instance interconnect transport-protocol vxlan qos in

**Parameter table**

+--------------------------+----------------------------------------------------------------------------------+---------------+---------+
| Parameter                | Description                                                                      | Range         | Default |
+==========================+==================================================================================+===============+=========+
| known-unicast-bit-rate   | Committed rate in killo bits per second for all received known-unicast l2        | 64-1000000000 | \-      |
|                          | traffic from different vteps in the vxlan evpn instance                          |               |         |
+--------------------------+----------------------------------------------------------------------------------+---------------+---------+
| rate-units               |                                                                                  | | kbps        | kbps    |
|                          |                                                                                  | | mbps        |         |
|                          |                                                                                  | | gbps        |         |
+--------------------------+----------------------------------------------------------------------------------+---------------+---------+
| known-unicast-burst-size | Committed burst size in killo bytes (1000 bytes) for all received known-unicast  | 50-255000     | 200     |
|                          | l2 traffic from different vteps in the vxlan evpn instance                       |               |         |
+--------------------------+----------------------------------------------------------------------------------+---------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# in
    dnRouter(cfg-vxlan-qos-in)# known-unicast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-in)# known-unicast-bit-rate 150 kbps burst 50

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# in
    dnRouter(cfg-vxlan-qos-in)# known-unicast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-in)# known-unicast-bit-rate 150 kbps burst 50


**Removing Configuration**

To remove the known-unicast-bit-rate limit:
::

    dnRouter(cfg-vxlan-qos-sc)# known-unicast-bit-rate 150

To revert burst value to default value:
::

    dnRouter(cfg-netsrv-evpn-sc)# no known-unicast-packet-rate 150 kbps burst

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/vxlan/qos/qos.rst

network-services evpn instance transport-protocol vxlan qos
-----------------------------------------------------------

**Minimum user role:** operator

QoS configuration applies traffic behavior for evpn instance traffic recevied or transmitted over vxlan vteps.
To enter the qos configuration level:

**Command syntax: qos**

**Command mode:** config

**Hierarchies**

- network-services evpn instance transport-protocol vxlan
- network-services evpn instance interconnect transport-protocol vxlan

**Note**

- QoS settings apply to traffic received/sent over vxlan related to service vni

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)#

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)#


**Removing Configuration**

To revert all vxlan qos settings to default values
::

    dnRouter(cfg-inst-tp-vxlan)# no qos

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/vxlan/qos/storm-control/broadcast-bit-rate.rst

network-services evpn instance transport-protocol vxlan qos storm-control broadcast-bit-rate
--------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the maximum broadcast traffic bit rate allowed.
When this limit is reached, broadcast packets will be dropped.

**Command syntax: broadcast-bit-rate [broadcast-bit-rate] [rate-units]** burst [broadcast-burst-size]

**Command mode:** config

**Hierarchies**

- network-services evpn instance transport-protocol vxlan qos storm-control
- network-services evpn instance interconnect transport-protocol vxlan qos storm-control

**Parameter table**

+----------------------+-----------------------------------------+---------------+---------+
| Parameter            | Description                             | Range         | Default |
+======================+=========================================+===============+=========+
| broadcast-bit-rate   | Allowed bit rate of broadcast packets   | 64-1000000000 | \-      |
+----------------------+-----------------------------------------+---------------+---------+
| rate-units           |                                         | | kbps        | kbps    |
|                      |                                         | | mbps        |         |
|                      |                                         | | gbps        |         |
+----------------------+-----------------------------------------+---------------+---------+
| broadcast-burst-size | Allowed burst size of broadcast packets | 50-255000     | 200     |
+----------------------+-----------------------------------------+---------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)# broadcast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-sc)# broadcast-bit-rate 150 kbps burst 50

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)# broadcast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-sc)# broadcast-bit-rate 150 kbps burst 50


**Removing Configuration**

To remove the broadcast-bit-rate limit:
::

    dnRouter(cfg-vxlan-qos-sc)# broadcast-bit-rate 150

To revert burst value to default value:
::

    dnRouter(cfg-netsrv-evpn-sc)# no broadcast-packet-rate 150 kbps burst

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/vxlan/qos/storm-control/multicast-bit-rate.rst

network-services evpn instance transport-protocol vxlan qos storm-control multicast-bit-rate
--------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the maximum multicast traffic bit rate allowed.
When this limit is reached, multicast packets will be dropped.

**Command syntax: multicast-bit-rate [multicast-bit-rate] [rate-units]** burst [multicast-burst-size]

**Command mode:** config

**Hierarchies**

- network-services evpn instance transport-protocol vxlan qos storm-control
- network-services evpn instance interconnect transport-protocol vxlan qos storm-control

**Parameter table**

+----------------------+-----------------------------------------+---------------+---------+
| Parameter            | Description                             | Range         | Default |
+======================+=========================================+===============+=========+
| multicast-bit-rate   | Allowed bit rate of multicast packets   | 64-1000000000 | \-      |
+----------------------+-----------------------------------------+---------------+---------+
| rate-units           |                                         | | kbps        | kbps    |
|                      |                                         | | mbps        |         |
|                      |                                         | | gbps        |         |
+----------------------+-----------------------------------------+---------------+---------+
| multicast-burst-size | Allowed burst size of multicast packets | 50-255000     | 200     |
+----------------------+-----------------------------------------+---------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)# multicast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-sc)# multicast-bit-rate 150 kbps burst 50

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)# multicast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-sc)# multicast-bit-rate 150 kbps burst 50


**Removing Configuration**

To remove the multicast-bit-rate limit:
::

    dnRouter(cfg-vxlan-qos-sc)# multicast-bit-rate 150

To revert burst value to default value:
::

    dnRouter(cfg-netsrv-evpn-sc)# no multicast-packet-rate 150 kbps burst

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/vxlan/qos/storm-control/storm-control.rst

network-services evpn instance transport-protocol vxlan qos storm-control
-------------------------------------------------------------------------

**Minimum user role:** operator

Storm Control rate separately limits each of the broadcast, multicast and unknown-unicast packets.
As these packets are replicated to flood all the interfaces attached to the service and all remote PEs in the oppisite inerconnect service, it is important to ensure that these packets are rate limited. 

To enter vxlan qos storm-control configuration level:

**Command syntax: storm-control**

**Command mode:** config

**Hierarchies**

- network-services evpn instance transport-protocol vxlan qos
- network-services evpn instance interconnect transport-protocol vxlan qos

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)#

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)#


**Removing Configuration**

To revert all storm-control configurations to default behavior
::

    dnRouter(cfg-tp-vxlan-qos)# no storm-control

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/vxlan/qos/storm-control/unknown-unicast-bit-rate.rst

network-services evpn instance transport-protocol vxlan qos storm-control unknown-unicast-bit-rate
--------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the maximum unknown-unicast traffic bit rate allowed.
When this limit is reached, unknown-unicast packets will be dropped.

**Command syntax: unknown-unicast-bit-rate [unknown-unicast-bit-rate] [rate-units]** burst [unknown-unicast-burst-size]

**Command mode:** config

**Hierarchies**

- network-services evpn instance transport-protocol vxlan qos storm-control
- network-services evpn instance interconnect transport-protocol vxlan qos storm-control

**Parameter table**

+----------------------------+-----------------------------------------------+---------------+---------+
| Parameter                  | Description                                   | Range         | Default |
+============================+===============================================+===============+=========+
| unknown-unicast-bit-rate   | Allowed bit rate of unknown-unicast packets   | 64-1000000000 | \-      |
+----------------------------+-----------------------------------------------+---------------+---------+
| rate-units                 |                                               | | kbps        | kbps    |
|                            |                                               | | mbps        |         |
|                            |                                               | | gbps        |         |
+----------------------------+-----------------------------------------------+---------------+---------+
| unknown-unicast-burst-size | Allowed burst size of unknown-unicast packets | 50-255000     | 200     |
+----------------------------+-----------------------------------------------+---------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)# unknown-unicast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-sc)# unknown-unicast-bit-rate 150 kbps burst 50

    dnRouter(cfg-netsrv-evpn-inst)# interconnect
    dnRouter(cfg-evpn-inst-ic)# transport-protocol
    dnRouter(cfg-inst-ic-tp)# vxlan
    dnRouter(cfg-ic-tp-vxlan)# qos
    dnRouter(cfg-tp-vxlan-qos)# storm-control
    dnRouter(cfg-vxlan-qos-sc)# unknown-unicast-bit-rate 150 kbps
    dnRouter(cfg-vxlan-qos-sc)# unknown-unicast-bit-rate 150 kbps burst 50


**Removing Configuration**

To remove the unknown-unicast-bit-rate limit:
::

    dnRouter(cfg-vxlan-qos-sc)# unknown-unicast-bit-rate 150

To revert burst value to default value:
::

    dnRouter(cfg-netsrv-evpn-sc)# no unknown-unicast-packet-rate 150 kbps burst

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/vxlan/vni.rst

network-services evpn instance transport-protocol vxlan vni
-----------------------------------------------------------

**Minimum user role:** operator

Virtual Network Identifier (VNI) associated to the EVI. This VNI is used for ingress and egress in the EVPN VXLAN domain
To set VNI:

**Command syntax: vni [vni]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance transport-protocol vxlan

**Note**
- Mandatory configuration when vxlan is selected as transport-protocol
- VNI value must be unique among all vxlan vni setting on system
- VNI value require to be coordinated with PEs in same service
- Reconfiguration of vni value is service effecting and may result in traffic loss

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------+---------+
| Parameter | Description                                                                      | Range      | Default |
+===========+==================================================================================+============+=========+
| vni       | Virtual Network Identifier (VNI) associated to the EVI. This VNI is used for     | 1-16777215 | \-      |
|           | ingress and egress in the VXLAN domain.                                          |            |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# vni 3300


**Removing Configuration**

To remove vni configuration
::

    dnRouter(cfg-netsrv-evpn-tp-vxlan)# no vni

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/vxlan/vtep-source-if.rst

network-services evpn instance transport-protocol vxlan vtep-source-if
----------------------------------------------------------------------

**Minimum user role:** operator

Specify a local interface from which the IP address is taken for egress VTEP (VxLAN) tunnels as outer IP source address.
To set source interface:

**Command syntax: vtep-source-if [loopback interface-name]**

**Command mode:** config

**Hierarchies**

- network-services evpn instance transport-protocol vxlan

**Note**
- Mandatory configuration when vxlan is selected as transport-protocol
- Interface must have the desired address-family ip address configure on it
- For proper evpn vxlan signaling is that the evpn nlri nexthop value be equal to address retrieved from configured vtep-source-ip
- Reconfiguration of vni value is service effecting and may result in traffic loss

**Parameter table**

+-------------------------+----------------------------------------------------------------------------------+--------------------------------+---------+
| Parameter               | Description                                                                      | Range                          | Default |
+=========================+==================================================================================+================================+=========+
| loopback interface-name | The name of the loopback interface from which ip address is taken to be used for | | configured interface name.   | \-      |
|                         | vxlan tunnels source address.                                                    | | lo<0-65535>                  |         |
+-------------------------+----------------------------------------------------------------------------------+--------------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)# vtep-source-if lo0


**Removing Configuration**

To remove vtep-source-if configuration
::

    dnRouter(cfg-netsrv-evpn-tp-vxlan)# no vtep-source-if

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/instance/transport-protocol/vxlan/vxlan.rst

network-services evpn instance transport-protocol vxlan
-------------------------------------------------------

**Minimum user role:** operator

VXLAN - Virtual Extensible LAN (VXLAN) as defined in RFC 7348 is an overlay technology designed to provide Layer 2 and Layer 3 connectivity services over a generic IP network. 
IP networks provide increased scalability, balanced performance and predictable failure recovery (Especially in comparison to L2 based data center networks in the old days). 
VXLAN achieves this by tunneling Layer 2 frames inside of IP packets. VXLAN requires only IP reachability between the VXLAN edge devices (no MPLS), provided by an IP routing protocol.

In order to set service instance to use VxLAN as transport protocol:

**Command syntax: vxlan**

**Command mode:** config

**Hierarchies**

- network-services evpn instance transport-protocol

**Note**

- System default behavior is to leverage MPLS as EVPN transport protocol

- When vxlan is configured for a given EVPN instance, vni and vtep-source-if must be configured.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# instance evpn1
    dnRouter(cfg-netsrv-evpn-inst)# transport-protocol
    dnRouter(cfg-evpn-inst-tp)# vxlan
    dnRouter(cfg-inst-tp-vxlan)#


**Removing Configuration**

To return to default transport protocol (mpls)
::

    dnRouter(cfg-evpn-inst-tp)# no vxlan

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/action.rst

network-services evpn mac-handling loop-prevention action
---------------------------------------------------------

**Minimum user role:** operator

The default setting for the Loop-protection action for all EVPN Instances, the default is suppress.
The supression prevents local learning and moves from remote to local.
Blackholing causes any packets received with a src/dest MAC that is suppressed to be dropped.

**Command syntax: action [action]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention

**Parameter table**

+-----------+------------------------------------------------------------------+---------------+----------+
| Parameter | Description                                                      | Range         | Default  |
+===========+==================================================================+===============+==========+
| action    | Set the action to be applied when the MAC Address is suppressed. | | suppress    | suppress |
|           |                                                                  | | blackhole   |          |
|           |                                                                  | | shutdown    |          |
+-----------+------------------------------------------------------------------+---------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# action blackole
    dnRouter(cfg-evpn-mh-lp)#


**Removing Configuration**

To revert the admin-state configuration to its default value of suppress
::

    dnRouter(cfg-evpn-mh-lp)# no action

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/admin-state.rst

network-services evpn mac-handling loop-prevention admin-state
--------------------------------------------------------------

**Minimum user role:** operator

Loop-protection enabled is the default setting for all evpn instances that are created.
The loop-protection may be disabled by default if this admin-state is set to disabled.
Individual EVPN instances can be configured otherwise to override this default setting.

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention

**Parameter table**

+-------------+------------------------------------------------+--------------+---------+
| Parameter   | Description                                    | Range        | Default |
+=============+================================================+==============+=========+
| admin-state | Enable or Disable the loop-prevention handling | | enabled    | enabled |
|             |                                                | | disabled   |         |
+-------------+------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# admin-state disabled
    dnRouter(cfg-evpn-mh-lp)#


**Removing Configuration**

To revert the admin-state configuration to its default of enabled
::

    dnRouter(cfg-evpn-mh-lp)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/ip-loop-action.rst

network-services evpn mac-handling loop-prevention ip-loop-action
-----------------------------------------------------------------

**Minimum user role:** operator

The default setting for the Loop-protection ip-loop-action for all EVPN Instances, the default is suppress.
Supression prevents moves from remote to local but allows local learning.

**Command syntax: ip-loop-action [ip-loop-action]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention

**Parameter table**

+----------------+-----------------------------------------------------------------+----------+----------+
| Parameter      | Description                                                     | Range    | Default  |
+================+=================================================================+==========+==========+
| ip-loop-action | Set the action to be applied when the IP Address is suppressed. | suppress | suppress |
+----------------+-----------------------------------------------------------------+----------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# ip-loop-action suppress
    dnRouter(cfg-evpn-mh-lp)#


**Removing Configuration**

To revert the admin-state configuration to its default value of suppress
::

    dnRouter(cfg-evpn-mh-lp)# no ip-loop-action

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.2    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/ip-loop-detection-threshold.rst

network-services evpn mac-handling loop-prevention ip-loop-detection-threshold
------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of moves allowed within the ip-loop-detection-window period, the default is 5. If the ip-loop-detection-threshold is reached within this period the IP address is suppressed.

**Command syntax: ip-loop-detection-threshold [ip-loop-detection-threshold]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention

**Parameter table**

+-----------------------------+---------------------------------+-------+---------+
| Parameter                   | Description                     | Range | Default |
+=============================+=================================+=======+=========+
| ip-loop-detection-threshold | the number of ip moves allowed. | 2-30  | 5       |
+-----------------------------+---------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# ip-loop-detection-threshold 6
    dnRouter(cfg-evpn-mh-lp)#


**Removing Configuration**

To restore the loop-detection-window period to its default value of 5.
::

    dnRouter(cfg-evpn-mh-lp)# no ip-loop-detection-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.2    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/ip-loop-detection-window.rst

network-services evpn mac-handling loop-prevention ip-loop-detection-window
---------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default period of the ip-loop-detection-window in seconds, the default is 180 seconds. If the ip-loop-detection-threshold is reached within this period the IP address is suppressed.

**Command syntax: ip-loop-detection-window [ip-loop-detection-window]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention

**Parameter table**

+--------------------------+------------------------------------+-------+---------+
| Parameter                | Description                        | Range | Default |
+==========================+====================================+=======+=========+
| ip-loop-detection-window | the default loop detection period. | 1-600 | 180     |
+--------------------------+------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# ip-loop-detection-window 300
    dnRouter(cfg-evpn-mh-lp)#


**Removing Configuration**

To restore the ip-loop-detection-window period to its default value.
::

    dnRouter(cfg-evpn-mh-lp)# no ip-loop-detection-window

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.2    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/local-loop-prevention/admin-state.rst

network-services evpn mac-handling loop-prevention local-loop-prevention admin-state
------------------------------------------------------------------------------------

**Minimum user role:** operator

Local-Loop-protection enabled is the default setting for all evpn instances that are created.
The local-loop-protection may be disabled by default if this admin-state is set to disabled.
Individual EVPN instances can be configured otherwise to override this default setting. 
If the admin-state of the local-loop-prevention is not configured, then the admin-state of the loop-prevention is taken. 

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention local-loop-prevention

**Parameter table**

+-------------+------------------------------------------------+--------------+---------+
| Parameter   | Description                                    | Range        | Default |
+=============+================================================+==============+=========+
| admin-state | Enable or Disable the loop-prevention handling | | enabled    | enabled |
|             |                                                | | disabled   |         |
+-------------+------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# admin-state disabled
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To revert the admin-state configuration to its default of enabled
::

    dnRouter(cfg-mh-lp-llp)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/local-loop-prevention/local-loop-prevention.rst

network-services evpn mac-handling loop-prevention local-loop-prevention
------------------------------------------------------------------------

**Minimum user role:** operator

Enter the local-loop-prevention hierarchy to modify the default local-loop-prevention attributes for the EVPN instances.

**Command syntax: local-loop-prevention**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To revert the local-loop-prevention configurations to defaults
::

    dnRouter(cfg-evpn-mh-lp))# no local-loop-prevention

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/local-loop-prevention/loop-detection-threshold.rst

network-services evpn mac-handling loop-prevention local-loop-prevention loop-detection-threshold
-------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of moves allowed within the loop-detection-window period. The default is 5. If the loop-detection-threshold is reached within this period, all AC interfaces involved except the first AC interface, are shutdown.

**Command syntax: loop-detection-threshold [loop-detection-threshold]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention local-loop-prevention

**Parameter table**

+--------------------------+---------------------------------+-------+---------+
| Parameter                | Description                     | Range | Default |
+==========================+=================================+=======+=========+
| loop-detection-threshold | the number of MAC moves allowed | 2-30  | 5       |
+--------------------------+---------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# loop-detection-threshold 6
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To restore the loop-detection-window period to its default value of 5.
::

    dnRouter(cfg-mh-lp-llp)# no loop-detection-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/local-loop-prevention/loop-detection-window.rst

network-services evpn mac-handling loop-prevention local-loop-prevention loop-detection-window
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default period of the local loop-detection-window in seconds. The default is 30 seconds. If the local loop-detection-threshold is reached within this period, all AC interfaces involved except the first AC interface, are shutdown .

**Command syntax: loop-detection-window [loop-detection-window]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention local-loop-prevention

**Parameter table**

+-----------------------+------------------------------------+---------+---------+
| Parameter             | Description                        | Range   | Default |
+=======================+====================================+=========+=========+
| loop-detection-window | the default loop detection period. | 1-10000 | 30      |
+-----------------------+------------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# loop-detection-window 300
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To restore the loop-detection-window period to its default value.
::

    dnRouter(cfg-mh-lp-llp)# no loop-detection-window

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/local-loop-prevention/reset-restore-cycles-interval.rst

network-services evpn mac-handling loop-prevention local-loop-prevention reset-restore-cycles-interval
------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default period of the reset-restore-cycles-interval timer in hours. The default is 24 hours. The AC Interface is automatically restored after being shutdown for the restore-timer period.

**Command syntax: reset-restore-cycles-interval [reset-restore-cycles-interval]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention local-loop-prevention

**Parameter table**

+-------------------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter                     | Description                                                                      | Range | Default |
+===============================+==================================================================================+=======+=========+
| reset-restore-cycles-interval | Time interval to be applied following removal of suppression, before clearing    | 1-72  | 24      |
|                               | the restore-cycles counter, assuming no further sanctions are applied.           |       |         |
+-------------------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# reset-restore-cycles-interval 50
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To restore the reset-restore-cycles-interval period to its default value of 24 hours.
::

    dnRouter(cfg-evpn-mh-lp)# no reset-restore-cycles-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/local-loop-prevention/restore-max-cycles.rst

network-services evpn mac-handling loop-prevention local-loop-prevention restore-max-cycles
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of suppression-restore cycles allowed before a permanent shutdown. The default is infinite. When an AC interface is permanently shutdown, only a manual command releases the AC interface.

**Command syntax: restore-max-cycles [restore-max-cycles]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention local-loop-prevention

**Parameter table**

+--------------------+-------------------------------------------+----------------------+----------+
| Parameter          | Description                               | Range                | Default  |
+====================+===========================================+======================+==========+
| restore-max-cycles | the number of AC shutdown cycles allowed. | | 1-10               | infinite |
|                    |                                           | | infinite           |          |
|                    |                                           | | restore-manually   |          |
+--------------------+-------------------------------------------+----------------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# restore-max-cycles 6
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To restore the restore-max-cycles period to its default value of infinite.
::

    dnRouter(cfg-mh-lp-llp)# no restore-max-cycles

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/local-loop-prevention/restore-timer.rst

network-services evpn mac-handling loop-prevention local-loop-prevention restore-timer
--------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default period of the restore timer in seconds. The default is 300 seconds. The AC Interface is automatically restored after being suppressed for the restore timer period.

**Command syntax: restore-timer [restore-timer]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention local-loop-prevention

**Parameter table**

+---------------+-----------------------------------+------------+---------+
| Parameter     | Description                       | Range      | Default |
+===============+===================================+============+=========+
| restore-timer | the default Restore Timer period. | 10-1000000 | 300     |
+---------------+-----------------------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention - dnRouter(cfg-evpn-mh-lp)# local-loop-prevention
    dnRouter(cfg-mh-lp-llp)# restore-timer 600
    dnRouter(cfg-mh-lp-llp)#


**Removing Configuration**

To restore the restore-timer period to its default value.
::

    dnRouter(cfg-mh-lp-llp)# no restore-timer

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/loop-detection-threshold.rst

network-services evpn mac-handling loop-prevention loop-detection-threshold
---------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of moves allowed within the loop-detection-window period, the default is 5. If the loop-detection-threshold is reached within this period the mac address is suppressed.

**Command syntax: loop-detection-threshold [loop-detection-threshold]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention

**Parameter table**

+--------------------------+------------------------------------------+-------+---------+
| Parameter                | Description                              | Range | Default |
+==========================+==========================================+=======+=========+
| loop-detection-threshold | The default number of MAC moves allowed. | 2-30  | 5       |
+--------------------------+------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# loop-detection-threshold 6
    dnRouter(cfg-evpn-mh-lp)#


**Removing Configuration**

To restore the loop-detection-window period to its default value of 5.
::

    dnRouter(cfg-evpn-mh-lp)# no loop-detection-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/loop-detection-window.rst

network-services evpn mac-handling loop-prevention loop-detection-window
------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default period of the loop-detection-window in seconds, the default is 180 seconds. If the loop-detection-threshold is reached within this period the mac address is suppressed.

**Command syntax: loop-detection-window [loop-detection-window]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention

**Parameter table**

+-----------------------+------------------------------------+-------+---------+
| Parameter             | Description                        | Range | Default |
+=======================+====================================+=======+=========+
| loop-detection-window | The default loop detection period. | 1-600 | 180     |
+-----------------------+------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# loop-detection-window 300
    dnRouter(cfg-evpn-mh-lp)#


**Removing Configuration**

To restore the loop-detection-window period to its default value.
::

    dnRouter(cfg-evpn-mh-lp)# no loop-detection-window

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/loop-prevention.rst

network-services evpn mac-handling loop-prevention
--------------------------------------------------

**Minimum user role:** operator

Enter the loop-prevention hierarchy to modify the default loop-prevention attributes for the EVPN instances.

**Command syntax: loop-prevention**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)#


**Removing Configuration**

To revert the loop-prevention configurations to defaults
::

    dnRouter(cfg-netsrv-evpn-mh)# no loop-prevention

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/mac-reset-restore-cycles-interval.rst

network-services evpn mac-handling loop-prevention mac-reset-restore-cycles-interval
------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the default period of the mac-reset-restore-cycles-interval timer in hours, the default is 24 hours. The mac address is automatically restored after being suppressed for the mac-restore timer period.

**Command syntax: mac-reset-restore-cycles-interval [mac-reset-restore-cycles-interval]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention

**Parameter table**

+-----------------------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter                         | Description                                                                      | Range | Default |
+===================================+==================================================================================+=======+=========+
| mac-reset-restore-cycles-interval | Time interval to be applied following removal of suppression, before clearing    | 1-72  | 24      |
|                                   | the restore-cycles counter, assuming no further sanctions are applied.           |       |         |
+-----------------------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# mac-reset-restore-cycles-interval 50
    dnRouter(cfg-evpn-mh-lp)#


**Removing Configuration**

To restore the mac-reset-restore-cycles-interval period to its default value of 24 hours.
::

    dnRouter(cfg-evpn-mh-lp)# no mac-reset-restore-cycles-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/mac-restore-max-cycles.rst

network-services evpn mac-handling loop-prevention mac-restore-max-cycles
-------------------------------------------------------------------------

**Minimum user role:** operator

Configure the number of suppression-restore cycles allowed before a permanent supprfession, the default is infinite. When a MAC address is permanently suppressed only a manual command releases the MAC address.

**Command syntax: mac-restore-max-cycles [mac-restore-max-cycles]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention

**Parameter table**

+------------------------+-------------------------------------------+----------------------+----------+
| Parameter              | Description                               | Range                | Default  |
+========================+===========================================+======================+==========+
| mac-restore-max-cycles | the number of suppression cycles allowed. | | 1-10               | infinite |
|                        |                                           | | infinite           |          |
|                        |                                           | | restore-manually   |          |
+------------------------+-------------------------------------------+----------------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# mac-restore-max-cycles 6
    dnRouter(cfg-evpn-mh-lp)#


**Removing Configuration**

To restore the mac-restore-max-cycles period to its default value of infinite.
::

    dnRouter(cfg-evpn-mh-lp)# no mac-restore-max-cycles

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/loop-prevention/mac-restore-timer.rst

network-services evpn mac-handling loop-prevention mac-restore-timer
--------------------------------------------------------------------

**Minimum user role:** operator

Configure the default period of the mac-restore timer in seconds, the default is 300 seconds. The MAC address is automatically restored after being suppressed for the mac-restore timer period.

**Command syntax: mac-restore-timer [mac-restore-timer]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling loop-prevention

**Parameter table**

+-------------------+---------------------------------------+------------+---------+
| Parameter         | Description                           | Range      | Default |
+===================+=======================================+============+=========+
| mac-restore-timer | the default MAC Restore Timer period. | 10-1000000 | 300     |
+-------------------+---------------------------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# loop-prevention
    dnRouter(cfg-evpn-mh-lp)# mac-restore-timer 600
    dnRouter(cfg-evpn-mh-lp)#


**Removing Configuration**

To restore the mac-restore-timer period to its default value.
::

    dnRouter(cfg-evpn-mh-lp)# no mac-restore-timer

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/mac-handling.rst

network-services evpn mac-handling
----------------------------------

**Minimum user role:** operator

Enter the mac-learning hierarchy to modify the default mac-learning attributes for any new EVPN instances that are subsequently created.

**Command syntax: mac-handling**

**Command mode:** config

**Hierarchies**

- network-services evpn

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)#


**Removing Configuration**

To revert the mac-handling configurations to defaults
::

    no mac-handling

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/mac-learning.rst

network-services evpn mac-handling mac-learning
-----------------------------------------------

**Minimum user role:** operator

Mac-learning enabled is the default setting for EVPN instances.
By defining this knob, mac-learning will be disabled for all new EVPN instances, it will not effect existing services.

**Command syntax: mac-learning [mac-learning]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling

**Parameter table**

+--------------+----------------------+--------------+---------+
| Parameter    | Description          | Range        | Default |
+==============+======================+==============+=========+
| mac-learning | Disable MAC Learning | | enabled    | enabled |
|              |                      | | disabled   |         |
+--------------+----------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# mac-learning enabled
    dnRouter(cfg-netsrv-evpn-mh)#


**Removing Configuration**

To revert the mac-learning configuration to its default of enabled
::

    no mac-learning

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/mac-table-aging-time.rst

network-services evpn mac-handling mac-table-aging-time
-------------------------------------------------------

**Minimum user role:** operator

"Configure the default aging time for the entries in the MAC Table that will be set for any new EVPN instances.
Allowed aging time values are: 0 (no aging), 60, 120, 320, 640, 1280 seconds.
If the aging time is set to zero, no aging will be applied. The entries will remain until removed manually via the clear command.
The aging mechanism implementation has some variabilities such that the actual aging time is:

60 +/- 20 seconds 
120 +/- 40 seconds 
320 +/- 160 seconds 
640 +/- 320 seconds 
1280 +/- 640 seconds"

**Command syntax: mac-table-aging-time [mac-table-aging-time]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling

**Parameter table**

+----------------------+--------------------------------------------------------------------------------+----------------------------+---------+
| Parameter            | Description                                                                    | Range                      | Default |
+======================+================================================================================+============================+=========+
| mac-table-aging-time | the default mac-table aging time (in seconds), to be applied to EVPN instances | 0, 60, 120, 320, 640, 1280 | 320     |
+----------------------+--------------------------------------------------------------------------------+----------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# mac-table-aging-time 120
    dnRouter(cfg-netsrv-evpn-mh)#


**Removing Configuration**

To restore the default MAC Table aging time to its default value.
::

    dnRouter(dnRouter(cfg-netsrv-evpn-mh)# no mac-table-aging-time

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/mac-handling/mac-table-limit.rst

network-services evpn mac-handling mac-table-limit
--------------------------------------------------

**Minimum user role:** operator

Configure the maximum number of entries in the MAC Table for any new EVPN instances. When this limit is reached, new MAC addresses will not be added to the MAC Table.

**Command syntax: mac-table-limit [mac-table-limit]**

**Command mode:** config

**Hierarchies**

- network-services evpn mac-handling

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+-----------+---------+
| Parameter       | Description                                                                      | Range     | Default |
+=================+==================================================================================+===========+=========+
| mac-table-limit | the maximum number of entries allowed in the mac-table, to be applied to EVPN    | 20-220000 | 64000   |
|                 | instances                                                                        |           |         |
+-----------------+----------------------------------------------------------------------------------+-----------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# mac-handling
    dnRouter(cfg-netsrv-evpn-mh)# mac-table-limit 10000
    dnRouter(cfg-netsrv-evpn-mh)#


**Removing Configuration**

To restore the MAC Table limit to its default value.
::

    dnRouter(cfg-netsrv-evpn-mh)# no mac-table-limit

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## evpn/storm-control/broadcast-packet-rate.rst

network-services evpn storm-control broadcast-packet-rate
---------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum broadcast packet rate allowed. When this limit is reached, packets will be dropped. This limit can be overridden by per instance or per interface storm-control configurations.

**Command syntax: broadcast-packet-rate [broadcast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services evpn storm-control

**Parameter table**

+-----------------------+------------------------------------------+--------------+---------+
| Parameter             | Description                              | Range        | Default |
+=======================+==========================================+==============+=========+
| broadcast-packet-rate | Allowed packet rate of broadcast packets | 10-100000000 | \-      |
+-----------------------+------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# storm-control
    dnRouter(cfg-netsrv-evpn-sc)# broadcast-packet-rate 10000
    dnRouter(cfg-netsrv-evpn-sc)#


**Removing Configuration**

To remove the broadcast-packet-rate limit.
::

    dnRouter(cfg-netsrv-evpn-sc)# no broadcast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## evpn/storm-control/multicast-packet-rate.rst

network-services evpn storm-control multicast-packet-rate
---------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum multicast packet rate allowed. When this limit is reached, packets will be dropped. This limit can be overridden by per instance or per interface storm-control configurations.

**Command syntax: multicast-packet-rate [multicast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services evpn storm-control

**Parameter table**

+-----------------------+------------------------------------------+--------------+---------+
| Parameter             | Description                              | Range        | Default |
+=======================+==========================================+==============+=========+
| multicast-packet-rate | Allowed packet rate of multicast packets | 10-100000000 | \-      |
+-----------------------+------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# storm-control
    dnRouter(cfg-netsrv-evpn-sc)# multicast-packet-rate 10000
    dnRouter(cfg-netsrv-evpn-sc)#


**Removing Configuration**

To remove the multicast-packet-rate limit.
::

    dnRouter(cfg-netsrv-evpn-sc)# no multicast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## evpn/storm-control/storm-control.rst

network-services evpn storm-control
-----------------------------------

**Minimum user role:** operator

Storm Control rate separately limits each of the broadcast, multicast and unknown-unicast packets.
As these packets are replicated to flood all the interfaces attached to the instance, it is important
to ensure that these packets are rate limited. The rate limits configured at this level are applied
to all instances as their default unless configured otherwise at the instance or interface levels.

**Command syntax: storm-control**

**Command mode:** config

**Hierarchies**

- network-services evpn

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# storm-control
    dnRouter(cfg-netsrv-evpn-sc)


**Removing Configuration**

To remove all global storm control configurations
::

    dnRouter(cfg-netsrv-evpn)# no storm-control

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## evpn/storm-control/unknown-unicast-packet-rate.rst

network-services evpn storm-control unknown-unicast-packet-rate
---------------------------------------------------------------

**Minimum user role:** operator

Configure the default value (range: 10..100000000 pps) for the maximum unknown-unicast packet rate allowed. When this limit is reached, packets will be dropped. This limit can be overridden by per instance or per interface storm-control configurations.

**Command syntax: unknown-unicast-packet-rate [unknown-unicast-packet-rate]**

**Command mode:** config

**Hierarchies**

- network-services evpn storm-control

**Parameter table**

+-----------------------------+------------------------------------------------+--------------+---------+
| Parameter                   | Description                                    | Range        | Default |
+=============================+================================================+==============+=========+
| unknown-unicast-packet-rate | Allowed packet rate of unknown-unicast packets | 10-100000000 | \-      |
+-----------------------------+------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# bridge-domain
    dnRouter(cfg-netsrv-evpn)# storm-control
    dnRouter(cfg-netsrv-evpn-sc)# unknown-unicast-packet-rate 10000
    dnRouter(cfg-netsrv-evpn-sc)#


**Removing Configuration**

To remove the unknown-unicast-packet-rate limit.
::

    dnRouter(cfg-netsrv-evpn-sc)# no unknown-unicast-packet-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## evpn/transport-protocol/mpls/control-word.rst

network-services evpn transport-protocol mpls control-word
----------------------------------------------------------

**Minimum user role:** operator

Define the MPLS control word option. The Control-word is always set to zero. When enabled it is added to the packets as a marker indicating that the the inner layer 2 packet is an ethernet packet. The Control-word is only used with MPLS transport layer.

**Command syntax: control-word [control-word]**

**Command mode:** config

**Hierarchies**

- network-services evpn transport-protocol mpls

**Parameter table**

+--------------+---------------------------------+--------------+---------+
| Parameter    | Description                     | Range        | Default |
+==============+=================================+==============+=========+
| control-word | Set control-word usage for evpn | | enabled    | enabled |
|              |                                 | | disabled   |         |
+--------------+---------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# transport-protocol
    dnRouter(cfg-netsrv-evpn-tp)# mpls
    dnRouter(cfg-netsrv-evpn-tp-mpls)# control-word disabled
    dnRouter(cfg-netsrv-evpn-tp-mpls)#


**Removing Configuration**

To revert control-word to default:
::

    dnRouter(cfg-netsrv-evpn-tp-mpls)# no control-word

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.4    | Command introduced |
+---------+--------------------+

---

## evpn/transport-protocol/mpls/fat-label.rst

network-services evpn transport-protocol mpls fat-label
-------------------------------------------------------

**Minimum user role:** operator

Flow Aware Transport (FAT) label is an identifier used to load balance packets as they pass through the network. The first PE looks into the inner packet and calculates a hash, the FAT label. As the packet passes through intermediate routers the FAT label is considered for load-balancing decisions. All packets of same flow will result in the same FAT label and are sent on the same path.

**Command syntax: fat-label [fat-label]**

**Command mode:** config

**Hierarchies**

- network-services evpn transport-protocol mpls

**Parameter table**

+-----------+----------------------------------+--------------+----------+
| Parameter | Description                      | Range        | Default  |
+===========+==================================+==============+==========+
| fat-label | Define Requested FAT Label Usage | | enabled    | disabled |
|           |                                  | | disabled   |          |
+-----------+----------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# transport-protocol
    dnRouter(cfg-netsrv-evpn-tp)# mpls
    dnRouter(cfg-netsrv-evpn-tp-mpls)# fat-label enabled
    dnRouter(cfg-netsrv-evpn-tp-mpls)#


**Removing Configuration**

To revert fat-label to default:
::

    dnRouter(cfg-netsrv-evpn-tp-mpls)# no fat-label

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.4    | Command introduced |
+---------+--------------------+

---

## evpn/transport-protocol/mpls/mpls.rst

network-services evpn transport-protocol mpls
---------------------------------------------

**Minimum user role:** operator

Define the MPLS Transport and the relevant options - control word and fat-label.

**Command syntax: mpls**

**Command mode:** config

**Hierarchies**

- network-services evpn transport-protocol

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# transport-protocol
    dnRouter(cfg-netsrv-evpn-tp)# mpls
    dnRouter(cfg-netsrv-evpn-tp-mpls)#


**Removing Configuration**

To remove the mpls definition
::

    dnRouter(cfg-evpn-inst-tp)# no mpls

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.4    | Command introduced |
+---------+--------------------+

---

## evpn/transport-protocol/transport-protocol.rst

network-services evpn transport-protocol
----------------------------------------

**Minimum user role:** operator

The transport-protocol should be set to MPLS or VxLAN

**Command syntax: transport-protocol**

**Command mode:** config

**Hierarchies**

- network-services evpn

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# evpn
    dnRouter(cfg-netsrv-evpn)# transport-protocol
    dnRouter(cfg-netsrv-evpn-tp)#


**Removing Configuration**

To remove transport-protocol definitions - reverting then to their default values.
::

    dnRouter(cfg-netsrv-evpn)# no transport-protocol

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.4    | Command introduced |
+---------+--------------------+

---

## multihoming/designated-forwarder/algorithm_highest_preference.rst

network-services multihoming designated-forwarder algorithm highest-preference value
------------------------------------------------------------------------------------

**Minimum user role:** operator

Defines the default value to be the highest-preference algorithm, for the algorithm that the user would like to use to choose the Designated Forwarder.
This value can be modified per interface by setting the per interface knob.

**Command syntax: algorithm highest-preference value [preference-value]**

**Command mode:** config

**Hierarchies**

- network-services multihoming designated-forwarder

**Parameter table**

+------------------+----------------------+---------+---------+
| Parameter        | Description          | Range   | Default |
+==================+======================+=========+=========+
| preference-value | The preference value | 0-65535 | \-      |
+------------------+----------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# designated-forwarder
    dnRouter(cfg-netsrv-mh-df)# algorithm highest-preference value 10000
    dnRouter(cfg-netsrv-mh-df)#


**Removing Configuration**

To restore the default value of the algorithm to mod.
::

    dnRouter(cfg-netsrv-mh-df)# no algorithm

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/designated-forwarder/algorithm_mod.rst

network-services multihoming designated-forwarder algorithm mod
---------------------------------------------------------------

**Minimum user role:** operator

Defines the default value to be the mod algorithm, for the algorithm that the user would like to use to choose the Designated Forwarder.
This value can be modified per interface by setting the per interface knob.

**Command syntax: algorithm mod**

**Command mode:** config

**Hierarchies**

- network-services multihoming designated-forwarder

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# designated-forwarder
    dnRouter(cfg-netsrv-mh-df)# algorithm mod
    dnRouter(cfg-netsrv-mh-df)#


**Removing Configuration**

To restore the default value of the algorithm to mod.
::

    dnRouter(cfg-netsrv-mh-df)# no algorithm

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/designated-forwarder/algorithm.rst

network-services multihoming designated-forwarder algorithm
-----------------------------------------------------------

**Minimum user role:** operator

Defines the default value for the algorithm that the user would like to use for choosing the Designated Forwarder.
This value can be modified per interface by setting the per interface knob.

**Command syntax: algorithm [algorithm]**

**Command mode:** config

**Hierarchies**

- network-services multihoming designated-forwarder

**Parameter table**

+-----------+---------------------------------------+----------------------+---------+
| Parameter | Description                           | Range                | Default |
+===========+=======================================+======================+=========+
| algorithm | algorithm to calculate the DF and BDF | mod                  | mod     |
|           |                                       | highest-preference   |         |
+-----------+---------------------------------------+----------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# designated-forwarder
    dnRouter(cfg-netsrv-mh-df)# algorithm mod
    dnRouter(cfg-netsrv-mh-df)#


**Removing Configuration**

To restore the default value of the algorithm to mod.
::

    dnRouter(cfg-netsrv-mh-df)# no algorithm

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/designated-forwarder/designated-forwarder.rst

network-services multihoming designated-forwarder
-------------------------------------------------

**Minimum user role:** operator

To enter the designated-forwarder configuration mode:

**Command syntax: designated-forwarder**

**Command mode:** config

**Hierarchies**

- network-services multihoming

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# designated-forwarder
    dnRouter(cfg-netsrv-mh-df)#


**Removing Configuration**

To remove all default designated forwarder configurations:
::

    dnRouter(cfg-netsrv-mh)# no designated-forwader

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/designated-forwarder/df-propagation.rst

network-services multihoming designated-forwarder df-propagation
----------------------------------------------------------------

**Minimum user role:** operator

Set whether df-propagation shall be enabled or disabled. 
When enabled, if this PE is not the DF then LACP signals OOS to the CE.

**Command syntax: df-propagation [df-propagation]**

**Command mode:** config

**Hierarchies**

- network-services multihoming designated-forwarder

**Parameter table**

+----------------+------------------------------------------------------------------+------------+----------+
| Parameter      | Description                                                      | Range      | Default  |
+================+==================================================================+============+==========+
| df-propagation | Whether non-DF should be propagated to CE using LACP out-of-sync | enabled    | disabled |
|                |                                                                  | disabled   |          |
+----------------+------------------------------------------------------------------+------------+----------+

**Example**
::

    dev-dnRouter#
    dev-dnRouter# configure
    dev-dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-mh-int)# designated-forwarder
    dnRouter(cfg-mh-int-df)# df-propagation enabled
    dnRouter(cfg-mh-int-df)#


**Removing Configuration**

To revert the df-propagation configuration to its default of disabled.
::

    dnRouter(cfg-mh-int-df)# no df-propagation

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## multihoming/designated-forwarder/election-time.rst

network-services multihoming designated-forwarder election-time
---------------------------------------------------------------

**Minimum user role:** operator

Set the default value for the election time upon configuration - how many seconds to wait for the Route Type 4 response from the PE devices.
This value can be modified per interface by using the per-interface knob.

**Command syntax: election-time [election-time]**

**Command mode:** config

**Hierarchies**

- network-services multihoming designated-forwarder

**Parameter table**

+---------------+-------------------------------------------+-------+---------+
| Parameter     | Description                               | Range | Default |
+===============+===========================================+=======+=========+
| election-time | time in seconds to wait for Type 4 routes | 0-300 | 3       |
+---------------+-------------------------------------------+-------+---------+

**Example**
::

    dev-dnRouter#
    dev-dnRouter# configure
    dev-dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# designated-forwarder
    dnRouter(cfg-netsrv-mh-df)# election-time 5
    dnRouter(cfg-netsrv-mh-df)#


**Removing Configuration**

To revert the default election-time configuration to its default of 3 seconds.
::

    dnRouter(cfg-netsrv-mh-df)# no election-time

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/designated-forwarder/no-preemption.rst

network-services multihoming designated-forwarder no-preemption
---------------------------------------------------------------

**Minimum user role:** operator

Set the default value for whether no-premption is enabled or disabled.
This value can be modified per interface by setting the per-interface knob.

**Command syntax: no-preemption [no-preemption]**

**Command mode:** config

**Hierarchies**

- network-services multihoming designated-forwarder

**Parameter table**

+---------------+------------------------------------------------------------------+--------------+----------+
| Parameter     | Description                                                      | Range        | Default  |
+===============+==================================================================+==============+==========+
| no-preemption | Whether this PE, when it is the DF, requests not to be preempted | | enabled    | disabled |
|               |                                                                  | | disabled   |          |
+---------------+------------------------------------------------------------------+--------------+----------+

**Example**
::

    dev-dnRouter#
    dev-dnRouter# configure
    dev-dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# designated-forwarder
    dnRouter(cfg-netsrv-mh-df)# no-preemption enabled
    dnRouter(cfg-netsrv-mh-df)#


**Removing Configuration**

To revert the default no-preemption configuration to disabled.
::

    dnRouter(cfg-netsrv-mh-df)# no no-preemption

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.0    | Command introduced |
+---------+--------------------+

---

## multihoming/interface/designated-forwarder/algorithm_highest_preference.rst

network-services multihoming interface designated-forwarder algorithm highest-preference value
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

Defines the highest-preference algorithm as the algorithm that the user would like to use to choose the Designated Forwarder.
The actual algorithm used will depend on agreement between all the PE devices attached to the same ES.

**Command syntax: algorithm highest-preference value [preference-value]**

**Command mode:** config

**Hierarchies**

- network-services multihoming interface designated-forwarder

**Parameter table**

+------------------+----------------------+---------+---------+
| Parameter        | Description          | Range   | Default |
+==================+======================+=========+=========+
| preference-value | The preference value | 0-65535 | \-      |
+------------------+----------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-mh-int)# designated-forwarder
    dnRouter(cfg-mh-int-df)# algorithm highest-preference value 10000
    dnRouter(cfg-mh-int-df)#


**Removing Configuration**

To restore the algorithm to its default value.
::

    dnRouter(cfg-mh-int-df)# no algorithm

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/interface/designated-forwarder/algorithm_mod.rst

network-services multihoming interface designated-forwarder algorithm mod
-------------------------------------------------------------------------

**Minimum user role:** operator

Defines the mod algorithm as the algorithm that the user would like to use to choose the Default Forwarder.
The actual algorithm used will depend on the agreement between all the PE devices attached to the same ES.

**Command syntax: algorithm mod**

**Command mode:** config

**Hierarchies**

- network-services multihoming interface designated-forwarder

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-mh-int)# designated-forwarder
    dnRouter(cfg-mh-int-df)# algorithm mod
    dnRouter(cfg-mh-int-df)#


**Removing Configuration**

To restore the algorithm to its default value.
::

    dnRouter(cfg-mh-int-df)# no algorithm

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/interface/designated-forwarder/algorithm.rst

network-services multihoming interface designated-forwarder algorithm
---------------------------------------------------------------------

**Minimum user role:** operator

Defines the algorithm that the user would like to use for choosing the Default Forwarder.
The actual algorithm used will depend on agreement between all the PEs attached to the same ES.

**Command syntax: algorithm [algorithm]**

**Command mode:** config

**Hierarchies**

- network-services multihoming interface designated-forwarder

**Parameter table**

+-----------+---------------------------------------+----------------------+---------+
| Parameter | Description                           | Range                | Default |
+===========+=======================================+======================+=========+
| algorithm | algorithm to calculate the DF and BDF | mod                  | mod     |
|           |                                       | highest-preference   |         |
+-----------+---------------------------------------+----------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-mh-int)# designated-forwarder
    dnRouter(cfg-mh-int-df)# algorithm mod
    dnRouter(cfg-mh-int-df)#


**Removing Configuration**

To restore the algorithm to its default value.
::

    dnRouter(cfg-mh-int-df)# no algorithm

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/interface/designated-forwarder/designated-forwarder.rst

network-services multihoming interface designated-forwarder
-----------------------------------------------------------

**Minimum user role:** operator

To enter the designated-forwarder configuration mode:

**Command syntax: designated-forwarder**

**Command mode:** config

**Hierarchies**

- network-services multihoming interface

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-mh-int)# designated-forwarder
    dnRouter(cfg-mh-int-df)#


**Removing Configuration**

To remove all designated forwarder configurations:
::

    dnRouter(cfg-netsrv-mh-int)# no designated-forwader

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/interface/designated-forwarder/df-propagation.rst

network-services multihoming interface designated-forwarder df-propagation
--------------------------------------------------------------------------

**Minimum user role:** operator

Set whether df-propagation shall be enabled or disabled. 
When enabled, if this PE is not the DF then LACP signals OOS to the CE.

**Command syntax: df-propagation [df-propagation]**

**Command mode:** config

**Hierarchies**

- network-services multihoming interface designated-forwarder

**Parameter table**

+----------------+------------------------------------------------------------------+------------+---------+
| Parameter      | Description                                                      | Range      | Default |
+================+==================================================================+============+=========+
| df-propagation | Whether non-DF should be propagated to CE using LACP out-of-sync | enabled    | \-      |
|                |                                                                  | disabled   |         |
+----------------+------------------------------------------------------------------+------------+---------+

**Example**
::

    dev-dnRouter#
    dev-dnRouter# configure
    dev-dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-mh-int)# designated-forwarder
    dnRouter(cfg-mh-int-df)# df-propagation enabled
    dnRouter(cfg-mh-int-df)#


**Removing Configuration**

To revert the df-propagation configuration to its default of disabled.
::

    dnRouter(cfg-mh-int-df)# no df-propagation

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## multihoming/interface/designated-forwarder/election-time.rst

network-services multihoming interface designated-forwarder election-time
-------------------------------------------------------------------------

**Minimum user role:** operator

Set the election time - how many seconds to wait for the Route Type 4 response from the PE devices.

**Command syntax: election-time [election-time]**

**Command mode:** config

**Hierarchies**

- network-services multihoming interface designated-forwarder

**Parameter table**

+---------------+-------------------------------------------+-------+---------+
| Parameter     | Description                               | Range | Default |
+===============+===========================================+=======+=========+
| election-time | time in seconds to wait for Type 4 routes | 0-300 | \-      |
+---------------+-------------------------------------------+-------+---------+

**Example**
::

    dev-dnRouter#
    dev-dnRouter# configure
    dev-dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-mh-int)# designated-forwarder
    dnRouter(cfg-mh-int-df)# election-time 5
    dnRouter(cfg-mh-int-df)#


**Removing Configuration**

To revert the election-time configuration to its default as configured under multihoming.
::

    dnRouter(cfg-mh-int-df)# no election-time

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/interface/designated-forwarder/no-preemption.rst

network-services multihoming interface designated-forwarder no-preemption
-------------------------------------------------------------------------

**Minimum user role:** operator

Set whether no-premption shall be enabled or disabled.

**Command syntax: no-preemption [no-preemption]**

**Command mode:** config

**Hierarchies**

- network-services multihoming interface designated-forwarder

**Parameter table**

+---------------+------------------------------------------------------------------+--------------+---------+
| Parameter     | Description                                                      | Range        | Default |
+===============+==================================================================+==============+=========+
| no-preemption | Whether this PE, when it is the DF, requests not to be preempted | | enabled    | \-      |
|               |                                                                  | | disabled   |         |
+---------------+------------------------------------------------------------------+--------------+---------+

**Example**
::

    dev-dnRouter#
    dev-dnRouter# configure
    dev-dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-mh-int)# designated-forwarder
    dnRouter(cfg-mh-int-df)# no-preemption enabled
    dnRouter(cfg-mh-int-df)#


**Removing Configuration**

To revert the mac-learning configuration to its default of enabled.
::

    dnRouter(cfg-mh-int-df)# no no-preemption

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.0    | Command introduced |
+---------+--------------------+

---

## multihoming/interface/esi_arbitrary.rst

network-services multihoming interface esi arbitrary value
----------------------------------------------------------

**Minimum user role:** operator

Sets the ESI of the interface.

**Command syntax: esi arbitrary value [esi-value]**

**Command mode:** config

**Hierarchies**

- network-services multihoming interface

**Note**

- Only the Arbitrary Type requires a Value.

**Parameter table**

+-----------+-----------------------------------------+-------+---------+
| Parameter | Description                             | Range | Default |
+===========+=========================================+=======+=========+
| esi-value | Define the value for the Arbitrary Type | \-    | \-      |
+-----------+-----------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-mh-int)# esi arbitrary value 11:22:33:44:55:66:77:88:99
    dnRouter(cfg-netsrv-mh-int)#


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-netsrv-mh-int)# no esi

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/interface/esi_lacp.rst

network-services multihoming interface esi lacp
-----------------------------------------------

**Minimum user role:** operator

Sets the ESI of the interface. 

**Command syntax: esi lacp [esi-lacp-source]**

**Command mode:** config

**Hierarchies**

- network-services multihoming interface

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+-----------+---------+
| Parameter       | Description                                                                      | Range     | Default |
+=================+==================================================================================+===========+=========+
| esi-lacp-source | Select whether the LACP System-id and Port key shall be taken from the remote CE | remote-id | \-      |
|                 | (future: or from the local side)                                                 |           |         |
+-----------------+----------------------------------------------------------------------------------+-----------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-mh-int)# esi lacp remote-id
    dnRouter(cfg-netsrv-mh-int)#


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-netsrv-mh-int)# no esi

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## multihoming/interface/esi.rst

network-services multihoming interface esi value
------------------------------------------------

**Minimum user role:** operator

Sets the ESI of the interface.

**Command syntax: esi [esi-type] value [esi-value]**

**Command mode:** config

**Hierarchies**

- network-services multihoming interface

**Note**

- Only the Arbitrary Type requires a Value.

**Parameter table**

+-----------+-----------------------------------------+-----------+---------+
| Parameter | Description                             | Range     | Default |
+===========+=========================================+===========+=========+
| esi-type  | the ESI                                 | arbitrary | \-      |
+-----------+-----------------------------------------+-----------+---------+
| esi-value | Define the value for the Arbitrary Type | \-        | \-      |
+-----------+-----------------------------------------+-----------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-mh-int)#


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-netsrv-mh-int)# no esi

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/interface/interface.rst

network-services multihoming interface
--------------------------------------

**Minimum user role:** operator

Configure a multihomed interface.

 - An interface must be a l2-service enabled interface.



**Command syntax: interface [name]**

**Command mode:** config

**Hierarchies**

- network-services multihoming

**Note**

- Support only interface of type <geX-X/X/X/bundle-X/<geX-X/X/X.Y>/<bundle-X.Y>.

**Parameter table**

+-----------+------------------------------------------------+------------------+---------+
| Parameter | Description                                    | Range            | Default |
+===========+================================================+==================+=========+
| name      | Associate an interface to the EVPN Multihoming | | string         | \-      |
|           |                                                | | length 1-255   |         |
+-----------+------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-mh-int)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface bundle-1
    dnRouter(cfg-netsrv-mh-int)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0.10
    dnRouter(cfg-evpn-mh-int)#



**Removing Configuration**

To remove the interface from its association to multihoming
::

    dnRouter(cfg-netsrv-mh)# no interface ge100-0/0/0

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/interface/no-startup-delay.rst

network-services multihoming interface no-startup-delay
-------------------------------------------------------

**Minimum user role:** operator

Prevents the startup-delay to be applied on this multihomed parent interface (physical interfaces or bundles).
The delay (if configured under multihoming) would normally have been applied upon startup after a power-cycle,
cold-restart or warm-restart on all the multihomed interfaces.

**Command syntax: no-startup-delay**

**Command mode:** config

**Hierarchies**

- network-services multihoming interface

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# no-startup-delay


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-netsrv-mh)# no no-startup-delay

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## multihoming/interface/redundancy-mode.rst

network-services multihoming interface redundancy-mode
------------------------------------------------------

**Minimum user role:** operator

Sets the redundancy-mode for the AC interface -  all-active, single-active or port-active. 

**Command syntax: redundancy-mode [redundancy-mode]**

**Command mode:** config

**Hierarchies**

- network-services multihoming interface

**Parameter table**

+-----------------+----------------------------------------------------------+-------------------+---------+
| Parameter       | Description                                              | Range             | Default |
+=================+==========================================================+===================+=========+
| redundancy-mode | interface type, single-active, port-active or all-active | | single-active   | \-      |
|                 |                                                          | | all-active      |         |
|                 |                                                          | | port-active     |         |
+-----------------+----------------------------------------------------------+-------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# interface ge100-0/0/0
    dnRouter(cfg-netsrv-mh-int)# redundancy-mode single-active


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-netsrv-mh-int)# no redundancy-mode

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/multihoming.rst

network-services multihoming
----------------------------

**Minimum user role:** operator

When an CE device is connected to two different core PE devices for redundancy and loadsharing purposes, this is referred to as a multihomw=ed CE device .
Under the multihoming branch the ACs which are multihomed can be defined.
To enter the multihoming configuration mode:

**Command syntax: multihoming**

**Command mode:** config

**Hierarchies**

- network-services

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# multihoming
    dnRouter(cfg-network-services-mh)#


**Removing Configuration**

To remove all multihoming configurations:
::

    dnRouter(cfg-network-services)# no multihoming

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/redundancy-mode.rst

network-services multihoming redundancy-mode
--------------------------------------------

**Minimum user role:** operator

Sets the default redundancy-mode - single-active or all-active.

**Command syntax: redundancy-mode [redundancy-mode]**

**Command mode:** config

**Hierarchies**

- network-services multihoming

**Parameter table**

+-----------------+---------------------------------------------+-------------------+------------+
| Parameter       | Description                                 | Range             | Default    |
+=================+=============================================+===================+============+
| redundancy-mode | interface type, single-active or all-active | | single-active   | all-active |
|                 |                                             | | all-active      |            |
|                 |                                             | | port-active     |            |
+-----------------+---------------------------------------------+-------------------+------------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# redundancy-mode single-active
    dnRouter(cfg-netsrv-mh)#


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-netsrv-mh)# no redundancy-mode

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## multihoming/startup-delay.rst

network-services multihoming startup-delay
------------------------------------------

**Minimum user role:** operator

Sets the startup-delay to be applied on all multihomed parent interfaces (physical interfaces or bundles).
The delay is applied upon startup after power-cycle, cold-restart or warm-restart.

**Command syntax: startup-delay [startup-delay]**

**Command mode:** config

**Hierarchies**

- network-services multihoming

**Parameter table**

+---------------+----------------------------------------------------------------------------------+---------+---------+
| Parameter     | Description                                                                      | Range   | Default |
+===============+==================================================================================+=========+=========+
| startup-delay | Delay in seconds to apply to multihomed interfaces upon startup of the           | 60-1800 | \-      |
|               | interface, while keeping the laser-off                                           |         |         |
+---------------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# multihoming
    dnRouter(cfg-netsrv-mh)# startup-delay 500
    dnRouter(cfg-netsrv-mh)#


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-netsrv-mh)# no startup-delay

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## network-services.rst

network-services
----------------

**Minimum user role:** operator

Enter the network-services configuration hierarchy.

**Command syntax: network-services**

**Command mode:** config

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)#


**Removing Configuration**

To remove services for non-default VRFs:
::

    no network-services

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/counters/counters.rst

network-services vpws instance counters
---------------------------------------

**Minimum user role:** operator

Defines whether counters should be allocated for this VPWS service instance. 

**Command syntax: counters**

**Command mode:** config

**Hierarchies**

- network-services vpws instance

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vpws
    dnRouter(cfg-netsrv-vpws)# instance vpws1
    dnRouter(cfg-netsrv-vpws-inst)# counters
    dnRouter(cfg-vpws-inst-counters)


**Removing Configuration**

To remove counter configurations for this instance
::

    dnRouter(cfg-netsrv-vpws-inst)# no counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/counters/service-counters.rst

network-services vpws instance counters service-counters
--------------------------------------------------------

**Minimum user role:** operator

The Service-counters global setting defines the default setting for VPWS services.
This knob, specifies whether service-counters will be alloocated for this VPWS instance.

**Command syntax: service-counters [service-counters]**

**Command mode:** config

**Hierarchies**

- network-services vpws instance counters

**Parameter table**

+------------------+--------------------------------------------------------------------------+--------------+----------+
| Parameter        | Description                                                              | Range        | Default  |
+==================+==========================================================================+==============+==========+
| service-counters | Define whether service-counters should be allocated for the VPWS service | | enabled    | disabled |
|                  |                                                                          | | disabled   |          |
+------------------+--------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vpws
    dnRouter(cfg-netsrv-evpn)# instance vpws1
    dnRouter(cfg-netsrv-vpws-inst)# counters
    dnRouter(cfg-vpws-inst-counters) service-counters disabled


**Removing Configuration**

To revert the service-counters configuration to its default value of disabled.
::

    dnRouter(cfg-vpws-inst-counters)# no service-counters

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/description.rst

network-services vpws instance description
------------------------------------------

**Minimum user role:** operator

To add an optional description of the L2VPN VPWS:

**Command syntax: description [description]**

**Command mode:** config

**Hierarchies**

- network-services vpws instance

**Parameter table**

+-------------+------------------+------------------+---------+
| Parameter   | Description      | Range            | Default |
+=============+==================+==================+=========+
| description | vpws description | | string         | \-      |
|             |                  | | length 1-255   |         |
+-------------+------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# description "my vpws service"


**Removing Configuration**

To revert description to default:
::

    dnRouter(cfg-network-services-vpws-inst)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/instance.rst

network-services vpws instance
------------------------------

**Minimum user role:** operator

To configure the name of a L2VPN VPWS service:

**Command syntax: instance [vpws-name]**

**Command mode:** config

**Hierarchies**

- network-services vpws

**Note**

- The VPWS service must use a unique name.

**Parameter table**

+-----------+----------------------------------------------------------+------------------+---------+
| Parameter | Description                                              | Range            | Default |
+===========+==========================================================+==================+=========+
| vpws-name | The name of the vpws -- used to address the vpws service | | string         | \-      |
|           |                                                          | | length 1-255   |         |
+-----------+----------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)#


**Removing Configuration**

To revert the specified VPWS service to default:
::

    dnRouter(cfg-network-services-vpws)# no instance VPWS_1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/interface.rst

network-services vpws instance interface
----------------------------------------

**Minimum user role:** operator

To configure an interface to use the VPWS service, also known as the Attachment-Circuit. This can be any in-band interface, such as physical, sub-interface, bundle, or breakout interface.

The Pseudowire type is defined by default according to the AC interface type:
- physical interface will result in PW type Ethernet (type 5)
- sub-interface type vlan will result in PW type Vlan (type 4)
- sub-interface type untagged will result in PW type Ethernet (type 5)

Packets received on PW to be sent from AC:
- for AC vlan - by default, update packet tagging to match AC tag
- for AC vlan - by default, packet is sent without any modifications

**Command syntax: interface [interface]**

**Command mode:** config

**Hierarchies**

- network-services vpws instance

**Note**

- Only interface types <geX-X/X/X/bundle-X/<geX-X/X/X.Y>/<bundle-X.Y> are supported.

- The Pseudowire is not established until the interface is configured.

- The interface must be a L2-service enabled interface.

- The interface cannot be assign to multiple services.

**Parameter table**

+-----------+-------------------------------------+------------------+---------+
| Parameter | Description                         | Range            | Default |
+===========+=====================================+==================+=========+
| interface | the vpws service attachment circuit | | string         | \-      |
|           |                                     | | length 1-255   |         |
+-----------+-------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# interface ge100-0/0/0

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# VPWS_1
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)#  interface bundle-1

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# VPWS_1
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# interface ge100-0/0/0.1


**Removing Configuration**

To remove the interface configuration:
::

    dnRouter(cfg-network-services-vpws-inst)# no interface

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/pw/admin-state.rst

network-services vpws instance pw admin-state
---------------------------------------------

**Minimum user role:** operator

Configure the Pseudowire admin-state. Once disabled, no Pseudowire is signaled and the VPWS service is down:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vpws instance pw

**Parameter table**

+-------------+--------------------+--------------+---------+
| Parameter   | Description        | Range        | Default |
+=============+====================+==============+=========+
| admin-state | Set PW admin-state | | enabled    | enabled |
|             |                    | | disabled   |         |
+-------------+--------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# pw 1.1.1.1
    dnRouter(cfg-vpws-inst-pw)# admin-state disabled


**Removing Configuration**

To revert admin-state to default:
::

    dnRouter(cfg-vpws-inst-pw)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/pw/control-word.rst

network-services vpws instance pw control-word
----------------------------------------------

**Minimum user role:** operator

The Control-word is always zero when enabled and is used as a marker to identify between the inner layer 2 packet and the layer 3 encapsulation. The Control-word is only used when it is supported by both sides.

**Command syntax: control-word [control-word]**

**Command mode:** config

**Hierarchies**

- network-services vpws instance pw

**Parameter table**

+--------------+-------------------------------+--------------+---------+
| Parameter    | Description                   | Range        | Default |
+==============+===============================+==============+=========+
| control-word | Set control-word usage for PW | | enabled    | enabled |
|              |                               | | disabled   |         |
+--------------+-------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# pw 1.1.1.1
    dnRouter(cfg-vpws-inst-pw)# control-word disabled


**Removing Configuration**

To revert control-word to default:
::

    dnRouter(cfg-vpws-inst-pw)# no control-word

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/pw/encapsulation.rst

network-services vpws instance pw encapsulation
-----------------------------------------------

**Minimum user role:** operator

The Pseudowire encapsulation type by default matches the VPWS interface. The encapsulation type must be equal between neighbors for the Pseudowire to be established, if the ignore-encapsulation-mismatch parameter is disabled. The encapsulation types are:
- Type 5 - Ethernet (Raw) encapsulation
- Type 4 - Vlan (Raw) encapsulation

Default values for VPWS interface:
- For physical interfaces (either GE or bundle) the encapsulation type is Ethernet, and you cannot change the encapsulation type.
- For sub-interfaces the encapsulation type is VLAN.

To configure the Pseudowire encapsulation type:

**Command syntax: encapsulation [encapsulation]**

**Command mode:** config

**Hierarchies**

- network-services vpws instance pw

**Parameter table**

+---------------+---------------------------+--------------+---------+
| Parameter     | Description               | Range        | Default |
+===============+===========================+==============+=========+
| encapsulation | Set PW encapsulation type | | ethernet   | \-      |
|               |                           | | vlan       |         |
+---------------+---------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# interface bundle-1.1
    dnRouter(cfg-network-services-vpws-inst)# pw 1.1.1.1
    dnRouter(cfg-vpws-inst-pw)# encapsulation ethernet


**Removing Configuration**

To revert encapsulation to default:
::

    dnRouter(cfg-vpws-inst-pw)# no encapsulation

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/pw/fat-label.rst

network-services vpws instance pw fat-label
-------------------------------------------

**Minimum user role:** operator

Flow Aware Transport (FAT) label is an identifier used to load balance packets as they pass through the network. The first PE looks into the inner packet and calculates a hash, the FAT label. As the packet passes through intermediate routers the FAT label is considered for load-balancing decisions. All packets of same flow will result in the same FAT label and are sent on the same path.

**Command syntax: fat-label [fat-label]**

**Command mode:** config

**Hierarchies**

- network-services vpws instance pw

**Parameter table**

+-----------+----------------------------------+------------------+----------+
| Parameter | Description                      | Range            | Default  |
+===========+==================================+==================+==========+
| fat-label | Define Requested FAT Label Usage | | enabled        | disabled |
|           |                                  | | send-only      |          |
|           |                                  | | receive-only   |          |
|           |                                  | | disabled       |          |
+-----------+----------------------------------+------------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# pw 1.1.1.1
    dnRouter(cfg-vpws-inst-pw)# fat-label enabled


**Removing Configuration**

To revert FAT-label to default:
::

    dnRouter(cfg-vpws-inst-pw)# no fat-label

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/pw/ignore-encapsulation-mismatch.rst

network-services vpws instance pw ignore-encapsulation-mismatch
---------------------------------------------------------------

**Minimum user role:** operator

To establish the Pseudowire even if the local Pseudowire encapsulation type differs from the remote Pseudowire encapsulation type:

**Command syntax: ignore-encapsulation-mismatch [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vpws instance pw

**Parameter table**

+-------------+------------------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                                  | Range        | Default  |
+=============+==============================================================================+==============+==========+
| admin-state | Support PW establishment even when PW local type differs from PW remote type | | enabled    | disabled |
|             |                                                                              | | disabled   |          |
+-------------+------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# pw 1.1.1.1
    dnRouter(cfg-vpws-inst-pw)# ignore-encapsulation-mismatch enabled


**Removing Configuration**

To revert to default:
::

    dnRouter(cfg-vpws-inst-pw)# no ignore-encapsulation-mismatch

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/pw/ignore-mtu-mismatch.rst

network-services vpws instance pw ignore-mtu-mismatch
-----------------------------------------------------

**Minimum user role:** operator

To establish the Pseudowire even if the local Pseudowire signaled MTU differs from the remote MTU:

**Command syntax: ignore-mtu-mismatch [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vpws instance pw

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                                      | Range        | Default  |
+=============+==================================================================================+==============+==========+
| admin-state | Support PW establishment even when PW local signaled mtu differs from PW remote  | | enabled    | disabled |
|             | signaled mtu                                                                     | | disabled   |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# pw 1.1.1.1
    dnRouter(cfg-vpws-inst-pw)# ignore-mtu-mismatch enabled


**Removing Configuration**

To revert to default:
::

    dnRouter(cfg-vpws-inst-pw)# no ignore-mtu-mismatch

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/pw/mtu.rst

network-services vpws instance pw mtu
-------------------------------------

**Minimum user role:** operator

Configure the MTU value to be sent (signaled) in a VPWS Pseudowire FEC. By default, the sent MTU value is for each VPWS interface. The MTU sent and received values must match for the Pseudowire to be up if the parameter 'ignore-mtu-mismatch' is disabled.

**Command syntax: mtu [mtu]**

**Command mode:** config

**Hierarchies**

- network-services vpws instance pw

**Note**

- The reconfiguration of Pseudowire MTU causes the Pseudowire to flap.

**Parameter table**

+-----------+------------------------------------+-----------+---------+
| Parameter | Description                        | Range     | Default |
+===========+====================================+===========+=========+
| mtu       | MTU value to be signaled in PW FEC | 1514-9300 | \-      |
+-----------+------------------------------------+-----------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# pw 1.1.1.1
    dnRouter(cfg-vpws-inst-pw)# mtu 2000


**Removing Configuration**

To revert the MTU to the default value:
::

    dnRouter(cfg-vpws-inst-pw)# no mtu

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/pw/pw-id.rst

network-services vpws instance pw pw-id
---------------------------------------

**Minimum user role:** operator

Configure a unique Pseudowire identifier which is sent using FEC type 128 to establish a Pseudowire connection. PW-ID is a mandatory configuration. Changing the PW-ID will result in service interruption.

**Command syntax: pw-id [pw-id]**

**Command mode:** config

**Hierarchies**

- network-services vpws instance pw

**Note**

- The reconfiguration of PW-ID causes the Pseudowire to flap.

- The Pseudowire neighbor-address and PW-ID must be unique across all L2VPN services.

**Parameter table**

+-----------+----------------------------------------------------+--------------+---------+
| Parameter | Description                                        | Range        | Default |
+===========+====================================================+==============+=========+
| pw-id     | The pw unique identifier to be signaled in FEC 128 | 1-4294967295 | \-      |
+-----------+----------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# pw 1.1.1.1
    dnRouter(cfg-vpws-inst-pw)# pw-id 8


**Removing Configuration**

The command can't be reverted
::


**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/pw/pw.rst

network-services vpws instance pw
---------------------------------

**Minimum user role:** operator

When establishing a Pseudowire, two circuits are created, one circuit carries outbound traffic, and the other carries inbound traffic, creating bidirectional packet flow. The Pseudowire is signaled using FEC type 128 toward a Targeted LDP neighbor.

To add a remote PEs IPv4 address and enter the Pseudowire (PW) configuration hierarchy:

**Command syntax: pw [neighbor-address]**

**Command mode:** config

**Hierarchies**

- network-services vpws instance

**Note**

- The reconfiguration of the Pseudowire neighbor-address causes the Pseudowire to flap.

- The Pseudowire neighbor-address and PW-ID must be unique across all L2VPN services.

**Parameter table**

+------------------+------------------------------+---------+---------+
| Parameter        | Description                  | Range   | Default |
+==================+==============================+=========+=========+
| neighbor-address | The pw neighbor ipv4 address | A.B.C.D | \-      |
+------------------+------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# pw 1.1.1.1
    dnRouter(cfg-network-services-vpws-inst-pw)#


**Removing Configuration**

To revert the Pseudowire configuration to default:
::

    dnRouter(cfg-network-services-vpws-inst)# no pw 1.1.1.1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vpws/instance/pw/steer-path_rsvp-te.rst

network-services vpws instance pw steer-path rsvp-te
----------------------------------------------------

**Minimum user role:** operator

Enable PW transport resolution over a specific RSVP-TE tunnel. When set, the given RSVP-TE tunnel is the preferred transport resolution for the given PW of the given service.

**Command syntax: steer-path rsvp-te [rsvp-te]** no-fallback

**Command mode:** config

**Hierarchies**

- network-services vpws instance pw

**Note**

- When changing between the usage of RSVP-TE a disabling steer-path usage is expcted to not effect the PW state. Once used, the PW solution will be updated if the policy is up. Once removed, the PW solution will be updated per best mpls-nh solution.

**Parameter table**

+-------------+-----------------------------------------------------------------------+------------------+---------+
| Parameter   | Description                                                           | Range            | Default |
+=============+=======================================================================+==================+=========+
| rsvp-te     | resolve by specific rsvp-te tunnel according to tunnel name           | | string         | \-      |
|             |                                                                       | | length 1-255   |         |
+-------------+-----------------------------------------------------------------------+------------------+---------+
| no-fallback | When specified, prevent fallback next-hop solution over mpls-nh table | boolean          | \-      |
+-------------+-----------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# pw 1.1.1.1
    dnRouter(cfg-vpws-inst-pw)# steer-path rsvp-te TUNNEL_1

    dnRouter(cfg-network-services-vpws)# instance VPWS_2
    dnRouter(cfg-network-services-vpws-inst)# pw 2.2.2.2
    dnRouter(cfg-vpws-inst-pw)# steer-path rsvp-te TUNNEL_2 no-fallback


**Removing Configuration**

To remove steer-path usage:
::

    dnRouter(cfg-vpws-inst-pw)# no steer-path

To remove no-fallback action:
::

    dnRouter(cfg-vpws-inst-pw)# no steer-path rsvp-te TUNNEL_2 no-fallback

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## vpws/instance/pw/steer-path_sr-te_policy.rst

network-services vpws instance pw steer-path sr-te policy
---------------------------------------------------------

**Minimum user role:** operator

Enable the PW transport resolution over a specific SR-TE policy. When set, the given SR-TE policy is the preferred transport resolution for the given PW of the given service.

**Command syntax: steer-path sr-te policy [sr-te-policy]** no-fallback

**Command mode:** config

**Hierarchies**

- network-services vpws instance pw

**Note**

- When changing between the usage of the SR-TE policy a disabling steer-path usage is expcted to not effect the PW state. Once used, the PW solution will be updated if the policy is up. Once removed, the PW solution will be updated per the best mpls-nh solution.

**Parameter table**

+--------------+-----------------------------------------------------------------------+------------------+---------+
| Parameter    | Description                                                           | Range            | Default |
+==============+=======================================================================+==================+=========+
| sr-te-policy | Enable PW transport resolution over a specific SR-TE policy           | | string         | \-      |
|              |                                                                       | | length 1-255   |         |
+--------------+-----------------------------------------------------------------------+------------------+---------+
| no-fallback  | When specified, prevent fallback next-hop solution over mpls-nh table | boolean          | \-      |
+--------------+-----------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)# instance VPWS_1
    dnRouter(cfg-network-services-vpws-inst)# pw 1.1.1.1
    dnRouter(cfg-vpws-inst-pw)# steer-path sr-te policy SR_TE_POLICY_1

    dnRouter(cfg-network-services-vpws)# instance VPWS_2
    dnRouter(cfg-network-services-vpws-inst)# pw 2.2.2.2
    dnRouter(cfg-vpws-inst-pw)# steer-path sr-te policy SR_TE_POLICY_1 no-fallback


**Removing Configuration**

To remove steer-path usage:
::

    dnRouter(cfg-vpws-inst-pw)# no steer-path

To remove no-fallback action:
::

    dnRouter(cfg-vpws-inst-pw)# no steer-path sr-te policy SR_TE_POLICY_1 no-fallback

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 16.2    | Command introduced                                  |
+---------+-----------------------------------------------------+
| 18.0    | Added mandatory steer-path and optional no-fallback |
+---------+-----------------------------------------------------+

---

## vpws/vpws.rst

network-services vpws
---------------------

**Minimum user role:** operator

VPWS (Virtual Private Wire Service) is a point-to-point layer2 VPN service that connects a layer-2 interface of one PE with the layer-2 interface of another PE, across the layer-3 core mpls network. The VPWS service uses a Pseudowire (PW) point-to-point tunnel to emulate a physical connection and create an intermediate transport between the two PEs.

To enter the VPWS service configuration mode:

**Command syntax: vpws**

**Command mode:** config

**Hierarchies**

- network-services

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vpws
    dnRouter(cfg-network-services-vpws)#


**Removing Configuration**

To remove all VPWS services:
::

    dnRouter(cfg-network-services)# no vpws

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/description.rst

network-services vrf instance description
-----------------------------------------

**Minimum user role:** operator

To set a description for the VRF instance:

**Command syntax: description [description]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance

**Note**

- Legal string length is 1-255 characters.

**Parameter table**

+-------------+-----------------+------------------+---------+
| Parameter   | Description     | Range            | Default |
+=============+=================+==================+=========+
| description | vrf description | | string         | \-      |
|             |                 | | length 1-255   |         |
+-------------+-----------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# description MyDescription-vrf_1

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_2
    dnRouter(cfg-netsrv-vrf-inst)# description My description vrf-2


**Removing Configuration**

To revert description to default:
::

    dnRouter(cfg-netsrv-vrf-inst)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/in-band-management/in-band-management.rst

network-services vrf instance in-band-management
------------------------------------------------

**Minimum user role:** operator

To enter the in-band management configuration level:

**Command syntax: in-band-management**

**Command mode:** config

**Hierarchies**

- network-services vrf instance

**Note**
The no command deletes the in-band-management configuration only if the configuration isn't used by management protocols.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance my_vrf
    dnRouter(cfg-netsrv-vrf)# in-band-management
    dnRouter(cfg-vrf-inband-mgmt)#

    dnRouter(cfg-netsrv-vrf)# no in-band-management


**Removing Configuration**

To remove services for non-default VRFs:
::

    no in-band-management

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/in-band-management/source-interface.rst

network-services vrf instance in-band-management source-interface
-----------------------------------------------------------------

**Minimum user role:** operator

To configure the source-interface for in-band management applications over the non-default VRF (for example: syslog, snmp trap-client, dns-client, tacacs-client, radius-client, ntp-client):

**Command syntax: source-interface [source-interface]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance in-band-management

**Note**
- Any loopback interface associated with the VRF can be selected.
- The source-interface for non-default vrf should behave as following:
- If explicitly specified under non-default VRF for configured client-side management protocol, then it will be used for all the outgoing packets through that non-default VRF context.
- Other in-band-management source-interface that is specified under the same VRF as the management protocol will be used for the management protocol.
- If in-band-management source interface is not set and source-interface is not set for a specific management protocol, no packets will be generated for this protocol.
- If the selected interface has more than one IP address, the global IP address will be used as a source interface.
- The selected interface refers both to IPv4 and IPv6 addresses.
- If ipv4/ipv6 address is changed on the selected interface, the source-IP address of the client protocol packets must be updated immediately.

**Parameter table**

+------------------+-----------------------------------------------------------------------+-------------------------------------------------+---------+
| Parameter        | Description                                                           | Range                                           | Default |
+==================+=======================================================================+=================================================+=========+
| source-interface | source interface for all non-default in-band management applications. | loopback interfaces assigned to non-default VRF | \-      |
+------------------+-----------------------------------------------------------------------+-------------------------------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance my_vrf
    dnRouter(cfg-netsrv-vrf)# in-band-management
    dnRouter(cfg-vrf-inband-mgmt)# source-interface lo4

    dnRouter(cfg-vrf-inband-mgmt)# no source-interface


**Removing Configuration**

To remove services for non-default VRFs:
::

    no source-interface

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/instance.rst

network-services vrf instance
-----------------------------

**Minimum user role:** operator

To configure a VRF instance:

**Command syntax: instance [vrf-name]**

**Command mode:** config

**Hierarchies**

- network-services vrf

**Note**

- The legal string length is 1..255 characters.

- Illegal characters include any whitespace, non-ascii, and the following special characters (separated by commas): #,!,',”,\

- 'no' command deletes the vrf instance and the protocols hierarchy dependencies under the VRF instance. Management protocols, services and other dependencies that rely on the VRF instance or its associated interfaces must be deleted explicitly before deleting the VRF instance.

**Parameter table**

+-----------+------------------------------------------------+------------------+---------+
| Parameter | Description                                    | Range            | Default |
+===========+================================================+==================+=========+
| vrf-name  | The name of the vrf -- used to address the vrf | | string         | \-      |
|           |                                                | | length 1-255   |         |
+-----------+------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)#


**Removing Configuration**

To remove the specified VRF instance:
::

    dnRouter(cfg-netsrv-vrf)# no instance customer_vrf_1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/interface.rst

network-services vrf instance interface
---------------------------------------

**Minimum user role:** operator

To attach an interface to a VRF (Virtual Route Forwarding) instance:

**Command syntax: interface [interface-name]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance

**Note**

- Multiple interfaces can be attached to a VRF instance.

- By default, all network interfaces are attached to the default VRF.

- A network interface can only be attached to a single VRF instance (default/user-configured non-default VRF), but not to any of the management VRFs.

- When an interface is deleted from the VRF, the interface is automatically reattached to the default VRF.

- Validation: a user cannot attach a non-existing interface or interfaces already attached to non-default VRFs without unattaching them first.

- Validation: if the user removes an attached network interface from a VRF instance, then as long as there is no overlap of IP addresses in the default VRF, the specified interfaces will be removed and reattached to the default VRF with its existing configuration. Otherwise, the commit will fail with the message 'Error: failed to set interface <interface-name> to vrf <vrf-name>. interface ipv4-address <ipv4-address> overlaps with <ipv4-address> on interface <interface-name>'; or 'Error: failed to set interface <interface-name> to vrf <vrf-name>. interface ipv6-address <ipv6-address> overlaps with <ipv6-address> on interface <interface-name>', as applicable.

- Validation: if the user deletes a VRF instance while interfaces are attached to it, then as long as there is no overlap of IP addresses in the default VRF, then all attached interfaces will be removed and reattached to the default VRF with their existing configuration. Otherwise, the commit will fail with the message 'Error: failed to set interface <interface-name> to vrf <vrf-name>. interface ipv4-address <ipv4-address> overlaps with <ipv4-address> on interface <interface-name>'; or 'Error: failed to set interface <interface-name> to vrf <vrf-name>. interface ipv6-address <ipv6-address> overlaps with <ipv6-address> on interface <interface-name>', as applicable.

- Validation: when a user attaches an interface to a different vrf (including default vrf), the system will preserve the interface with all of its configuration (i.e admin state, ipv4/6 parameters, static arp/ndp entries, etc). If there is an overlapping of the same IP addresses in the target vrf, the command will fail with explanation 'Error: failed to set interface <interface-name> to vrf <vrf-name>. interface ipv4-address <ipv4-address> overlaps with <ipv4-address> on interface <interface-name>'; or 'Error: failed to set interface <interface-name> to vrf <vrf-name>. interface ipv6-address <ipv6-address> overlaps with <ipv6-address> on interface <interface-name>', as applicable.

- Validation: VRF cannot be changed for an unnumbered interface or source-interface (donor interface).

- If a sub-interface is moved between VRFs, then it will momentarily go down and then immediately go back up while its parent interface and other sub-interfaces will remain up; However, when a parent interface is moved between VRFs, then it will momentarily go down along with all of its sub-interfaces before going back up.

**Parameter table**

+----------------+-------------------------------------------------+-------------------------------------------+---------+
| Parameter      | Description                                     | Range                                     | Default |
+================+=================================================+===========================================+=========+
| interface-name | References the configured name of the interface | | geX-<f>/<n>/<p>                         | \-      |
|                |                                                 | |                                         |         |
|                |                                                 | | geX-<f>/<n>/<p>.<sub-interface-id>      |         |
|                |                                                 | |                                         |         |
|                |                                                 | | bundle-<bundle-id>                      |         |
|                |                                                 | |                                         |         |
|                |                                                 | | bundle-<bundle-id>.<sub-interface-id>   |         |
|                |                                                 | |                                         |         |
|                |                                                 | | lo<lo-interface-id>                     |         |
+----------------+-------------------------------------------------+-------------------------------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# interface bundle-1
    dnRouter(cfg-netsrv-vrf-inst)# interface ge100-1/1/1.10

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_3
    dnRouter(cfg-netsrv-vrf-inst)# interface ge100-1/1/1.20


**Removing Configuration**

To remove the attachment of a network interface from a VRF instance:
::

    dnRouter(cfg-netsrv-vrf-inst)# no interface ge100-1/1/1.10

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+
| 18.0    | Added IRB support  |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/admin-distance.rst

network-services vrf instance protocols bgp administrative-distance
-------------------------------------------------------------------

**Minimum user role:** operator

If a router learns of a destination from more than one routing protocol, the administrative distance is compared and the preference is given to the routes with lower administrative distance.

To change the BGP administrative distance for all routes:

**Command syntax: administrative-distance {external [external-route-distance], internal [internal-route-distance], local [local-route-distance]}**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**

- An administrative-distance of 255 will cause the router to remove the route from the routing table.

**Parameter table**

+-------------------------+----------------------------------------------------------------------+-------+---------+
| Parameter               | Description                                                          | Range | Default |
+=========================+======================================================================+=======+=========+
| external-route-distance | Administrative distance for routes learned from external BGP (eBGP). | 1-255 | 20      |
+-------------------------+----------------------------------------------------------------------+-------+---------+
| internal-route-distance | Administrative distance for routes learned from internal BGP (iBGP). | 1-255 | 200     |
+-------------------------+----------------------------------------------------------------------+-------+---------+
| local-route-distance    | Administrative distance for routes learned from local peers          | 1-255 | 110     |
+-------------------------+----------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# administrative-distance external 120 internal 200 local 150
    dnRouter(cfg-protocols-bgp)# administrative-distance local 60


**Removing Configuration**

To revert all distances to their default value:
::

    dnRouter(cfg-protocols-bgp)# no administrative-distance

To revert a specific distance to its default value:
::

    dnRouter(cfg-protocols-bgp)# no administrative-distance local

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 6.0     | Command introduced                                  |
+---------+-----------------------------------------------------+
| 15.1    | Updated command syntax from admin to administrative |
+---------+-----------------------------------------------------+

---

## vrf/instance/protocols/bgp/advertise-update-delay.rst

network-services vrf instance protocols bgp advertise-update-delay
------------------------------------------------------------------

**Minimum user role:** operator

You can set the delay time (in seconds) to advertise bgp routes, after bet-path logic finishes. The delay applies to all bgp neighbors and all bgp address-families (does not apply to ipv4-flowspec, ipv6-flowspec and link-state address-families).

When re-configuring advertise-update-delay, the new delay time will apply to all routes ready to be advertised from the reconfig time + old delay timer value.

To set the BGP delay:

**Command syntax: advertise-update-delay [advertise-update-delay]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**

- A delay value of 0 will not add any additional delay.

**Parameter table**

+------------------------+----------------------------------------------------------------------------------+--------+---------+
| Parameter              | Description                                                                      | Range  | Default |
+========================+==================================================================================+========+=========+
| advertise-update-delay | Set delay time (in seconds) to advertise bgp routes after finishing best-path    | 0-1800 | 240     |
|                        | logic                                                                            |        |         |
+------------------------+----------------------------------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# advertise-update-delay 180


**Removing Configuration**

To revert to the default values:
::

    dnRouter(cfg-protocols-bgp)# no advertise-update-delay

**Command History**

+---------+-------------------------------+
| Release | Modification                  |
+=========+===============================+
| 13.2    | Command introduced            |
+---------+-------------------------------+
| 17.1    | Default changed from 0 to 120 |
+---------+-------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-multicast/afi_ipv4-multicast.rst

network-services vrf instance protocols bgp address-family ipv4-multicast
-------------------------------------------------------------------------

**Minimum user role:** operator

To enter the global BGP ipv4 multicast address-family configuration:

**Command syntax: address-family ipv4-multicast**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp

**Note**

- Notice the change in prompt.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-multicast
    dnRouter(cfg-protocols-bgp-afi)#


**Removing Configuration**

To remove the address-family configuration:
::

    dnRouter(cfg-protocols-bgp)# no address-family ipv4-multicast

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/afi_ipv4-unicast.rst

network-services vrf instance protocols bgp address-family ipv4-unicast
-----------------------------------------------------------------------

**Minimum user role:** operator

To enter global BGP ipv4 address-family configuration:

**Command syntax: address-family ipv4-unicast**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**

- Notice the change in prompt.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)#


**Removing Configuration**

To remove the address-family configuration:
::

    dnRouter(cfg-protocols-bgp)# no address-family ipv4-unicast

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/aggregate-route/aggregate-route.rst

network-services vrf instance protocols bgp address-family ipv4-unicast aggregate-route
---------------------------------------------------------------------------------------

**Minimum user role:** operator

Creates an aggregate (summary) route in a BGP routing table.
An aggregate route will be created if a more specific route exists in the BGP local RIB, and may act as a contributor.
An aggregate route will be installed to the local RIB with nexthop null0 (silent drop).
To create as aggregate route:

**Command syntax: aggregate-route [ip-prefix]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- This command is only applicable to unicast and multicast sub-address-families.

- You can configure multiple aggregate-address prefixes in an address-family.

- Aggregate-route with nexthop self is advertised in labeled-unicast safi, with implicit/explicit null label.

**Parameter table**

+-----------+------------------+-----------+---------+
| Parameter | Description      | Range     | Default |
+===========+==================+===========+=========+
| ip-prefix | aggregate prefix | A.B.C.D/x | \-      |
+-----------+------------------+-----------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 10.108.0.0/16
    dnRouter(cfg-bgp-afi-aggr)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 2001::66/90
    dnRouter(cfg-bgp-afi-aggr)#


**Removing Configuration**

To stop all aggregate-address advertisements:
::

    dnRouter(cfg-protocols-bgp-afi)# no aggregate-address

To stop the advertisement of a specific aggregate-address:
::

    dnRouter(cfg-protocols-bgp-afi)# no aggregate-address 12001::66/90

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/aggregate-route/as-brief-set.rst

network-services vrf instance protocols bgp address-family ipv4-unicast aggregate-route as-brief-set
----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Sets the aggregate route to include the longest common AS PATH information from all contributing routes in its AS PATH.
To configure the aggregate route setting:

**Command syntax: as-brief-set**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast aggregate-route
- protocols bgp address-family ipv4-unicast aggregate-route
- protocols bgp address-family ipv4-multicast aggregate-route
- protocols bgp address-family ipv6-unicast aggregate-route
- network-services vrf instance protocols bgp address-family ipv6-unicast aggregate-route

**Note**

- By default, the aggregate route AS PATH only has local AS when advertised.

- If the aggregate route has reduced the attribute information, then for all contributing routes the ATOMIC AGGREGATE attribute will be advertised.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 10.108.0.0/16
    dnRouter(cfg-bgp-afi-aggr)# as-brief-set

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 2001::66/90
    dnRouter(cfg-bgp-afi-aggr)# as-brief-set


**Removing Configuration**

To stop the as-brief-set behavior:
::

    dnRouter(cfg-bgp-afi-aggr)# no as-brief-set

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/aggregate-route/as-set.rst

network-services vrf instance protocols bgp address-family ipv4-unicast aggregate-route as-set
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

Sets the aggregate route to include AS PATH information for all contributing routes in its AS PATH.
To configure the aggregate route setting:

**Command syntax: as-set**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast aggregate-route
- protocols bgp address-family ipv4-unicast aggregate-route
- protocols bgp address-family ipv4-multicast aggregate-route
- protocols bgp address-family ipv6-unicast aggregate-route
- network-services vrf instance protocols bgp address-family ipv6-unicast aggregate-route

**Note**

- By default, the aggregate route AS PATH only has local AS when advertised.

- If the aggregate route has reduced the attribute information, then for all contributing routes the ATOMIC AGGREGATE attribute will be advertised.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 10.108.0.0/16
    dnRouter(cfg-bgp-afi-aggr)# as-set

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 2001::66/90
    dnRouter(cfg-bgp-afi-aggr)# as-set


**Removing Configuration**

To stop the as-set behavior:
::

    dnRouter(cfg-bgp-afi-aggr)# no as-set

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/aggregate-route/policy.rst

network-services vrf instance protocols bgp address-family ipv4-unicast aggregate-route policy
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

Sets a policy to modify the aggregate route attributes.
A user may deny the aggregate route creation when matching a given aggregate route attribute.

**Command syntax: policy [policy-name]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast aggregate-route
- protocols bgp address-family ipv4-unicast aggregate-route
- protocols bgp address-family ipv4-multicast aggregate-route
- protocols bgp address-family ipv6-unicast aggregate-route
- network-services vrf instance protocols bgp address-family ipv6-unicast aggregate-route

**Parameter table**

+-------------+-----------------------------------------------------+------------------+---------+
| Parameter   | Description                                         | Range            | Default |
+=============+=====================================================+==================+=========+
| policy-name | impose policy to update aggregate prefix attributes | | string         | \-      |
|             |                                                     | | length 1-255   |         |
+-------------+-----------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 10.108.0.0/16
    dnRouter(cfg-bgp-afi-aggr)# policy AGGR_POL

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 2001::66/90
    dnRouter(cfg-bgp-afi-aggr)# policy AGGR_POL


**Removing Configuration**

To remove the policy:
::

    dnRouter(cfg-bgp-afi-aggr)# no policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/aggregate-route/summary-only.rst

network-services vrf instance protocols bgp address-family ipv4-unicast aggregate-route summary-only
----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To Filter for more specific routes from updates:

**Command syntax: summary-only**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast aggregate-route
- protocols bgp address-family ipv4-unicast aggregate-route
- protocols bgp address-family ipv4-multicast aggregate-route
- protocols bgp address-family ipv6-unicast aggregate-route
- network-services vrf instance protocols bgp address-family ipv6-unicast aggregate-route

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 10.108.0.0/16
    dnRouter(cfg-bgp-afi-aggr)# summary-only

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 2001::66/90
    dnRouter(cfg-bgp-afi-aggr)# summary-only


**Removing Configuration**

To stop the summary-only behavior:
::

    dnRouter(cfg-bgp-afi-aggr)# no summary-only

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/bgp-leak_import-from.rst

network-services vrf instance protocols bgp address-family ipv4-unicast bgp-leak import-from policy
---------------------------------------------------------------------------------------------------

**Minimum user role:** operator

BGP route leaking between vrfs is used to have routes learned an one vrf (including default) and to be used and advertised to peers in another vrf.
BGP route leaking is based on routes being copied between the bgp vrf table and is not subject to l3vpn import/export logic.
A leak policy must be specified
Up to 4 leak imports can be set in a given vrf.

**Command syntax: bgp-leak import-from [origin-vrf] policy [policy-name]** [, policy-name, policy-name]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- Up to 4 different VRFs can used as source VRFs for leaking into the single destination VRF

- A leaked route cannot be leaked again, meaning a route with the "leak-origin" attribute will not be leaked

- A leaked route can be exported to vpn safi, meaning a route that was leaked from vrf A to vrf B and exported from vrf B.

- A vpn route that was leaked, cannot be imported to the same vrf as origin. The route that was leaked from vrf A to vrf B and exported from vrf B, cannot not be importet back to vrf A from vpn.

- An imported route cannot be leaked. If it is required to have the imported route in destination vrf, import to that vrf.

**Parameter table**

+-------------+--------------------------------+------------------+---------+
| Parameter   | Description                    | Range            | Default |
+=============+================================+==================+=========+
| origin-vrf  | origin-vrf                     | | string         | \-      |
|             |                                | | length 1-255   |         |
+-------------+--------------------------------+------------------+---------+
| policy-name | impose policy on leaked routes | | string         | \-      |
|             |                                | | length 1-255   |         |
+-------------+--------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# bgp-leak import-from VRF_A policy LEAK_FROM_A1, LEAK_FROM_A2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)# instance A
    dnRouter(cfg-netsrv-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 1
    dnRouter(cfg-vrf-inst-protocols)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# bgp-leak import-from default policy LEAK_FROM_DEFAULT1, LEAK_FROM_DEFAULT2


**Removing Configuration**

To stop all leakage:
::

    dnRouter(cfg-protocols-bgp-afi)# no bgp-leak import-from

To stop leakage from a specific vrf:
::

    dnRouter(cfg-protocols-bgp-afi)# no bgp-leak import-from VRF_A

To remove policy from a specific vrf:
::

    dnRouter(cfg-protocols-bgp-afi)# no bgp-leak import-from VRF_A policy LEAK_FROM_A1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/dampening-ebgp-only.rst

network-services vrf instance protocols bgp address-family ipv4-unicast dampening-ebgp-only
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

To limit dampening logic for routes received from eBGP peers only:

**Command syntax: dampening-ebgp-only**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-vpn
- protocols bgp address-family ipv6-vpn
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# dampening-ebgp-only

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# dampening-ebgp-only


**Removing Configuration**

To revert to the default admin-state with all optional parameters set to their default values:
::

    dnRouter(cfg-protocols-bgp-afi)# no dampening-ebgp-only

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 19.0    | Add support for dampening-ebgp-only in most address families |
+---------+--------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/export-vpn_policy.rst

network-services vrf instance protocols bgp address-family ipv4-unicast export-vpn policy
-----------------------------------------------------------------------------------------

**Minimum user role:** operator

To export local routes that comply with the specified policy.
Routes are exported to the matching address-family VPN SAFI in the default BGP VRF.

**Command syntax: export-vpn policy [export-vpn-policy]** [, export-vpn-policy, export-vpn-policy]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- Only the best paths are candidates for export.

**Parameter table**

+-------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter         | Description                                                                | Range            | Default |
+===================+============================================================================+==================+=========+
| export-vpn-policy | Enable export of excommunity routes which comply with the specified policy | | string         | \-      |
|                   |                                                                            | | length 1-255   |         |
+-------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# import-vpn route-target 56335:1
    dnRouter(cfg-protocols-bgp-afi)# export-vpn policy VPN_EXP_POL1, VPN_EXP_POL2


**Removing Configuration**

To stop the export process using the specified policy:
::

    dnRouter(cfg-bgp-neighbor-afi)# no export-vpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/export-vpn_route-target.rst

network-services vrf instance protocols bgp address-family ipv4-unicast export-vpn route-target
-----------------------------------------------------------------------------------------------

**Minimum user role:** operator

To export routes with the route-target tag:

**Command syntax: export-vpn route-target [export-vpn-route-target]** [, export-vpn-route-target, export-vpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- You can export different multiple route-target tagged routes.

- The route-target can be different from the VFR route-distinguisher.

- The maximum number of route-targets that can be exported is 500.

**Parameter table**

+-------------------------+-----------------------------------------------+-------+---------+
| Parameter               | Description                                   | Range | Default |
+=========================+===============================================+=======+=========+
| export-vpn-route-target | Enable export of routes with route-target tag | \-    | \-      |
+-------------------------+-----------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# export-vpn route-target 49844:20, 49844:30
    dnRouter(cfg-protocols-bgp-afi)# export-vpn route-target 49844:40


**Removing Configuration**

To stop exporting routes:
::

    dnRouter(cfg-bgp-neighbor-afi)# no export-vpn route-target 49844:40

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/fast-reroute.rst

network-services vrf instance protocols bgp address-family ipv4-unicast fast-reroute
------------------------------------------------------------------------------------

**Minimum user role:** operator

BGP Loop-Free Alternate (LFA) Fast Reroute (FRR) allows BGP to quickly switch to a backup path when a primary path fails. With LFA FRR, BGP pre-computes a backup path and installs the backup next hop in the forwarding table when a multipath solution is not available.

For example, when the NH interface to an NC-Edge fails, a pre-installed alternate path will provide fast rerouting of the traffic. The other NC-Core devices will continue sending traffic as usual.

<INSERT 05_protocols_bgp>

To enable/disable fast reroute for the BGP protocol:

**Command syntax: fast-reroute [fast-reroute]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-vpn
- protocols bgp address-family ipv6-vpn
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- BGP fast-reroute applies only to bgp unicast and multicast sessions, and only to default VRF.

- LFA FRR is supported for both directly connected and remote nexthops. It does not apply to nexthops that are learned via BGP.

**Parameter table**

+--------------+-----------------------------------------------------------------------+--------------+----------+
| Parameter    | Description                                                           | Range        | Default  |
+==============+=======================================================================+==============+==========+
| fast-reroute | Enables bgp nexthop fast reroute for directly connected eBGP neighbor | | enabled    | disabled |
|              |                                                                       | | disabled   |          |
+--------------+-----------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# fast-reroute enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# fast-reroute enabled



**Removing Configuration**

To revert to the default admin-state:
::

    dnRouter(cfg-protocols-bgp-afi)# no fast-reroute enabled

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 10.0    | Command introduced                                  |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/import-vpn_policy.rst

network-services vrf instance protocols bgp address-family ipv4-unicast import-vpn policy
-----------------------------------------------------------------------------------------

**Minimum user role:** operator

To import local BGP routes that comply with the specified policy:

**Command syntax: import-vpn policy [import-vpn-policy]** [, import-vpn-policy, import-vpn-policy]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- All paths in the VPN SAFI are candidates for import. Filter by route-target and then by import-vpn policy.

**Parameter table**

+-------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter         | Description                                                                | Range            | Default |
+===================+============================================================================+==================+=========+
| import-vpn-policy | Enable import of excommunity routes which comply with the specified policy | | string         | \-      |
|                   |                                                                            | | length 1-255   |         |
+-------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# import-vpn policy VPN_IMP_POL1, VPN_IMP_POL2


**Removing Configuration**

To stop the import process using the specified policy:
::

    dnRouter(cfg-bgp-neighbor-afi)# no import-vpn import-vpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/import-vpn_route-target.rst

network-services vrf instance protocols bgp address-family ipv4-unicast import-vpn route-target
-----------------------------------------------------------------------------------------------

**Minimum user role:** operator

To import BGP routes with the route-target specified in the VRF tables:

**Command syntax: import-vpn route-target [import-vpn-route-target]** [, import-vpn-route-target, import-vpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- You can import different multiple route-target tagged routes.

- All paths in the VPN SAFI are candidates for import, filter by route-target and then by import-vpn policy.

**Parameter table**

+-------------------------+-----------------------------------------------------------------------+-------+---------+
| Parameter               | Description                                                           | Range | Default |
+=========================+=======================================================================+=======+=========+
| import-vpn-route-target | Enable import of routes with route-target specified to the vrf tables | \-    | \-      |
+-------------------------+-----------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# import-vpn route-target 49844:20, 49844:30
    dnRouter(cfg-protocols-bgp-afi)# import-vpn route-target 49844:40


**Removing Configuration**

To stop importing routes with the specified route-target:
::

    dnRouter(cfg-bgp-neighbor-afi)# no import-vpn route-target 49844:50

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/maximum-paths_ebgp.rst

network-services vrf instance protocols bgp address-family ipv4-unicast maximum-paths ebgp
------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple equal cost paths in the routing table, when some paths are ebgp and others are ibgp:

**Command syntax: maximum-paths ebgp [ebgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-vpn
- protocols bgp address-family ipv6-vpn
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- BGP will only advertise one best path to its eBGP neighbors.

- This command is relevant only to unicast and multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

- ECMP between ebgp and ibgp paths are only possible if all paths are imported from other vrfs.

**Parameter table**

+--------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                                      | Range | Default |
+====================+==================================================================================+=======+=========+
| ebgp-maximum-paths | Maximum number of parallel paths to consider when using BGP multipath. The       | 1-32  | 1       |
|                    | default is use a single path.                                                    |       |         |
+--------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ebgp 5

    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ebgp 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast

::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths ebgp

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 6.0     | Command introduced                                  |
+---------+-----------------------------------------------------+
| 13.1    | Updated maximum-paths value to 32                   |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/maximum-paths_eibgp.rst

network-services vrf instance protocols bgp address-family ipv4-unicast maximum-paths eibgp
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

Multipath between eBGP and iBGP paths is possible only when both paths are imported paths into a non-default vrf table.

To configure BGP multi-path between eBGP paths and iBGP paths for a non-default vrf unicast table:

**Command syntax: maximum-paths eibgp [eibgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- When eiBGP is configured, eBGP paths are preferred over iBGP paths.

**Parameter table**

+---------------------+---------------------------------------------------------------------------+-------+---------+
| Parameter           | Description                                                               | Range | Default |
+=====================+===========================================================================+=======+=========+
| eibgp-maximum-paths | Maximum number of parallel paths to consider when using EI-BGP multipath. | 1-32  | 1       |
+---------------------+---------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths eibgp 5

    dnRouter(cfg-inst-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths eibgp 7


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths eibgp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/maximum-paths_ibgp.rst

network-services vrf instance protocols bgp address-family ipv4-unicast maximum-paths ibgp
------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple paths in the routing table:

**Command syntax: maximum-paths ibgp [ibgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-vpn
- protocols bgp address-family ipv6-vpn
- network-services vrf instance protocols bgp address-family ipv6-unicast
- network-services evpn instance protocols bgp
- network-services evpn instance interconnect protocols bgp
- network-services evpn-vpws instance protocols bgp

**Note**

- This command is relevant only to unicast and multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

**Parameter table**

+--------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                                      | Range | Default |
+====================+==================================================================================+=======+=========+
| ibgp-maximum-paths | Maximum number of parallel paths to consider when using iBGP multipath. The      | 1-32  | 1       |
|                    | default is to use a single path                                                  |       |         |
+--------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ibgp 5

    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ibgp 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast

::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths ibgp

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 6.0     | Command introduced                                  |
+---------+-----------------------------------------------------+
| 13.1    | Updated maximum-paths value to 32                   |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/network.rst

network-services vrf instance protocols bgp address-family ipv4-unicast network
-------------------------------------------------------------------------------

**Minimum user role:** operator

This command instructs BGP to advertise a network to all neighbors. The network will be generated according to the "bgp network import-check" on page 2290 settings. If "bgp network import-check" is enabled, the network will be generated only when the route is found on the RIB. If "bgp network import-check" is disabled, the network will be generated regardless of whether or not the route is found in the RIB.

**Command syntax: network [ip-prefix]** policy [policy-name]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- This command is only applicable to unicast and multicast sub-address-families.

- You can configure multiple networks in an address-family.

- The prefix cannot be a link-local address.

- When setting a non /32 prefix, the route installed is the matching subnet network address. For example, for route 192.168.1.197/26 next-hop 10.173.2.65, the configured static route will be 192.168.1.192/26. The same applies for IPv6 prefixes.

**Parameter table**

+-------------+----------------------------------------------------+------------------+---------+
| Parameter   | Description                                        | Range            | Default |
+=============+====================================================+==================+=========+
| ip-prefix   | network ipv4 prefix                                | A.B.C.D/x        | \-      |
+-------------+----------------------------------------------------+------------------+---------+
| policy-name | policy to apply a route-map policy for the network | | string         | \-      |
|             |                                                    | | length 1-255   |         |
+-------------+----------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# network 10.108.0.0/24
    dnRouter(cfg-protocols-bgp-afi)# network 10.90.0.0/16 policy RM_POL

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# network 2001::66/90 policy RM_POL


**Removing Configuration**

To stop all network advertisements:
::

    dnRouter(cfg-protocols-bgp-afi)# no network

To stop advertisement of a specific network:
::

    dnRouter(cfg-protocols-bgp-afi)# no network 12001::66/90

To remove policy filtering for the network:
::

    dnRouter(cfg-protocols-bgp-afi)# no network 10.108.0.0/24 policy

**Command History**

+---------+---------------------------------------------------------+
| Release | Modification                                            |
+=========+=========================================================+
| 6.0     | Command introduced                                      |
+---------+---------------------------------------------------------+
| 9.0     | Added option to remove policy filtering for the network |
+---------+---------------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI     |
+---------+---------------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/next-hop-tracking.rst

network-services vrf instance protocols bgp address-family ipv4-unicast next-hop-tracking policy
------------------------------------------------------------------------------------------------

**Minimum user role:** operator

BGP next-hop tracking monitors changes in the BGP next-hop address in the RIB. When a change is detected, it is immediately reported to the BGP process to adjust the next-hop in the BGP table. This reduces the BGP convergence time. The next-hop tracking policy validates the prefix that solves the BGP next-hop address.

Once the policy is attached, when BGP receives from the RIB the prefix that solves the next-hop address, it checks the validity of this prefix against the next-hop policy.

If the peer's state is "established", but its next-hop is not valid due to the applied next-hop-tracking policy for BGP, then all the received routes from the peer next-hop will not be selected as the best, and those routes will not be advertised further to other peers accordingly.

To configure next-hop-tracking to a routing policy:

**Command syntax: next-hop-tracking policy [policy-name]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- This command is only applicable to unicast, VPN and multicast sub-address-families.

**Parameter table**

+-------------+----------------------------------------+------------------+---------+
| Parameter   | Description                            | Range            | Default |
+=============+========================================+==================+=========+
| policy-name | set nexthop tracking validation policy | | string         | \-      |
|             |                                        | | length 1-255   |         |
+-------------+----------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# next-hop-tracking policy BGP-NEXT-HOP-IPV4

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# next-hop-tracking policy BGP-NEXT-HOP-IPV6

    *** Policy configuration example ***
    routing-policy
      policy BGP-NEXT-HOP-IPV4
        rule 10 allow
          match ipv4 prefix IPV4_NHT_PREFIX
        !
      !
      prefix-list ipv4 IPV4_NHT_PREFIX
        rule 1 allow 201.0.0.0/8 matching-len ge 32
        rule 2 allow 100.0.0.11/32
      !
    !

**Removing Configuration**

To remove the policy attachment:
::

    dnRouter(cfg-protocols-bgp-afi)# no next-hop-tracking

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 13.0    | Command introduced                                  |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/redistribute_connected.rst

network-services vrf instance protocols bgp address-family ipv4-unicast redistribute connected
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

You can set the router to advertise directly connected routes:

**Command syntax: redistribute connected** metric [metric] policy [policy] [, policy, policy]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- This command is only applicable to unicast and multicast sub-address-families.

- Can set multiple policies. In case multiple policies are set policies are evaluated one after the other according to user input order

**Parameter table**

+-----------+------------------------------+------------------+---------+
| Parameter | Description                  | Range            | Default |
+===========+==============================+==================+=========+
| metric    | update route metric          | 0-4294967295     | \-      |
+-----------+------------------------------+------------------+---------+
| policy    | redistribute by policy rules | | string         | \-      |
|           |                              | | length 1-255   |         |
+-----------+------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# redistribute connected

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# redistribute connected metric 1000 policy My_Policy, My_Policy2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# redistribute connected metric 1000


**Removing Configuration**

To stop redistribution of all route types:
::

    dnRouter(cfg-protocols-bgp-afi)# no redistribute

To stop redistribution of routes by type:
::

    dnRouter(cfg-protocols-bgp-afi)# no redistribute connected

To revert metric to its default value:
::

    dnRouter(cfg-protocols-bgp-afi)# no redistribute connected metric 

**Command History**

+---------+-----------------------------------------------------------------------------------------------------------+
| Release | Modification                                                                                              |
+=========+===========================================================================================================+
| 6.0     | Command introduced                                                                                        |
+---------+-----------------------------------------------------------------------------------------------------------+
| 13.2    | Updated command syntax to support ISIS                                                                    |
+---------+-----------------------------------------------------------------------------------------------------------+
| 16.1    | Extended command to support redistribution of connected routes from MRPF table to BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------------------------------------------------------------+
| 17.2    | Added support for multiple policies attachments                                                           |
+---------+-----------------------------------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/redistribute_static.rst

network-services vrf instance protocols bgp address-family ipv4-unicast redistribute static
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

You can set the router to advertise static routes:

**Command syntax: redistribute static** metric [metric] policy [policy] [, policy, policy]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- This command is only applicable to unicast sub-address-families.

- Can set multiple policies. In case multiple policies are set policies are evaluated one after the other according to user input order.

**Parameter table**

+-----------+------------------------------+------------------+---------+
| Parameter | Description                  | Range            | Default |
+===========+==============================+==================+=========+
| metric    | update route metric          | 0-4294967295     | \-      |
+-----------+------------------------------+------------------+---------+
| policy    | redistribute by policy rules | | string         | \-      |
|           |                              | | length 1-255   |         |
+-----------+------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# redistribute static

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# redistribute static metric 1000 policy My_Policy, My_Policy2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# redistribute static metric 1000


**Removing Configuration**

To stop redistribution of all route types:
::

    dnRouter(cfg-protocols-bgp-afi)# no redistribute

To stop redistribution of routes by type:
::

    dnRouter(cfg-protocols-bgp-afi)# no redistribute static

To revert metric to its default value:
::

    dnRouter(cfg-protocols-bgp-afi)# no redistribute static metric 

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 6.0     | Command introduced                              |
+---------+-------------------------------------------------+
| 17.2    | Added support for multiple policies attachments |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv4-unicast/rib-install-policy.rst

network-services vrf instance protocols bgp address-family ipv4-unicast rib-install policy
------------------------------------------------------------------------------------------

**Minimum user role:** operator

Apply policy on BGP installation to RIB to impose route modifications

**Command syntax: rib-install policy [policy-name]** [, policy-name, policy-name]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv6-unicast

**Note**

- A BGP attribute modification done via policy will not be reflected in the advertised routes to peers. i.e policy is towards rib only and after adj-out construction.

- Policy cannot be used to filter routes from RIB - If policy resulted in deny, e.g matched on a deny rule (or ended on the default deny all rule) policy will not impose any action (including any set actions) on the routes.

- Applies for both unicast and label-unicast routes.

- Policy modification may cause BGP route update to RIB.

- Can set multiple policies. In case multiple policies are set policies are evaluated one after the other according to user input order.

**Parameter table**

+-------------+-----------------------------------------------------+------------------+---------+
| Parameter   | Description                                         | Range            | Default |
+=============+=====================================================+==================+=========+
| policy-name | Policy for routes updated prior to RIB installation | | string         | \-      |
|             |                                                     | | length 1-255   |         |
+-------------+-----------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# rib-install policy TO_RIB_POL, TO_RIB_POL2
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# rib-install policy TO_RIB_POL, TO_RIB_POL2


**Removing Configuration**

To remove policy attachment:
::

    dnRouter(cfg-protocols-bgp-afi)# no rib-install policy

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 17.1    | Command introduced                              |
+---------+-------------------------------------------------+
| 17.2    | Added support for multiple policies attachments |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/afi_ipv6-unicast.rst

network-services vrf instance protocols bgp address-family ipv6-unicast
-----------------------------------------------------------------------

**Minimum user role:** operator

To enter global BGP ipv6 address-family configuration:

**Command syntax: address-family ipv6-unicast**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**

- When using OSPFv3 or IPv6-based BGP peering within a routing instance, you must explicitly configure a router ID (router-id) for that specific instance. The main routing instance's router ID is not inherited by other instances. Even if only IPv6 protocols are used, a 32-bit router ID is still required, as IPv6 routing protocols rely on it for establishing adjacencies. The router ID must be a non-zero 32-bit (4-octet) unsigned integer. While it's common to use an IPv4 address as the router ID, this is not mandatory - it doesn’t need to be a valid or routable address, just a unique 32-bit value within the routing domain. Failing to configure a router ID in an IPv6 OSPF or BGP instance will result in the protocol defaulting to 0.0.0.0, which is invalid. This will prevent adjacency formation and BGP session establishment.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)#


**Removing Configuration**

To remove the address-family configuration:
::

    dnRouter(cfg-protocols-bgp)# no address-family ipv6-unicast

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/aggregate-route/aggregate-route.rst

network-services vrf instance protocols bgp address-family ipv6-unicast aggregate-route
---------------------------------------------------------------------------------------

**Minimum user role:** operator

Creates an aggregate (summary) route in a BGP routing table.
An aggregate route will be created if a more specific route exists in the BGP local RIB, and may act as a contributor.
An aggregate route will be installed to the local RIB with nexthop null0 (silent drop).
To create as aggregate route:

**Command syntax: aggregate-route [ip-prefix]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- This command is only applicable to unicast and multicast sub-address-families.

- You can configure multiple aggregate-address prefixes in an address-family.

- Aggregate-route with nexthop self is advertised in labeled-unicast safi, with implicit/explicit null label.

**Parameter table**

+-----------+------------------+------------+---------+
| Parameter | Description      | Range      | Default |
+===========+==================+============+=========+
| ip-prefix | aggregate prefix | X:X::X:X/x | \-      |
+-----------+------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 10.108.0.0/16
    dnRouter(cfg-bgp-afi-aggr)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 2001::66/90
    dnRouter(cfg-bgp-afi-aggr)#


**Removing Configuration**

To stop all aggregate-address advertisements:
::

    dnRouter(cfg-protocols-bgp-afi)# no aggregate-address

To stop the advertisement of a specific aggregate-address:
::

    dnRouter(cfg-protocols-bgp-afi)# no aggregate-address 12001::66/90

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/aggregate-route/as-brief-set.rst

network-services vrf instance protocols bgp address-family ipv6-unicast aggregate-route as-brief-set
----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Sets the aggregate route to include the longest common AS PATH information from all contributing routes in its AS PATH.
To configure the aggregate route setting:

**Command syntax: as-brief-set**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast aggregate-route
- protocols bgp address-family ipv4-unicast aggregate-route
- protocols bgp address-family ipv4-multicast aggregate-route
- protocols bgp address-family ipv6-unicast aggregate-route
- network-services vrf instance protocols bgp address-family ipv4-unicast aggregate-route

**Note**

- By default, the aggregate route AS PATH only has local AS when advertised.

- If the aggregate route has reduced the attribute information, then for all contributing routes the ATOMIC AGGREGATE attribute will be advertised.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 10.108.0.0/16
    dnRouter(cfg-bgp-afi-aggr)# as-brief-set

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 2001::66/90
    dnRouter(cfg-bgp-afi-aggr)# as-brief-set


**Removing Configuration**

To stop the as-brief-set behavior:
::

    dnRouter(cfg-bgp-afi-aggr)# no as-brief-set

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/aggregate-route/as-set.rst

network-services vrf instance protocols bgp address-family ipv6-unicast aggregate-route as-set
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

Sets the aggregate route to include AS PATH information for all contributing routes in its AS PATH.
To configure the aggregate route setting:

**Command syntax: as-set**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast aggregate-route
- protocols bgp address-family ipv4-unicast aggregate-route
- protocols bgp address-family ipv4-multicast aggregate-route
- protocols bgp address-family ipv6-unicast aggregate-route
- network-services vrf instance protocols bgp address-family ipv4-unicast aggregate-route

**Note**

- By default, the aggregate route AS PATH only has local AS when advertised.

- If the aggregate route has reduced the attribute information, then for all contributing routes the ATOMIC AGGREGATE attribute will be advertised.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 10.108.0.0/16
    dnRouter(cfg-bgp-afi-aggr)# as-set

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 2001::66/90
    dnRouter(cfg-bgp-afi-aggr)# as-set


**Removing Configuration**

To stop the as-set behavior:
::

    dnRouter(cfg-bgp-afi-aggr)# no as-set

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/aggregate-route/policy.rst

network-services vrf instance protocols bgp address-family ipv6-unicast aggregate-route policy
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

Sets a policy to modify the aggregate route attributes.
A user may deny the aggregate route creation when matching a given aggregate route attribute.

**Command syntax: policy [policy-name]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast aggregate-route
- protocols bgp address-family ipv4-unicast aggregate-route
- protocols bgp address-family ipv4-multicast aggregate-route
- protocols bgp address-family ipv6-unicast aggregate-route
- network-services vrf instance protocols bgp address-family ipv4-unicast aggregate-route

**Parameter table**

+-------------+-----------------------------------------------------+------------------+---------+
| Parameter   | Description                                         | Range            | Default |
+=============+=====================================================+==================+=========+
| policy-name | impose policy to update aggregate prefix attributes | | string         | \-      |
|             |                                                     | | length 1-255   |         |
+-------------+-----------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 10.108.0.0/16
    dnRouter(cfg-bgp-afi-aggr)# policy AGGR_POL

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 2001::66/90
    dnRouter(cfg-bgp-afi-aggr)# policy AGGR_POL


**Removing Configuration**

To remove the policy:
::

    dnRouter(cfg-bgp-afi-aggr)# no policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/aggregate-route/summary-only.rst

network-services vrf instance protocols bgp address-family ipv6-unicast aggregate-route summary-only
----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To Filter for more specific routes from updates:

**Command syntax: summary-only**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast aggregate-route
- protocols bgp address-family ipv4-unicast aggregate-route
- protocols bgp address-family ipv4-multicast aggregate-route
- protocols bgp address-family ipv6-unicast aggregate-route
- network-services vrf instance protocols bgp address-family ipv4-unicast aggregate-route

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 10.108.0.0/16
    dnRouter(cfg-bgp-afi-aggr)# summary-only

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# aggregate-address 2001::66/90
    dnRouter(cfg-bgp-afi-aggr)# summary-only


**Removing Configuration**

To stop the summary-only behavior:
::

    dnRouter(cfg-bgp-afi-aggr)# no summary-only

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/bgp-leak_import-from.rst

network-services vrf instance protocols bgp address-family ipv6-unicast bgp-leak import-from policy
---------------------------------------------------------------------------------------------------

**Minimum user role:** operator

BGP route leaking between vrfs is used to have routes learned an one vrf (including default) and to be used and advertised to peers in another vrf.
BGP route leaking is based on routes being copied between the bgp vrf table and is not subject to l3vpn import/export logic.
A leak policy must be specified
Up to 4 leak imports can be set in a given vrf.

**Command syntax: bgp-leak import-from [origin-vrf] policy [policy-name]** [, policy-name, policy-name]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- Up to 4 different VRFs can used as source VRFs for leaking into the single destination VRF

- A leaked route cannot be leaked again, meaning a route with the "leak-origin" attribute will not be leaked

- A leaked route can be exported to vpn safi, meaning a route that was leaked from vrf A to vrf B and exported from vrf B.

- A vpn route that was leaked, cannot be imported to the same vrf as origin. The route that was leaked from vrf A to vrf B and exported from vrf B, cannot not be importet back to vrf A from vpn.

- An imported route cannot be leaked. If it is required to have the imported route in destination vrf, import to that vrf.

**Parameter table**

+-------------+--------------------------------+------------------+---------+
| Parameter   | Description                    | Range            | Default |
+=============+================================+==================+=========+
| origin-vrf  | origin-vrf                     | | string         | \-      |
|             |                                | | length 1-255   |         |
+-------------+--------------------------------+------------------+---------+
| policy-name | impose policy on leaked routes | | string         | \-      |
|             |                                | | length 1-255   |         |
+-------------+--------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# bgp-leak import-from VRF_A policy LEAK_FROM_A1, LEAK_FROM_A2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)# instance A
    dnRouter(cfg-netsrv-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 1
    dnRouter(cfg-vrf-inst-protocols)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# bgp-leak import-from default policy LEAK_FROM_DEFAULT1, LEAK_FROM_DEFAULT2


**Removing Configuration**

To stop all leakage:
::

    dnRouter(cfg-protocols-bgp-afi)# no bgp-leak import-from

To stop leakage from a specific vrf:
::

    dnRouter(cfg-protocols-bgp-afi)# no bgp-leak import-from VRF_A

To remove policy from a specific vrf:
::

    dnRouter(cfg-protocols-bgp-afi)# no bgp-leak import-from VRF_A policy LEAK_FROM_A1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/dampening-ebgp-only.rst

network-services vrf instance protocols bgp address-family ipv6-unicast dampening-ebgp-only
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

To limit dampening logic for routes received from eBGP peers only:

**Command syntax: dampening-ebgp-only**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-vpn
- protocols bgp address-family ipv6-vpn
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# dampening-ebgp-only

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# dampening-ebgp-only


**Removing Configuration**

To revert to the default admin-state with all optional parameters set to their default values:
::

    dnRouter(cfg-protocols-bgp-afi)# no dampening-ebgp-only

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 19.0    | Add support for dampening-ebgp-only in most address families |
+---------+--------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/export-vpn_policy.rst

network-services vrf instance protocols bgp address-family ipv6-unicast export-vpn policy
-----------------------------------------------------------------------------------------

**Minimum user role:** operator

To export local routes that comply with the specified policy.
Routes are exported to the matching address-family VPN SAFI in the default BGP VRF.

**Command syntax: export-vpn policy [export-vpn-policy]** [, export-vpn-policy, export-vpn-policy]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- Only the best paths are candidates for export.

**Parameter table**

+-------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter         | Description                                                                | Range            | Default |
+===================+============================================================================+==================+=========+
| export-vpn-policy | Enable export of excommunity routes which comply with the specified policy | | string         | \-      |
|                   |                                                                            | | length 1-255   |         |
+-------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# import-vpn route-target 56335:1
    dnRouter(cfg-protocols-bgp-afi)# export-vpn policy VPN_EXP_POL1, VPN_EXP_POL2


**Removing Configuration**

To stop the export process using the specified policy:
::

    dnRouter(cfg-bgp-neighbor-afi)# no export-vpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/export-vpn_route-target.rst

network-services vrf instance protocols bgp address-family ipv6-unicast export-vpn route-target
-----------------------------------------------------------------------------------------------

**Minimum user role:** operator

To export routes with the route-target tag:

**Command syntax: export-vpn route-target [export-vpn-route-target]** [, export-vpn-route-target, export-vpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- You can export different multiple route-target tagged routes.

- The route-target can be different from the VFR route-distinguisher.

- The maximum number of route-targets that can be exported is 500.

**Parameter table**

+-------------------------+-----------------------------------------------+-------+---------+
| Parameter               | Description                                   | Range | Default |
+=========================+===============================================+=======+=========+
| export-vpn-route-target | Enable export of routes with route-target tag | \-    | \-      |
+-------------------------+-----------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# export-vpn route-target 49844:20, 49844:30
    dnRouter(cfg-protocols-bgp-afi)# export-vpn route-target 49844:40


**Removing Configuration**

To stop exporting routes:
::

    dnRouter(cfg-bgp-neighbor-afi)# no export-vpn route-target 49844:40

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/fast-reroute.rst

network-services vrf instance protocols bgp address-family ipv6-unicast fast-reroute
------------------------------------------------------------------------------------

**Minimum user role:** operator

BGP Loop-Free Alternate (LFA) Fast Reroute (FRR) allows BGP to quickly switch to a backup path when a primary path fails. With LFA FRR, BGP pre-computes a backup path and installs the backup next hop in the forwarding table when a multipath solution is not available.

For example, when the NH interface to an NC-Edge fails, a pre-installed alternate path will provide fast rerouting of the traffic. The other NC-Core devices will continue sending traffic as usual.

<INSERT 05_protocols_bgp>

To enable/disable fast reroute for the BGP protocol:

**Command syntax: fast-reroute [fast-reroute]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-vpn
- protocols bgp address-family ipv6-vpn
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- BGP fast-reroute applies only to bgp unicast and multicast sessions, and only to default VRF.

- LFA FRR is supported for both directly connected and remote nexthops. It does not apply to nexthops that are learned via BGP.

**Parameter table**

+--------------+-----------------------------------------------------------------------+--------------+----------+
| Parameter    | Description                                                           | Range        | Default  |
+==============+=======================================================================+==============+==========+
| fast-reroute | Enables bgp nexthop fast reroute for directly connected eBGP neighbor | | enabled    | disabled |
|              |                                                                       | | disabled   |          |
+--------------+-----------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# fast-reroute enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# fast-reroute enabled



**Removing Configuration**

To revert to the default admin-state:
::

    dnRouter(cfg-protocols-bgp-afi)# no fast-reroute enabled

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 10.0    | Command introduced                                  |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/import-vpn_policy.rst

network-services vrf instance protocols bgp address-family ipv6-unicast import-vpn policy
-----------------------------------------------------------------------------------------

**Minimum user role:** operator

To import local BGP routes that comply with the specified policy:

**Command syntax: import-vpn policy [import-vpn-policy]** [, import-vpn-policy, import-vpn-policy]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- All paths in the VPN SAFI are candidates for import. Filter by route-target and then by import-vpn policy.

**Parameter table**

+-------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter         | Description                                                                | Range            | Default |
+===================+============================================================================+==================+=========+
| import-vpn-policy | Enable import of excommunity routes which comply with the specified policy | | string         | \-      |
|                   |                                                                            | | length 1-255   |         |
+-------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# import-vpn policy VPN_IMP_POL1, VPN_IMP_POL2


**Removing Configuration**

To stop the import process using the specified policy:
::

    dnRouter(cfg-bgp-neighbor-afi)# no import-vpn import-vpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/import-vpn_route-target.rst

network-services vrf instance protocols bgp address-family ipv6-unicast import-vpn route-target
-----------------------------------------------------------------------------------------------

**Minimum user role:** operator

To import BGP routes with the route-target specified in the VRF tables:

**Command syntax: import-vpn route-target [import-vpn-route-target]** [, import-vpn-route-target, import-vpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- You can import different multiple route-target tagged routes.

- All paths in the VPN SAFI are candidates for import, filter by route-target and then by import-vpn policy.

**Parameter table**

+-------------------------+-----------------------------------------------------------------------+-------+---------+
| Parameter               | Description                                                           | Range | Default |
+=========================+=======================================================================+=======+=========+
| import-vpn-route-target | Enable import of routes with route-target specified to the vrf tables | \-    | \-      |
+-------------------------+-----------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# import-vpn route-target 49844:20, 49844:30
    dnRouter(cfg-protocols-bgp-afi)# import-vpn route-target 49844:40


**Removing Configuration**

To stop th exporting routes with the specified route-target:
::

    dnRouter(cfg-bgp-neighbor-afi)# no import-vpn route-target 49844:50

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/maximum-paths_ebgp.rst

network-services vrf instance protocols bgp address-family ipv6-unicast maximum-paths ebgp
------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple equal cost paths in the routing table, when some paths are ebgp and others are ibgp:

**Command syntax: maximum-paths ebgp [ebgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-vpn
- protocols bgp address-family ipv6-vpn
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- BGP will only advertise one best path to its eBGP neighbors.

- This command is relevant only to unicast and multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

- ECMP between ebgp and ibgp paths are only possible if all paths are imported from other vrfs.

**Parameter table**

+--------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                                      | Range | Default |
+====================+==================================================================================+=======+=========+
| ebgp-maximum-paths | Maximum number of parallel paths to consider when using BGP multipath. The       | 1-32  | 1       |
|                    | default is use a single path.                                                    |       |         |
+--------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ebgp 5

    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ebgp 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast

::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths ebgp

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 6.0     | Command introduced                                  |
+---------+-----------------------------------------------------+
| 13.1    | Updated maximum-paths value to 32                   |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/maximum-paths_eibgp.rst

network-services vrf instance protocols bgp address-family ipv6-unicast maximum-paths eibgp
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

Multipath between eBGP and iBGP paths is possible only when both paths are imported paths into a non-default vrf table.

To configure BGP multi-path between eBGP paths and iBGP paths for a non-default vrf unicast table:

**Command syntax: maximum-paths eibgp [eibgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- When eiBGP is configured, eBGP paths are preferred over iBGP paths.

**Parameter table**

+---------------------+---------------------------------------------------------------------------+-------+---------+
| Parameter           | Description                                                               | Range | Default |
+=====================+===========================================================================+=======+=========+
| eibgp-maximum-paths | Maximum number of parallel paths to consider when using EI-BGP multipath. | 1-32  | 1       |
+---------------------+---------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1
    dnRouter(cfg-inst-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths eibgp 5

    dnRouter(cfg-inst-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths eibgp 7


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths eibgp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/maximum-paths_ibgp.rst

network-services vrf instance protocols bgp address-family ipv6-unicast maximum-paths ibgp
------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure BGP to install multiple paths in the routing table:

**Command syntax: maximum-paths ibgp [ibgp-maximum-paths]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-vpn
- protocols bgp address-family ipv6-vpn
- network-services vrf instance protocols bgp address-family ipv4-unicast
- network-services evpn instance protocols bgp
- network-services evpn instance interconnect protocols bgp
- network-services evpn-vpws instance protocols bgp

**Note**

- This command is relevant only to unicast and multicast sub-address-families, including label-unicast.

- To view the installed routes, use the various show route commands: "show route", "show route forwarding-table", "show mpls route", and "show mpls forwarding-table".

**Parameter table**

+--------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter          | Description                                                                      | Range | Default |
+====================+==================================================================================+=======+=========+
| ibgp-maximum-paths | Maximum number of parallel paths to consider when using iBGP multipath. The      | 1-32  | 1       |
|                    | default is to use a single path                                                  |       |         |
+--------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ibgp 5

    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# maximum-paths ibgp 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast

::

    dnRouter(cfg-protocols-bgp-afi)# no maximum-paths ibgp

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 6.0     | Command introduced                                  |
+---------+-----------------------------------------------------+
| 13.1    | Updated maximum-paths value to 32                   |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/network.rst

network-services vrf instance protocols bgp address-family ipv6-unicast network
-------------------------------------------------------------------------------

**Minimum user role:** operator

This command instructs BGP to advertise a network to all neighbors. The network will be generated according to the "bgp network import-check" on page 2290 settings. If "bgp network import-check" is enabled, the network will be generated only when the route is found on the RIB. If "bgp network import-check" is disabled, the network will be generated regardless of whether or not the route is found in the RIB.

**Command syntax: network [ip-prefix]** policy [policy-name]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- This command is only applicable to unicast and multicast sub-address-families.

- You can configure multiple networks in an address-family.

- The prefix cannot be a link-local address.

- When setting a non /32 prefix, the route installed is the matching subnet network address. For example, for route 192.168.1.197/26 next-hop 10.173.2.65, the configured static route will be 192.168.1.192/26. The same applies for IPv6 prefixes.

**Parameter table**

+-------------+----------------------------------------------------+------------------+---------+
| Parameter   | Description                                        | Range            | Default |
+=============+====================================================+==================+=========+
| ip-prefix   | network ipv6 prefix                                | X:X::X:X/x       | \-      |
+-------------+----------------------------------------------------+------------------+---------+
| policy-name | policy to apply a route-map policy for the network | | string         | \-      |
|             |                                                    | | length 1-255   |         |
+-------------+----------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# network 10.108.0.0/24
    dnRouter(cfg-protocols-bgp-afi)# network 10.90.0.0/16 policy RM_POL

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# network 2001::66/90 policy RM_POL


**Removing Configuration**

To stop all network advertisements:
::

    dnRouter(cfg-protocols-bgp-afi)# no network

To stop advertisement of a specific network:
::

    dnRouter(cfg-protocols-bgp-afi)# no network 12001::66/90

To remove policy filtering for the network:
::

    dnRouter(cfg-protocols-bgp-afi)# no network 10.108.0.0/24 policy

**Command History**

+---------+---------------------------------------------------------+
| Release | Modification                                            |
+=========+=========================================================+
| 6.0     | Command introduced                                      |
+---------+---------------------------------------------------------+
| 9.0     | Added option to remove policy filtering for the network |
+---------+---------------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI     |
+---------+---------------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/next-hop-tracking.rst

network-services vrf instance protocols bgp address-family ipv6-unicast next-hop-tracking policy
------------------------------------------------------------------------------------------------

**Minimum user role:** operator

BGP next-hop tracking monitors changes in the BGP next-hop address in the RIB. When a change is detected, it is immediately reported to the BGP process to adjust the next-hop in the BGP table. This reduces the BGP convergence time. The next-hop tracking policy validates the prefix that solves the BGP next-hop address.

Once the policy is attached, when BGP receives from the RIB the prefix that solves the next-hop address, it checks the validity of this prefix against the next-hop policy.

If the peer's state is "established", but its next-hop is not valid due to the applied next-hop-tracking policy for BGP, then all the received routes from the peer next-hop will not be selected as the best, and those routes will not be advertised further to other peers accordingly.

To configure next-hop-tracking to a routing policy:

**Command syntax: next-hop-tracking policy [policy-name]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- This command is only applicable to unicast, VPN and multicast sub-address-families.

**Parameter table**

+-------------+----------------------------------------+------------------+---------+
| Parameter   | Description                            | Range            | Default |
+=============+========================================+==================+=========+
| policy-name | set nexthop tracking validation policy | | string         | \-      |
|             |                                        | | length 1-255   |         |
+-------------+----------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# next-hop-tracking policy BGP-NEXT-HOP-IPV4

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# next-hop-tracking policy BGP-NEXT-HOP-IPV6

    *** Policy configuration example ***
    routing-policy
      policy BGP-NEXT-HOP-IPV4
        rule 10 allow
          match ipv4 prefix IPV4_NHT_PREFIX
        !
      !
      prefix-list ipv4 IPV4_NHT_PREFIX
        rule 1 allow 201.0.0.0/8 matching-len ge 32
        rule 2 allow 100.0.0.11/32
      !
    !

**Removing Configuration**

To remove the policy attachment:
::

    dnRouter(cfg-protocols-bgp-afi)# no next-hop-tracking

**Command History**

+---------+-----------------------------------------------------+
| Release | Modification                                        |
+=========+=====================================================+
| 13.0    | Command introduced                                  |
+---------+-----------------------------------------------------+
| 16.1    | Extended command to support BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/redistribute_connected.rst

network-services vrf instance protocols bgp address-family ipv6-unicast redistribute connected
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

You can set the router to advertise directly connected routes:

**Command syntax: redistribute connected** metric [metric] policy [policy] [, policy, policy]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv4-multicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- This command is only applicable to unicast and multicast sub-address-families.

- Can set multiple policies. In case multiple policies are set policies are evaluated one after the other according to user input order

**Parameter table**

+-----------+------------------------------+------------------+---------+
| Parameter | Description                  | Range            | Default |
+===========+==============================+==================+=========+
| metric    | update route metric          | 0-4294967295     | \-      |
+-----------+------------------------------+------------------+---------+
| policy    | redistribute by policy rules | | string         | \-      |
|           |                              | | length 1-255   |         |
+-----------+------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# redistribute connected

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# redistribute connected metric 1000 policy My_Policy, My_Policy2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# redistribute connected metric 1000


**Removing Configuration**

To stop redistribution of all route types:
::

    dnRouter(cfg-protocols-bgp-afi)# no redistribute

To stop redistribution of routes by type:
::

    dnRouter(cfg-protocols-bgp-afi)# no redistribute connected

To revert metric to its default value:
::

    dnRouter(cfg-protocols-bgp-afi)# no redistribute connected metric 

**Command History**

+---------+-----------------------------------------------------------------------------------------------------------+
| Release | Modification                                                                                              |
+=========+===========================================================================================================+
| 6.0     | Command introduced                                                                                        |
+---------+-----------------------------------------------------------------------------------------------------------+
| 13.2    | Updated command syntax to support ISIS                                                                    |
+---------+-----------------------------------------------------------------------------------------------------------+
| 16.1    | Extended command to support redistribution of connected routes from MRPF table to BGP IPv4 multicast SAFI |
+---------+-----------------------------------------------------------------------------------------------------------+
| 17.2    | Added support for multiple policies attachments                                                           |
+---------+-----------------------------------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/redistribute_static.rst

network-services vrf instance protocols bgp address-family ipv6-unicast redistribute static
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

You can set the router to advertise static routes:

**Command syntax: redistribute static** metric [metric] policy [policy] [, policy, policy]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- This command is only applicable to unicast sub-address-families.

- Can set multiple policies. In case multiple policies are set policies are evaluated one after the other according to user input order.

**Parameter table**

+-----------+------------------------------+------------------+---------+
| Parameter | Description                  | Range            | Default |
+===========+==============================+==================+=========+
| metric    | update route metric          | 0-4294967295     | \-      |
+-----------+------------------------------+------------------+---------+
| policy    | redistribute by policy rules | | string         | \-      |
|           |                              | | length 1-255   |         |
+-----------+------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# redistribute static

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# redistribute static metric 1000 policy My_Policy, My_Policy2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# redistribute static metric 1000


**Removing Configuration**

To stop redistribution of all route types:
::

    dnRouter(cfg-protocols-bgp-afi)# no redistribute

To stop redistribution of routes by type:
::

    dnRouter(cfg-protocols-bgp-afi)# no redistribute static

To revert metric to its default value:
::

    dnRouter(cfg-protocols-bgp-afi)# no redistribute static metric 

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 6.0     | Command introduced                              |
+---------+-------------------------------------------------+
| 17.2    | Added support for multiple policies attachments |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_ipv6-unicast/rib-install-policy.rst

network-services vrf instance protocols bgp address-family ipv6-unicast rib-install policy
------------------------------------------------------------------------------------------

**Minimum user role:** operator

Apply policy on BGP installation to RIB to impose route modifications

**Command syntax: rib-install policy [policy-name]** [, policy-name, policy-name]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp address-family ipv6-unicast
- protocols bgp address-family ipv4-unicast
- protocols bgp address-family ipv6-unicast
- network-services vrf instance protocols bgp address-family ipv4-unicast

**Note**

- A BGP attribute modification done via policy will not be reflected in the advertised routes to peers. i.e policy is towards rib only and after adj-out construction.

- Policy cannot be used to filter routes from RIB - If policy resulted in deny, e.g matched on a deny rule (or ended on the default deny all rule) policy will not impose any action (including any set actions) on the routes.

- Applies for both unicast and label-unicast routes.

- Policy modification may cause BGP route update to RIB.

- Can set multiple policies. In case multiple policies are set policies are evaluated one after the other according to user input order.

**Parameter table**

+-------------+-----------------------------------------------------+------------------+---------+
| Parameter   | Description                                         | Range            | Default |
+=============+=====================================================+==================+=========+
| policy-name | Policy for routes updated prior to RIB installation | | string         | \-      |
|             |                                                     | | length 1-255   |         |
+-------------+-----------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv4-unicast
    dnRouter(cfg-protocols-bgp-afi)# rib-install policy TO_RIB_POL, TO_RIB_POL2
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# rib-install policy TO_RIB_POL, TO_RIB_POL2


**Removing Configuration**

To remove policy attachment:
::

    dnRouter(cfg-protocols-bgp-afi)# no rib-install policy

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 17.1    | Command introduced                              |
+---------+-------------------------------------------------+
| 17.2    | Added support for multiple policies attachments |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/bgp/afi_l2vpn-evpn/afi_l2vpn-evpn.rst

network-services vrf instance protocols bgp address-family l2vpn-evpn
---------------------------------------------------------------------

**Minimum user role:** operator

To enter global BGP l2vpn-evpn address-family configuration:

**Command syntax: address-family l2vpn-evpn**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp

**Note**

- Notice the change in prompt.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family l2vpn-evpn
    dnRouter(cfg-protocols-bgp-afi)#


**Removing Configuration**

To remove the address-family configuration:
::

    dnRouter(cfg-protocols-bgp)# no address-family l2vpn-evpn

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/always-compare-med.rst

network-services vrf instance protocols bgp always-compare-med
--------------------------------------------------------------

**Minimum user role:** operator

When two or more links exist between autonomous systems, the multi-exit discriminator (MED) values may be set to give preferences to certain routes. When comparing MED values, the lower value is preferred. By default, this function is disabled, and MED values are compared only if two paths have the same neighbor AS.

To configure the BGP process to always compare the MED metric on routes for best path selection, even when received from different ASs:

**Command syntax: always-compare-med**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# always-compare-med


**Removing Configuration**

To disable the always compare MED function:
::

    dnRouter(cfg-protocols-bgp)# no always-compare-med

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/bestpath_aigp-ignore.rst

network-services vrf instance protocols bgp bestpath aigp-ignore
----------------------------------------------------------------

**Minimum user role:** operator

By default, the best path selection algorithm considers the AIGP metric as a tie-breaker between paths, and prefers paths with the AIGP attribute over paths without it. This command forces the system to only consider the AIGP attribute in the best path algorithm if both paths have an AIGP attribute.

To set the system to ignore the AIGP metric in best path calculation:

**Command syntax: bestpath aigp-ignore**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**

- This configuration is applicable to the default VRF only.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-bgp)# bestpath aigp-ignore


**Removing Configuration**

To disable the configuration:
::

    dnRouter(cfg-bgp)# no bestpath aigp-ignore

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 7.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/bestpath_as-path.rst

network-services vrf instance protocols bgp bestpath as-path
------------------------------------------------------------

**Minimum user role:** operator

To configure how BGP treats the AS path in best path selection:

**Command syntax: bestpath as-path {confed, multipath-relax, ignore}**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**

- These parameter options are not mutually exclusive. You may configure all options. These options are disabled by default.

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+---------+---------+
| Parameter       | Description                                                                      | Range   | Default |
+=================+==================================================================================+=========+=========+
| confed          | specifies that the length of confederation path sets and sequences should be     | Boolean | False   |
|                 | taken into account during the BGP best path decision process                     |         |         |
+-----------------+----------------------------------------------------------------------------------+---------+---------+
| multipath-relax | specifies that BGP decision process should consider paths of equal as-path       | Boolean | False   |
|                 | length candidates for multipath computation. Without the set, the entire as-path |         |         |
|                 | must match for multipath computation                                             |         |         |
+-----------------+----------------------------------------------------------------------------------+---------+---------+
| ignore          | Ignore the AS path length when selecting the best path. The default is to use    | Boolean | False   |
|                 | the AS path length and prefer paths with shorter length.                         |         |         |
+-----------------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# bestpath as-path confed
    dnRouter(cfg-protocols-bgp)# bestpath as-path multipath-relax
    dnRouter(cfg-protocols-bgp)# bestpath as-path ignore


**Removing Configuration**

To revert the best path AS path instruction to default (disable):
::

    dnRouter(cfg-protocols-bgp)# no bestpath as-path confed

::

    dnRouter(cfg-protocols-bgp)# no bestpath as-path multipath-relax

::

    dnRouter(cfg-protocols-bgp)# no bestpath as-path ignore

::

    dnRouter(cfg-protocols-bgp)# no bestpath as-path

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/bestpath_compare-router-id.rst

network-services vrf instance protocols bgp bestpath compare-router-id
----------------------------------------------------------------------

**Minimum user role:** operator

When comparing routes, if all metric stages 1-10 are equal, including local preference, AS-path length, IGP cost, and MED, BGP can select the best path based on router-id (stage 11). This command causes BGP to prefer the route with the lower router-id when all other metrics are equal.

To enable this function:

**Command syntax: bestpath compare-router-id**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**

- If the route contains route reflector attributes, BGP will use the ORIGINATOR_ID as the ROUTER_ID for comparison. Otherwise, the router-id of the neighbor from which the route was received is used.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# bestpath compare-router-id


**Removing Configuration**

To disable the compare-router-id option:
::

    dnRouter(cfg-protocols-bgp)# no bestpath compare-router-id

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/bestpath_delay.rst

network-services vrf instance protocols bgp bestpath delay
----------------------------------------------------------

**Minimum user role:** operator

Upon initialization following a restart, the BGP process waits for the configured amount of time before starting to send its updates. During this delay, the router listens to updates coming from the peers without responding. When the peers finish sending updates, or when the timer expires, the BGP calculates the best path for each route and starts advertising to its peers. The best path delay improves convergence because by waiting for all the information before calculating the best paths, less advertisements are required.

The best path delay command sets the maximum time to wait after the first neighbor is established until the BGP starts calculating best paths and sending out advertisements:

**Command syntax: bestpath delay [bestpath-delay]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Parameter table**

+----------------+----------------------------------------------------------------------------------+--------+---------+
| Parameter      | Description                                                                      | Range  | Default |
+================+==================================================================================+========+=========+
| bestpath-delay | Set delay for the first bestpath calculation to all updates to be received from  | 0-3600 | 120     |
|                | all peers                                                                        |        |         |
+----------------+----------------------------------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# bestpath delay 10


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# no bestpath delay

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/bestpath_deterministic-med.rst

network-services vrf instance protocols bgp bestpath deterministic-med
----------------------------------------------------------------------

**Minimum user role:** operator

When routes are advertised by different peers in the same autonomous system, you can instruct the BGP process to compare the MED variable to select the best path.

To enable this option:

**Command syntax: bestpath deterministic-med**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# bestpath deterministic-med


**Removing Configuration**

To disable this configuration:
::

    dnRouter(cfg-protocols-bgp)# no bestpath deterministic-med

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/bestpath_med.rst

network-services vrf instance protocols bgp bestpath med
--------------------------------------------------------

**Minimum user role:** operator

The bestpath-med command instructs BGP what to do with the multi-exit discriminator (MED) metrics. By default, routes originating within the same confederation as the router do not have their MED values compared as part of the best-path selection process. Also BGP best-path selection considers a missing MED value to be 0, so routes with missing MED values will be preferred by default.

To change this behavior:

**Command syntax: bestpath med {confed, missing-as-worst}**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**

- These parameter options may be configured together or individually. When configured individually, the order is not important.

**Parameter table**

+------------------+----------------------------------------------------------------------------------+---------+---------+
| Parameter        | Description                                                                      | Range   | Default |
+==================+==================================================================================+=========+=========+
| confed           | MEDs are compared for all paths that consist only of AS_CONFED_SEQUENCE. These   | Boolean | False   |
|                  | paths originated within the local confederation                                  |         |         |
+------------------+----------------------------------------------------------------------------------+---------+---------+
| missing-as-worst | path received with no MED paths are assigned a MED of 4,294,967,294              | Boolean | False   |
+------------------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# bestpath med confed

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# bestpath med missing-as-worst

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# bestpath med confed missing-as-worst

    dnRouter(cfg-protocols-bgp)# bestpath med missing-as-worst confed


**Removing Configuration**

To disable the bestpath med configuration:
::

    dnRouter(cfg-protocols-bgp)# no bestpath med confed

::

    dnRouter(cfg-protocols-bgp)# no bestpath med missing-as-worst

::

    dnRouter(cfg-protocols-bgp)# no bestpath med

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/bgp.rst

network-services vrf instance protocols bgp
-------------------------------------------

**Minimum user role:** operator

To start the BGP process:

**Command syntax: bgp [as-number]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols
- protocols

**Note**

- The AS-number cannot be changed. To change it, you need to delete the BGP protocol configuration and configure a new process with a different AS-number.

- Notice the change in prompt.

**Parameter table**

+-----------+------------------------+--------------+---------+
| Parameter | Description            | Range        | Default |
+===========+========================+==============+=========+
| as-number | peer-group unique name | 1-4294967295 | \-      |
+-----------+------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)#


**Removing Configuration**

To disable the BGP process:
::

    dnRouter(cfg-protocols)# no bgp

**Command History**

+---------+--------------------------------------+
| Release | Modification                         |
+=========+======================================+
| 6.0     | Command introduced                   |
+---------+--------------------------------------+
| 9.0     | Changed AS-number range to minimum 1 |
+---------+--------------------------------------+

---

## vrf/instance/protocols/bgp/default-local-preference.rst

network-services vrf instance protocols bgp default local-preference
--------------------------------------------------------------------

**Minimum user role:** operator

Routers in the same AS exchange the local preference attribute in order to indicate to the AS which path is preferred for exiting the AS and reaching a specific network.

A path with a higher local preference is preferred more.

To configure the default local preference for advertised routes:

**Command syntax: default local-preference [default-local-preference]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Parameter table**

+--------------------------+-------------------------------------------+--------------+---------+
| Parameter                | Description                               | Range        | Default |
+==========================+===========================================+==============+=========+
| default-local-preference | Change the default local preference value | 0-4294967295 | 100     |
+--------------------------+-------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# default local-preference 400


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# no default local-preference

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/dynamic-med-interval.rst

network-services vrf instance protocols bgp dynamic-med-interval
----------------------------------------------------------------

**Minimum user role:** operator

When using an egress policy with 'set med igp-cost', any change in the MED attribute is advertised.
To configure a delay in the advertisement of updates:

**Command syntax: dynamic-med-interval [interval]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Parameter table**

+-----------+----------------------------------------------------------------------------------+-------+---------+
| Parameter | Description                                                                      | Range | Default |
+===========+==================================================================================+=======+=========+
| interval  | Set delay interval for consecutive updates due to MED attribute change when      | 0-15  | 0       |
|           | using set med igp-cost                                                           |       |         |
+-----------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# dynamic-med-interval 5


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# no dynamic-med-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/enforce-first-as.rst

network-services vrf instance protocols bgp enforce-first-as
------------------------------------------------------------

**Minimum user role:** operator

This command forces the BGP router to compare the first AS, in the AS path of eBGP routes received from neighbors, to the configured remote external neighbor AS number. Updates from eBGP neighbors that do not include that AS number as the first item in the AS_PATH attribute will be ignored.

**Command syntax: enforce-first-as**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# enforce-first-as


**Removing Configuration**

To disable the enforcement:
::

    dnRouter(cfg-protocols-bgp)# no enforce-first-as

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/fast-external-failover.rst

network-services vrf instance protocols bgp fast-external-failover
------------------------------------------------------------------

**Minimum user role:** operator

This command instructs the BGP process to immediately terminate external BGP peering sessions of directly adjacent neighbors if the link used to reach these neighbors goes down, without waiting for the hold-down timer to expire:

**Command syntax: fast-external-failover [fast-external-failover]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**

- This option is enabled by default.

**Parameter table**

+------------------------+---------------------------------------------+--------------+---------+
| Parameter              | Description                                 | Range        | Default |
+========================+=============================================+==============+=========+
| fast-external-failover | fast peer termination for unreachable peers | | enabled    | enabled |
|                        |                                             | | disabled   |         |
+------------------------+---------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# fast-external-failover disabled
    dnRouter(cfg-protocols-bgp)# fast-external-failover enabled


**Removing Configuration**

To disable this option:
::

    dnRouter(cfg-protocols-bgp)# no fast-external-failover

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/graceful-restart/graceful-restart.rst

network-services vrf instance protocols bgp graceful-restart
------------------------------------------------------------

**Minimum user role:** operator

Graceful restart enables a BGP router to indicate its ability to preserve its forwarding state during BGP restart. During session initiation, the BGP router informs its peer that it has graceful restart capability. If the BGP session is lost during the restart, the peers mark all the associated routes as stale. However, they do not remove these routes and temporarily continue to use them to make forwarding decisions. Thus, no packets are lost while the BGP process is waiting for convergence of the routing information with the BGP peers.

When the restarting router is back up, the peers wait for the configured amount of time before they delete the stale routes, allowing the router time to converge. When the restarting router sends an end-of-RIB flag notifying its peers that it has converged, or if no end-of-RIB flag is received, but the timer expires, the peers delete any saved stale routes.

Graceful restart is enabled by default. To configure the graceful-restart parameters, enter the graceful-restart configuration mode:

**Command syntax: graceful-restart**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**

- Notice the change in prompt.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# graceful-restart
    dnRouter(cfg-protocols-bgp-gr)#


**Removing Configuration**

To revert all BGP graceful-restart parameters to their default values: 
::

    dnRouter(cfg-protocols-bgp)# no graceful-restart

**Command History**

+---------+-------------------------------------+
| Release | Modification                        |
+=========+=====================================+
| 6.0     | Command introduced                  |
+---------+-------------------------------------+
| 10.0    | Added restart-time parameter        |
+---------+-------------------------------------+
| 11.1    | Removed admin-state from the syntax |
+---------+-------------------------------------+
| 11.5    | Applied new hierarchy               |
+---------+-------------------------------------+

---

## vrf/instance/protocols/bgp/graceful-restart/restart-time.rst

network-services vrf instance protocols bgp graceful-restart restart-time
-------------------------------------------------------------------------

**Minimum user role:** operator

Graceful restart enables a BGP router to indicate its ability to preserve its forwarding state during BGP restart. During session initiation, the BGP router informs its peer that it has graceful restart capability. If the BGP session is lost during the restart, the peers mark all the associated routes as stale. However, they do not remove these routes and temporarily continue to use them to make forwarding decisions. Thus, no packets are lost while the BGP process is waiting for convergence of the routing information with the BGP peers.

When the restarting router is back up, the peers wait for the configured amount of time before they delete the stale routes, allowing the router time to converge. When the restarting router sends an end-of-RIB flag notifying its peers that it has converged, or if no end-of-RIB flag is received, but the timer expires, the peers delete any saved stale routes.

To configure the graceful-restart restart-time:

**Command syntax: restart-time [restart-time]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp graceful-restart
- protocols bgp graceful-restart

**Parameter table**

+--------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter    | Description                                                                      | Range | Default |
+==============+==================================================================================+=======+=========+
| restart-time | An upper-bound on the time thate stale routes will be retained by a router after | 0-600 | 120     |
|              | a session is restarted. If bgp the restored bgp session didn't reaches establish |       |         |
|              | state prior to this timer expiring stale-routes will be flushed upon its receipt |       |         |
+--------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# graceful-restart
    dnRouter(cfg-protocols-bgp-gr)# restart-time 100


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp-gr)# no restart-time

**Command History**

+---------+-----------------------+
| Release | Modification          |
+=========+=======================+
| 10.0    | Command introduced    |
+---------+-----------------------+
| 11.5    | Applied new hierarchy |
+---------+-----------------------+

---

## vrf/instance/protocols/bgp/graceful-restart/stalepath-time.rst

network-services vrf instance protocols bgp graceful-restart stalepath-time
---------------------------------------------------------------------------

**Minimum user role:** operator

Graceful restart enables a BGP router to indicate its ability to preserve its forwarding state during BGP restart. During session initiation, the BGP router informs its peer that it has graceful restart capability. If the BGP session is lost during the restart, the peers mark all the associated routes as stale. However, they do not remove these routes and temporarily continue to use them to make forwarding decisions. Thus, no packets are lost while the BGP process is waiting for convergence of the routing information with the BGP peers.

When the restarting router is back up, the peers wait for the configured amount of time before they delete the stale routes, allowing the router time to converge. When the restarting router sends an end-of-RIB flag notifying its peers that it has converged, or if no end-of-RIB flag is received, but the timer expires, the peers delete any saved stale routes.

To configure the graceful-restart stalepath-time:

**Command syntax: stalepath-time [stale-path-time]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp graceful-restart
- protocols bgp graceful-restart

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+--------+---------+
| Parameter       | Description                                                                      | Range  | Default |
+=================+==================================================================================+========+=========+
| stale-path-time | An upper-bound on the time thate stale routes will be retained by a router after | 1-3600 | 360     |
|                 | a session is restarted. If an End-of-RIB (EOR) marker is received prior to this  |        |         |
|                 | timer expiring stale-routes will be flushed upon its receipt - if no EOR is      |        |         |
|                 | received, then when this timer expires stale paths will be purged. This timer is |        |         |
|                 | referred to as the Selection_Deferral_Timer in RFC4724                           |        |         |
+-----------------+----------------------------------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# graceful-restart
    dnRouter(cfg-protocols-bgp-gr)# stalepath-time 400


**Removing Configuration**

To revert to the default stalepath-time value:
::

    dnRouter(cfg-protocols-bgp-gr)# no stalepath-time

**Command History**

+---------+-----------------------+
| Release | Modification          |
+=========+=======================+
| 6.0     | Command introduced    |
+---------+-----------------------+
| 11.5    | Applied new hierarchy |
+---------+-----------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/address-family.rst

network-services vrf instance protocols bgp neighbor-group address-family
-------------------------------------------------------------------------

**Minimum user role:** operator

The address-family applies to a neighbor, neighbor-group, and a neighbor within a neighbor-group. A neighbor within a neighbor-group inherits all address-families configured for the neighbor-group (a neighbor-group must be configured with at least one address-family, regardless if it has neighbors within it. To configure an address-family to be supported by BGP for the neighbor:

**Command syntax: address-family [neighbor-address-family]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- Changing the configuration will cause the BGP session to restart.

- When FlowSpec SAFI is applied, the received FlowSpec rules are imposed on all FlowSpec enabled interfaces.

- Notice the change in prompt.

- When using OSPFv3 or IPv6-based BGP peering within a routing instance, you must explicitly configure a router ID (router-id) for that specific instance. The main routing instance's router ID is not inherited by other instances. Even if only IPv6 protocols are used, a 32-bit router ID is still required, as IPv6 routing protocols rely on it for establishing adjacencies. The router ID must be a non-zero 32-bit (4-octet) unsigned integer. While it's common to use an IPv4 address as the router ID, this is not mandatory - it doesn’t need to be a valid or routable address, just a unique 32-bit value within the routing domain. Failing to configure a router ID in an IPv6 OSPF or BGP instance will result in the protocol defaulting to 0.0.0.0, which is invalid. This will prevent adjacency formation and BGP session establishment.

**Parameter table**

+-------------------------+---------------+--------------------------+---------+
| Parameter               | Description   | Range                    | Default |
+=========================+===============+==========================+=========+
| neighbor-address-family | afi-safi type | | ipv4-unicast           | \-      |
|                         |               | | ipv6-unicast           |         |
|                         |               | | ipv4-labeled-unicast   |         |
|                         |               | | ipv6-labeled-unicast   |         |
|                         |               | | ipv4-vpn               |         |
|                         |               | | ipv6-vpn               |         |
|                         |               | | link-state             |         |
|                         |               | | ipv4-flowspec          |         |
|                         |               | | ipv6-flowspec          |         |
|                         |               | | ipv4-rt-constrains     |         |
|                         |               | | ipv4-multicast         |         |
|                         |               | | l2vpn-evpn             |         |
|                         |               | | l2vpn-vpls             |         |
+-------------------------+---------------+--------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family link-state
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family link-state
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-flowspec
    dnRouter(cfg-group-neighbor-afi)# exit
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv6-flowspec
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group FLOWSPEC_V4
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-flowspec
    dnRouter(cfg-group-neighbor-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-flowspec
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-rt-constrains
    dnRouter(cfg-bgp-neighbor-afi)#


**Removing Configuration**

To remove the address-family configuration:
::

    dnRouter(cfg-protocols-bgp-group)# no address-family ipv6-unicast

::

    dnRouter(cfg-protocols-bgp-neighbor)# no address-family ipv4-unicast

::

    dnRouter(cfg-bgp-group-neighbor)# no address-family ipv4-flowspec

**Command History**

+---------+-------------------------------------------------------------------------------------------------------------------+
| Release | Modification                                                                                                      |
+=========+===================================================================================================================+
| 6.0     | Command introduced                                                                                                |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 10.0    | Added support for link-state AFI                                                                                  |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 13.0    | Added support for FlowSpec SAFI                                                                                   |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 16.1    | Added support for IPv4 Route Target Constrain SAFI                                                                |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 16.1    | Added support for IPv4 Multicast SAFI. The command is now supported also under the network-services/vrf hierarchy |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 17.2    | Added support for l2vpn-evpn in the range                                                                         |
+---------+-------------------------------------------------------------------------------------------------------------------+
| TBD     | Added ipv4/6-labeled-unicast as separate safi                                                                     |
+---------+-------------------------------------------------------------------------------------------------------------------+
| TBD     | Added support for l2vpn-vpls in the range                                                                         |
+---------+-------------------------------------------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/allow-as-in.rst

network-services vrf instance protocols bgp neighbor-group address-family allow-as-in
-------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command instructs the BGP router whether or not to disable the AS PATH check function for routes learned from the specific neighbor, so as not to reject routes that contain the recipient's AS number.

**Command syntax: allow-as-in [admin-state]** duplicate [as-duplicate-number]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command is applicable to eBGP and iBGP neighbors.

**Parameter table**

+---------------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter           | Description                                                                      | Range        | Default  |
+=====================+==================================================================================+==============+==========+
| admin-state         | enable this configuration                                                        | | enabled    | disabled |
|                     |                                                                                  | | disabled   |          |
+---------------------+----------------------------------------------------------------------------------+--------------+----------+
| as-duplicate-number | Specifies the number of times that the AS path of a received route may contain   | 1-10         | 1        |
|                     | the recipient BGP speaker's AS number and still be accepted                      |              |          |
+---------------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# allow-as-in enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-vpn
    dnRouter(cfg-protocols-bgp-neighbor)# allow-as-in enabled duplicate 3

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# allow-as-in enabled duplicate 10

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# allow-as-in disabled duplicate 10
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# allow-as-in enabled duplicate 2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# allow-as-in enabled duplicate 10
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# allow-as-in disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.3
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-flowspec
    dnRouter(cfg-bgp-neighbor-afi)# allow-as-in enabled


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-bgp-neighbor-afi)# no allow-as-in duplicate

::

    dnRouter(cfg-bgp-group-afi)# no allow-as-in

::

    dnRouter(cfg-group-neighbor-afi)# no allow-as-in

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/as-loop-check.rst

network-services vrf instance protocols bgp neighbor-group address-family as-loop-check
---------------------------------------------------------------------------------------

**Minimum user role:** operator

When BGP updates travel through different Autonomous Systems (AS), each eBGP router prepends its AS number to the AS PATH attribute of the BGP update message. If a router receives an update that includes its own AS number in the AS PATH attribute, it will discard it by default to prevent loops. However, In some cases, you may want to allow such updates.

**Command syntax: as-loop-check [as-loop-check]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- allow-as-in must be enabled on the receiving end of the BGP update, otherwise it will drop any update that contains its own AS number. See "bgp neighbor address-family allow-as-in".

- This command applies only to eBGP neighbors.

- If both as-loop-check and as-override are enabled for the same neighbor, as-loop-check will be ignored as the neighbor AS is expected to be replaced.

**Parameter table**

+---------------+---------------------------------------------------------------------------+--------------+---------+
| Parameter     | Description                                                               | Range        | Default |
+===============+===========================================================================+==============+=========+
| as-loop-check | do not advertise route if neighbor as number is part of the route as-path | | enabled    | enabled |
|               |                                                                           | | disabled   |         |
+---------------+---------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# as-loop-check disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# as-loop-check disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# as-loop-check disabled
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# as-loop-check enabled


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-bgp-group-afi)# no as-loop-check

::

    dnRouter(cfg-bgp-neighbor-afi)# no as-loop-check

::

    dnRouter(cfg-group-neighbor-afi)# no as-loop-check

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 11.0    | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/as-override.rst

network-services vrf instance protocols bgp neighbor-group address-family as-override
-------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command replaces the AS number of the originating device with the AS number of the sending BGP device.

**Command syntax: as-override**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor address-family

**Note**

- AS-override is supported for eBGP and iBGP neighbors

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# as-override
    dnRouter(cfg-bgp-neighbor-afi)# exit
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-flowspec
    dnRouter(cfg-bgp-neighbor-afi)# as-override

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# as-override


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-bgp-neighbor-afi)# no as-override

::

    dnRouter(cfg-bgp-group-afi)# no as-override

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/attribute-unchanged.rst

network-services vrf instance protocols bgp neighbor-group address-family attribute-unchanged
---------------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command enables BGP to send updates to eBGP peers with the attribute unchanged.

**Command syntax: attribute-unchanged** next-hop med as-path

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor address-family

**Note**

- If you do not specify attributes, all attributes will remain unchanged.

- For flowspec SAFI, the next-hop attribute remains unchanged by default.

**Parameter table**

+-----------+--------------------+---------+---------+
| Parameter | Description        | Range   | Default |
+===========+====================+=========+=========+
| next-hop  | next-hop attribute | Boolean | False   |
+-----------+--------------------+---------+---------+
| med       | med attribute      | Boolean | False   |
+-----------+--------------------+---------+---------+
| as-path   | as-path attribute  | Boolean | False   |
+-----------+--------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# attribute-unchanged

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# attribute-unchanged next-hop med

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-bgp-neighbor-afi)# attribute-unchanged next-hop med as-path

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-unicast
    dnRouter(cfg-bgp-group-afi)# attribute-unchanged med

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-unicast
    dnRouter(cfg-bgp-group-afi)# attribute-unchanged as-path


**Removing Configuration**

To disable this option for all attributes:
::

    dnRouter(cfg-bgp-neighbor-afi)# no attribute-unchanged

::

    dnRouter(cfg-bgp-neighbor-afi)# no attribute-unchanged med next-hop

::

    dnRouter(cfg-protocols-bgp-group)# no attribute-unchanged med next-hop

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 11.0    | Removed the as-path option       |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+
| 17.1    | Added as-path support            |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/capability_orf.rst

network-services vrf instance protocols bgp neighbor-group address-family capability orf
----------------------------------------------------------------------------------------

**Minimum user role:** operator

This command instructs the BGP router whether or not to establish a peering session with a neighbor that does not support capability negotiation, neighbors that are members of a peer group, or with a neighbor in a peer group. To configure this option:

**Command syntax: capability orf [capability-orf]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command cannot be enabled with the strict-capability-match configuration. See "bgp neighbor strict-capability-match"

**Parameter table**

+----------------+----------------------------------------------------------------------------------+------------------+----------+
| Parameter      | Description                                                                      | Range            | Default  |
+================+==================================================================================+==================+==========+
| capability-orf | Advertises outbound route filter (ORF) capabilities to peer routers enabled -    | | enabled        | disabled |
|                | enables the ORF prefix list capability in both receive and send mode             | | disabled       |          |
|                | receive-only - enables the ORF prefix list capability in receive mode only       | | send-only      |          |
|                | send-only - enables the ORF prefix list capability in send mode only disabled -  | | receive-only   |          |
|                | disables ORF capability                                                          |                  |          |
+----------------+----------------------------------------------------------------------------------+------------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# capability orf enabled
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group GROUP_1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-unicast
    dnRouter(cfg-bgp-group-afi)# capability orf receive-only
    dnRouter(cfg-protocols-bgp-group)# neighbor 1.1.1.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# capability orf send-only
    dnRouter(cfg-protocols-bgp-group)# neighbor 2.2.2.2
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# capability orf disabled


**Removing Configuration**

To disable this option:
::

    dnRouter(cfg-bgp-group-afi)# no capability orf

::

    dnRouter(cfg-bgp-neighbor-afi)# no capability orf

::

    dnRouter(cfg-group-neighbor-afi)# no capability orf

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/dampening.rst

network-services vrf instance protocols bgp neighbor-group address-family dampening
-----------------------------------------------------------------------------------

**Minimum user role:** operator

To instruct the router whether or not to enable route flap dampening suppression from neighbor, peer group or a neighbor in a peer group:

**Command syntax: dampening [dampening]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command is only relevant if global address-family dampening is enabled. See "bgp address-family dampening"

**Parameter table**

+-----------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter | Description                                                                      | Range        | Default |
+===========+==================================================================================+==============+=========+
| dampening | route flap dampening supersession from neighbor, thus disables the global        | | enabled    | enabled |
|           | dampening configuration for neighbor or group                                    | | disabled   |         |
+-----------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# dampening enabled
    dnRouter(cfg-protocols-bgp-afi)# exit
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# dampening enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# dampening enabled
    dnRouter(cfg-protocols-bgp-afi)# exit
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# dampening disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# dampening enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# dampening enabled
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# dampening disabled


**Removing Configuration**

To revert dampening to its default state:
::

    dnRouter(cfg-bgp-group-afi)# no dampening

::

    dnRouter(cfg-bgp-neighbor-afi)# no dampening

::

    dnRouter(cfg-group-neighbor-afi)# no dampening

**Command History**

+---------+---------------------------------------------------------------------------------+
| Release | Modification                                                                    |
+=========+=================================================================================+
| 6.0     | Command introduced                                                              |
+---------+---------------------------------------------------------------------------------+
| 11.4    | Changed the default admin-state from the global AFI configuration to "Enabled". |
+---------+---------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/default-originate-policy.rst

network-services vrf instance protocols bgp neighbor-group address-family default-originate
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enable a BGP router to forward the default route 0.0.0.0 to a BGP neighbor or a BGP peer group:

**Command syntax: default-originate** policy [policy]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor address-family

**Note**

- This command is only applicable to unicast sub-address-families.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter | Description                                                                      | Range            | Default |
+===========+==================================================================================+==================+=========+
| policy    | Optionally injects the default route conditionally, depending on the match       | | string         | \-      |
|           | conditions in the route map                                                      | | length 1-255   |         |
+-----------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# default-originate

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# default-originate policy POL_NAME

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-rt-constrains
    dnRouter(cfg-bgp-neighbor-afi)# default-originate


**Removing Configuration**

To disable this option:
::

    dnRouter(cfg-bgp-group-afi)# no default-originate

::

    dnRouter(cfg-bgp-neighbor-afi)# no default-originate

**Command History**

+---------+----------------------------------------------------+
| Release | Modification                                       |
+=========+====================================================+
| 6.0     | Command introduced                                 |
+---------+----------------------------------------------------+
| 16.1    | Added support for IPv4 Route Target Constrain SAFI |
+---------+----------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/extended-next-hop.rst

network-services vrf instance protocols bgp neighbor-group address-family extended-next-hop
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

Extended next-hop capability allows usage of an IPv6 address next-hop for IPv4 NLRIs per RFC8950.
If the capability is supported on both ends, the DNOS router will advertise, by default, the IPv6 BGP session source address as the next-hop value for IPv4 routes.
To enable extended next-hop capability:"

**Command syntax: extended-next-hop [extended-next-hop]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- Configuration valid only for ipv4 address families

- For neighbors within a group, the "no" command reverts the neighbor to the group setting.

- Reconfiguration will cause session restart (capability change)

**Parameter table**

+-------------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter         | Description                                                                      | Range        | Default  |
+===================+==================================================================================+==============+==========+
| extended-next-hop | Support for extended next-hop capability. Allowing usage of ipv6 address nexthop | | enabled    | disabled |
|                   | for ipv4 NLRIs. RFC 8950                                                         | | disabled   |          |
+-------------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# extended-next-hop enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv4-unicast
    dnRouter(cfg-group-group-afi)# extended-next-hop enabled
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66


**Removing Configuration**

To revert extended-next-hop to default behavior:
::

    dnRouter(cfg-group-neighbor-afi)# no extended-next-hop

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/long-lived-graceful-restart/admin-state.rst

network-services vrf instance protocols bgp neighbor-group address-family long-lived-graceful-restart admin-state
-----------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enable/disable long-lived-graceful-restart feature on a neighbor/neighbor-group

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family long-lived-graceful-restart

**Note**

- The command is applicable to BGP neighbor and neighbor-groups

- The Graceful restart capability must be enabled for the LLGR to be enabled

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                                      | Range        | Default  |
+=============+==================================================================================+==============+==========+
| admin-state | The administrative state of the long lived graceful restart feature for the      | | enabled    | disabled |
|             | specific neighbor/neighbor-group. When enabled, peer will be configured with     | | disabled   |          |
|             | long lived graceful restart parameters.                                          |              |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# long-lived-graceful-restart
    dnRouter(cfg-neighbor-afi-llgr)# admin-state enabled


**Removing Configuration**

To revert all BGP long-lived-graceful-restart parameters to their default values: 
::

    dnRouter(cfg-neighbor-afi-llgr)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/long-lived-graceful-restart/long-lived-graceful-restart.rst

network-services vrf instance protocols bgp neighbor-group address-family long-lived-graceful-restart
-----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Long lived graceful restart enables a BGP router to indicate its ability to preserve its forwarding state during BGP restart. During session initiation, the BGP router informs its peer that it has long lived graceful restart capability. If the BGP session is lost during the restart, the peers mark all the associated routes as stale. However, they do not remove these routes and temporarily continue to use them to make forwarding decisions. Thus, no packets are lost while the BGP process is waiting for convergence of the routing information with the BGP peers.

When the restarting router is back up, the peers wait for the configured amount of time before they delete the stale routes, allowing the router time to converge. When the restarting router sends an end-of-RIB flag notifying its peers that it has converged, or if no end-of-RIB flag is received, but the timer expires, the peers delete any saved stale routes.

Long lived graceful restart is disabled by default. To configure the long-lived-graceful-restart parameters, enable the admin-state for a given afi/safi on a neighbor and a global capability flag for a certain BGP

**Command syntax: long-lived-graceful-restart**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor address-family

**Note**

- Notice the change in prompt.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# long-lived-graceful-restart
    dnRouter(cfg-neighbor-afi-llgr)#


**Removing Configuration**

To revert to the default long lived graceful restart values:
::

    dnRouter(cfg-bgp-neighbor-afi)# no long-lived-graceful-restart

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19      | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/long-lived-graceful-restart/stalepath-time.rst

network-services vrf instance protocols bgp neighbor-group address-family long-lived-graceful-restart stalepath-time units
--------------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Long lived graceful restart enables a BGP router to indicate its ability to preserve its forwarding state during BGP restart. During session initiation, the BGP router informs its peer that it has long lived graceful restart capability. If the BGP session is lost during the restart, the peers mark all the associated routes as stale. However, they do not remove these routes and temporarily continue to use them to make forwarding decisions. Thus, no packets are lost while the BGP process is waiting for convergence of the routing information with the BGP peers.

When the restarting router is back up, the peers wait for the configured amount of time before they delete the stale routes, allowing the router time to converge. When the restarting router sends an end-of-RIB flag notifying its peers that it has converged, or if no end-of-RIB flag is received, but the timer expires, the peers delete any saved stale routes.

To configure the graceful-restart stalepath-time:

**Command syntax: stalepath-time [time] units [units]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family long-lived-graceful-restart

**Parameter table**

+-----------+---------------------------------------------------------------------------------+-------------+---------+
| Parameter | Description                                                                     | Range       | Default |
+===========+=================================================================================+=============+=========+
| time      | 1..16777215 for seconds 1..279620 for minutes 1..4660 for hours 1..194 for days | 1-16777215  | 1       |
+-----------+---------------------------------------------------------------------------------+-------------+---------+
| units     | time resolution                                                                 | | seconds   | hours   |
|           |                                                                                 | | minutes   |         |
|           |                                                                                 | | hours     |         |
|           |                                                                                 | | days      |         |
+-----------+---------------------------------------------------------------------------------+-------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# long-lived-graceful-restart
    dnRouter(cfg-neighbor-afi-llgr)# stalepath-time 400 units seconds


**Removing Configuration**

To revert to the default stalepath-time value:
::

    dnRouter(cfg-neighbor-afi-llgr)# no stalepath-time

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19      | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/maximum-prefix/exceed-action.rst

network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix exceed-action
------------------------------------------------------------------------------------------------------

**Minimum user role:** operator


To instruct BGP what action to take when the maximum allowed number of prefixes has been exceeded.

 - warning only - (Default behavior) maximum-prefix-number exceeded - restart the neighbor session. The session will restart after the restart-interval.
 - restart - maximum-prefix-number exceeded - restart the neighbor session. The session will restart after the restart-interval.

**Command syntax: exceed-action [action]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor-group neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- When the prefix number drops below the maximum prefix- number threshold, a clear message is sent.

**Parameter table**

+-----------+--------------------------------------------------------+------------------+--------------+
| Parameter | Description                                            | Range            | Default      |
+===========+========================================================+==================+==============+
| action    | action to be taken when maximum-prefix-number exceeded | | warning-only   | warning-only |
|           |                                                        | | restart        |              |
+-----------+--------------------------------------------------------+------------------+--------------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)# exceed-action warning-only


**Removing Configuration**

To revert to the default action (warning-only):
::

    dnRouter(cfg-neighbor-afi-maximum-prefix)# no exceed-action

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/maximum-prefix/limit.rst

network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix limit
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

"Specifies the maximum number of IP network prefixes (routes) that can be learned from a specified neighbor or neighbor group."

**Command syntax: limit [maximum-prefix-number]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor-group neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix

**Note**
Neighbors within a neighbor-group derive the neighbor-group configuration or can have a unique setting from the group.

**Parameter table**

+-----------------------+----------------------+--------------+---------+
| Parameter             | Description          | Range        | Default |
+=======================+======================+==============+=========+
| maximum-prefix-number | 0 used for unlimited | 0-4294967295 | 0       |
+-----------------------+----------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)# limit 1000000000


**Removing Configuration**

To revert to default:
::

    dnRouter(cfg-neighbor-afi-maximum-prefix)# no limit

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/maximum-prefix/maximum-prefix.rst

network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix
----------------------------------------------------------------------------------------

**Minimum user role:** operator

By setting the maximum-prefix attribute, you control the number of prefixes that can be received from a neighbor. This is useful when a router starts receiving more routes than its memory can take.

To limit the number of routes that can be learned from the neighbor, peer group, or neighbor in a peer group:

**Command syntax: maximum-prefix**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**
When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)#


**Removing Configuration**

To revert to the default maximum-prefixes:
::

    dnRouter(cfg-bgp-neighbor-afi)# no maximum-prefix

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/maximum-prefix/restart-interval.rst

network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix restart-interval
---------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Defines the restart interval when an exceed-action value is set to 'restart'.

**Command syntax: restart-interval [restart-interval]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor-group neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix

**Note**
When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+------------------+-------------+---------+---------+
| Parameter        | Description | Range   | Default |
+==================+=============+=========+=========+
| restart-interval | minutes     | 1-65535 | \-      |
+------------------+-------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)# restart-interval 100


**Removing Configuration**

To remove the restart interval:
::

    dnRouter(cfg-neighbor-afi-maximum-prefix)# no restart-interval

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/maximum-prefix/threshold.rst

network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix threshold
--------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Specifies the percentage of the value specified by *maximum-prefix-number* that causes a log message to be generated.

**Command syntax: threshold [syslog-threshold]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor-group neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix

**Note**
When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+------------------+-------------+-------+---------+
| Parameter        | Description | Range | Default |
+==================+=============+=======+=========+
| syslog-threshold | percentage  | 1-100 | 100     |
+------------------+-------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)# threshold 75


**Removing Configuration**

To revert to the default maximum-prefixes:
::

    dnRouter(cfg-neighbor-afi-maximum-prefix)# no threshold

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/nexthop_ipv4.rst

network-services vrf instance protocols bgp neighbor-group address-family nexthop
---------------------------------------------------------------------------------

**Minimum user role:** operator

This command sets the next-hop of the advertised route to be the BGP router's address.

To set the advertised route's next-hop value to be the BGP router's address:

**Command syntax: nexthop [ipv4-address]** force [force]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- Changing the configuration will cause the BGP session to restart.

- For flowspec SAFI, imposing a nexthop change might affect the flowspec action rules. By default, the "nexthop" attribute doesn't change for flowspec NLRI in either eBGP or iBGP sessions.

- For eBGP sessions and any BGP MPLS session, the nexthop value is set to "nexthop self" by default.

- For neighbors within a group, the "no" command reverts the neighbor to the group setting.

- The address type must match the address family.

**Parameter table**

+--------------+-----------------------------------------------------------+--------------+----------+
| Parameter    | Description                                               | Range        | Default  |
+==============+===========================================================+==============+==========+
| ipv4-address | set specific ip address to be used as the nexthop address | A.B.C.D      | \-       |
+--------------+-----------------------------------------------------------+--------------+----------+
| force        | apply nexthop setting even when acting as route reflector | | enabled    | disabled |
|              |                                                           | | disabled   |          |
+--------------+-----------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# nexthop 100.70.1.45

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 5000
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 120.92.1.50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv4-unicast
    dnRouter(cfg-group-group-afi)# nexthop 1.1.1.1
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 120.92.1.50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv6-unicast
    dnRouter(cfg-group-group-afi)# nexthop 1:1::1:1
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 0:ffff::120

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 1.2.3.4
    dnRouter(cfg-protocols-bgp-neighbor)# address-family flowspec
    dnRouter(cfg-bgp-neighbor-afi)# nexthop 95.70.1.13


**Removing Configuration**

To remove the nexthop settings:
::

    dnRouter(cfg-group-neighbor-afi)# no nexthop

To revert force to the default state:
::

    dnRouter(cfg-bgp-group-afi)# no nexthop self force

**Command History**

+---------+-----------------------------------------------------------------------------------------------------------------------+
| Release | Modification                                                                                                          |
+=========+=======================================================================================================================+
| 6.0     | Command introduced                                                                                                    |
+---------+-----------------------------------------------------------------------------------------------------------------------+
| 11.0    | Added option to enter a specific IP address as nexthop Added option to configure nexthop for neighbors within a group |
+---------+-----------------------------------------------------------------------------------------------------------------------+
| 16.1    | Added support for multicast SAFI                                                                                      |
+---------+-----------------------------------------------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/nexthop_ipv6.rst

network-services vrf instance protocols bgp neighbor-group address-family nexthop
---------------------------------------------------------------------------------

**Minimum user role:** operator

This command sets the next-hop of the advertised route to be the BGP router's address.

To set the advertised route's next-hop value to be the BGP router's address:

**Command syntax: nexthop [ipv6-address]** force [force]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- Changing the configuration will cause the BGP session to restart.

- For flowspec SAFI, imposing a nexthop change might affect the flowspec action rules. By default, the "nexthop" attribute doesn't change for flowspec NLRI in either eBGP or iBGP sessions.

- For eBGP sessions and any BGP MPLS session, the nexthop value is set to "nexthop self" by default.

- For neighbors within a group, the "no" command reverts the neighbor to the group setting.

- The address type must match the address family.

**Parameter table**

+--------------+-----------------------------------------------------------+--------------+----------+
| Parameter    | Description                                               | Range        | Default  |
+==============+===========================================================+==============+==========+
| ipv6-address | set specific ip address to be used as the nexthop address | X:X::X:X     | \-       |
+--------------+-----------------------------------------------------------+--------------+----------+
| force        | apply nexthop setting even when acting as route reflector | | enabled    | disabled |
|              |                                                           | | disabled   |          |
+--------------+-----------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# nexthop 100.70.1.45

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 5000
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 120.92.1.50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv4-unicast
    dnRouter(cfg-group-group-afi)# nexthop 1.1.1.1
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 120.92.1.50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv6-unicast
    dnRouter(cfg-group-group-afi)# nexthop 1:1::1:1
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 0:ffff::120

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 1.2.3.4
    dnRouter(cfg-protocols-bgp-neighbor)# address-family flowspec
    dnRouter(cfg-bgp-neighbor-afi)# nexthop 95.70.1.13


**Removing Configuration**

To remove the nexthop settings:
::

    dnRouter(cfg-group-neighbor-afi)# no nexthop

To revert force to the default state:
::

    dnRouter(cfg-bgp-group-afi)# no nexthop self force

**Command History**

+---------+-----------------------------------------------------------------------------------------------------------------------+
| Release | Modification                                                                                                          |
+=========+=======================================================================================================================+
| 6.0     | Command introduced                                                                                                    |
+---------+-----------------------------------------------------------------------------------------------------------------------+
| 11.0    | Added option to enter a specific IP address as nexthop Added option to configure nexthop for neighbors within a group |
+---------+-----------------------------------------------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/orf-prefix-list-ipv4.rst

network-services vrf instance protocols bgp neighbor-group address-family orf-prefix-list-ipv4
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

The Prefix-list is sent when the ORF send capability is enabled. To configure the prefix list to be sent to the peer to be used as an outbound-route-filter:

**Command syntax: orf-prefix-list-ipv4 [ipv4-prefix-list]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- The prefix-list type (IPv4 / IPv6) must match the address-family type.

- The prefix-list must use a configured prefix-list from the routing-policy. It can be within the same commit.

- This command is only valid for unicast sub-address families.

- Neighbors within a neighbor-group can use the neighbor-group configuration or a configuration from the group.

**Parameter table**

+------------------+---------------------------------------------------+------------------+---------+
| Parameter        | Description                                       | Range            | Default |
+==================+===================================================+==================+=========+
| ipv4-prefix-list | IPv4 ORF prefix list sent to ORF capable neighbor | | string         | \-      |
|                  |                                                   | | length 1-255   |         |
+------------------+---------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# orf-prefix-list ORF_PL_IPv4
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group GROUP_1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-unicast
    dnRouter(cfg-bgp-group-afi)# orf-prefix-list ORF_PL_IPv4
    dnRouter(cfg-protocols-bgp-group)# neighbor 1.1.1.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# orf-prefix-list ORF_PL_IPv6
    dnRouter(cfg-protocols-bgp-group)# neighbor 2:2::2:2
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# orf-prefix-list ORF_PL_IPv6


**Removing Configuration**

To remove the prefix-list:
::

    dnRouter(cfg-bgp-neighbor-afi)# no orf-prefix-list

::

    dnRouter(cfg-bgp-group-afi)# no orf-prefix-list

::

    dnRouter(cfg-group-neighbor-afi)# no orf-prefix-list

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/orf-prefix-list-ipv6.rst

network-services vrf instance protocols bgp neighbor-group address-family orf-prefix-list-ipv6
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

The Prefix-list is sent when the ORF send capability is enabled. To configure the prefix list to be sent to the peer to be used as an outbound-route-filter:

**Command syntax: orf-prefix-list-ipv6 [ipv6-prefix-list]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- The prefix-list type (IPv4 / IPv6) must match the address-family type.

- The prefix-list must use a configured prefix-list from the routing-policy. It can be within the same commit.

- This command is only valid for unicast sub-address families.

- Neighbors within a neighbor-group can use the neighbor-group configuration or a configuration from the group.

**Parameter table**

+------------------+---------------------------------------------------+------------------+---------+
| Parameter        | Description                                       | Range            | Default |
+==================+===================================================+==================+=========+
| ipv6-prefix-list | IPv4 ORF prefix list sent to ORF capable neighbor | | string         | \-      |
|                  |                                                   | | length 1-255   |         |
+------------------+---------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# orf-prefix-list ORF_PL_IPv4
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group GROUP_1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-unicast
    dnRouter(cfg-bgp-group-afi)# orf-prefix-list ORF_PL_IPv4
    dnRouter(cfg-protocols-bgp-group)# neighbor 1.1.1.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# orf-prefix-list ORF_PL_IPv6
    dnRouter(cfg-protocols-bgp-group)# neighbor 2:2::2:2
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# orf-prefix-list ORF_PL_IPv6


**Removing Configuration**

To remove the prefix-list:
::

    dnRouter(cfg-bgp-neighbor-afi)# no orf-prefix-list

::

    dnRouter(cfg-bgp-group-afi)# no orf-prefix-list

::

    dnRouter(cfg-group-neighbor-afi)# no orf-prefix-list

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/policy-in.rst

network-services vrf instance protocols bgp neighbor-group address-family policy in
-----------------------------------------------------------------------------------

**Minimum user role:** operator

To apply a route map to a neighbor or peer group:

**Command syntax: policy [policy-in]** [, policy-in, policy-in] **in**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- If a policy is configured for a group, you cannot disable it for a neighbor within the group. You must explicitly set a different policy to achieve a different behavior from the group. You may even attach an empty policy.

- Can set multiple policies. In case multiple policies are set, policies are evaluated one after the other according to the user input order

- When setting a new policy, the policy will be appended to the existing attached policies

- To remove a policy, the user must specify the name of the policy to be remvoed

- To remove all policies, the user must specify all attached policy names

- To replace an attached policy, the user will need to first remove and than add a new policy. Can be performed in the same commit. the policy order imposes the functional behavior.

**Parameter table**

+-----------+---------------------------------------+------------------+---------+
| Parameter | Description                           | Range            | Default |
+===========+=======================================+==================+=========+
| policy-in | applies the filter in incoming routes | | string         | \-      |
|           |                                       | | length 1-255   |         |
+-----------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy in
    dnRouter(cfg-protocols-bgp-neighbor)# address-family flowspec
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy in

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# policy MyPolicy in

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# policy GroupPolicy in
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# policy NeighborPolicy in

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy_1,MyPolicy_2 in


**Removing Configuration**

To disable the route map policy:
::

    dnRouter(cfg-bgp-group-afi)# no policy MyPolicy in

::

    dnRouter(cfg-bgp-neighbor-afi)# no policy MyPolicy in

::

    dnRouter(cfg-group-neighbor-afi)# no policy NeighborPolicy in

**Command History**

+---------+----------------------------------------------------------------+
| Release | Modification                                                   |
+=========+================================================================+
| 6.0     | Command introduced                                             |
+---------+----------------------------------------------------------------+
| 11.0    | Added option to configure policy for a neighbor within a group |
+---------+----------------------------------------------------------------+
| 16.1    | Added support for multicast SAFI                               |
+---------+----------------------------------------------------------------+
| 17.2    | Added support for multiple policies attachments                |
+---------+----------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/policy-out.rst

network-services vrf instance protocols bgp neighbor-group address-family policy out
------------------------------------------------------------------------------------

**Minimum user role:** operator

To apply a route map to a neighbor or peer group:

**Command syntax: policy [policy-out]** [, policy-out, policy-out] **out**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- If a policy is configured for a group, you cannot disable it for a neighbor within the group. You must explicitly set a different policy to achieve a different behavior from the group. You may even attach an empty policy.

- Can set multiple policies. In case multiple policies are set, policies are evaluated one after the other according to the user input order

- When setting a new policy, the policy will be appended to the existing attached policies

- To remove a policy, the user must specify the name of the policy to be remvoed

- To remove all policies, the user must specify all attached policy names

- To replace an attached policy, the user will need to first remove and than add a new policy. Can be performed in the same commit. the policy order imposes the functional behavior.

**Parameter table**

+------------+---------------------------------------+------------------+---------+
| Parameter  | Description                           | Range            | Default |
+============+=======================================+==================+=========+
| policy-out | applies the filter in outgoing routes | | string         | \-      |
|            |                                       | | length 1-255   |         |
+------------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy out

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# policy MyPolicy out

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# policy GroupPolicy out
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# policy NeighborPolicy out

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy_1,MyPolicy_2 out


**Removing Configuration**

To disable the route map policy:
::

    dnRouter(cfg-bgp-group-afi)# no policy MyPolicy out

::

    dnRouter(cfg-bgp-neighbor-afi)# no policy MyPolicy out

::

    dnRouter(cfg-group-neighbor-afi)# no policy NeighborPolicy out

**Command History**

+---------+----------------------------------------------------------------+
| Release | Modification                                                   |
+=========+================================================================+
| 6.0     | Command introduced                                             |
+---------+----------------------------------------------------------------+
| 11.0    | Added option to configure policy for a neighbor within a group |
+---------+----------------------------------------------------------------+
| 16.1    | Added support for multicast SAFI                               |
+---------+----------------------------------------------------------------+
| 17.2    | Added support for multiple policies attachments                |
+---------+----------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/prefix-list-ipv4_in.rst

network-services vrf instance protocols bgp neighbor-group address-family prefix-list-ipv4 in
---------------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command filters the route updates for a BGP neighbor or peer group according to IP address and mask length.

**Command syntax: prefix-list-ipv4 [ipv4-prefix-list-in] in**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor address-family

**Parameter table**

+---------------------+---------------------------------------+------------------+---------+
| Parameter           | Description                           | Range            | Default |
+=====================+=======================================+==================+=========+
| ipv4-prefix-list-in | applies the filter in incoming routes | | string         | \-      |
|                     |                                       | | length 1-255   |         |
+---------------------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# prefix-list-ipv4 PL4_IN in

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-vpn
    dnRouter(cfg-bgp-group-afi)# prefix-list-ipv4 PL4_IN in


**Removing Configuration**

To disable filtering:
::

    dnRouter(cfg-bgp-group-afi)# no prefix-list-ipv4 PL_IN in"

::

    dnRouter(cfg-bgp-neighbor-afi)# no prefix-list-ipv4 PL_IN in"

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/prefix-list-ipv4_out.rst

network-services vrf instance protocols bgp neighbor-group address-family prefix-list-ipv4 out
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command filters the route updates for a BGP neighbor or peer group according to IP address and mask length.

**Command syntax: prefix-list-ipv4 [ipv4-prefix-list-out] out**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor address-family

**Parameter table**

+----------------------+---------------------------------------+------------------+---------+
| Parameter            | Description                           | Range            | Default |
+======================+=======================================+==================+=========+
| ipv4-prefix-list-out | applies the filter in outgoing routes | | string         | \-      |
|                      |                                       | | length 1-255   |         |
+----------------------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# prefix-list-ipv4 PL4_OUT out

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-vpn
    dnRouter(cfg-bgp-group-afi)# prefix-list PL4_OUT out


**Removing Configuration**

To disable filtering:
::

    dnRouter(cfg-bgp-group-afi)# no prefix-list-ipv4 PL_OUT out"

::

    dnRouter(cfg-bgp-neighbor-afi)# no prefix-list-ipv4 PL_OUT out"

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/prefix-list-ipv6_in.rst

network-services vrf instance protocols bgp neighbor-group address-family prefix-list-ipv6 in
---------------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command filters the route updates for a BGP neighbor or peer group according to IP address and mask length.

**Command syntax: prefix-list-ipv6 [ipv6-prefix-list-in] in**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor address-family

**Parameter table**

+---------------------+---------------------------------------+------------------+---------+
| Parameter           | Description                           | Range            | Default |
+=====================+=======================================+==================+=========+
| ipv6-prefix-list-in | applies the filter in incoming routes | | string         | \-      |
|                     |                                       | | length 1-255   |         |
+---------------------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-bgp-neighbor-afi)# prefix-list-ipv6 PL6_IN in

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# prefix-list-ipv6 PL6_IN in


**Removing Configuration**

To disable filtering:
::

    dnRouter(cfg-bgp-group-afi)# no prefix-list-ipv6 PL_IN in"

::

    dnRouter(cfg-bgp-neighbor-afi)# no prefix-list-ipv6 PL_IN in"

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/prefix-list-ipv6_out.rst

network-services vrf instance protocols bgp neighbor-group address-family prefix-list-ipv6 out
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command filters the route updates for a BGP neighbor or peer group according to IP address and mask length.

**Command syntax: prefix-list-ipv6 [ipv6-prefix-list-out] out**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor address-family

**Parameter table**

+----------------------+---------------------------------------+------------------+---------+
| Parameter            | Description                           | Range            | Default |
+======================+=======================================+==================+=========+
| ipv6-prefix-list-out | applies the filter in outgoing routes | | string         | \-      |
|                      |                                       | | length 1-255   |         |
+----------------------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-bgp-neighbor-afi)# prefix-list-ipv6 PL6_OUT out

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# prefix-list-ipv6 PL6_OUT out


**Removing Configuration**

To disable filtering:
::

    dnRouter(cfg-bgp-group-afi)# no prefix-list-ipv6 PL_OUT out"

::

    dnRouter(cfg-bgp-neighbor-afi)# no prefix-list-ipv6 PL_OUT out"

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/remove-private-as.rst

network-services vrf instance protocols bgp neighbor-group address-family remove-private-as
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

To remove private AS numbers from the AS path advertised to the neighbor or peer group:

**Command syntax: remove-private-as** all

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor address-family

**Parameter table**

+-----------+--------------------------------------------------------------------------+---------+---------+
| Parameter | Description                                                              | Range   | Default |
+===========+==========================================================================+=========+=========+
| all       | remove all private as-numbers regardless if path contains public numbers | Boolean | False   |
+-----------+--------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# remove-private-as
    dnRouter(cfg-protocols-bgp-neighbor)# address-family flowspec
    dnRouter(cfg-bgp-neighbor-afi)# remove-private-as

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-bgp-neighbor-afi)# remove-private-as all

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# remove-private-as


**Removing Configuration**

To disable this option:
::

    dnRouter(cfg-bgp-neighbor-afi)# no remove-private-as all

::

    dnRouter(cfg-bgp-group-afi)# no remove-private-as

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/send-community.rst

network-services vrf instance protocols bgp neighbor-group address-family send-community
----------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command ensures that the community attribute is sent in updates to the specified neighbor or group.

**Command syntax: send-community** community-type [community-type]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor address-family

**Note**

- The default behavior of the system is to not send the community attribute.

**Parameter table**

+----------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter      | Description                                                                      | Range        | Default |
+================+==================================================================================+==============+=========+
| community-type | both - Sends both standard and extended attributes extended - Sends extended     | | both       | both    |
|                | attributes standard - Sends standard attributes                                  | | extended   |         |
|                |                                                                                  | | standard   |         |
+----------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# send-community
    dnRouter(cfg-bgp-neighbor-afi)# send-community community-type standard

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# send-community community-type both

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-flowspec
    dnRouter(cfg-bgp-group-afi)# send-community community-type both


**Removing Configuration**

To disable this option:
::

    dnRouter(cfg-bgp-group-afi)# no send-community

::

    dnRouter(cfg-bgp-neighbor-afi)# no send-community community-type standard

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/send-large-community.rst

network-services vrf instance protocols bgp neighbor-group address-family send-large-community
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command ensures that the large community attribute is sent in updates to the specified neighbor or group.

**Command syntax: send-large-community [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor address-family

**Note**
The default behavior of the system is to not send the large-community attribute.

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                                      | Range        | Default  |
+=============+==================================================================================+==============+==========+
| admin-state | Enables sending the large community attribute in updates to the specified BGP    | | enabled    | disabled |
|             | neighbor                                                                         | | disabled   |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# send-large-community enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# send-large-community disabled


**Removing Configuration**

To disable this option:
::

    dnRouter(cfg-bgp-group-afi)# no send-large-community

::

    dnRouter(cfg-bgp-neighbor-afi)# no send-large-community

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 15.1    | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/soft-reconfiguration.rst

network-services vrf instance protocols bgp neighbor-group address-family soft-reconfiguration inbound
------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set address-family prefixes to be saved in the adj-RIB-in table to support soft rest:

**Command syntax: soft-reconfiguration inbound**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor address-family

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# soft-reconfiguration inbound
    dnRouter(cfg-protocols-bgp-neighbor)# address-family flowspec
    dnRouter(cfg-bgp-neighbor-afi)# soft-reconfiguration inbound

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-vpn
    dnRouter(cfg-bgp-group-afi)# soft-reconfiguration inbound


**Removing Configuration**

To stop the routes from being saved in the adj-RIB-in table for the neighbor address-family:
::

    dnRouter(cfg-bgp-group-afi)# no soft-reconfiguration inbound

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 10.0    | Command not supported            |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/address-family/soo.rst

network-services vrf instance protocols bgp neighbor-group address-family soo
-----------------------------------------------------------------------------

**Minimum user role:** operator

BGP site of origin (SoO) is a tag that is appended on BGP updates to allow to mark a specific peer as belonging to a particular site. By tagging the route, BGP will check if the peer's site of origin is listed in the community field. If it is then the route will be filtered. If not, then the route will be advertised as normal.

To set the Site-Of-Orgin value for a BGP neighbor or neighbor group:

**Command syntax: soo [site-of-origin]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- Neighbors within a neighbor-group can use the neighbor-group configuration or use a unique setting.

**Parameter table**

+----------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter      | Description                                                                      | Range | Default |
+================+==================================================================================+=======+=========+
| site-of-origin | Set the Site-Of-Origin value for a BGP neighbor or peer group valid only for     | \-    | \-      |
|                | non-default vrf                                                                  |       |         |
+----------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# soo 45000:65
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# soo 45000:65
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# 50000:65
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# soo 45000:65


**Removing Configuration**

To remove the SoO value for a BGP neighbor:
::

    dnRouter(cfg-bgp-neighbor-afi)# no soo 45000:65

::

    dnRouter(cfg-bgp-group-afi)# no soo 45000:65

::

    dnRouter(cfg-group-neighbor-afi)# no soo 45000:65

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/admin-state.rst

network-services vrf instance protocols bgp neighbor-group admin-state
----------------------------------------------------------------------

**Minimum user role:** operator

Use this command to administratively start or shut down the session with the BGP neighbor, BGP neighbors in a group or a specific BGP neighbor within a group (this will override the group setting for this neighbor):

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter   | Description                                                                      | Range        | Default |
+=============+==================================================================================+==============+=========+
| admin-state | Causes a device to shut down the session administratively with its BGP neighbor. | | enabled    | enabled |
|             |                                                                                  | | disabled   |         |
+-------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# admin-state disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# admin-state disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# admin-state disabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# admin-state enabled


**Removing Configuration**

To revert the admin-state to its default value:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/adv-interval.rst

network-services vrf instance protocols bgp neighbor-group advertisement-interval
---------------------------------------------------------------------------------

**Minimum user role:** operator

To set the interval between BGP routing updates:

**Command syntax: advertisement-interval [advertisement-interval]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor

**Parameter table**

+------------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter              | Description                                                                      | Range | Default |
+========================+==================================================================================+=======+=========+
| advertisement-interval | Set the interval between BGP routing updates. The default advertisement-interval | 0-600 | \-      |
|                        | between ibgp and ebgp sessions default for ibgp = 0 default for ebgp = 30        |       |         |
+------------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# remote-as 5000
    dnRouter(cfg-protocols-bgp-neighbor)# advertisement-interval 20
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# remote-as 5000
    dnRouter(cfg-protocols-bgp-neighbor)# advertisement-interval 90
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 7180
    dnRouter(cfg-protocols-bgp-group)# advertisement-interval 2


**Removing Configuration**

To revert to the default interval:
::

    dnRouter(cfg-protocols-bgp-group)# no advertisement-interval

::

    dnRouter(cfg-protocols-bgp-neighbor)# no advertisement-interval

**Command History**

+---------+--------------------------------------------------+
| Release | Modification                                     |
+=========+==================================================+
| 6.0     | Command introduced                               |
+---------+--------------------------------------------------+
| 9.0     | Updated default interval for iBGP neighbors to 0 |
+---------+--------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/authentication.rst

network-services vrf instance protocols bgp neighbor-group authentication md5 password
--------------------------------------------------------------------------------------

**Minimum user role:** operator

To set a password for authenticating the neighbor, peer group neighbors, or the neighbor in a peer group:

**Command syntax: authentication md5 password [secret]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- Changing the configuration will cause the BGP session to restart.

- If you do not specify a password, enter the password of the neighbor BGP router in clear text. The password is then encrypted and from then on will be displayed as encrypted. You can copy the encrypted password and use it as the enc-password. When typing a clear password, the password is not displayed in the CLI terminal.

- The clear text password provided in the CLI is hashed with the md5 hash. As the md5 hash is not strong enough and can be broken, the FERNET algorithm is applied to the md5 hash before it is stored in the DNOS database.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+-------+---------+
| Parameter | Description                                                                      | Range | Default |
+===========+==================================================================================+=======+=========+
| secret    | set a password for authentication encrypted secret password string for the       | \-    | \-      |
|           | neighbor bgp. if the user enters a clear-text password, the password is then     |       |         |
|           | encrypted by the system and saved in secret argument. if user specified 'secret' |       |         |
|           | save string in secret                                                            |       |         |
+-----------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# authentication md5 password
    Enter password
    Enter password for verifications

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.2.2
    dnRouter(cfg-protocols-bgp-neighbor)# authentication md5 password enc-!U2FsdGVkX1+

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# authentication md5 password
    Enter password
    Enter password for verification

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# authentication md5 password
    Enter password
    Enter password for verification
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# authentication md5 password enc-!U2FsdGVkX1+qG


**Removing Configuration**

To remove the password configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no authentication md5

::

    dnRouter(cfg-protocols-bgp-group)# no authentication md5

::

    dnRouter(cfg-bgp-group-neighbor)# no authentication md5

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/bfd/admin-state.rst

network-services vrf instance protocols bgp neighbor-group bfd admin-state
--------------------------------------------------------------------------

**Minimum user role:** operator

Enable BFD session for BGP session protection and enter BFD configuration level to configure BFD session settings.

To change the BFD administrative state for a specific BGP neighbor:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor bfd
- network-services vrf instance protocols bgp neighbor-group neighbor bfd

**Note**

- In the event that there are multiple BFD clients registered to the same BFD session, a single BFD session is established with the strictest session parameters between all clients.

**Parameter table**

+-------------+--------------------------------------+--------------+----------+
| Parameter   | Description                          | Range        | Default  |
+=============+======================================+==============+==========+
| admin-state | set whether bfd protection is in use | | enabled    | disabled |
|             |                                      | | disabled   |          |
+-------------+--------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# admin-state enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# admin-state enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# admin-state enabled
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# admin-state enabled


**Removing Configuration**

To revert the admin-state to its default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no admin-state

::

    dnRouter(cfg-bgp-group-bfd)# no admin-state

::

    dnRouter(cfg-bgp-neighbor-bfd)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/bfd/bfd-type.rst

network-services vrf instance protocols bgp neighbor-group bfd bfd-type
-----------------------------------------------------------------------

**Minimum user role:** operator

Define the requested BFD session type, Single-hop or Multi-hop. By default session type is according to BGP peering type.

To set requested session type:

**Command syntax: bfd-type [session-type]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor bfd
- network-services vrf instance protocols bgp neighbor-group neighbor bfd

**Note**

- For multi-hop session type , update-source must be configured for neighbor

- For single-hop session type , bgp peering must be directly over a connected interface

- Reconfig of bfd-type will result in a new BFD session

**Parameter table**

+--------------+----------------------------------------------------------------------------------+----------------+-----------+
| Parameter    | Description                                                                      | Range          | Default   |
+==============+==================================================================================+================+===========+
| session-type | Define the requested BFD session type, Single-hop or Multi-hop. By default       | | automatic    | automatic |
|              | session type is according to BGP peering type                                    | | single-hop   |           |
|              |                                                                                  | | multi-hop    |           |
+--------------+----------------------------------------------------------------------------------+----------------+-----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# bfd-type single-hop

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# bfd-type enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# bfd-type multi-hop
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# bfd-type automatic


**Removing Configuration**

To revert the bfd-type to its default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no bfd-type

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/bfd/bfd.rst

network-services vrf instance protocols bgp neighbor-group bfd
--------------------------------------------------------------

**Minimum user role:** operator

The command allows enabling BFD for the protection of a session between a single BGP neighbor or neighbor group and allows you to configure the BFD session settings.
The BFD session type (single-hop or multi-hop) is decided according to the BGP session type. The BFD source address is the BGP source address and the BFD destination address is the BGP peer address.

When a BFD session is down, the BGP session will close and all routes from the neighbor will be withdrawn.

The BFD failure detection time is computed out of the negotiated received interval and the remote multiplier configurations.

Detection-time = negotiated-received-interval X received multiplier.
This is the maximum amount of time that can elapse without receiving a BFD control packet before the session is declared down.

BFD neighbor can signal session state down and upon receipt, the local BFD session will immediately switch to DOWN state.

To enable or disable the BFD protocol with a single neighbor or a neighbor group:

**Command syntax: bfd**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)#


**Removing Configuration**

To revert the BFD protocol to the default state:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no bfd 

::

    dnRouter(cfg-protocols-bgp-group)# no bfd

::

    dnRouter(cfg-bgp-group-neighbor)# no bfd

**Command History**

+---------+----------------------+
| Release | Modification         |
+=========+======================+
| 6.0     | Command introduced   |
+---------+----------------------+
| 11.4    | Command reintroduced |
+---------+----------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/bfd/min-rx.rst

network-services vrf instance protocols bgp neighbor-group bfd min-rx
---------------------------------------------------------------------

**Minimum user role:** operator

Set the desired minimum receive interval for the BFD session for a single neighbor or neighbor group:

**Command syntax: min-rx [min-rx]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor bfd
- network-services vrf instance protocols bgp neighbor-group neighbor bfd

**Note**

- This could be invoked inside a neighbor-group or as a single neighbor.

- Neighbors within a neighbor-group derive the neighbor-group configuration or can have a unique setting from the group.

- For neighbors within a neighbor-group, the default value is the group's parameter value.

**Parameter table**

+-----------+------------------------------------------------------+--------+---------+
| Parameter | Description                                          | Range  | Default |
+===========+======================================================+========+=========+
| min-rx    | set desired minimum receive interval for BFD session | 5-1700 | 300     |
+-----------+------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# min-rx 400
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# min-rx 400
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# min-rx 400
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# min-rx 300


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no min-rx

::

    dnRouter(cfg-bgp-group-bfd)# no min-rx

::

    dnRouter(cfg-group-neighbor-bfd)# no min-rx

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 11.4    | Command introduced               |
+---------+----------------------------------+
| 15.1    | Added support for 5msec interval |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/bfd/min-tx.rst

network-services vrf instance protocols bgp neighbor-group bfd min-tx
---------------------------------------------------------------------

**Minimum user role:** operator

Set the desired minimum transmit interval for the BFD session for a single neighbor or neighbor group:

**Command syntax: min-tx [min-tx]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor bfd
- network-services vrf instance protocols bgp neighbor-group neighbor bfd

**Note**

- This could be invoked inside a neighbor-group or as a single neighbor.

- Neighbors within a neighbor-group derive the neighbor-group configuration or can have a unique setting from the group.

- For neighbors within a neighbor-group, the default value is the group's parameter value.

- Due to hardware limitation, the maximum supported transmit rate is 1700 msec. A negotiated transmit interval higher than 1700 msec will result in an actual transmit rate of 1700 msec.

**Parameter table**

+-----------+-------------------------------------------------------+--------+---------+
| Parameter | Description                                           | Range  | Default |
+===========+=======================================================+========+=========+
| min-tx    | set desired minimum transmit interval for BFD session | 5-1700 | 300     |
+-----------+-------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# min-tx 400
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# min-tx 400
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# min-tx 400
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# min-tx 300


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no min-tx

::

    dnRouter(cfg-bgp-group-bfd)# no min-tx

::

    dnRouter(cfg-group-neighbor-bfd)# no min-tx

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 11.4    | Command introduced               |
+---------+----------------------------------+
| 15.1    | Added support for 5msec interval |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/bfd/multiplier.rst

network-services vrf instance protocols bgp neighbor-group bfd multiplier
-------------------------------------------------------------------------

**Minimum user role:** operator

Set the local BFD multiplier for a single neighbor or neighbor group:

**Command syntax: multiplier [multiplier]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor bfd
- network-services vrf instance protocols bgp neighbor-group neighbor bfd

**Note**

- This could be invoked inside a neighbor-group or as a single neighbor.

- Neighbors within a neighbor-group derive the neighbor-group configuration or can have a unique setting from the group.

- For neighbors within a neighbor-group, the default value is the group's parameter value.

**Parameter table**

+------------+--------------------------+-------+---------+
| Parameter  | Description              | Range | Default |
+============+==========================+=======+=========+
| multiplier | set local BFD multiplier | 2-16  | 3       |
+------------+--------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# multiplier 2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# multiplier 2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# multiplier 2
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# multiplier 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no multiplier

::

    dnRouter(cfg-bgp-group-bfd)# no multiplier

::

    dnRouter(cfg-group-neighbor-bfd)# no multiplier

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/connected-check.rst

network-services vrf instance protocols bgp neighbor-group connected-check
--------------------------------------------------------------------------

**Minimum user role:** operator

Typically in eBGP peering, a check is done to confirm that the neighbor is listed in the routing table as being directly connected. eBGP peering will not be attempted with a neighbor that is not directly connected. When the loopback interface is used for peering, then the IP address of the neighbor will not be listed as being directly connected and so peering will not be possible.

The following command instructs the BGP router whether or not to disable the connection verification check for eBGP peering sessions that are directly connected but are configured on a loopback interface or with a non-directly connected IP address.

**Command syntax: connected-check [connected-check]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- The option to disable the check is required only when the neighbor ebgp-multihop command is configured with a TTL value of 1. See "bgp neighbor ebgp-multihop".

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter       | Description                                                                      | Range        | Default |
+=================+==================================================================================+==============+=========+
| connected-check | disable the connection verification process for eBGP peering sessions that are   | | enabled    | enabled |
|                 | reachable by a single hop but are configured on a loopback interface or          | | disabled   |         |
|                 | otherwise configured with a non-directly connected IP address                    |              |         |
+-----------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# connected-check disabled
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# connected-check disabled

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# connected-check disabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# connected-check enabled


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-protocols-bgp-group)# no connected-check

::

    dnRouter(cfg-protocols-bgp-neighbor)# no connected-check

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/description.rst

network-services vrf instance protocols bgp neighbor-group description
----------------------------------------------------------------------

**Minimum user role:** operator

To set a description for the BGP neighbor, BGP peer group, or BGP neighbor within a peer group:

**Command syntax: description [description]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+-------------+--------------------------+------------------+---------+
| Parameter   | Description              | Range            | Default |
+=============+==========================+==================+=========+
| description | a neighbors' description | | string         | \-      |
|             |                          | | length 1-255   |         |
+-------------+--------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# description my-description

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# description my-description

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# description my-description

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# description my-unique-description


**Removing Configuration**

To remove the description:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no description

::

    dnRouter(cfg-protocols-bgp-group)# no description

::

    dnRouter(cfg-bgp-group-neighbor)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/ebgp-multihop.rst

network-services vrf instance protocols bgp neighbor-group ebgp-multihop
------------------------------------------------------------------------

**Minimum user role:** operator

To configure a maximum number of hops to an eBGP neighbor, to an eBGP peer group, or to a neighbor within a peer group:

**Command syntax: ebgp-multihop [ebgp-multihop]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- If you set a value greater than 1, the neighbor will always be considered as an indirectly connected neighbor, regardless of the actual reachability.

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+---------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter     | Description                                                                      | Range | Default |
+===============+==================================================================================+=======+=========+
| ebgp-multihop | set eBGP neighbors that are not on directly connected networks and sets an       | 1-255 | 1       |
|               | optional maximum hop count                                                       |       |         |
+---------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# ebgp-multihop

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# ebgp-multihop 20

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# ebgp-multihop 20

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# ebgp-multihop 16


**Removing Configuration**

To revert to the default configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no ebgp-multihop

::

    dnRouter(cfg-protocols-bgp-group)# no ebgp-multihop

::

    dnRouter(cfg-bgp-group-neighbor)# no ebgp-multihop

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/graceful-restart.rst

network-services vrf instance protocols bgp neighbor-group graceful-restart
---------------------------------------------------------------------------

**Minimum user role:** operator

To configure the BGP graceful restart capability for a specific neighbor, a peer group, or for a neighbor in a peer group:

**Command syntax: graceful-restart [graceful-restart-admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- When bgp graceful-restart is disabled, no graceful-restart is done regardless of the bgp neighbor graceful-restart state.

- Disabled: disables graceful-restart for the neighbor.

**Parameter table**

+------------------------------+------------------------------------------+-----------------+---------+
| Parameter                    | Description                              | Range           | Default |
+==============================+==========================================+=================+=========+
| graceful-restart-admin-state | global graceful-restart capability state | | enabled       | enabled |
|                              |                                          | | disabled      |         |
|                              |                                          | | helper-only   |         |
+------------------------------+------------------------------------------+-----------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# graceful-restart enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001:3::65
    dnRouter(cfg-protocols-bgp-neighbor)# graceful-restart helper-only

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001:3::65
    dnRouter(cfg-protocols-bgp-neighbor)# graceful-restart disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# graceful-restart enabled
    dnRouter(cfg-protocols-bgp-group)# graceful-restart helper-only
    dnRouter(cfg-protocols-bgp-group)# graceful-restart disabled


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no graceful-restart

::

    dnRouter(cfg-protocols-bgp-group)# no graceful-restart

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/local-as_type.rst

network-services vrf instance protocols bgp neighbor-group local-as
-------------------------------------------------------------------

**Minimum user role:** operator

If, for whatever reason, you need to change the AS number of your network, you will need to reconfigure the AS number on all the BGP peers. By specifying an alternate AS for this BGP process when interacting with the specified peer, you allow the peer to appear to simultaneously belong to both the former AS and the new AS, without changing the peering arrangements.

To configure a local AS number for the neighbor:

**Command syntax: local-as [local-as-number]** type [as-path-prepend-type]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor

**Note**

- This command is relevant to BGP peers only.

- The configuration will reset the BGP session.

- The local-as-number must be different from the router AS.

- When changing the local-as-number, the as-path-prepend-type will return to the default value.

- When the local-as-number is identical to the neighbor AS, you cannot configure the as-path-prepend-type

**Parameter table**

+----------------------+----------------------------------------------------------------------------------+---------------------------+---------+
| Parameter            | Description                                                                      | Range                     | Default |
+======================+==================================================================================+===========================+=========+
| local-as-number      | as-number for peer session, must be different from local-AS and peer-AS          | 1-4294967295              | \-      |
+----------------------+----------------------------------------------------------------------------------+---------------------------+---------+
| as-path-prepend-type | prepend type for as-path when adding local-as perpend - default config. prepend  | | prepend                 | prepend |
|                      | the local-as as well as the bgp as-n no-perpend - the supplied local-as is not   | | no-prepend              |         |
|                      | prepended to the received as-path no-prepend-replace-as - only the supplied      | | no-prepend-replace-as   |         |
|                      | local-as is prepended to the as-path when transmitting local-route updates to    |                           |         |
|                      | this peer                                                                        |                           |         |
+----------------------+----------------------------------------------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# local-as 1000

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# local-as 1000 type no-prepend

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# local-as 1000 type no-prepend-replace-as

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# remote-as 8000
    dnRouter(cfg-protocols-bgp-neighbor)# local-as 8000

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65001
    dnRouter(cfg-protocols-bgp-group)# local-as 65001


**Removing Configuration**

To delete the local AS configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no local-as

::

    dnRouter(cfg-protocols-bgp-group)# no local-as

**Command History**

+---------+---------------------------------+
| Release | Modification                    |
+=========+=================================+
| 6.0     | Command introduced              |
+---------+---------------------------------+
| 11.0    | Removed "type" from the syntax. |
+---------+---------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/min-hold-time.rst

network-services vrf instance protocols bgp neighbor-group minimum-hold-time
----------------------------------------------------------------------------

**Minimum user role:** operator

To adjust the threshold for the minimum-hold-time:

**Command syntax: minimum-hold-time [minimum-hold-time]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor

**Note**

- The value of the set minimum-hold-time must be less or equal to the hold-time set value.

**Parameter table**

+-------------------+-------------------+---------+---------+
| Parameter         | Description       | Range   | Default |
+===================+===================+=========+=========+
| minimum-hold-time | minimum-hold-time | 3-65535 | 3       |
+-------------------+-------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# minimum-hold-time 7

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# minimum-hold-time 11


**Removing Configuration**

To revert minimum-hold-time value to their default values:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no minimum-hold-time

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor-group.rst

network-services vrf instance protocols bgp neighbor-group
----------------------------------------------------------

**Minimum user role:** operator

Groups allow you to share configuration among the group members. Some neighbor configuration may override the group configuration.

Once the neighbor group is created, assign neighbors to the group. See \"bgp neighbor\". To override the group configuration for a neighbor, configure the neighbor in the group.

To create a neighbor group:

**Command syntax: neighbor-group [peer-group]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**

- Notice the change in prompt.

**Parameter table**

+------------+------------------------+------------------+---------+
| Parameter  | Description            | Range            | Default |
+============+========================+==================+=========+
| peer-group | peer-group unique name | | string         | \-      |
|            |                        | | length 1-255   |         |
+------------+------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group IBGP:pe2core
    dnRouter(cfg-protocols-bgp-group)#


**Removing Configuration**

To delete a BGP group:
::

    dnRouter(cfg-protocols-bgp)# no neighbor-group IBGP:pe2core

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/address-family.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family
----------------------------------------------------------------------------------

**Minimum user role:** operator

The address-family applies to a neighbor, neighbor-group, and a neighbor within a neighbor-group. A neighbor within a neighbor-group inherits all address-families configured for the neighbor-group (a neighbor-group must be configured with at least one address-family, regardless if it has neighbors within it. To configure an address-family to be supported by BGP for the neighbor:

**Command syntax: address-family [neighbor-address-family]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Note**

- Changing the configuration will cause the BGP session to restart.

- When FlowSpec SAFI is applied, the received FlowSpec rules are imposed on all FlowSpec enabled interfaces.

- Notice the change in prompt.

- When using OSPFv3 or IPv6-based BGP peering within a routing instance, you must explicitly configure a router ID (router-id) for that specific instance. The main routing instance's router ID is not inherited by other instances. Even if only IPv6 protocols are used, a 32-bit router ID is still required, as IPv6 routing protocols rely on it for establishing adjacencies. The router ID must be a non-zero 32-bit (4-octet) unsigned integer. While it's common to use an IPv4 address as the router ID, this is not mandatory - it doesn’t need to be a valid or routable address, just a unique 32-bit value within the routing domain. Failing to configure a router ID in an IPv6 OSPF or BGP instance will result in the protocol defaulting to 0.0.0.0, which is invalid. This will prevent adjacency formation and BGP session establishment.

**Parameter table**

+-------------------------+---------------+--------------------------+---------+
| Parameter               | Description   | Range                    | Default |
+=========================+===============+==========================+=========+
| neighbor-address-family | afi-safi type | | ipv4-unicast           | \-      |
|                         |               | | ipv6-unicast           |         |
|                         |               | | ipv4-labeled-unicast   |         |
|                         |               | | ipv6-labeled-unicast   |         |
|                         |               | | ipv4-vpn               |         |
|                         |               | | ipv6-vpn               |         |
|                         |               | | link-state             |         |
|                         |               | | ipv4-flowspec          |         |
|                         |               | | ipv6-flowspec          |         |
|                         |               | | ipv4-rt-constrains     |         |
|                         |               | | ipv4-multicast         |         |
|                         |               | | l2vpn-evpn             |         |
|                         |               | | l2vpn-vpls             |         |
+-------------------------+---------------+--------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family link-state
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family link-state
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-flowspec
    dnRouter(cfg-group-neighbor-afi)# exit
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv6-flowspec
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group FLOWSPEC_V4
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-flowspec
    dnRouter(cfg-group-neighbor-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-flowspec
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-rt-constrains
    dnRouter(cfg-bgp-neighbor-afi)#


**Removing Configuration**

To remove the address-family configuration:
::

    dnRouter(cfg-protocols-bgp-group)# no address-family ipv6-unicast

::

    dnRouter(cfg-protocols-bgp-neighbor)# no address-family ipv4-unicast

::

    dnRouter(cfg-bgp-group-neighbor)# no address-family ipv4-flowspec

**Command History**

+---------+-------------------------------------------------------------------------------------------------------------------+
| Release | Modification                                                                                                      |
+=========+===================================================================================================================+
| 6.0     | Command introduced                                                                                                |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 10.0    | Added support for link-state AFI                                                                                  |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 13.0    | Added support for FlowSpec SAFI                                                                                   |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 16.1    | Added support for IPv4 Route Target Constrain SAFI                                                                |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 16.1    | Added support for IPv4 Multicast SAFI. The command is now supported also under the network-services/vrf hierarchy |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 17.2    | Added support for l2vpn-evpn in the range                                                                         |
+---------+-------------------------------------------------------------------------------------------------------------------+
| TBD     | Added ipv4/6-labeled-unicast as separate safi                                                                     |
+---------+-------------------------------------------------------------------------------------------------------------------+
| TBD     | Added support for l2vpn-vpls in the range                                                                         |
+---------+-------------------------------------------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/allow-as-in.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family allow-as-in
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command instructs the BGP router whether or not to disable the AS PATH check function for routes learned from the specific neighbor, so as not to reject routes that contain the recipient's AS number.

**Command syntax: allow-as-in [admin-state]** duplicate [as-duplicate-number]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command is applicable to eBGP and iBGP neighbors.

**Parameter table**

+---------------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter           | Description                                                                      | Range        | Default  |
+=====================+==================================================================================+==============+==========+
| admin-state         | enable this configuration                                                        | | enabled    | disabled |
|                     |                                                                                  | | disabled   |          |
+---------------------+----------------------------------------------------------------------------------+--------------+----------+
| as-duplicate-number | Specifies the number of times that the AS path of a received route may contain   | 1-10         | 1        |
|                     | the recipient BGP speaker's AS number and still be accepted                      |              |          |
+---------------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# allow-as-in enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-vpn
    dnRouter(cfg-protocols-bgp-neighbor)# allow-as-in enabled duplicate 3

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# allow-as-in enabled duplicate 10

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# allow-as-in disabled duplicate 10
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# allow-as-in enabled duplicate 2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# allow-as-in enabled duplicate 10
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# allow-as-in disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.3
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-flowspec
    dnRouter(cfg-bgp-neighbor-afi)# allow-as-in enabled


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-bgp-neighbor-afi)# no allow-as-in duplicate

::

    dnRouter(cfg-bgp-group-afi)# no allow-as-in

::

    dnRouter(cfg-group-neighbor-afi)# no allow-as-in

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/as-loop-check.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family as-loop-check
------------------------------------------------------------------------------------------------

**Minimum user role:** operator

When BGP updates travel through different Autonomous Systems (AS), each eBGP router prepends its AS number to the AS PATH attribute of the BGP update message. If a router receives an update that includes its own AS number in the AS PATH attribute, it will discard it by default to prevent loops. However, In some cases, you may want to allow such updates.

**Command syntax: as-loop-check [as-loop-check]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- allow-as-in must be enabled on the receiving end of the BGP update, otherwise it will drop any update that contains its own AS number. See "bgp neighbor address-family allow-as-in".

- This command applies only to eBGP neighbors.

- If both as-loop-check and as-override are enabled for the same neighbor, as-loop-check will be ignored as the neighbor AS is expected to be replaced.

**Parameter table**

+---------------+---------------------------------------------------------------------------+--------------+---------+
| Parameter     | Description                                                               | Range        | Default |
+===============+===========================================================================+==============+=========+
| as-loop-check | do not advertise route if neighbor as number is part of the route as-path | | enabled    | \-      |
|               |                                                                           | | disabled   |         |
+---------------+---------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# as-loop-check disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# as-loop-check disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# as-loop-check disabled
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# as-loop-check enabled


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-bgp-group-afi)# no as-loop-check

::

    dnRouter(cfg-bgp-neighbor-afi)# no as-loop-check

::

    dnRouter(cfg-group-neighbor-afi)# no as-loop-check

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 11.0    | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/capability_orf.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family capability orf
-------------------------------------------------------------------------------------------------

**Minimum user role:** operator

This command instructs the BGP router whether or not to establish a peering session with a neighbor that does not support capability negotiation, neighbors that are members of a peer group, or with a neighbor in a peer group. To configure this option:

**Command syntax: capability orf [capability-orf]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command cannot be enabled with the strict-capability-match configuration. See "bgp neighbor strict-capability-match"

**Parameter table**

+----------------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter      | Description                                                                      | Range            | Default |
+================+==================================================================================+==================+=========+
| capability-orf | Advertises outbound route filter (ORF) capabilities to peer routers enabled -    | | enabled        | \-      |
|                | enables the ORF prefix list capability in both receive and send mode             | | disabled       |         |
|                | receive-only - enables the ORF prefix list capability in receive mode only       | | send-only      |         |
|                | send-only - enables the ORF prefix list capability in send mode only disabled -  | | receive-only   |         |
|                | disables ORF capability                                                          |                  |         |
+----------------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# override-capability enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# override-capability enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# override-capability enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# override-capability disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# strict-capability-match enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# strict-capability-match disabled
    dnRouter(cfg-bgp-group-neighbor)# override-capability enabled


**Removing Configuration**

To remove this configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no override-capability 

::

    dnRouter(cfg-protocols-bgp-group)# no override-capability

::

    dnRouter(cfg-bgp-group-neighbor)# no override-capability

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/dampening.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family dampening
--------------------------------------------------------------------------------------------

**Minimum user role:** operator

To instruct the router whether or not to enable route flap dampening suppression from neighbor, peer group or a neighbor in a peer group:

**Command syntax: dampening [dampening]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command is only relevant if global address-family dampening is enabled. See "bgp address-family dampening"

**Parameter table**

+-----------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter | Description                                                                      | Range        | Default |
+===========+==================================================================================+==============+=========+
| dampening | route flap dampening supersession from neighbor, thus disables the global        | | enabled    | \-      |
|           | dampening configuration for neighbor or group                                    | | disabled   |         |
+-----------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# dampening enabled
    dnRouter(cfg-protocols-bgp-afi)# exit
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# dampening enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# dampening enabled
    dnRouter(cfg-protocols-bgp-afi)# exit
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# dampening disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# dampening enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# dampening enabled
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# dampening disabled


**Removing Configuration**

To revert dampening to its default state:
::

    dnRouter(cfg-bgp-group-afi)# no dampening

::

    dnRouter(cfg-bgp-neighbor-afi)# no dampening

::

    dnRouter(cfg-group-neighbor-afi)# no dampening

**Command History**

+---------+---------------------------------------------------------------------------------+
| Release | Modification                                                                    |
+=========+=================================================================================+
| 6.0     | Command introduced                                                              |
+---------+---------------------------------------------------------------------------------+
| 11.4    | Changed the default admin-state from the global AFI configuration to "Enabled". |
+---------+---------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/extended-next-hop.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family extended-next-hop
----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Extended next-hop capability allows usage of an IPv6 address next-hop for IPv4 NLRIs per RFC8950.
If the capability is supported on both ends, the DNOS router will advertise, by default, the IPv6 BGP session source address as the next-hop value for IPv4 routes.
To enable extended next-hop capability:"

**Command syntax: extended-next-hop [extended-next-hop]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- Configuration valid only for ipv4 address families

- For neighbors within a group, the "no" command reverts the neighbor to the group setting.

- Reconfiguration will cause session restart (capability change)

**Parameter table**

+-------------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter         | Description                                                                      | Range        | Default |
+===================+==================================================================================+==============+=========+
| extended-next-hop | Support for extended next-hop capability. Allowing usage of ipv6 address nexthop | | enabled    | \-      |
|                   | for ipv4 NLRIs. RFC 8950                                                         | | disabled   |         |
+-------------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# extended-next-hop enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv4-unicast
    dnRouter(cfg-group-group-afi)# extended-next-hop enabled
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66


**Removing Configuration**

To revert extended-next-hop to default behavior:
::

    dnRouter(cfg-group-neighbor-afi)# no extended-next-hop

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/maximum-prefix/exceed-action.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix exceed-action
---------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator


To instruct BGP what action to take when the maximum allowed number of prefixes has been exceeded.

 - warning only - (Default behavior) maximum-prefix-number exceeded - restart the neighbor session. The session will restart after the restart-interval.
 - restart - maximum-prefix-number exceeded - restart the neighbor session. The session will restart after the restart-interval.

**Command syntax: exceed-action [action]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix
- protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor-group neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- When the prefix number drops below the maximum prefix- number threshold, a clear message is sent.

**Parameter table**

+-----------+--------------------------------------------------------+------------------+--------------+
| Parameter | Description                                            | Range            | Default      |
+===========+========================================================+==================+==============+
| action    | action to be taken when maximum-prefix-number exceeded | | warning-only   | warning-only |
|           |                                                        | | restart        |              |
+-----------+--------------------------------------------------------+------------------+--------------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)# exceed-action warning-only


**Removing Configuration**

To revert to the default action (warning-only):
::

    dnRouter(cfg-neighbor-afi-maximum-prefix)# no exceed-action

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/maximum-prefix/limit.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix limit
-------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

"Specifies the maximum number of IP network prefixes (routes) that can be learned from a specified neighbor or neighbor group."

**Command syntax: limit [maximum-prefix-number]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix
- protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor-group neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix

**Note**
Neighbors within a neighbor-group derive the neighbor-group configuration or can have a unique setting from the group.

**Parameter table**

+-----------------------+----------------------+--------------+---------+
| Parameter             | Description          | Range        | Default |
+=======================+======================+==============+=========+
| maximum-prefix-number | 0 used for unlimited | 0-4294967295 | 0       |
+-----------------------+----------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)# limit 1000000000


**Removing Configuration**

To revert to default:
::

    dnRouter(cfg-neighbor-afi-maximum-prefix)# no limit

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/maximum-prefix/maximum-prefix.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix
-------------------------------------------------------------------------------------------------

**Minimum user role:** operator

By setting the maximum-prefix attribute, you control the number of prefixes that can be received from a neighbor. This is useful when a router starts receiving more routes than its memory can take.

To limit the number of routes that can be learned from the neighbor, peer group, or neighbor in a peer group:

**Command syntax: maximum-prefix**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**
When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)#


**Removing Configuration**

To revert to the default maximum-prefixes:
::

    dnRouter(cfg-bgp-neighbor-afi)# no maximum-prefix

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/maximum-prefix/restart-interval.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix restart-interval
------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Defines the restart interval when an exceed-action value is set to 'restart'.

**Command syntax: restart-interval [restart-interval]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix
- protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor-group neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix

**Note**
When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+------------------+-------------+---------+---------+
| Parameter        | Description | Range   | Default |
+==================+=============+=========+=========+
| restart-interval | minutes     | 1-65535 | \-      |
+------------------+-------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)# restart-interval 100


**Removing Configuration**

To remove the restart interval:
::

    dnRouter(cfg-neighbor-afi-maximum-prefix)# no restart-interval

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/maximum-prefix/threshold.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix threshold
-----------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Specifies the percentage of the value specified by *maximum-prefix-number* that causes a log message to be generated.

**Command syntax: threshold [syslog-threshold]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix
- protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor-group neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix

**Note**
When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+------------------+-------------+-------+---------+
| Parameter        | Description | Range | Default |
+==================+=============+=======+=========+
| syslog-threshold | percentage  | 1-100 | 100     |
+------------------+-------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)# threshold 75


**Removing Configuration**

To revert to the default maximum-prefixes:
::

    dnRouter(cfg-neighbor-afi-maximum-prefix)# no threshold

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/nexthop_ipv4.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family nexthop
------------------------------------------------------------------------------------------

**Minimum user role:** operator

This command sets the next-hop of the advertised route to be the BGP router's address.

To set the advertised route's next-hop value to be the BGP router's address:

**Command syntax: nexthop [ipv4-address]** force [force]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- Changing the configuration will cause the BGP session to restart.

- For flowspec SAFI, imposing a nexthop change might affect the flowspec action rules. By default, the "nexthop" attribute doesn't change for flowspec NLRI in either eBGP or iBGP sessions.

- For eBGP sessions and any BGP MPLS session, the nexthop value is set to "nexthop self" by default.

- For neighbors within a group, the "no" command reverts the neighbor to the group setting.

- The address type must match the address family.

**Parameter table**

+--------------+-----------------------------------------------------------+--------------+---------+
| Parameter    | Description                                               | Range        | Default |
+==============+===========================================================+==============+=========+
| ipv4-address | set specific ip address to be used as the nexthop address | A.B.C.D      | \-      |
+--------------+-----------------------------------------------------------+--------------+---------+
| force        | apply nexthop setting even when acting as route reflector | | enabled    | \-      |
|              |                                                           | | disabled   |         |
+--------------+-----------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# nexthop 100.70.1.45

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 5000
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 120.92.1.50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv4-unicast
    dnRouter(cfg-group-group-afi)# nexthop 1.1.1.1
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 120.92.1.50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv6-unicast
    dnRouter(cfg-group-group-afi)# nexthop 1:1::1:1
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 0:ffff::120

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 1.2.3.4
    dnRouter(cfg-protocols-bgp-neighbor)# address-family flowspec
    dnRouter(cfg-bgp-neighbor-afi)# nexthop 95.70.1.13


**Removing Configuration**

To remove the nexthop settings:
::

    dnRouter(cfg-group-neighbor-afi)# no nexthop

To revert force to the default state:
::

    dnRouter(cfg-bgp-group-afi)# no nexthop self force

**Command History**

+---------+-----------------------------------------------------------------------------------------------------------------------+
| Release | Modification                                                                                                          |
+=========+=======================================================================================================================+
| 6.0     | Command introduced                                                                                                    |
+---------+-----------------------------------------------------------------------------------------------------------------------+
| 11.0    | Added option to enter a specific IP address as nexthop Added option to configure nexthop for neighbors within a group |
+---------+-----------------------------------------------------------------------------------------------------------------------+
| 16.1    | Added support for multicast SAFI                                                                                      |
+---------+-----------------------------------------------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/nexthop_ipv6.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family nexthop
------------------------------------------------------------------------------------------

**Minimum user role:** operator

This command sets the next-hop of the advertised route to be the BGP router's address.

To set the advertised route's next-hop value to be the BGP router's address:

**Command syntax: nexthop [ipv6-address]** force [force]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- Changing the configuration will cause the BGP session to restart.

- For flowspec SAFI, imposing a nexthop change might affect the flowspec action rules. By default, the "nexthop" attribute doesn't change for flowspec NLRI in either eBGP or iBGP sessions.

- For eBGP sessions and any BGP MPLS session, the nexthop value is set to "nexthop self" by default.

- For neighbors within a group, the "no" command reverts the neighbor to the group setting.

- The address type must match the address family.

**Parameter table**

+--------------+-----------------------------------------------------------+--------------+---------+
| Parameter    | Description                                               | Range        | Default |
+==============+===========================================================+==============+=========+
| ipv6-address | set specific ip address to be used as the nexthop address | X:X::X:X     | \-      |
+--------------+-----------------------------------------------------------+--------------+---------+
| force        | apply nexthop setting even when acting as route reflector | | enabled    | \-      |
|              |                                                           | | disabled   |         |
+--------------+-----------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# nexthop 100.70.1.45

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 5000
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 120.92.1.50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv4-unicast
    dnRouter(cfg-group-group-afi)# nexthop 1.1.1.1
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 120.92.1.50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv6-unicast
    dnRouter(cfg-group-group-afi)# nexthop 1:1::1:1
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 0:ffff::120

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 1.2.3.4
    dnRouter(cfg-protocols-bgp-neighbor)# address-family flowspec
    dnRouter(cfg-bgp-neighbor-afi)# nexthop 95.70.1.13


**Removing Configuration**

To remove the nexthop settings:
::

    dnRouter(cfg-group-neighbor-afi)# no nexthop

To revert force to the default state:
::

    dnRouter(cfg-bgp-group-afi)# no nexthop self force

**Command History**

+---------+-----------------------------------------------------------------------------------------------------------------------+
| Release | Modification                                                                                                          |
+=========+=======================================================================================================================+
| 6.0     | Command introduced                                                                                                    |
+---------+-----------------------------------------------------------------------------------------------------------------------+
| 11.0    | Added option to enter a specific IP address as nexthop Added option to configure nexthop for neighbors within a group |
+---------+-----------------------------------------------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/orf-prefix-list-ipv4.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family orf-prefix-list-ipv4
-------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

The Prefix-list is sent when the ORF send capability is enabled. To configure the prefix list to be sent to the peer to be used as an outbound-route-filter:

**Command syntax: orf-prefix-list-ipv4 [ipv4-prefix-list]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- The prefix-list type (IPv4 / IPv6) must match the address-family type.

- The prefix-list must use a configured prefix-list from the routing-policy. It can be within the same commit.

- This command is only valid for unicast sub-address families.

- Neighbors within a neighbor-group can use the neighbor-group configuration or a configuration from the group.

**Parameter table**

+------------------+---------------------------------------------------+------------------+---------+
| Parameter        | Description                                       | Range            | Default |
+==================+===================================================+==================+=========+
| ipv4-prefix-list | IPv4 ORF prefix list sent to ORF capable neighbor | | string         | \-      |
|                  |                                                   | | length 1-255   |         |
+------------------+---------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# orf-prefix-list ORF_PL_IPv4
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group GROUP_1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-unicast
    dnRouter(cfg-bgp-group-afi)# orf-prefix-list ORF_PL_IPv4
    dnRouter(cfg-protocols-bgp-group)# neighbor 1.1.1.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# orf-prefix-list ORF_PL_IPv6
    dnRouter(cfg-protocols-bgp-group)# neighbor 2:2::2:2
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# orf-prefix-list ORF_PL_IPv6


**Removing Configuration**

To remove the prefix-list:
::

    dnRouter(cfg-bgp-neighbor-afi)# no orf-prefix-list

::

    dnRouter(cfg-bgp-group-afi)# no orf-prefix-list

::

    dnRouter(cfg-group-neighbor-afi)# no orf-prefix-list

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/orf-prefix-list-ipv6.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family orf-prefix-list-ipv6
-------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

The Prefix-list is sent when the ORF send capability is enabled. To configure the prefix list to be sent to the peer to be used as an outbound-route-filter:

**Command syntax: orf-prefix-list-ipv6 [ipv6-prefix-list]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- The prefix-list type (IPv4 / IPv6) must match the address-family type.

- The prefix-list must use a configured prefix-list from the routing-policy. It can be within the same commit.

- This command is only valid for unicast sub-address families.

- Neighbors within a neighbor-group can use the neighbor-group configuration or a configuration from the group.

**Parameter table**

+------------------+---------------------------------------------------+------------------+---------+
| Parameter        | Description                                       | Range            | Default |
+==================+===================================================+==================+=========+
| ipv6-prefix-list | IPv4 ORF prefix list sent to ORF capable neighbor | | string         | \-      |
|                  |                                                   | | length 1-255   |         |
+------------------+---------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# orf-prefix-list ORF_PL_IPv4
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group GROUP_1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-unicast
    dnRouter(cfg-bgp-group-afi)# orf-prefix-list ORF_PL_IPv4
    dnRouter(cfg-protocols-bgp-group)# neighbor 1.1.1.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# orf-prefix-list ORF_PL_IPv6
    dnRouter(cfg-protocols-bgp-group)# neighbor 2:2::2:2
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# orf-prefix-list ORF_PL_IPv6


**Removing Configuration**

To remove the prefix-list:
::

    dnRouter(cfg-bgp-neighbor-afi)# no orf-prefix-list

::

    dnRouter(cfg-bgp-group-afi)# no orf-prefix-list

::

    dnRouter(cfg-group-neighbor-afi)# no orf-prefix-list

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/policy-in.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family policy in
--------------------------------------------------------------------------------------------

**Minimum user role:** operator

To apply a route map to a neighbor or peer group:

**Command syntax: policy [policy-in]** [, policy-in, policy-in] **in**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- If a policy is configured for a group, you cannot disable it for a neighbor within the group. You must explicitly set a different policy to achieve a different behavior from the group. You may even attach an empty policy.

- Can set multiple policies. In case multiple policies are set, policies are evaluated one after the other according to the user input order

- When setting a new policy, the policy will be appended to the existing attached policies

- To remove a policy, the user must specify the name of the policy to be remvoed

- To remove all policies, the user must specify all attached policy names

- To replace an attached policy, the user will need to first remove and than add a new policy. Can be performed in the same commit. the policy order imposes the functional behavior.

**Parameter table**

+-----------+---------------------------------------+------------------+---------+
| Parameter | Description                           | Range            | Default |
+===========+=======================================+==================+=========+
| policy-in | applies the filter in incoming routes | | string         | \-      |
|           |                                       | | length 1-255   |         |
+-----------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy in
    dnRouter(cfg-protocols-bgp-neighbor)# address-family flowspec
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy in

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# policy MyPolicy in

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# policy GroupPolicy in
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# policy NeighborPolicy in

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy_1,MyPolicy_2 in


**Removing Configuration**

To disable the route map policy:
::

    dnRouter(cfg-bgp-group-afi)# no policy MyPolicy in

::

    dnRouter(cfg-bgp-neighbor-afi)# no policy MyPolicy in

::

    dnRouter(cfg-group-neighbor-afi)# no policy NeighborPolicy in

**Command History**

+---------+----------------------------------------------------------------+
| Release | Modification                                                   |
+=========+================================================================+
| 6.0     | Command introduced                                             |
+---------+----------------------------------------------------------------+
| 11.0    | Added option to configure policy for a neighbor within a group |
+---------+----------------------------------------------------------------+
| 16.1    | Added support for multicast SAFI                               |
+---------+----------------------------------------------------------------+
| 17.2    | Added support for multiple policies attachments                |
+---------+----------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/policy-out.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family policy out
---------------------------------------------------------------------------------------------

**Minimum user role:** operator

To apply a route map to a neighbor or peer group:

**Command syntax: policy [policy-out]** [, policy-out, policy-out] **out**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- If a policy is configured for a group, you cannot disable it for a neighbor within the group. You must explicitly set a different policy to achieve a different behavior from the group. You may even attach an empty policy.

- Can set multiple policies. In case multiple policies are set, policies are evaluated one after the other according to the user input order

- When setting a new policy, the policy will be appended to the existing attached policies

- To remove a policy, the user must specify the name of the policy to be remvoed

- To remove all policies, the user must specify all attached policy names

- To replace an attached policy, the user will need to first remove and than add a new policy. Can be performed in the same commit. the policy order imposes the functional behavior.

**Parameter table**

+------------+---------------------------------------+------------------+---------+
| Parameter  | Description                           | Range            | Default |
+============+=======================================+==================+=========+
| policy-out | applies the filter in outgoing routes | | string         | \-      |
|            |                                       | | length 1-255   |         |
+------------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy out

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# policy MyPolicy out

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# policy GroupPolicy out
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# policy NeighborPolicy out

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy_1,MyPolicy_2 out


**Removing Configuration**

To disable the route map policy:
::

    dnRouter(cfg-bgp-group-afi)# no policy MyPolicy out

::

    dnRouter(cfg-bgp-neighbor-afi)# no policy MyPolicy out

::

    dnRouter(cfg-group-neighbor-afi)# no policy NeighborPolicy out

**Command History**

+---------+----------------------------------------------------------------+
| Release | Modification                                                   |
+=========+================================================================+
| 6.0     | Command introduced                                             |
+---------+----------------------------------------------------------------+
| 11.0    | Added option to configure policy for a neighbor within a group |
+---------+----------------------------------------------------------------+
| 16.1    | Added support for multicast SAFI                               |
+---------+----------------------------------------------------------------+
| 17.2    | Added support for multiple policies attachments                |
+---------+----------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/address-family/soo.rst

network-services vrf instance protocols bgp neighbor-group neighbor address-family soo
--------------------------------------------------------------------------------------

**Minimum user role:** operator

BGP site of origin (SoO) is a tag that is appended on BGP updates to allow to mark a specific peer as belonging to a particular site. By tagging the route, BGP will check if the peer's site of origin is listed in the community field. If it is then the route will be filtered. If not, then the route will be advertised as normal.

To set the Site-Of-Orgin value for a BGP neighbor or neighbor group:

**Command syntax: soo [site-of-origin]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- Neighbors within a neighbor-group can use the neighbor-group configuration or use a unique setting.

**Parameter table**

+----------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter      | Description                                                                      | Range | Default |
+================+==================================================================================+=======+=========+
| site-of-origin | Set the Site-Of-Origin value for a BGP neighbor or peer group valid only for     | \-    | \-      |
|                | non-default vrf                                                                  |       |         |
+----------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# soo 45000:65
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# soo 45000:65
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# 50000:65
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# soo 45000:65


**Removing Configuration**

To remove the SoO value for a BGP neighbor:
::

    dnRouter(cfg-bgp-neighbor-afi)# no soo 45000:65

::

    dnRouter(cfg-bgp-group-afi)# no soo 45000:65

::

    dnRouter(cfg-group-neighbor-afi)# no soo 45000:65

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/admin-state.rst

network-services vrf instance protocols bgp neighbor-group neighbor admin-state
-------------------------------------------------------------------------------

**Minimum user role:** operator

Use this command to administratively start or shut down the session with the BGP neighbor, BGP neighbors in a group or a specific BGP neighbor within a group (this will override the group setting for this neighbor):

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter   | Description                                                                      | Range        | Default |
+=============+==================================================================================+==============+=========+
| admin-state | Causes a device to shut down the session administratively with its BGP neighbor. | | enabled    | \-      |
|             |                                                                                  | | disabled   |         |
+-------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# admin-state disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# admin-state disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# admin-state disabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# admin-state enabled


**Removing Configuration**

To revert the admin-state to its default value:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/authentication.rst

network-services vrf instance protocols bgp neighbor-group neighbor authentication md5 password
-----------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set a password for authenticating the neighbor, peer group neighbors, or the neighbor in a peer group:

**Command syntax: authentication md5 password [secret]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- Changing the configuration will cause the BGP session to restart.

- If you do not specify a password, enter the password of the neighbor BGP router in clear text. The password is then encrypted and from then on will be displayed as encrypted. You can copy the encrypted password and use it as the enc-password. When typing a clear password, the password is not displayed in the CLI terminal.

- The clear text password provided in the CLI is hashed with the md5 hash. As the md5 hash is not strong enough and can be broken, the FERNET algorithm is applied to the md5 hash before it is stored in the DNOS database.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+-------+---------+
| Parameter | Description                                                                      | Range | Default |
+===========+==================================================================================+=======+=========+
| secret    | set a password for authentication encrypted secret password string for the       | \-    | \-      |
|           | neighbor bgp. if the user enters a clear-text password, the password is then     |       |         |
|           | encrypted by the system and saved in secret argument. if the user specified      |       |         |
|           | 'secret' (already encrypted string) save the string in secret                    |       |         |
+-----------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# authentication md5 password
    Enter password
    Enter password for verifications

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.2.2
    dnRouter(cfg-protocols-bgp-neighbor)# authentication md5 password enc-!U2FsdGVkX1+

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# authentication md5 password
    Enter password
    Enter password for verification

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# authentication md5 password
    Enter password
    Enter password for verification
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# authentication md5 password enc-!U2FsdGVkX1+qG


**Removing Configuration**

To remove the password configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no authentication md5

::

    dnRouter(cfg-protocols-bgp-group)# no authentication md5

::

    dnRouter(cfg-bgp-group-neighbor)# no authentication md5

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/bfd/admin-state.rst

network-services vrf instance protocols bgp neighbor-group neighbor bfd admin-state
-----------------------------------------------------------------------------------

**Minimum user role:** operator

Enable BFD session for BGP session protection and enter BFD configuration level to configure BFD session settings.

To change the BFD administrative state for a specific BGP neighbor:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor bfd
- network-services vrf instance protocols bgp neighbor-group bfd

**Note**

- In the event that there are multiple BFD clients registered to the same BFD session, a single BFD session is established with the strictest session parameters between all clients.

**Parameter table**

+-------------+--------------------------------------+--------------+---------+
| Parameter   | Description                          | Range        | Default |
+=============+======================================+==============+=========+
| admin-state | set whether bfd protection is in use | | enabled    | \-      |
|             |                                      | | disabled   |         |
+-------------+--------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# admin-state enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# admin-state enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# admin-state enabled
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# admin-state enabled


**Removing Configuration**

To revert the admin-state to its default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no admin-state

::

    dnRouter(cfg-bgp-group-bfd)# no admin-state

::

    dnRouter(cfg-bgp-neighbor-bfd)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/bfd/bfd-type.rst

network-services vrf instance protocols bgp neighbor-group neighbor bfd bfd-type
--------------------------------------------------------------------------------

**Minimum user role:** operator

Define the requested BFD session type, Single-hop or Multi-hop. By default session type is according to BGP peering type.

To set requested session type:

**Command syntax: bfd-type [session-type]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor bfd
- network-services vrf instance protocols bgp neighbor-group bfd

**Note**

- For multi-hop session type , update-source must be configured for neighbor

- For single-hop session type , bgp peering must be directly over a connected interface

- Reconfig of bfd-type will result in a new BFD session

**Parameter table**

+--------------+----------------------------------------------------------------------------------+----------------+---------+
| Parameter    | Description                                                                      | Range          | Default |
+==============+==================================================================================+================+=========+
| session-type | Define the requested BFD session type, Single-hop or Multi-hop. By default       | | automatic    | \-      |
|              | session type is according to BGP peering type                                    | | single-hop   |         |
|              |                                                                                  | | multi-hop    |         |
+--------------+----------------------------------------------------------------------------------+----------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# bfd-type single-hop

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# bfd-type enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# bfd-type multi-hop
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# bfd-type automatic


**Removing Configuration**

To revert the bfd-type to its default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no bfd-type

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/bfd/bfd.rst

network-services vrf instance protocols bgp neighbor-group neighbor bfd
-----------------------------------------------------------------------

**Minimum user role:** operator

The command allows enabling BFD for the protection of a session between a single BGP neighbor or neighbor group and allows you to configure the BFD session settings.
The BFD session type (single-hop or multi-hop) is decided according to the BGP session type. The BFD source address is the BGP source address and the BFD destination address is the BGP peer address.

When a BFD session is down, the BGP session will close and all routes from the neighbor will be withdrawn.

The BFD failure detection time is computed out of the negotiated received interval and the remote multiplier configurations.

Detection-time = negotiated-received-interval X received multiplier.
This is the maximum amount of time that can elapse without receiving a BFD control packet before the session is declared down.

BFD neighbor can signal session state down and upon receipt, the local BFD session will immediately switch to DOWN state.

To enable or disable the BFD protocol with a single neighbor or a neighbor group:

**Command syntax: bfd**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)#


**Removing Configuration**

To revert the BFD protocol to the default state:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no bfd 

::

    dnRouter(cfg-protocols-bgp-group)# no bfd

::

    dnRouter(cfg-bgp-group-neighbor)# no bfd

**Command History**

+---------+----------------------+
| Release | Modification         |
+=========+======================+
| 6.0     | Command introduced   |
+---------+----------------------+
| 11.4    | Command reintroduced |
+---------+----------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/bfd/min-rx.rst

network-services vrf instance protocols bgp neighbor-group neighbor bfd min-rx
------------------------------------------------------------------------------

**Minimum user role:** operator

Set the desired minimum receive interval for the BFD session for a single neighbor or neighbor group:

**Command syntax: min-rx [min-rx]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor bfd
- network-services vrf instance protocols bgp neighbor-group bfd

**Note**

- This could be invoked inside a neighbor-group or as a single neighbor.

- Neighbors within a neighbor-group derive the neighbor-group configuration or can have a unique setting from the group.

- For neighbors within a neighbor-group, the default value is the group's parameter value.

**Parameter table**

+-----------+------------------------------------------------------+--------+---------+
| Parameter | Description                                          | Range  | Default |
+===========+======================================================+========+=========+
| min-rx    | set desired minimum receive interval for BFD session | 5-1700 | \-      |
+-----------+------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# min-rx 400
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# min-rx 400
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# min-rx 400
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# min-rx 300


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no min-rx

::

    dnRouter(cfg-bgp-group-bfd)# no min-rx

::

    dnRouter(cfg-group-neighbor-bfd)# no min-rx

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 11.4    | Command introduced               |
+---------+----------------------------------+
| 15.1    | Added support for 5msec interval |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/bfd/min-tx.rst

network-services vrf instance protocols bgp neighbor-group neighbor bfd min-tx
------------------------------------------------------------------------------

**Minimum user role:** operator

Set the desired minimum transmit interval for the BFD session for a single neighbor or neighbor group:

**Command syntax: min-tx [min-tx]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor bfd
- network-services vrf instance protocols bgp neighbor-group bfd

**Note**

- This could be invoked inside a neighbor-group or as a single neighbor.

- Neighbors within a neighbor-group derive the neighbor-group configuration or can have a unique setting from the group.

- For neighbors within a neighbor-group, the default value is the group's parameter value.

- Due to hardware limitation, the maximum supported transmit rate is 1700 msec. A negotiated transmit interval higher than 1700 msec will result in an actual transmit rate of 1700 msec.

**Parameter table**

+-----------+-------------------------------------------------------+--------+---------+
| Parameter | Description                                           | Range  | Default |
+===========+=======================================================+========+=========+
| min-tx    | set desired minimum transmit interval for BFD session | 5-1700 | \-      |
+-----------+-------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# min-tx 400
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# min-tx 400
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# min-tx 400
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# min-tx 300


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no min-tx

::

    dnRouter(cfg-bgp-group-bfd)# no min-tx

::

    dnRouter(cfg-group-neighbor-bfd)# no min-tx

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 11.4    | Command introduced               |
+---------+----------------------------------+
| 15.1    | Added support for 5msec interval |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/bfd/multiplier.rst

network-services vrf instance protocols bgp neighbor-group neighbor bfd multiplier
----------------------------------------------------------------------------------

**Minimum user role:** operator

Set the local BFD multiplier for a single neighbor or neighbor group:

**Command syntax: multiplier [multiplier]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor bfd
- network-services vrf instance protocols bgp neighbor-group bfd

**Note**

- This could be invoked inside a neighbor-group or as a single neighbor.

- Neighbors within a neighbor-group derive the neighbor-group configuration or can have a unique setting from the group.

- For neighbors within a neighbor-group, the default value is the group's parameter value.

**Parameter table**

+------------+--------------------------+-------+---------+
| Parameter  | Description              | Range | Default |
+============+==========================+=======+=========+
| multiplier | set local BFD multiplier | 2-16  | \-      |
+------------+--------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# multiplier 2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# multiplier 2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# multiplier 2
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# multiplier 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no multiplier

::

    dnRouter(cfg-bgp-group-bfd)# no multiplier

::

    dnRouter(cfg-group-neighbor-bfd)# no multiplier

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/connected-check.rst

network-services vrf instance protocols bgp neighbor-group neighbor connected-check
-----------------------------------------------------------------------------------

**Minimum user role:** operator

Typically in eBGP peering, a check is done to confirm that the neighbor is listed in the routing table as being directly connected. eBGP peering will not be attempted with a neighbor that is not directly connected. When the loopback interface is used for peering, then the IP address of the neighbor will not be listed as being directly connected and so peering will not be possible.

The following command instructs the BGP router whether or not to disable the connection verification check for eBGP peering sessions that are directly connected but are configured on a loopback interface or with a non-directly connected IP address.

**Command syntax: connected-check [connected-check]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Note**

- The option to disable the check is required only when the neighbor ebgp-multihop command is configured with a TTL value of 1. See "bgp neighbor ebgp-multihop".

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter       | Description                                                                      | Range        | Default |
+=================+==================================================================================+==============+=========+
| connected-check | disable the connection verification process for eBGP peering sessions that are   | | enabled    | \-      |
|                 | reachable by a single hop but are configured on a loopback interface or          | | disabled   |         |
|                 | otherwise configured with a non-directly connected IP address                    |              |         |
+-----------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# connected-check disabled
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# connected-check disabled

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# connected-check disabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# connected-check enabled


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-protocols-bgp-group)# no connected-check

::

    dnRouter(cfg-protocols-bgp-neighbor)# no connected-check

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/description.rst

network-services vrf instance protocols bgp neighbor-group neighbor description
-------------------------------------------------------------------------------

**Minimum user role:** operator

To set a description for the BGP neighbor, BGP peer group, or BGP neighbor within a peer group:

**Command syntax: description [description]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+-------------+--------------------------+------------------+---------+
| Parameter   | Description              | Range            | Default |
+=============+==========================+==================+=========+
| description | a neighbors' description | | string         | \-      |
|             |                          | | length 1-255   |         |
+-------------+--------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# description my-description

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# description my-description

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# description my-description

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# description my-unique-description


**Removing Configuration**

To remove the description:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no description

::

    dnRouter(cfg-protocols-bgp-group)# no description

::

    dnRouter(cfg-bgp-group-neighbor)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/ebgp-multihop.rst

network-services vrf instance protocols bgp neighbor-group neighbor ebgp-multihop
---------------------------------------------------------------------------------

**Minimum user role:** operator

To configure a maximum number of hops to an eBGP neighbor, to an eBGP peer group, or to a neighbor within a peer group:

**Command syntax: ebgp-multihop [ebgp-multihop]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Note**

- If you set a value greater than 1, the neighbor will always be considered as an indirectly connected neighbor, regardless of the actual reachability.

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+---------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter     | Description                                                                      | Range | Default |
+===============+==================================================================================+=======+=========+
| ebgp-multihop | set eBGP neighbors that are not on directly connected networks and sets an       | 1-255 | \-      |
|               | optional maximum hop count                                                       |       |         |
+---------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# ebgp-multihop

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# ebgp-multihop 20

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# ebgp-multihop 20

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# ebgp-multihop 16


**Removing Configuration**

To revert to the default configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no ebgp-multihop

::

    dnRouter(cfg-protocols-bgp-group)# no ebgp-multihop

::

    dnRouter(cfg-bgp-group-neighbor)# no ebgp-multihop

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/graceful-restart.rst

network-services vrf instance protocols bgp neighbor-group neighbor graceful-restart
------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the BGP graceful restart capability for a specific neighbor, a peer group, or for a neighbor in a peer group:

**Command syntax: graceful-restart [graceful-restart-admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- When bgp graceful-restart is disabled, no graceful-restart is done regardless of the bgp neighbor graceful-restart state.

- Disabled: disables graceful-restart for the neighbor.

**Parameter table**

+------------------------------+------------------------------------------+-----------------+---------+
| Parameter                    | Description                              | Range           | Default |
+==============================+==========================================+=================+=========+
| graceful-restart-admin-state | global graceful-restart capability state | | enabled       | \-      |
|                              |                                          | | disabled      |         |
|                              |                                          | | helper-only   |         |
+------------------------------+------------------------------------------+-----------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# graceful-restart enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001:3::65
    dnRouter(cfg-protocols-bgp-neighbor)# graceful-restart helper-only

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001:3::65
    dnRouter(cfg-protocols-bgp-neighbor)# graceful-restart disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# graceful-restart enabled
    dnRouter(cfg-protocols-bgp-group)# graceful-restart helper-only
    dnRouter(cfg-protocols-bgp-group)# graceful-restart disabled


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no graceful-restart

::

    dnRouter(cfg-protocols-bgp-group)# no graceful-restart

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/neighbor.rst

network-services vrf instance protocols bgp neighbor-group neighbor
-------------------------------------------------------------------

**Minimum user role:** operator

When configuring a BGP neighbor, you must first define it using one of the following commands.

To define a BGP neighbor and enter its configuration mode:

When configuring neighbors within a peer group, the neighbors inherit the settings from the group.

**Command syntax: neighbor [neighbor-ip-address]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp
- protocols bgp neighbor-group
- network-services vrf instance protocols bgp

**Note**

- Notice the change in prompt.

- When configuring neighbors within a peer group, the neighbors inherit the settings from the group.

**Parameter table**

+---------------------+-------------------------------------------------+--------------+---------+
| Parameter           | Description                                     | Range        | Default |
+=====================+=================================================+==============+=========+
| neighbor-ip-address | Address of the BGP peer, either in IPv4 or IPv6 | | A.B.C.D    | \-      |
|                     |                                                 | | X:X::X:X   |         |
+---------------------+-------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)#


**Removing Configuration**

To remove a neighbor:
::

    dnRouter(cfg-protocols-bgp)# no neighbor 12.170.4.1

To remove a neighbor from the group:
::

    dnRouter(cfg-protocols-bgp-group)# no neighbor 2001::66

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/override-capability.rst

network-services vrf instance protocols bgp neighbor-group neighbor override-capability
---------------------------------------------------------------------------------------

**Minimum user role:** operator

This command instructs the BGP router whether or not to establish a peering session with a neighbor that does not support capability negotiation, neighbors that are members of a peer group, or with a neighbor in a peer group. To configure this option:

**Command syntax: override-capability [override-capability]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command cannot be enabled with the strict-capability-match configuration. See "bgp neighbor strict-capability-match"

**Parameter table**

+---------------------+---------------------------------------------------+--------------+---------+
| Parameter           | Description                                       | Range        | Default |
+=====================+===================================================+==============+=========+
| override-capability | allow peer session without capability negotiation | | enabled    | \-      |
|                     |                                                   | | disabled   |         |
+---------------------+---------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# override-capability enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# override-capability enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# override-capability enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# override-capability disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# strict-capability-match enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# strict-capability-match disabled
    dnRouter(cfg-bgp-group-neighbor)# override-capability enabled


**Removing Configuration**

To remove this configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no override-capability 

::

    dnRouter(cfg-protocols-bgp-group)# no override-capability

::

    dnRouter(cfg-bgp-group-neighbor)# no override-capability

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/passive.rst

network-services vrf instance protocols bgp neighbor-group neighbor passive
---------------------------------------------------------------------------

**Minimum user role:** operator

In passive mode, the router will not initiate open messages to the peer. It will wait for the peer to issue an open request before a message is sent. To configure passive mode for a neighbor, peer group, or a neighbor in a peer group:

**Command syntax: passive [passive]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+-----------+----------------------------------------------------------------------------+--------------+---------+
| Parameter | Description                                                                | Range        | Default |
+===========+============================================================================+==============+=========+
| passive   | Configure the router so that active open messages are not sent to the peer | | enabled    | \-      |
|           |                                                                            | | disabled   |         |
+-----------+----------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# passive enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# passive enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# passive enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# passive enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# passive disabled


**Removing Configuration**

To remove passive mode:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no passive

::

    dnRouter(cfg-protocols-bgp-group)# no passive

::

    dnRouter(cfg-bgp-group-neighbor)# no passive

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/remote-as.rst

network-services vrf instance protocols bgp neighbor-group neighbor remote-as
-----------------------------------------------------------------------------

**Minimum user role:** operator

The neighbor (not under neighbor-group) must be configured with remote-as.
For neighbor-groups:
A group can be configured with or without remote-as. If the group is not configured with remote-as, it is mandatory for each of the neighbors under the group to have remote-as.
The group and the neighbor remote-as must be from the same type, meaning iBGP, eBGP or Confederation.

To configure the remote AS number for the neighbor or peer group:

**Command syntax: remote-as [remote-as]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Note**

- The AS number of the neighbor. BGP uses the AS number for identifying the BGP connection as internal (iBGP) or external (eBGP).

**Parameter table**

+-----------+------------------------+--------------+---------+
| Parameter | Description            | Range        | Default |
+===========+========================+==============+=========+
| remote-as | AS number of the peer. | 1-4294967295 | \-      |
+-----------+------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# remote-as 5000

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# remote-as 5000

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 5000
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 1.2.3.4
    dnRouter(cfg-bgp-group-neighbor)# remote-as 123


**Removing Configuration**

It is not possible to delete the remote-as of a neighbor or group. You need to remove the neighbor or the group. You can change the assigned remote-as.
::


**Command History**

+---------+--------------------------------------------------+
| Release | Modification                                     |
+=========+==================================================+
| 6.0     | Command introduced                               |
+---------+--------------------------------------------------+
| 18.0    | Added remote-as under neighbor of neighbor-group |
+---------+--------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/strict-capability-match.rst

network-services vrf instance protocols bgp neighbor-group neighbor strict-capability-match
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

This command directs the router to strictly match remote capabilities and local capabilities. If the capabilities are different, the router will issue an "Unsupported Capability" error and will reset the connection.

To set strict capability match:

**Command syntax: strict-capability-match [strict-capability-match]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command cannot be set together with the override-capability configuration. See "bgp neighbor override-capability"

**Parameter table**

+-------------------------+--------------------------------------------------------------+--------------+---------+
| Parameter               | Description                                                  | Range        | Default |
+=========================+==============================================================+==============+=========+
| strict-capability-match | Strictly compares remote capabilities and local capabilities | | enabled    | \-      |
|                         |                                                              | | disabled   |         |
+-------------------------+--------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# strict-capability-match enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# strict-capability-match enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# strict-capability-match enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# strict-capability-match disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# override-capability enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# override-capability disabled
    dnRouter(cfg-bgp-group-neighbor)# strict-capability-match enabled


**Removing Configuration**

To remove the strict capability match configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no strict-capability-match

::

    dnRouter(cfg-bgp-group-neighbor)# no strict-capability-match

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/ttl-security.rst

network-services vrf instance protocols bgp neighbor-group neighbor ttl-security
--------------------------------------------------------------------------------

**Minimum user role:** operator

Imposes ebgp ttl security per rfc5082.
When ttl-security is set for an EBGP neighbor, the following is expected for the given neighbor bgp IP/TCP session:
- Any egress packet is set with TTL 255.
- Any ingress packet is checked for TTL validity. Only packets with a TTL greater or equal to min-ttl are accepted, otherwise dropped.

The default system behavior is min-ttl = 255, imposing that eBGP neighbor must be directly connected (one hop apart).

The user may impose a different min-ttl value to support the eBGP neighbors that are not directly connected.
If min-ttl = 255 the ttl-security keeps assumption of the eBGP neighbor being directly connected, regardless of the min-ttl value, as such:
- The neighbor address is expected to be a connected route.
- The egress interface is imposed per the neighbor address.
- In case BFD is requested, a single-hop BFD session is requested (unless a specific BFD-type is set).
In case min-ttl < 255 MH-EBGP the session is assumed resulting:
- An update-source is required.
- The neighbor address is not bound to be a connected route.
- The egress interface is selected per the neighbor address routing solution.
- In case BFD is requested, a multi-hop BFD session is requested (unless specific BFD-type is set).

**Command syntax: ttl-security [admin-state]** min-ttl [min-ttl]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Note**

- The expected behavior is that both the BGP session sides are configured with ttl-security.

- The configuration is valid only for eBGP neighbors. Commit validation is required (same as impose for eBGP-multihop).

- Configuration is only possible with eBGP-multihop = 1. Commit validation is required.

- Applies for both IPv4 neighbors and IPv6 neighbors. The hop-count is handled instead of TTL for IPv6.

- When applied on a group, this property is inherited by all the group members. Applying this property on a neighbor within a group overrides the group setting.

- Neighbors within a neighbor-group derive the neighbor-group configuration (i.e has no default config) or can have a unique setting from the group.

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter   | Description                                                                      | Range        | Default |
+=============+==================================================================================+==============+=========+
| admin-state | Enable ttl security for a given eBGP neighbor                                    | | enabled    | \-      |
|             |                                                                                  | | disabled   |         |
+-------------+----------------------------------------------------------------------------------+--------------+---------+
| min-ttl     | Allow received ttl lower than 255, the allowed received ttl will be              | 1-255        | \-      |
|             | greater-equal to (255-range)                                                     |              |         |
+-------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# ttl-security enabled
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP_GROUP
    dnRouter(cfg-protocols-bgp-group)# ttl-security enabled min-ttl 254

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP_GROUP
    dnRouter(cfg-protocols-bgp-group)# ttl-security enabled min-ttl 252
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-protocols-bgp-neighbor)# ttl-security enabled min-ttl 255


**Removing Configuration**

To revert configuration to default behavior the configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no ttl-security

To revert min-ttl to default behavior
::

    dnRouter(cfg-protocols-bgp-neighbor)# no ttl-security enabled min-ttl 255

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/update-source.rst

network-services vrf instance protocols bgp neighbor-group neighbor update-source
---------------------------------------------------------------------------------

**Minimum user role:** operator

The update-source parameter is a mandatory configuration for every multihop BGP session. This includes both iBGP and MH-eBGP.

To specify the source address to use for the BGP session to a neighbor, peer group, or neighbor within the peer group:

**Command syntax: update-source [source-address]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Note**

- Changing the configuration will cause the BGP session to restart.

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+----------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter      | Description                                                                      | Range | Default |
+================+==================================================================================+=======+=========+
| source-address | specify the source address to use for the BGP session to this neighbor Can       | \-    | \-      |
|                | either be an ipv4|6-address or an interface name when using loopback interface   |       |         |
|                | name, bgp uses the lo ip address                                                 |       |         |
+----------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# update-source lo0

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# update-source 1.1.1.1

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# update-source 100.70.1.45

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# update-source 2001:2::65

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# update-source lo1

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# update-source ge100-1/2/1

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# update-source bundle-2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# update-source bundle-1.1

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# update-source 2001:2::65
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# update-source 1.1.1.1


**Removing Configuration**

To revert the source address to the default value (the BGP router-id):
::

    dnRouter(cfg-protocols-bgp-neighbor)# no update-source

::

    dnRouter(cfg-protocols-bgp-group)# no update-source

::

    dnRouter(cfg-bgp-group-neighbor)# no update-source

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/neighbor/weight.rst

network-services vrf instance protocols bgp neighbor-group neighbor weight
--------------------------------------------------------------------------

**Minimum user role:** operator

To specify a weight that the BGP router will add to routes that are received from the specified BGP neighbor, BGP peer group, or BGP neighbor in a peer group:

**Command syntax: weight [weight]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group

**Note**

- To apply new neighbor weight settings, restart the bgp neighbor session. A user can invoke clear soft to avoid any traffic impact.

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+---------+---------+
| Parameter | Description                                                                      | Range   | Default |
+===========+==================================================================================+=========+=========+
| weight    | Specifies a weight that the device will add to routes that are received from the | 0-65535 | \-      |
|           | specified BGP neighbor.                                                          |         |         |
+-----------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# weight 50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# weight 10

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# weight 10
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# weight 50


**Removing Configuration**

To revert to the default weight value:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no weight

::

    dnRouter(cfg-protocols-bgp-group)# no weight

::

    dnRouter(cfg-bgp-group-neighbor)# no weight

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/override-capability.rst

network-services vrf instance protocols bgp neighbor-group override-capability
------------------------------------------------------------------------------

**Minimum user role:** operator

This command instructs the BGP router whether or not to establish a peering session with a neighbor that does not support capability negotiation, neighbors that are members of a peer group, or with a neighbor in a peer group. To configure this option:

**Command syntax: override-capability [override-capability]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command cannot be enabled with the strict-capability-match configuration. See "bgp neighbor strict-capability-match"

**Parameter table**

+---------------------+---------------------------------------------------+--------------+----------+
| Parameter           | Description                                       | Range        | Default  |
+=====================+===================================================+==============+==========+
| override-capability | allow peer session without capability negotiation | | enabled    | disabled |
|                     |                                                   | | disabled   |          |
+---------------------+---------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# override-capability enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# override-capability enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# override-capability enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# override-capability disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# strict-capability-match enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# strict-capability-match disabled
    dnRouter(cfg-bgp-group-neighbor)# override-capability enabled


**Removing Configuration**

To remove this configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no override-capability 

::

    dnRouter(cfg-protocols-bgp-group)# no override-capability

::

    dnRouter(cfg-bgp-group-neighbor)# no override-capability

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/passive.rst

network-services vrf instance protocols bgp neighbor-group passive
------------------------------------------------------------------

**Minimum user role:** operator

In passive mode, the router will not initiate open messages to the peer. It will wait for the peer to issue an open request before a message is sent. To configure passive mode for a neighbor, peer group, or a neighbor in a peer group:

**Command syntax: passive [passive]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+-----------+----------------------------------------------------------------------------+--------------+----------+
| Parameter | Description                                                                | Range        | Default  |
+===========+============================================================================+==============+==========+
| passive   | Configure the router so that active open messages are not sent to the peer | | enabled    | disabled |
|           |                                                                            | | disabled   |          |
+-----------+----------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# passive enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# passive enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# passive enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# passive enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# passive disabled


**Removing Configuration**

To remove passive mode:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no passive

::

    dnRouter(cfg-protocols-bgp-group)# no passive

::

    dnRouter(cfg-bgp-group-neighbor)# no passive

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/remote-as.rst

network-services vrf instance protocols bgp neighbor-group remote-as
--------------------------------------------------------------------

**Minimum user role:** operator

The neighbor (not under neighbor-group) must be configured with remote-as.
For neighbor-groups:
A group can be configured with or without remote-as. If the group is not configured with remote-as, it is mandatory for each of the neighbors under the group to have remote-as.
The group and the neighbor remote-as must be from the same type, meaning iBGP, eBGP or Confederation.

To configure the remote AS number for the neighbor or peer group:

**Command syntax: remote-as [remote-as]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- The AS number of the neighbor. BGP uses the AS number for identifying the BGP connection as internal (iBGP) or external (eBGP).

**Parameter table**

+-----------+------------------------+--------------+---------+
| Parameter | Description            | Range        | Default |
+===========+========================+==============+=========+
| remote-as | AS number of the peer. | 1-4294967295 | \-      |
+-----------+------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# remote-as 5000

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# remote-as 5000

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 5000
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 1.2.3.4
    dnRouter(cfg-bgp-group-neighbor)# remote-as 123


**Removing Configuration**

It is not possible to delete the remote-as of a neighbor or group. You need to remove the neighbor or the group. You can change the assigned remote-as.
::


**Command History**

+---------+--------------------------------------------------+
| Release | Modification                                     |
+=========+==================================================+
| 6.0     | Command introduced                               |
+---------+--------------------------------------------------+
| 18.0    | Added remote-as under neighbor of neighbor-group |
+---------+--------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/strict-capability-match.rst

network-services vrf instance protocols bgp neighbor-group strict-capability-match
----------------------------------------------------------------------------------

**Minimum user role:** operator

This command directs the router to strictly match remote capabilities and local capabilities. If the capabilities are different, the router will issue an "Unsupported Capability" error and will reset the connection.

To set strict capability match:

**Command syntax: strict-capability-match [strict-capability-match]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command cannot be set together with the override-capability configuration. See "bgp neighbor override-capability"

**Parameter table**

+-------------------------+--------------------------------------------------------------+--------------+----------+
| Parameter               | Description                                                  | Range        | Default  |
+=========================+==============================================================+==============+==========+
| strict-capability-match | Strictly compares remote capabilities and local capabilities | | enabled    | disabled |
|                         |                                                              | | disabled   |          |
+-------------------------+--------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# strict-capability-match enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# strict-capability-match enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# strict-capability-match enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# strict-capability-match disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# override-capability enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# override-capability disabled
    dnRouter(cfg-bgp-group-neighbor)# strict-capability-match enabled


**Removing Configuration**

To remove the strict capability match configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no strict-capability-match

::

    dnRouter(cfg-bgp-group-neighbor)# no strict-capability-match

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/timers.rst

network-services vrf instance protocols bgp neighbor-group timers
-----------------------------------------------------------------

**Minimum user role:** operator

To adjust the interval at which BGP keep-alive and hold-time messages are sent to the neighbor or peer group:

**Command syntax: timers {keep-alive [keep-alive-timer], hold-time [hold-time-timer]}**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor

**Note**

- Setting the timer value to 0 disables the timer.

**Parameter table**

+------------------+------------------+------------+---------+
| Parameter        | Description      | Range      | Default |
+==================+==================+============+=========+
| keep-alive-timer | keep-alive-timer | 0-65535    | 60      |
+------------------+------------------+------------+---------+
| hold-time-timer  | hold-time-timer  | 0, 3-65535 | 180     |
+------------------+------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# timers keep-alive 30 hold-time 90

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# timers hold-time 100

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# timers hold-time 400 keep-alive 100


**Removing Configuration**

To revert all timers to their default values:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no timers

To revert the specified timer to its default value:
::

    dnRouter(cfg-protocols-bgp-group)# no timers keep-alive

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/ttl-security.rst

network-services vrf instance protocols bgp neighbor-group ttl-security
-----------------------------------------------------------------------

**Minimum user role:** operator

Imposes eBGP TTL security per rfc5082.
When ttl-security is set for an EBGP neighbor, the following is expected for the given neighbor BGP IP/TCP session:
- Any egress packet is set with a TTL 255.
- Any ingress packet is checked for a TTL validity. Only packets with a TTL greater or equal to min-ttl are accepted, otherwise dropped.

The default system behavior is min-ttl = 255, imposing that eBGP neighbor must be directly connected (one hop apart).

Te user may impose a different min-ttl value to support the eBGP neighbors that are not directly connected.
In case min-ttl = 255 ttl-security keeps assumption of the eBGP neighbor being directly connected, regardless of the min-ttl value, as such:
- The neighbor address is expected to be a connected route.
- The egress interface is imposes per the neighbor address.
- In case BFD is requested, a single-hop BFD session is requested (unless a specific BFD-type is set).
In case min-ttl < 255 MH-EBGP session is assumed resulting:
- An update-source is required.
- The neighbor address is not bound to be a connected route.
- The egress interface is selected per the neighbor address routing solution.
- In case BFD is requested, a multi-hop BFD session is requested (unless a specific BFD-type is set).

**Command syntax: ttl-security [admin-state]** min-ttl [min-ttl]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- The expected behavior is that both the BGP session sides are configured with ttl-security.

- Configuration is only valid for the eBGP neighbor. Commit validation is required (same as imposed for eBGP-multihop).

- Configuration is possible only with eBGP-multihop = 1. Commit validation is required.

- Applies for both IPv4 neighbors and IPv6 neighbors. The hop-count is handled instead of TTL for IPv6.

- When applied on a group, this property is inherited by all the group members. Applying this property on a neighbor within a group overrides the group settings.

- Neighbors within a neighbor-group derive the neighbor-group configuration (i.e has no default config) or can have a unique setting from the group.

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                                      | Range        | Default  |
+=============+==================================================================================+==============+==========+
| admin-state | Enable ttl security for a given eBGP neighbor                                    | | enabled    | disabled |
|             |                                                                                  | | disabled   |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+
| min-ttl     | Allow received ttl lower than 255, the allowed received ttl will be              | 1-255        | 255      |
|             | greater-equal to (255-range)                                                     |              |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# ttl-security enabled
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP_GROUP
    dnRouter(cfg-protocols-bgp-group)# ttl-security enabled min-ttl 254

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP_GROUP
    dnRouter(cfg-protocols-bgp-group)# ttl-security enabled min-ttl 252
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-protocols-bgp-neighbor)# ttl-security enabled min-ttl 255


**Removing Configuration**

To revert configuration to default behavior the configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no ttl-security

To revert min-ttl to default behavior
::

    dnRouter(cfg-protocols-bgp-neighbor)# no ttl-security enabled min-ttl 255

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/update-source.rst

network-services vrf instance protocols bgp neighbor-group update-source
------------------------------------------------------------------------

**Minimum user role:** operator

The update-source parameter is a mandatory configuration for every multihop BGP session. This includes both iBGP and MH-eBGP.

To specify the source address to use for the BGP session to a neighbor, peer group, or neighbor within the peer group:

**Command syntax: update-source [source-address]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- Changing the configuration will cause the BGP session to restart.

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+----------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter      | Description                                                                      | Range | Default |
+================+==================================================================================+=======+=========+
| source-address | specify the source address to use for the BGP session to this neighbor Can       | \-    | \-      |
|                | either be an ipv4|6-address or a loopback interface name when using loopback     |       |         |
|                | interface name, bgp uses the lo ip address                                       |       |         |
+----------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# update-source lo0

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# update-source 1.1.1.1

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# update-source 100.70.1.45

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# update-source 2001:2::65

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# update-source lo1

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# update-source ge100-1/2/1

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# update-source bundle-2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# update-source bundle-1.1

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# update-source 2001:2::65
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# update-source 1.1.1.1


**Removing Configuration**

To revert the source address to the default value (the BGP router-id):
::

    dnRouter(cfg-protocols-bgp-neighbor)# no update-source

::

    dnRouter(cfg-protocols-bgp-group)# no update-source

::

    dnRouter(cfg-bgp-group-neighbor)# no update-source

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor-group/weight.rst

network-services vrf instance protocols bgp neighbor-group weight
-----------------------------------------------------------------

**Minimum user role:** operator

To specify a weight that the BGP router will add to routes that are received from the specified BGP neighbor, BGP peer group, or BGP neighbor in a peer group:

**Command syntax: weight [weight]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor-group
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- To apply new neighbor weight settings, restart the bgp neighbor session. A user can invoke clear soft to avoid any traffic impact.

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+---------+---------+
| Parameter | Description                                                                      | Range   | Default |
+===========+==================================================================================+=========+=========+
| weight    | Specifies a weight that the device will add to routes that are received from the | 0-65535 | 0       |
|           | specified BGP neighbor.                                                          |         |         |
+-----------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# weight 50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# weight 10

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# weight 10
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# weight 50


**Removing Configuration**

To revert to the default weight value:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no weight

::

    dnRouter(cfg-protocols-bgp-group)# no weight

::

    dnRouter(cfg-bgp-group-neighbor)# no weight

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/address-family.rst

network-services vrf instance protocols bgp neighbor address-family
-------------------------------------------------------------------

**Minimum user role:** operator

The address-family applies to a neighbor, neighbor-group, and a neighbor within a neighbor-group. A neighbor within a neighbor-group inherits all address-families configured for the neighbor-group (a neighbor-group must be configured with at least one address-family, regardless if it has neighbors within it. To configure an address-family to be supported by BGP for the neighbor:

**Command syntax: address-family [neighbor-address-family]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- Changing the configuration will cause the BGP session to restart.

- When FlowSpec SAFI is applied, the received FlowSpec rules are imposed on all FlowSpec enabled interfaces.

- Notice the change in prompt.

- When using OSPFv3 or IPv6-based BGP peering within a routing instance, you must explicitly configure a router ID (router-id) for that specific instance. The main routing instance's router ID is not inherited by other instances. Even if only IPv6 protocols are used, a 32-bit router ID is still required, as IPv6 routing protocols rely on it for establishing adjacencies. The router ID must be a non-zero 32-bit (4-octet) unsigned integer. While it's common to use an IPv4 address as the router ID, this is not mandatory - it doesn’t need to be a valid or routable address, just a unique 32-bit value within the routing domain. Failing to configure a router ID in an IPv6 OSPF or BGP instance will result in the protocol defaulting to 0.0.0.0, which is invalid. This will prevent adjacency formation and BGP session establishment.

**Parameter table**

+-------------------------+---------------+--------------------------+---------+
| Parameter               | Description   | Range                    | Default |
+=========================+===============+==========================+=========+
| neighbor-address-family | afi-safi type | | ipv4-unicast           | \-      |
|                         |               | | ipv6-unicast           |         |
|                         |               | | ipv4-labeled-unicast   |         |
|                         |               | | ipv6-labeled-unicast   |         |
|                         |               | | ipv4-vpn               |         |
|                         |               | | ipv6-vpn               |         |
|                         |               | | link-state             |         |
|                         |               | | ipv4-flowspec          |         |
|                         |               | | ipv6-flowspec          |         |
|                         |               | | ipv4-rt-constrains     |         |
|                         |               | | ipv4-multicast         |         |
|                         |               | | l2vpn-evpn             |         |
|                         |               | | l2vpn-vpls             |         |
+-------------------------+---------------+--------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family link-state
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family link-state
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-flowspec
    dnRouter(cfg-group-neighbor-afi)# exit
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv6-flowspec
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group FLOWSPEC_V4
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-flowspec
    dnRouter(cfg-group-neighbor-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-flowspec
    dnRouter(cfg-group-neighbor-afi)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-rt-constrains
    dnRouter(cfg-bgp-neighbor-afi)#


**Removing Configuration**

To remove the address-family configuration:
::

    dnRouter(cfg-protocols-bgp-group)# no address-family ipv6-unicast

::

    dnRouter(cfg-protocols-bgp-neighbor)# no address-family ipv4-unicast

::

    dnRouter(cfg-bgp-group-neighbor)# no address-family ipv4-flowspec

**Command History**

+---------+-------------------------------------------------------------------------------------------------------------------+
| Release | Modification                                                                                                      |
+=========+===================================================================================================================+
| 6.0     | Command introduced                                                                                                |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 10.0    | Added support for link-state AFI                                                                                  |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 13.0    | Added support for FlowSpec SAFI                                                                                   |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 16.1    | Added support for IPv4 Route Target Constrain SAFI                                                                |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 16.1    | Added support for IPv4 Multicast SAFI. The command is now supported also under the network-services/vrf hierarchy |
+---------+-------------------------------------------------------------------------------------------------------------------+
| 17.2    | Added support for l2vpn-evpn in the range                                                                         |
+---------+-------------------------------------------------------------------------------------------------------------------+
| TBD     | Added ipv4/6-labeled-unicast as separate safi                                                                     |
+---------+-------------------------------------------------------------------------------------------------------------------+
| TBD     | Added support for l2vpn-vpls in the range                                                                         |
+---------+-------------------------------------------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/allow-as-in.rst

network-services vrf instance protocols bgp neighbor address-family allow-as-in
-------------------------------------------------------------------------------

**Minimum user role:** operator

The following command instructs the BGP router whether or not to disable the AS PATH check function for routes learned from the specific neighbor, so as not to reject routes that contain the recipient's AS number.

**Command syntax: allow-as-in [admin-state]** duplicate [as-duplicate-number]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command is applicable to eBGP and iBGP neighbors.

**Parameter table**

+---------------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter           | Description                                                                      | Range        | Default  |
+=====================+==================================================================================+==============+==========+
| admin-state         | enable this configuration                                                        | | enabled    | disabled |
|                     |                                                                                  | | disabled   |          |
+---------------------+----------------------------------------------------------------------------------+--------------+----------+
| as-duplicate-number | Specifies the number of times that the AS path of a received route may contain   | 1-10         | 1        |
|                     | the recipient BGP speaker's AS number and still be accepted                      |              |          |
+---------------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# allow-as-in enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-vpn
    dnRouter(cfg-protocols-bgp-neighbor)# allow-as-in enabled duplicate 3

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# allow-as-in enabled duplicate 10

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# allow-as-in disabled duplicate 10
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# allow-as-in enabled duplicate 2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# allow-as-in enabled duplicate 10
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# allow-as-in disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.3
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-flowspec
    dnRouter(cfg-bgp-neighbor-afi)# allow-as-in enabled


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-bgp-neighbor-afi)# no allow-as-in duplicate

::

    dnRouter(cfg-bgp-group-afi)# no allow-as-in

::

    dnRouter(cfg-group-neighbor-afi)# no allow-as-in

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/as-loop-check.rst

network-services vrf instance protocols bgp neighbor address-family as-loop-check
---------------------------------------------------------------------------------

**Minimum user role:** operator

When BGP updates travel through different Autonomous Systems (AS), each eBGP router prepends its AS number to the AS PATH attribute of the BGP update message. If a router receives an update that includes its own AS number in the AS PATH attribute, it will discard it by default to prevent loops. However, In some cases, you may want to allow such updates.

<INSERT 06_protocols_bgp>

In the example above, the autonomous system at the edge is split. Therefore, when R1 advertises network 172.16.1.0/8, it prepends its AS number (65000) to the AS PATH attribute of the update message and forwards it to R3. R3 adds its AS number (65010) and forwards the update to R5. R5, however, sees that the AS number (65000) of its BGP neighbor is in the AS PATH of the update message and will refrain from sending the update to R7. To prevent this from happening, you may want to disable the AS check on R5 and allow it to send the update to R7. However, R7 will see its own AS number (65000) in the update message and it will discard the update.

NOTE: allow-as-in must be enabled on the receiving end of the BGP update (i.e. on R7 in the above example), otherwise it will drop any update that contains its own AS number. See bgp neighbor address-family allow-as-in.

**Command syntax: as-loop-check [as-loop-check]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- allow-as-in must be enabled on the receiving end of the BGP update, otherwise it will drop any update that contains its own AS number. See "bgp neighbor address-family allow-as-in".

- This command applies only to eBGP neighbors.

- If both as-loop-check and as-override are enabled for the same neighbor, as-loop-check will be ignored as the neighbor AS is expected to be replaced.

**Parameter table**

+---------------+---------------------------------------------------------------------------+--------------+---------+
| Parameter     | Description                                                               | Range        | Default |
+===============+===========================================================================+==============+=========+
| as-loop-check | do not advertise route if neighbor as number is part of the route as-path | | enabled    | enabled |
|               |                                                                           | | disabled   |         |
+---------------+---------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# as-loop-check disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# as-loop-check disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# as-loop-check disabled
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# as-loop-check enabled


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-bgp-group-afi)# no as-loop-check

::

    dnRouter(cfg-bgp-neighbor-afi)# no as-loop-check

::

    dnRouter(cfg-group-neighbor-afi)# no as-loop-check

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 11.0    | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/as-override.rst

network-services vrf instance protocols bgp neighbor address-family as-override
-------------------------------------------------------------------------------

**Minimum user role:** operator

The following command replaces the AS number of the originating device with the AS number of the sending BGP device.

**Command syntax: as-override**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- AS-override is supported for eBGP and iBGP neighbors

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# as-override
    dnRouter(cfg-bgp-neighbor-afi)# exit
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-flowspec
    dnRouter(cfg-bgp-neighbor-afi)# as-override

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# as-override


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-bgp-neighbor-afi)# no as-override

::

    dnRouter(cfg-bgp-group-afi)# no as-override

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/attribute-unchanged.rst

network-services vrf instance protocols bgp neighbor address-family attribute-unchanged
---------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command enables BGP to send updates to eBGP peers with the attribute unchanged.

**Command syntax: attribute-unchanged** next-hop med as-path

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- If you do not specify attributes, all attributes will remain unchanged.

- For flowspec SAFI, the next-hop attribute remains unchanged by default.

**Parameter table**

+-----------+--------------------+---------+---------+
| Parameter | Description        | Range   | Default |
+===========+====================+=========+=========+
| next-hop  | next-hop attribute | Boolean | False   |
+-----------+--------------------+---------+---------+
| med       | med attribute      | Boolean | False   |
+-----------+--------------------+---------+---------+
| as-path   | as-path attribute  | Boolean | False   |
+-----------+--------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# attribute-unchanged

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# attribute-unchanged next-hop med

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-bgp-neighbor-afi)# attribute-unchanged next-hop med as-path

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-unicast
    dnRouter(cfg-bgp-group-afi)# attribute-unchanged med

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-unicast
    dnRouter(cfg-bgp-group-afi)# attribute-unchanged as-path


**Removing Configuration**

To disable this option for all attributes:
::

    dnRouter(cfg-bgp-neighbor-afi)# no attribute-unchanged

::

    dnRouter(cfg-bgp-neighbor-afi)# no attribute-unchanged med next-hop

::

    dnRouter(cfg-protocols-bgp-group)# no attribute-unchanged med next-hop

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 11.0    | Removed the as-path option       |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+
| 17.1    | Added as-path support            |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/capability_orf.rst

network-services vrf instance protocols bgp neighbor address-family capability orf
----------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the BGP router to advertise outbound route filter (ORF) capabilities to a neighbor or a peer group:

**Command syntax: capability orf [capability-orf]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- This command applies to unicast sub-address-family only.

- Reconfiguring capability orf state will result in bgp session reset

**Parameter table**

+----------------+----------------------------------------------------------------------------------+------------------+----------+
| Parameter      | Description                                                                      | Range            | Default  |
+================+==================================================================================+==================+==========+
| capability-orf | Advertises outbound route filter (ORF) capabilities to peer routers enabled -    | | enabled        | disabled |
|                | enables the ORF prefix list capability in both receive and send mode             | | disabled       |          |
|                | receive-only - enables the ORF prefix list capability in receive mode only       | | send-only      |          |
|                | send-only - enables the ORF prefix list capability in send mode only disabled -  | | receive-only   |          |
|                | disables ORF capability                                                          |                  |          |
+----------------+----------------------------------------------------------------------------------+------------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# capability orf enabled
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group GROUP_1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-unicast
    dnRouter(cfg-bgp-group-afi)# capability orf receive-only
    dnRouter(cfg-protocols-bgp-group)# neighbor 1.1.1.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# capability orf send-only
    dnRouter(cfg-protocols-bgp-group)# neighbor 2.2.2.2
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# capability orf disabled


**Removing Configuration**

To disable this option:
::

    dnRouter(cfg-bgp-group-afi)# no capability orf

::

    dnRouter(cfg-bgp-neighbor-afi)# no capability orf

::

    dnRouter(cfg-group-neighbor-afi)# no capability orf

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 15.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/dampening.rst

network-services vrf instance protocols bgp neighbor address-family dampening
-----------------------------------------------------------------------------

**Minimum user role:** operator

To instruct the router whether or not to enable route flap dampening suppression from neighbor, peer group or a neighbor in a peer group:

**Command syntax: dampening [dampening]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command is only relevant if global address-family dampening is enabled. See "bgp address-family dampening"

**Parameter table**

+-----------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter | Description                                                                      | Range        | Default |
+===========+==================================================================================+==============+=========+
| dampening | route flap dampening supersession from neighbor, thus disables the global        | | enabled    | enabled |
|           | dampening configuration for neighbor or group                                    | | disabled   |         |
+-----------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# dampening enabled
    dnRouter(cfg-protocols-bgp-afi)# exit
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# dampening enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# address-family ipv6-unicast
    dnRouter(cfg-protocols-bgp-afi)# dampening enabled
    dnRouter(cfg-protocols-bgp-afi)# exit
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# dampening disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# dampening enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# dampening enabled
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# dampening disabled


**Removing Configuration**

To revert dampening to its default state:
::

    dnRouter(cfg-bgp-group-afi)# no dampening

::

    dnRouter(cfg-bgp-neighbor-afi)# no dampening

::

    dnRouter(cfg-group-neighbor-afi)# no dampening

**Command History**

+---------+---------------------------------------------------------------------------------+
| Release | Modification                                                                    |
+=========+=================================================================================+
| 6.0     | Command introduced                                                              |
+---------+---------------------------------------------------------------------------------+
| 11.4    | Changed the default admin-state from the global AFI configuration to "Enabled". |
+---------+---------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/default-originate-policy.rst

network-services vrf instance protocols bgp neighbor address-family default-originate
-------------------------------------------------------------------------------------

**Minimum user role:** operator

To enable a BGP router to forward the default route 0.0.0.0 to a BGP neighbor or a BGP peer group:

**Command syntax: default-originate** policy [policy]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- This command is only applicable to unicast sub-address-families.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter | Description                                                                      | Range            | Default |
+===========+==================================================================================+==================+=========+
| policy    | Optionally injects the default route conditionally, depending on the match       | | string         | \-      |
|           | conditions in the route map                                                      | | length 1-255   |         |
+-----------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# default-originate

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# default-originate policy POL_NAME

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-rt-constrains
    dnRouter(cfg-bgp-neighbor-afi)# default-originate


**Removing Configuration**

To disable this option:
::

    dnRouter(cfg-bgp-group-afi)# no default-originate

::

    dnRouter(cfg-bgp-neighbor-afi)# no default-originate

**Command History**

+---------+----------------------------------------------------+
| Release | Modification                                       |
+=========+====================================================+
| 6.0     | Command introduced                                 |
+---------+----------------------------------------------------+
| 16.1    | Added support for IPv4 Route Target Constrain SAFI |
+---------+----------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/extended-next-hop.rst

network-services vrf instance protocols bgp neighbor address-family extended-next-hop
-------------------------------------------------------------------------------------

**Minimum user role:** operator

Extended next-hop capability allows usage of an IPv6 address next-hop for IPv4 NLRIs per RFC8950.
If the capability is supported on both ends, the DNOS router will advertise, by default, the IPv6 BGP session source address as the next-hop value for IPv4 routes.
To enable extended next-hop capability:"

**Command syntax: extended-next-hop [extended-next-hop]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- Configuration valid only for ipv4 address families

- For neighbors within a group, the "no" command reverts the neighbor to the group setting.

- Reconfiguration will cause session restart (capability change)

**Parameter table**

+-------------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter         | Description                                                                      | Range        | Default  |
+===================+==================================================================================+==============+==========+
| extended-next-hop | Support for extended next-hop capability. Allowing usage of ipv6 address nexthop | | enabled    | disabled |
|                   | for ipv4 NLRIs. RFC 8950                                                         | | disabled   |          |
+-------------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# extended-next-hop enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv4-unicast
    dnRouter(cfg-group-group-afi)# extended-next-hop enabled
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66


**Removing Configuration**

To revert extended-next-hop to default behavior:
::

    dnRouter(cfg-group-neighbor-afi)# no extended-next-hop

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/long-lived-graceful-restart/admin-state.rst

network-services vrf instance protocols bgp neighbor address-family long-lived-graceful-restart admin-state
-----------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enable/disable long-lived-graceful-restart feature on a neighbor/neighbor-group

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family long-lived-graceful-restart

**Note**

- The command is applicable to BGP neighbor and neighbor-groups

- The Graceful restart capability must be enabled for the LLGR to be enabled

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                                      | Range        | Default  |
+=============+==================================================================================+==============+==========+
| admin-state | The administrative state of the long lived graceful restart feature for the      | | enabled    | disabled |
|             | specific neighbor/neighbor-group. When enabled, peer will be configured with     | | disabled   |          |
|             | long lived graceful restart parameters.                                          |              |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# long-lived-graceful-restart
    dnRouter(cfg-neighbor-afi-llgr)# admin-state enabled


**Removing Configuration**

To revert all BGP long-lived-graceful-restart parameters to their default values: 
::

    dnRouter(cfg-neighbor-afi-llgr)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/long-lived-graceful-restart/long-lived-graceful-restart.rst

network-services vrf instance protocols bgp neighbor address-family long-lived-graceful-restart
-----------------------------------------------------------------------------------------------

**Minimum user role:** operator

Long lived graceful restart enables a BGP router to indicate its ability to preserve its forwarding state during BGP restart. During session initiation, the BGP router informs its peer that it has long lived graceful restart capability. If the BGP session is lost during the restart, the peers mark all the associated routes as stale. However, they do not remove these routes and temporarily continue to use them to make forwarding decisions. Thus, no packets are lost while the BGP process is waiting for convergence of the routing information with the BGP peers.

When the restarting router is back up, the peers wait for the configured amount of time before they delete the stale routes, allowing the router time to converge. When the restarting router sends an end-of-RIB flag notifying its peers that it has converged, or if no end-of-RIB flag is received, but the timer expires, the peers delete any saved stale routes.

Long lived graceful restart is disabled by default. To configure the long-lived-graceful-restart parameters, enable the admin-state for a given afi/safi on a neighbor and a global capability flag for a certain BGP

**Command syntax: long-lived-graceful-restart**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- Notice the change in prompt.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# long-lived-graceful-restart
    dnRouter(cfg-neighbor-afi-llgr)#


**Removing Configuration**

To revert to the default long lived graceful restart values:
::

    dnRouter(cfg-bgp-neighbor-afi)# no long-lived-graceful-restart

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19      | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/long-lived-graceful-restart/stalepath-time.rst

network-services vrf instance protocols bgp neighbor address-family long-lived-graceful-restart stalepath-time units
--------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Long lived graceful restart enables a BGP router to indicate its ability to preserve its forwarding state during BGP restart. During session initiation, the BGP router informs its peer that it has long lived graceful restart capability. If the BGP session is lost during the restart, the peers mark all the associated routes as stale. However, they do not remove these routes and temporarily continue to use them to make forwarding decisions. Thus, no packets are lost while the BGP process is waiting for convergence of the routing information with the BGP peers.

When the restarting router is back up, the peers wait for the configured amount of time before they delete the stale routes, allowing the router time to converge. When the restarting router sends an end-of-RIB flag notifying its peers that it has converged, or if no end-of-RIB flag is received, but the timer expires, the peers delete any saved stale routes.

To configure the graceful-restart stalepath-time:

**Command syntax: stalepath-time [time] units [units]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family long-lived-graceful-restart

**Parameter table**

+-----------+---------------------------------------------------------------------------------+-------------+---------+
| Parameter | Description                                                                     | Range       | Default |
+===========+=================================================================================+=============+=========+
| time      | 1..16777215 for seconds 1..279620 for minutes 1..4660 for hours 1..194 for days | 1-16777215  | 1       |
+-----------+---------------------------------------------------------------------------------+-------------+---------+
| units     | time resolution                                                                 | | seconds   | hours   |
|           |                                                                                 | | minutes   |         |
|           |                                                                                 | | hours     |         |
|           |                                                                                 | | days      |         |
+-----------+---------------------------------------------------------------------------------+-------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# long-lived-graceful-restart
    dnRouter(cfg-neighbor-afi-llgr)# stalepath-time 400 units seconds


**Removing Configuration**

To revert to the default stalepath-time value:
::

    dnRouter(cfg-neighbor-afi-llgr)# no stalepath-time

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19      | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/maximum-prefix/exceed-action.rst

network-services vrf instance protocols bgp neighbor address-family maximum-prefix exceed-action
------------------------------------------------------------------------------------------------

**Minimum user role:** operator


To instruct BGP what action to take when the maximum allowed number of prefixes has been exceeded.

 - warning only - (Default behavior) maximum-prefix-number exceeded - restart the neighbor session. The session will restart after the restart-interval.
 - restart - maximum-prefix-number exceeded - restart the neighbor session. The session will restart after the restart-interval.

**Command syntax: exceed-action [action]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor-group neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- When the prefix number drops below the maximum prefix- number threshold, a clear message is sent.

**Parameter table**

+-----------+--------------------------------------------------------+------------------+--------------+
| Parameter | Description                                            | Range            | Default      |
+===========+========================================================+==================+==============+
| action    | action to be taken when maximum-prefix-number exceeded | | warning-only   | warning-only |
|           |                                                        | | restart        |              |
+-----------+--------------------------------------------------------+------------------+--------------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)# exceed-action warning-only


**Removing Configuration**

To revert to the default action (warning-only):
::

    dnRouter(cfg-neighbor-afi-maximum-prefix)# no exceed-action

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/maximum-prefix/limit.rst

network-services vrf instance protocols bgp neighbor address-family maximum-prefix limit
----------------------------------------------------------------------------------------

**Minimum user role:** operator

"Specifies the maximum number of IP network prefixes (routes) that can be learned from a specified neighbor or neighbor group."

**Command syntax: limit [maximum-prefix-number]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor-group neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix

**Note**
Neighbors within a neighbor-group derive the neighbor-group configuration or can have a unique setting from the group.

**Parameter table**

+-----------------------+----------------------+--------------+---------+
| Parameter             | Description          | Range        | Default |
+=======================+======================+==============+=========+
| maximum-prefix-number | 0 used for unlimited | 0-4294967295 | 0       |
+-----------------------+----------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)# limit 1000000000


**Removing Configuration**

To revert to default:
::

    dnRouter(cfg-neighbor-afi-maximum-prefix)# no limit

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/maximum-prefix/maximum-prefix.rst

network-services vrf instance protocols bgp neighbor address-family maximum-prefix
----------------------------------------------------------------------------------

**Minimum user role:** operator

By setting the maximum-prefix attribute, you control the number of prefixes that can be received from a neighbor. This is useful when a router starts receiving more routes than its memory can take.

To limit the number of routes that can be learned from the neighbor, peer group, or neighbor in a peer group:

**Command syntax: maximum-prefix**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**
When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)#


**Removing Configuration**

To revert to the default maximum-prefixes:
::

    dnRouter(cfg-bgp-neighbor-afi)# no maximum-prefix

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/maximum-prefix/restart-interval.rst

network-services vrf instance protocols bgp neighbor address-family maximum-prefix restart-interval
---------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Defines the restart interval when an exceed-action value is set to 'restart'.

**Command syntax: restart-interval [restart-interval]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor-group neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix

**Note**
When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+------------------+-------------+---------+---------+
| Parameter        | Description | Range   | Default |
+==================+=============+=========+=========+
| restart-interval | minutes     | 1-65535 | \-      |
+------------------+-------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)# restart-interval 100


**Removing Configuration**

To remove the restart interval:
::

    dnRouter(cfg-neighbor-afi-maximum-prefix)# no restart-interval

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/maximum-prefix/threshold.rst

network-services vrf instance protocols bgp neighbor address-family maximum-prefix threshold
--------------------------------------------------------------------------------------------

**Minimum user role:** operator

Specifies the percentage of the value specified by *maximum-prefix-number* that causes a log message to be generated.

**Command syntax: threshold [syslog-threshold]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor address-family maximum-prefix
- protocols bgp neighbor-group address-family maximum-prefix
- protocols bgp neighbor-group neighbor address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group address-family maximum-prefix
- network-services vrf instance protocols bgp neighbor-group neighbor address-family maximum-prefix

**Note**
When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+------------------+-------------+-------+---------+
| Parameter        | Description | Range | Default |
+==================+=============+=======+=========+
| syslog-threshold | percentage  | 1-100 | 100     |
+------------------+-------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# maximum-prefix
    dnRouter(cfg-neighbor-afi-maximum-prefix)# threshold 75


**Removing Configuration**

To revert to the default maximum-prefixes:
::

    dnRouter(cfg-neighbor-afi-maximum-prefix)# no threshold

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/nexthop_ipv4.rst

network-services vrf instance protocols bgp neighbor address-family nexthop
---------------------------------------------------------------------------

**Minimum user role:** operator

This command sets the next-hop of the advertised route to be the BGP router's address.

To set the advertised route's next-hop value to be the BGP router's address:

**Command syntax: nexthop [ipv4-address]** force [force]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- Changing the configuration will cause the BGP session to restart.

- For flowspec SAFI, imposing a nexthop change might affect the flowspec action rules. By default, the "nexthop" attribute doesn't change for flowspec NLRI in either eBGP or iBGP sessions.

- For eBGP sessions and any BGP MPLS session, the nexthop value is set to "nexthop self" by default.

- For neighbors within a group, the "no" command reverts the neighbor to the group setting.

- The address type must match the address family.

**Parameter table**

+--------------+-----------------------------------------------------------+--------------+----------+
| Parameter    | Description                                               | Range        | Default  |
+==============+===========================================================+==============+==========+
| ipv4-address | set specific ip address to be used as the nexthop address | A.B.C.D      | \-       |
+--------------+-----------------------------------------------------------+--------------+----------+
| force        | apply nexthop setting even when acting as route reflector | | enabled    | disabled |
|              |                                                           | | disabled   |          |
+--------------+-----------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# nexthop 100.70.1.45

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 5000
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 120.92.1.50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv4-unicast
    dnRouter(cfg-group-group-afi)# nexthop 1.1.1.1
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 120.92.1.50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv6-unicast
    dnRouter(cfg-group-group-afi)# nexthop 1:1::1:1
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 0:ffff::120

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 1.2.3.4
    dnRouter(cfg-protocols-bgp-neighbor)# address-family flowspec
    dnRouter(cfg-bgp-neighbor-afi)# nexthop 95.70.1.13


**Removing Configuration**

To remove the nexthop settings:
::

    dnRouter(cfg-group-neighbor-afi)# no nexthop

To revert force to the default state:
::

    dnRouter(cfg-bgp-group-afi)# no nexthop self force

**Command History**

+---------+-----------------------------------------------------------------------------------------------------------------------+
| Release | Modification                                                                                                          |
+=========+=======================================================================================================================+
| 6.0     | Command introduced                                                                                                    |
+---------+-----------------------------------------------------------------------------------------------------------------------+
| 11.0    | Added option to enter a specific IP address as nexthop Added option to configure nexthop for neighbors within a group |
+---------+-----------------------------------------------------------------------------------------------------------------------+
| 16.1    | Added support for multicast SAFI                                                                                      |
+---------+-----------------------------------------------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/nexthop_ipv6.rst

network-services vrf instance protocols bgp neighbor address-family nexthop
---------------------------------------------------------------------------

**Minimum user role:** operator

This command sets the next-hop of the advertised route to be the BGP router's address.

To set the advertised route's next-hop value to be the BGP router's address:

**Command syntax: nexthop [ipv6-address]** force [force]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- Changing the configuration will cause the BGP session to restart.

- For flowspec SAFI, imposing a nexthop change might affect the flowspec action rules. By default, the "nexthop" attribute doesn't change for flowspec NLRI in either eBGP or iBGP sessions.

- For eBGP sessions and any BGP MPLS session, the nexthop value is set to "nexthop self" by default.

- For neighbors within a group, the "no" command reverts the neighbor to the group setting.

- The address type must match the address family.

**Parameter table**

+--------------+-----------------------------------------------------------+--------------+----------+
| Parameter    | Description                                               | Range        | Default  |
+==============+===========================================================+==============+==========+
| ipv6-address | set specific ip address to be used as the nexthop address | X:X::X:X     | \-       |
+--------------+-----------------------------------------------------------+--------------+----------+
| force        | apply nexthop setting even when acting as route reflector | | enabled    | disabled |
|              |                                                           | | disabled   |          |
+--------------+-----------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# nexthop 100.70.1.45

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 5000
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 120.92.1.50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv4-unicast
    dnRouter(cfg-group-group-afi)# nexthop 1.1.1.1
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 120.92.1.50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65000
    dnRouter(cfg-group-group-afi)# address-family ipv6-unicast
    dnRouter(cfg-group-group-afi)# nexthop 1:1::1:1
    dnRouter(cfg-group-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# nexthop 0:ffff::120

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 1.2.3.4
    dnRouter(cfg-protocols-bgp-neighbor)# address-family flowspec
    dnRouter(cfg-bgp-neighbor-afi)# nexthop 95.70.1.13


**Removing Configuration**

To remove the nexthop settings:
::

    dnRouter(cfg-group-neighbor-afi)# no nexthop

To revert force to the default state:
::

    dnRouter(cfg-bgp-group-afi)# no nexthop self force

**Command History**

+---------+-----------------------------------------------------------------------------------------------------------------------+
| Release | Modification                                                                                                          |
+=========+=======================================================================================================================+
| 6.0     | Command introduced                                                                                                    |
+---------+-----------------------------------------------------------------------------------------------------------------------+
| 11.0    | Added option to enter a specific IP address as nexthop Added option to configure nexthop for neighbors within a group |
+---------+-----------------------------------------------------------------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/orf-prefix-list-ipv4.rst

network-services vrf instance protocols bgp neighbor address-family orf-prefix-list-ipv4
----------------------------------------------------------------------------------------

**Minimum user role:** operator

The Prefix-list is sent when the ORF send capability is enabled. To configure the prefix list to be sent to the peer to be used as an outbound-route-filter:

**Command syntax: orf-prefix-list-ipv4 [ipv4-prefix-list]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- The prefix-list type (IPv4 / IPv6) must match the address-family type.

- The prefix-list must use a configured prefix-list from the routing-policy. It can be within the same commit.

- This command is only valid for unicast sub-address families.

- Neighbors within a neighbor-group can use the neighbor-group configuration or a configuration from the group.

**Parameter table**

+------------------+---------------------------------------------------+------------------+---------+
| Parameter        | Description                                       | Range            | Default |
+==================+===================================================+==================+=========+
| ipv4-prefix-list | IPv4 ORF prefix list sent to ORF capable neighbor | | string         | \-      |
|                  |                                                   | | length 1-255   |         |
+------------------+---------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# orf-prefix-list ORF_PL_IPv4
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group GROUP_1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-unicast
    dnRouter(cfg-bgp-group-afi)# orf-prefix-list ORF_PL_IPv4
    dnRouter(cfg-protocols-bgp-group)# neighbor 1.1.1.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# orf-prefix-list ORF_PL_IPv6
    dnRouter(cfg-protocols-bgp-group)# neighbor 2:2::2:2
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# orf-prefix-list ORF_PL_IPv6


**Removing Configuration**

To remove the prefix-list:
::

    dnRouter(cfg-bgp-neighbor-afi)# no orf-prefix-list

::

    dnRouter(cfg-bgp-group-afi)# no orf-prefix-list

::

    dnRouter(cfg-group-neighbor-afi)# no orf-prefix-list

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/orf-prefix-list-ipv6.rst

network-services vrf instance protocols bgp neighbor address-family orf-prefix-list-ipv6
----------------------------------------------------------------------------------------

**Minimum user role:** operator

The Prefix-list is sent when the ORF send capability is enabled. To configure the prefix list to be sent to the peer to be used as an outbound-route-filter:

**Command syntax: orf-prefix-list-ipv6 [ipv6-prefix-list]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- The prefix-list type (IPv4 / IPv6) must match the address-family type.

- The prefix-list must use a configured prefix-list from the routing-policy. It can be within the same commit.

- This command is only valid for unicast sub-address families.

- Neighbors within a neighbor-group can use the neighbor-group configuration or a configuration from the group.

**Parameter table**

+------------------+---------------------------------------------------+------------------+---------+
| Parameter        | Description                                       | Range            | Default |
+==================+===================================================+==================+=========+
| ipv6-prefix-list | IPv4 ORF prefix list sent to ORF capable neighbor | | string         | \-      |
|                  |                                                   | | length 1-255   |         |
+------------------+---------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# orf-prefix-list ORF_PL_IPv4
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group GROUP_1
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-unicast
    dnRouter(cfg-bgp-group-afi)# orf-prefix-list ORF_PL_IPv4
    dnRouter(cfg-protocols-bgp-group)# neighbor 1.1.1.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# orf-prefix-list ORF_PL_IPv6
    dnRouter(cfg-protocols-bgp-group)# neighbor 2:2::2:2
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# orf-prefix-list ORF_PL_IPv6


**Removing Configuration**

To remove the prefix-list:
::

    dnRouter(cfg-bgp-neighbor-afi)# no orf-prefix-list

::

    dnRouter(cfg-bgp-group-afi)# no orf-prefix-list

::

    dnRouter(cfg-group-neighbor-afi)# no orf-prefix-list

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/policy-in.rst

network-services vrf instance protocols bgp neighbor address-family policy in
-----------------------------------------------------------------------------

**Minimum user role:** operator

To apply a route map to a neighbor or peer group:

**Command syntax: policy [policy-in]** [, policy-in, policy-in] **in**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- If a policy is configured for a group, you cannot disable it for a neighbor within the group. You must explicitly set a different policy to achieve a different behavior from the group. You may even attach an empty policy.

- Can set multiple policies. In case multiple policies are set, policies are evaluated one after the other according to the user input order

- When setting a new policy, the policy will be appended to the existing attached policies

- To remove a policy, the user must specify the name of the policy to be remvoed

- To remove all policies, the user must specify all attached policy names

- To replace an attached policy, the user will need to first remove and than add a new policy. Can be performed in the same commit. the policy order imposes the functional behavior.

**Parameter table**

+-----------+---------------------------------------+------------------+---------+
| Parameter | Description                           | Range            | Default |
+===========+=======================================+==================+=========+
| policy-in | applies the filter in incoming routes | | string         | \-      |
|           |                                       | | length 1-255   |         |
+-----------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy in
    dnRouter(cfg-protocols-bgp-neighbor)# address-family flowspec
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy in

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# policy MyPolicy in

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# policy GroupPolicy in
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# policy NeighborPolicy in

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy_1,MyPolicy_2 in


**Removing Configuration**

To disable the route map policy:
::

    dnRouter(cfg-bgp-group-afi)# no policy MyPolicy in

::

    dnRouter(cfg-bgp-neighbor-afi)# no policy MyPolicy in

::

    dnRouter(cfg-group-neighbor-afi)# no policy NeighborPolicy in

**Command History**

+---------+----------------------------------------------------------------+
| Release | Modification                                                   |
+=========+================================================================+
| 6.0     | Command introduced                                             |
+---------+----------------------------------------------------------------+
| 11.0    | Added option to configure policy for a neighbor within a group |
+---------+----------------------------------------------------------------+
| 16.1    | Added support for multicast SAFI                               |
+---------+----------------------------------------------------------------+
| 17.2    | Added support for multiple policies attachments                |
+---------+----------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/policy-out.rst

network-services vrf instance protocols bgp neighbor address-family policy out
------------------------------------------------------------------------------

**Minimum user role:** operator

To apply a route map to a neighbor or peer group:

**Command syntax: policy [policy-out]** [, policy-out, policy-out] **out**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- protocols bgp neighbor-group neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- If a policy is configured for a group, you cannot disable it for a neighbor within the group. You must explicitly set a different policy to achieve a different behavior from the group. You may even attach an empty policy.

- Can set multiple policies. In case multiple policies are set, policies are evaluated one after the other according to the user input order

- When setting a new policy, the policy will be appended to the existing attached policies

- To remove a policy, the user must specify the name of the policy to be remvoed

- To remove all policies, the user must specify all attached policy names

- To replace an attached policy, the user will need to first remove and than add a new policy. Can be performed in the same commit. the policy order imposes the functional behavior.

**Parameter table**

+------------+---------------------------------------+------------------+---------+
| Parameter  | Description                           | Range            | Default |
+============+=======================================+==================+=========+
| policy-out | applies the filter in outgoing routes | | string         | \-      |
|            |                                       | | length 1-255   |         |
+------------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy out

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# policy MyPolicy out

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# policy GroupPolicy out
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-vpn
    dnRouter(cfg-group-neighbor-afi)# policy NeighborPolicy out

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# policy MyPolicy_1,MyPolicy_2 out


**Removing Configuration**

To disable the route map policy:
::

    dnRouter(cfg-bgp-group-afi)# no policy MyPolicy out

::

    dnRouter(cfg-bgp-neighbor-afi)# no policy MyPolicy out

::

    dnRouter(cfg-group-neighbor-afi)# no policy NeighborPolicy out

**Command History**

+---------+----------------------------------------------------------------+
| Release | Modification                                                   |
+=========+================================================================+
| 6.0     | Command introduced                                             |
+---------+----------------------------------------------------------------+
| 11.0    | Added option to configure policy for a neighbor within a group |
+---------+----------------------------------------------------------------+
| 16.1    | Added support for multicast SAFI                               |
+---------+----------------------------------------------------------------+
| 17.2    | Added support for multiple policies attachments                |
+---------+----------------------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/prefix-list-ipv4_in.rst

network-services vrf instance protocols bgp neighbor address-family prefix-list-ipv4 in
---------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command filters the route updates for a BGP neighbor or peer group according to IP address and mask length.

**Command syntax: prefix-list-ipv4 [ipv4-prefix-list-in] in**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Parameter table**

+---------------------+---------------------------------------+------------------+---------+
| Parameter           | Description                           | Range            | Default |
+=====================+=======================================+==================+=========+
| ipv4-prefix-list-in | applies the filter in incoming routes | | string         | \-      |
|                     |                                       | | length 1-255   |         |
+---------------------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# prefix-list-ipv4 PL4_IN in

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-vpn
    dnRouter(cfg-bgp-group-afi)# prefix-list-ipv4 PL4_IN in


**Removing Configuration**

To disable filtering:
::

    dnRouter(cfg-bgp-group-afi)# no prefix-list-ipv4 PL_IN in"

::

    dnRouter(cfg-bgp-neighbor-afi)# no prefix-list-ipv4 PL_IN in"

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/prefix-list-ipv4_out.rst

network-services vrf instance protocols bgp neighbor address-family prefix-list-ipv4 out
----------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command filters the route updates for a BGP neighbor or peer group according to IP address and mask length.

**Command syntax: prefix-list-ipv4 [ipv4-prefix-list-out] out**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Parameter table**

+----------------------+---------------------------------------+------------------+---------+
| Parameter            | Description                           | Range            | Default |
+======================+=======================================+==================+=========+
| ipv4-prefix-list-out | applies the filter in outgoing routes | | string         | \-      |
|                      |                                       | | length 1-255   |         |
+----------------------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# prefix-list-ipv4 PL4_OUT out

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-vpn
    dnRouter(cfg-bgp-group-afi)# prefix-list PL4_OUT out


**Removing Configuration**

To disable filtering:
::

    dnRouter(cfg-bgp-group-afi)# no prefix-list-ipv4 PL_OUT out"

::

    dnRouter(cfg-bgp-neighbor-afi)# no prefix-list-ipv4 PL_OUT out"

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/prefix-list-ipv6_in.rst

network-services vrf instance protocols bgp neighbor address-family prefix-list-ipv6 in
---------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command filters the route updates for a BGP neighbor or peer group according to IP address and mask length.

**Command syntax: prefix-list-ipv6 [ipv6-prefix-list-in] in**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Parameter table**

+---------------------+---------------------------------------+------------------+---------+
| Parameter           | Description                           | Range            | Default |
+=====================+=======================================+==================+=========+
| ipv6-prefix-list-in | applies the filter in incoming routes | | string         | \-      |
|                     |                                       | | length 1-255   |         |
+---------------------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-bgp-neighbor-afi)# prefix-list-ipv6 PL6_IN in

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# prefix-list-ipv6 PL6_IN in


**Removing Configuration**

To disable filtering:
::

    dnRouter(cfg-bgp-group-afi)# no prefix-list-ipv6 PL_IN in"

::

    dnRouter(cfg-bgp-neighbor-afi)# no prefix-list-ipv6 PL_IN in"

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/prefix-list-ipv6_out.rst

network-services vrf instance protocols bgp neighbor address-family prefix-list-ipv6 out
----------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command filters the route updates for a BGP neighbor or peer group according to IP address and mask length.

**Command syntax: prefix-list-ipv6 [ipv6-prefix-list-out] out**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Parameter table**

+----------------------+---------------------------------------+------------------+---------+
| Parameter            | Description                           | Range            | Default |
+======================+=======================================+==================+=========+
| ipv6-prefix-list-out | applies the filter in outgoing routes | | string         | \-      |
|                      |                                       | | length 1-255   |         |
+----------------------+---------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-bgp-neighbor-afi)# prefix-list-ipv6 PL6_OUT out

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# prefix-list-ipv6 PL6_OUT out


**Removing Configuration**

To disable filtering:
::

    dnRouter(cfg-bgp-group-afi)# no prefix-list-ipv6 PL_OUT out"

::

    dnRouter(cfg-bgp-neighbor-afi)# no prefix-list-ipv6 PL_OUT out"

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/remove-private-as.rst

network-services vrf instance protocols bgp neighbor address-family remove-private-as
-------------------------------------------------------------------------------------

**Minimum user role:** operator

To remove private AS numbers from the AS path advertised to the neighbor or peer group:

**Command syntax: remove-private-as** all

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Parameter table**

+-----------+--------------------------------------------------------------------------+---------+---------+
| Parameter | Description                                                              | Range   | Default |
+===========+==========================================================================+=========+=========+
| all       | remove all private as-numbers regardless if path contains public numbers | Boolean | False   |
+-----------+--------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# remove-private-as
    dnRouter(cfg-protocols-bgp-neighbor)# address-family flowspec
    dnRouter(cfg-bgp-neighbor-afi)# remove-private-as

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-bgp-neighbor-afi)# remove-private-as all

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# remove-private-as


**Removing Configuration**

To disable this option:
::

    dnRouter(cfg-bgp-neighbor-afi)# no remove-private-as all

::

    dnRouter(cfg-bgp-group-afi)# no remove-private-as

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/send-community.rst

network-services vrf instance protocols bgp neighbor address-family send-community
----------------------------------------------------------------------------------

**Minimum user role:** operator

The following command ensures that the community attribute is sent in updates to the specified neighbor or group.

**Command syntax: send-community** community-type [community-type]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**

- The default behavior of the system is to not send the community attribute.

**Parameter table**

+----------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter      | Description                                                                      | Range        | Default |
+================+==================================================================================+==============+=========+
| community-type | both - Sends both standard and extended attributes extended - Sends extended     | | both       | both    |
|                | attributes standard - Sends standard attributes                                  | | extended   |         |
|                |                                                                                  | | standard   |         |
+----------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# send-community
    dnRouter(cfg-bgp-neighbor-afi)# send-community community-type standard

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# send-community community-type both

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-flowspec
    dnRouter(cfg-bgp-group-afi)# send-community community-type both


**Removing Configuration**

To disable this option:
::

    dnRouter(cfg-bgp-group-afi)# no send-community

::

    dnRouter(cfg-bgp-neighbor-afi)# no send-community community-type standard

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/send-large-community.rst

network-services vrf instance protocols bgp neighbor address-family send-large-community
----------------------------------------------------------------------------------------

**Minimum user role:** operator

The following command ensures that the large community attribute is sent in updates to the specified neighbor or group.

**Command syntax: send-large-community [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Note**
The default behavior of the system is to not send the large-community attribute.

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                                      | Range        | Default  |
+=============+==================================================================================+==============+==========+
| admin-state | Enables sending the large community attribute in updates to the specified BGP    | | enabled    | disabled |
|             | neighbor                                                                         | | disabled   |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# send-large-community enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-vpn
    dnRouter(cfg-bgp-group-afi)# send-large-community disabled


**Removing Configuration**

To disable this option:
::

    dnRouter(cfg-bgp-group-afi)# no send-large-community

::

    dnRouter(cfg-bgp-neighbor-afi)# no send-large-community

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 15.1    | Command introduced               |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/soft-reconfiguration.rst

network-services vrf instance protocols bgp neighbor address-family soft-reconfiguration inbound
------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set address-family prefixes to be saved in the adj-RIB-in table to support soft rest:

**Command syntax: soft-reconfiguration inbound**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- protocols bgp neighbor address-family
- protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group address-family

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# soft-reconfiguration inbound
    dnRouter(cfg-protocols-bgp-neighbor)# address-family flowspec
    dnRouter(cfg-bgp-neighbor-afi)# soft-reconfiguration inbound

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv4-vpn
    dnRouter(cfg-bgp-group-afi)# soft-reconfiguration inbound


**Removing Configuration**

To stop the routes from being saved in the adj-RIB-in table for the neighbor address-family:
::

    dnRouter(cfg-bgp-group-afi)# no soft-reconfiguration inbound

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 6.0     | Command introduced               |
+---------+----------------------------------+
| 10.0    | Command not supported            |
+---------+----------------------------------+
| 16.1    | Added support for multicast SAFI |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/address-family/soo.rst

network-services vrf instance protocols bgp neighbor address-family soo
-----------------------------------------------------------------------

**Minimum user role:** operator

BGP site of origin (SoO) is a tag that is appended on BGP updates to allow to mark a specific peer as belonging to a particular site. By tagging the route, BGP will check if the peer's site of origin is listed in the community field. If it is then the route will be filtered. If not, then the route will be advertised as normal.

To set the Site-Of-Orgin value for a BGP neighbor or neighbor group:

**Command syntax: soo [site-of-origin]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor address-family
- network-services vrf instance protocols bgp neighbor-group address-family
- network-services vrf instance protocols bgp neighbor-group neighbor address-family

**Note**

- Neighbors within a neighbor-group can use the neighbor-group configuration or use a unique setting.

**Parameter table**

+----------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter      | Description                                                                      | Range | Default |
+================+==================================================================================+=======+=========+
| site-of-origin | Set the Site-Of-Origin value for a BGP neighbor or peer group valid only for     | \-    | \-      |
|                | non-default vrf                                                                  |       |         |
+----------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# address-family ipv4-unicast
    dnRouter(cfg-bgp-neighbor-afi)# soo 45000:65
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# soo 45000:65
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# address-family ipv6-unicast
    dnRouter(cfg-bgp-group-afi)# 50000:65
    dnRouter(cfg-bgp-group-afi)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# address-family ipv6-unicast
    dnRouter(cfg-group-neighbor-afi)# soo 45000:65


**Removing Configuration**

To remove the SoO value for a BGP neighbor:
::

    dnRouter(cfg-bgp-neighbor-afi)# no soo 45000:65

::

    dnRouter(cfg-bgp-group-afi)# no soo 45000:65

::

    dnRouter(cfg-group-neighbor-afi)# no soo 45000:65

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/admin-state.rst

network-services vrf instance protocols bgp neighbor admin-state
----------------------------------------------------------------

**Minimum user role:** operator

Use this command to administratively start or shut down the session with the BGP neighbor, BGP neighbors in a group or a specific BGP neighbor within a group (this will override the group setting for this neighbor):

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter   | Description                                                                      | Range        | Default |
+=============+==================================================================================+==============+=========+
| admin-state | Causes a device to shut down the session administratively with its BGP neighbor. | | enabled    | enabled |
|             |                                                                                  | | disabled   |         |
+-------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# admin-state disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# admin-state disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# admin-state disabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# admin-state enabled


**Removing Configuration**

To revert the admin-state to its default value:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/adv-interval.rst

network-services vrf instance protocols bgp neighbor advertisement-interval
---------------------------------------------------------------------------

**Minimum user role:** operator

To set the interval between BGP routing updates:

**Command syntax: advertisement-interval [advertisement-interval]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group

**Parameter table**

+------------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter              | Description                                                                      | Range | Default |
+========================+==================================================================================+=======+=========+
| advertisement-interval | Set the interval between BGP routing updates. The default advertisement-interval | 0-600 | \-      |
|                        | between ibgp and ebgp sessions default for ibgp = 0 default for ebgp = 30        |       |         |
+------------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# remote-as 5000
    dnRouter(cfg-protocols-bgp-neighbor)# advertisement-interval 20
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# remote-as 5000
    dnRouter(cfg-protocols-bgp-neighbor)# advertisement-interval 90
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 7180
    dnRouter(cfg-protocols-bgp-group)# advertisement-interval 2


**Removing Configuration**

To revert to the default interval:
::

    dnRouter(cfg-protocols-bgp-group)# no advertisement-interval

::

    dnRouter(cfg-protocols-bgp-neighbor)# no advertisement-interval

**Command History**

+---------+--------------------------------------------------+
| Release | Modification                                     |
+=========+==================================================+
| 6.0     | Command introduced                               |
+---------+--------------------------------------------------+
| 9.0     | Updated default interval for iBGP neighbors to 0 |
+---------+--------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/authentication.rst

network-services vrf instance protocols bgp neighbor authentication md5 password
--------------------------------------------------------------------------------

**Minimum user role:** operator

To set a password for authenticating the neighbor, peer group neighbors, or the neighbor in a peer group:

**Command syntax: authentication md5 password [secret]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- Changing the configuration will cause the BGP session to restart.

- If you do not specify a password, enter the password of the neighbor BGP router in clear text. The password is then encrypted and from then on will be displayed as encrypted. You can copy the encrypted password and use it as the enc-password. When typing a clear password, the password is not displayed in the CLI terminal.

- The clear text password provided in the CLI is hashed with the md5 hash. As the md5 hash is not strong enough and can be broken, the FERNET algorithm is applied to the md5 hash before it is stored in the DNOS database.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+-------+---------+
| Parameter | Description                                                                      | Range | Default |
+===========+==================================================================================+=======+=========+
| secret    | set a password for authentication encrypted secret password string for the       | \-    | \-      |
|           | neighbor bgp. if the user enters a clear-text password, the password is then     |       |         |
|           | encrypted by the system and saved in secret argument. if user specified 'secret' |       |         |
|           | save string in secret                                                            |       |         |
+-----------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# authentication md5 password
    Enter password
    Enter password for verifications

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.2.2
    dnRouter(cfg-protocols-bgp-neighbor)# authentication md5 password enc-!U2FsdGVkX1+

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# authentication md5 password
    Enter password
    Enter password for verification

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# authentication md5 password
    Enter password
    Enter password for verification
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# authentication md5 password enc-!U2FsdGVkX1+qG


**Removing Configuration**

To remove the password configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no authentication md5

::

    dnRouter(cfg-protocols-bgp-group)# no authentication md5

::

    dnRouter(cfg-bgp-group-neighbor)# no authentication md5

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/bfd/admin-state.rst

network-services vrf instance protocols bgp neighbor bfd admin-state
--------------------------------------------------------------------

**Minimum user role:** operator

Enable BFD session for BGP session protection and enter BFD configuration level to configure BFD session settings.

To change the BFD administrative state for a specific BGP neighbor:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor-group bfd
- network-services vrf instance protocols bgp neighbor-group neighbor bfd

**Note**

- In the event that there are multiple BFD clients registered to the same BFD session, a single BFD session is established with the strictest session parameters between all clients.

**Parameter table**

+-------------+--------------------------------------+--------------+----------+
| Parameter   | Description                          | Range        | Default  |
+=============+======================================+==============+==========+
| admin-state | set whether bfd protection is in use | | enabled    | disabled |
|             |                                      | | disabled   |          |
+-------------+--------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# admin-state enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# admin-state enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# admin-state enabled
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# admin-state enabled


**Removing Configuration**

To revert the admin-state to its default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no admin-state

::

    dnRouter(cfg-bgp-group-bfd)# no admin-state

::

    dnRouter(cfg-bgp-neighbor-bfd)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/bfd/bfd-type.rst

network-services vrf instance protocols bgp neighbor bfd bfd-type
-----------------------------------------------------------------

**Minimum user role:** operator

Define the requested BFD session type, Single-hop or Multi-hop. By default session type is according to BGP peering type.

To set requested session type:

**Command syntax: bfd-type [session-type]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor-group bfd
- network-services vrf instance protocols bgp neighbor-group neighbor bfd

**Note**

- For multi-hop session type , update-source must be configured for neighbor

- For single-hop session type , bgp peering must be directly over a connected interface

- Reconfig of bfd-type will result in a new BFD session

**Parameter table**

+--------------+----------------------------------------------------------------------------------+----------------+-----------+
| Parameter    | Description                                                                      | Range          | Default   |
+==============+==================================================================================+================+===========+
| session-type | Define the requested BFD session type, Single-hop or Multi-hop. By default       | | automatic    | automatic |
|              | session type is according to BGP peering type                                    | | single-hop   |           |
|              |                                                                                  | | multi-hop    |           |
+--------------+----------------------------------------------------------------------------------+----------------+-----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# bfd-type single-hop

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# bfd-type enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# bfd-type multi-hop
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# bfd-type automatic


**Removing Configuration**

To revert the bfd-type to its default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no bfd-type

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/bfd/bfd.rst

network-services vrf instance protocols bgp neighbor bfd
--------------------------------------------------------

**Minimum user role:** operator

The command allows enabling BFD for the protection of a session between a single BGP neighbor or neighbor group and allows you to configure the BFD session settings.
The BFD session type (single-hop or multi-hop) is decided according to the BGP session type. The BFD source address is the BGP source address and the BFD destination address is the BGP peer address.

When a BFD session is down, the BGP session will close and all routes from the neighbor will be withdrawn.

The BFD failure detection time is computed out of the negotiated received interval and the remote multiplier configurations.

Detection-time = negotiated-received-interval X received multiplier.
This is the maximum amount of time that can elapse without receiving a BFD control packet before the session is declared down.

BFD neighbor can signal session state down and upon receipt, the local BFD session will immediately switch to DOWN state.

To enable or disable the BFD protocol with a single neighbor or a neighbor group:

**Command syntax: bfd**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)#


**Removing Configuration**

To revert the BFD protocol to the default state:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no bfd 

::

    dnRouter(cfg-protocols-bgp-group)# no bfd

::

    dnRouter(cfg-bgp-group-neighbor)# no bfd

**Command History**

+---------+----------------------+
| Release | Modification         |
+=========+======================+
| 6.0     | Command introduced   |
+---------+----------------------+
| 11.4    | Command reintroduced |
+---------+----------------------+

---

## vrf/instance/protocols/bgp/neighbor/bfd/min-rx.rst

network-services vrf instance protocols bgp neighbor bfd min-rx
---------------------------------------------------------------

**Minimum user role:** operator

Set the desired minimum receive interval for the BFD session for a single neighbor or neighbor group:

**Command syntax: min-rx [min-rx]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor-group bfd
- network-services vrf instance protocols bgp neighbor-group neighbor bfd

**Note**

- This could be invoked inside a neighbor-group or as a single neighbor.

- Neighbors within a neighbor-group derive the neighbor-group configuration or can have a unique setting from the group.

- For neighbors within a neighbor-group, the default value is the group's parameter value.

**Parameter table**

+-----------+------------------------------------------------------+--------+---------+
| Parameter | Description                                          | Range  | Default |
+===========+======================================================+========+=========+
| min-rx    | set desired minimum receive interval for BFD session | 5-1700 | 300     |
+-----------+------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# min-rx 400
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# min-rx 400
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# min-rx 400
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# min-rx 300


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no min-rx

::

    dnRouter(cfg-bgp-group-bfd)# no min-rx

::

    dnRouter(cfg-group-neighbor-bfd)# no min-rx

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 11.4    | Command introduced               |
+---------+----------------------------------+
| 15.1    | Added support for 5msec interval |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/bfd/min-tx.rst

network-services vrf instance protocols bgp neighbor bfd min-tx
---------------------------------------------------------------

**Minimum user role:** operator

Set the desired minimum transmit interval for the BFD session for a single neighbor or neighbor group:

**Command syntax: min-tx [min-tx]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor-group bfd
- network-services vrf instance protocols bgp neighbor-group neighbor bfd

**Note**

- This could be invoked inside a neighbor-group or as a single neighbor.

- Neighbors within a neighbor-group derive the neighbor-group configuration or can have a unique setting from the group.

- For neighbors within a neighbor-group, the default value is the group's parameter value.

- Due to hardware limitation, the maximum supported transmit rate is 1700 msec. A negotiated transmit interval higher than 1700 msec will result in an actual transmit rate of 1700 msec.

**Parameter table**

+-----------+-------------------------------------------------------+--------+---------+
| Parameter | Description                                           | Range  | Default |
+===========+=======================================================+========+=========+
| min-tx    | set desired minimum transmit interval for BFD session | 5-1700 | 300     |
+-----------+-------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# min-tx 400
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# min-tx 400
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# min-tx 400
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# min-tx 300


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no min-tx

::

    dnRouter(cfg-bgp-group-bfd)# no min-tx

::

    dnRouter(cfg-group-neighbor-bfd)# no min-tx

**Command History**

+---------+----------------------------------+
| Release | Modification                     |
+=========+==================================+
| 11.4    | Command introduced               |
+---------+----------------------------------+
| 15.1    | Added support for 5msec interval |
+---------+----------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/bfd/multiplier.rst

network-services vrf instance protocols bgp neighbor bfd multiplier
-------------------------------------------------------------------

**Minimum user role:** operator

Set the local BFD multiplier for a single neighbor or neighbor group:

**Command syntax: multiplier [multiplier]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor bfd
- protocols bgp neighbor bfd
- protocols bgp neighbor-group bfd
- protocols bgp neighbor-group neighbor bfd
- network-services vrf instance protocols bgp neighbor-group bfd
- network-services vrf instance protocols bgp neighbor-group neighbor bfd

**Note**

- This could be invoked inside a neighbor-group or as a single neighbor.

- Neighbors within a neighbor-group derive the neighbor-group configuration or can have a unique setting from the group.

- For neighbors within a neighbor-group, the default value is the group's parameter value.

**Parameter table**

+------------+--------------------------+-------+---------+
| Parameter  | Description              | Range | Default |
+============+==========================+=======+=========+
| multiplier | set local BFD multiplier | 2-16  | 3       |
+------------+--------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# bfd
    dnRouter(cfg-bgp-neighbor-bfd)# multiplier 2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# multiplier 2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 7018
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# bfd
    dnRouter(cfg-bgp-group-bfd)# multiplier 2
    dnRouter(cfg-bgp-group-bfd)# exit
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# bfd
    dnRouter(cfg-group-neighbor-bfd)# multiplier 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-bgp-neighbor-bfd)# no multiplier

::

    dnRouter(cfg-bgp-group-bfd)# no multiplier

::

    dnRouter(cfg-group-neighbor-bfd)# no multiplier

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/connected-check.rst

network-services vrf instance protocols bgp neighbor connected-check
--------------------------------------------------------------------

**Minimum user role:** operator

Typically in eBGP peering, a check is done to confirm that the neighbor is listed in the routing table as being directly connected. eBGP peering will not be attempted with a neighbor that is not directly connected. When the loopback interface is used for peering, then the IP address of the neighbor will not be listed as being directly connected and so peering will not be possible.

The following command instructs the BGP router whether or not to disable the connection verification check for eBGP peering sessions that are directly connected but are configured on a loopback interface or with a non-directly connected IP address.

**Command syntax: connected-check [connected-check]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- The option to disable the check is required only when the neighbor ebgp-multihop command is configured with a TTL value of 1. See "bgp neighbor ebgp-multihop".

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter       | Description                                                                      | Range        | Default |
+=================+==================================================================================+==============+=========+
| connected-check | disable the connection verification process for eBGP peering sessions that are   | | enabled    | enabled |
|                 | reachable by a single hop but are configured on a loopback interface or          | | disabled   |         |
|                 | otherwise configured with a non-directly connected IP address                    |              |         |
+-----------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# connected-check disabled
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# connected-check disabled

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# connected-check disabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# connected-check enabled


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-protocols-bgp-group)# no connected-check

::

    dnRouter(cfg-protocols-bgp-neighbor)# no connected-check

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/description.rst

network-services vrf instance protocols bgp neighbor description
----------------------------------------------------------------

**Minimum user role:** operator

To set a description for the BGP neighbor, BGP peer group, or BGP neighbor within a peer group:

**Command syntax: description [description]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+-------------+--------------------------+------------------+---------+
| Parameter   | Description              | Range            | Default |
+=============+==========================+==================+=========+
| description | a neighbors' description | | string         | \-      |
|             |                          | | length 1-255   |         |
+-------------+--------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# description my-description

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# description my-description

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# description my-description

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# description my-unique-description


**Removing Configuration**

To remove the description:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no description

::

    dnRouter(cfg-protocols-bgp-group)# no description

::

    dnRouter(cfg-bgp-group-neighbor)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/ebgp-multihop.rst

network-services vrf instance protocols bgp neighbor ebgp-multihop
------------------------------------------------------------------

**Minimum user role:** operator

To configure a maximum number of hops to an eBGP neighbor, to an eBGP peer group, or to a neighbor within a peer group:

**Command syntax: ebgp-multihop [ebgp-multihop]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- If you set a value greater than 1, the neighbor will always be considered as an indirectly connected neighbor, regardless of the actual reachability.

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+---------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter     | Description                                                                      | Range | Default |
+===============+==================================================================================+=======+=========+
| ebgp-multihop | set eBGP neighbors that are not on directly connected networks and sets an       | 1-255 | 1       |
|               | optional maximum hop count                                                       |       |         |
+---------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# ebgp-multihop

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# ebgp-multihop 20

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# ebgp-multihop 20

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# ebgp-multihop 16


**Removing Configuration**

To revert to the default configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no ebgp-multihop

::

    dnRouter(cfg-protocols-bgp-group)# no ebgp-multihop

::

    dnRouter(cfg-bgp-group-neighbor)# no ebgp-multihop

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/graceful-restart.rst

network-services vrf instance protocols bgp neighbor graceful-restart
---------------------------------------------------------------------

**Minimum user role:** operator

To configure the BGP graceful restart capability for a specific neighbor, a peer group, or for a neighbor in a peer group:

**Command syntax: graceful-restart [graceful-restart-admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- When bgp graceful-restart is disabled, no graceful-restart is done regardless of the bgp neighbor graceful-restart state.

- Disabled: disables graceful-restart for the neighbor.

**Parameter table**

+------------------------------+------------------------------------------+-----------------+---------+
| Parameter                    | Description                              | Range           | Default |
+==============================+==========================================+=================+=========+
| graceful-restart-admin-state | global graceful-restart capability state | | enabled       | enabled |
|                              |                                          | | disabled      |         |
|                              |                                          | | helper-only   |         |
+------------------------------+------------------------------------------+-----------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# graceful-restart enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001:3::65
    dnRouter(cfg-protocols-bgp-neighbor)# graceful-restart helper-only

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001:3::65
    dnRouter(cfg-protocols-bgp-neighbor)# graceful-restart disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# graceful-restart enabled
    dnRouter(cfg-protocols-bgp-group)# graceful-restart helper-only
    dnRouter(cfg-protocols-bgp-group)# graceful-restart disabled


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no graceful-restart

::

    dnRouter(cfg-protocols-bgp-group)# no graceful-restart

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/local-as_type.rst

network-services vrf instance protocols bgp neighbor local-as
-------------------------------------------------------------

**Minimum user role:** operator

If, for whatever reason, you need to change the AS number of your network, you will need to reconfigure the AS number on all the BGP peers. By specifying an alternate AS for this BGP process when interacting with the specified peer, you allow the peer to appear to simultaneously belong to both the former AS and the new AS, without changing the peering arrangements.

To configure a local AS number for the neighbor:

**Command syntax: local-as [local-as-number]** type [as-path-prepend-type]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group

**Note**

- This command is relevant to BGP peers only.

- The configuration will reset the BGP session.

- The local-as-number must be different from the router AS.

- When changing the local-as-number, the as-path-prepend-type will return to the default value.

- When the local-as-number is identical to the neighbor AS, you cannot configure the as-path-prepend-type

**Parameter table**

+----------------------+----------------------------------------------------------------------------------+---------------------------+---------+
| Parameter            | Description                                                                      | Range                     | Default |
+======================+==================================================================================+===========================+=========+
| local-as-number      | as-number for peer session, must be different from local-AS and peer-AS          | 1-4294967295              | \-      |
+----------------------+----------------------------------------------------------------------------------+---------------------------+---------+
| as-path-prepend-type | prepend type for as-path when adding local-as perpend - default config. prepend  | | prepend                 | prepend |
|                      | the local-as as well as the bgp as-n no-perpend - the supplied local-as is not   | | no-prepend              |         |
|                      | prepended to the received as-path no-prepend-replace-as - only the supplied      | | no-prepend-replace-as   |         |
|                      | local-as is prepended to the as-path when transmitting local-route updates to    |                           |         |
|                      | this peer                                                                        |                           |         |
+----------------------+----------------------------------------------------------------------------------+---------------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# local-as 1000

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# local-as 1000 type no-prepend

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# local-as 1000 type no-prepend-replace-as

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# remote-as 8000
    dnRouter(cfg-protocols-bgp-neighbor)# local-as 8000

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 65001
    dnRouter(cfg-protocols-bgp-group)# local-as 65001


**Removing Configuration**

To delete the local AS configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no local-as

::

    dnRouter(cfg-protocols-bgp-group)# no local-as

**Command History**

+---------+---------------------------------+
| Release | Modification                    |
+=========+=================================+
| 6.0     | Command introduced              |
+---------+---------------------------------+
| 11.0    | Removed "type" from the syntax. |
+---------+---------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/min-hold-time.rst

network-services vrf instance protocols bgp neighbor minimum-hold-time
----------------------------------------------------------------------

**Minimum user role:** operator

To adjust the threshold for minimum-hold-time:

**Command syntax: minimum-hold-time [minimum-hold-time]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group

**Note**

- The value of the set minimum-hold-time must be less or equal to the hold-time set value.

**Parameter table**

+-------------------+-------------------+---------+---------+
| Parameter         | Description       | Range   | Default |
+===================+===================+=========+=========+
| minimum-hold-time | minimum-hold-time | 3-65535 | 3       |
+-------------------+-------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# minimum-hold-time 7

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# minimum-hold-time 11


**Removing Configuration**

To revert minimum-hold-time value to their default values:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no minimum-hold-time

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/neighbor.rst

network-services vrf instance protocols bgp neighbor
----------------------------------------------------

**Minimum user role:** operator

When configuring a BGP neighbor, you must first define it using one of the following commands.

To define a BGP neighbor and enter its configuration mode:

When configuring neighbors within a peer group, the neighbors inherit the settings from the group.

**Command syntax: neighbor [neighbor-ip-address]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp
- protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group

**Note**

- Notice the change in prompt.

- When configuring neighbors within a peer group, the neighbors inherit the settings from the group.

**Parameter table**

+---------------------+-------------------------------------------------+--------------+---------+
| Parameter           | Description                                     | Range        | Default |
+=====================+=================================================+==============+=========+
| neighbor-ip-address | Address of the BGP peer, either in IPv4 or IPv6 | | A.B.C.D    | \-      |
|                     |                                                 | | X:X::X:X   |         |
+---------------------+-------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)#

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 2001::66
    dnRouter(cfg-bgp-group-neighbor)#


**Removing Configuration**

To remove a neighbor:
::

    dnRouter(cfg-protocols-bgp)# no neighbor 12.170.4.1

To remove a neighbor from the group:
::

    dnRouter(cfg-protocols-bgp-group)# no neighbor 2001::66

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/override-capability.rst

network-services vrf instance protocols bgp neighbor override-capability
------------------------------------------------------------------------

**Minimum user role:** operator

This command instructs the BGP router whether or not to establish a peering session with a neighbor that does not support capability negotiation, neighbors that are members of a peer group, or with a neighbor in a peer group. To configure this option:

**Command syntax: override-capability [override-capability]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command cannot be enabled with the strict-capability-match configuration. See "bgp neighbor strict-capability-match"

**Parameter table**

+---------------------+---------------------------------------------------+--------------+----------+
| Parameter           | Description                                       | Range        | Default  |
+=====================+===================================================+==============+==========+
| override-capability | allow peer session without capability negotiation | | enabled    | disabled |
|                     |                                                   | | disabled   |          |
+---------------------+---------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# override-capability enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# override-capability enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# override-capability enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# override-capability disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# strict-capability-match enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# strict-capability-match disabled
    dnRouter(cfg-bgp-group-neighbor)# override-capability enabled


**Removing Configuration**

To remove this configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no override-capability 

::

    dnRouter(cfg-protocols-bgp-group)# no override-capability

::

    dnRouter(cfg-bgp-group-neighbor)# no override-capability

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/passive.rst

network-services vrf instance protocols bgp neighbor passive
------------------------------------------------------------

**Minimum user role:** operator

In passive mode, the router will not initiate open messages to the peer. It will wait for the peer to issue an open request before a message is sent. To configure passive mode for a neighbor, peer group, or a neighbor in a peer group:

**Command syntax: passive [passive]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+-----------+----------------------------------------------------------------------------+--------------+----------+
| Parameter | Description                                                                | Range        | Default  |
+===========+============================================================================+==============+==========+
| passive   | Configure the router so that active open messages are not sent to the peer | | enabled    | disabled |
|           |                                                                            | | disabled   |          |
+-----------+----------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# passive enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# passive enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# passive enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# passive enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 12.170.4.1
    dnRouter(cfg-bgp-group-neighbor)# passive disabled


**Removing Configuration**

To remove passive mode:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no passive

::

    dnRouter(cfg-protocols-bgp-group)# no passive

::

    dnRouter(cfg-bgp-group-neighbor)# no passive

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/remote-as.rst

network-services vrf instance protocols bgp neighbor remote-as
--------------------------------------------------------------

**Minimum user role:** operator

The neighbor (not under neighbor-group) must be configured with remote-as.
For neighbor-groups:
A group can be configured with or without remote-as. If the group is not configured with remote-as, it is mandatory for each of the neighbors under the group to have remote-as.
The group and the neighbor remote-as must be from the same type, meaning iBGP, eBGP or Confederation.

To configure the remote AS number for the neighbor or peer group:

**Command syntax: remote-as [remote-as]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- The AS number of the neighbor. BGP uses the AS number for identifying the BGP connection as internal (iBGP) or external (eBGP).

**Parameter table**

+-----------+------------------------+--------------+---------+
| Parameter | Description            | Range        | Default |
+===========+========================+==============+=========+
| remote-as | AS number of the peer. | 1-4294967295 | \-      |
+-----------+------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# remote-as 5000

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# remote-as 5000

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# remote-as 5000
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# neighbor 1.2.3.4
    dnRouter(cfg-bgp-group-neighbor)# remote-as 123


**Removing Configuration**

It is not possible to delete the remote-as of a neighbor or group. You need to remove the neighbor or the group. You can change the assigned remote-as.
::


**Command History**

+---------+--------------------------------------------------+
| Release | Modification                                     |
+=========+==================================================+
| 6.0     | Command introduced                               |
+---------+--------------------------------------------------+
| 18.0    | Added remote-as under neighbor of neighbor-group |
+---------+--------------------------------------------------+

---

## vrf/instance/protocols/bgp/neighbor/strict-capability-match.rst

network-services vrf instance protocols bgp neighbor strict-capability-match
----------------------------------------------------------------------------

**Minimum user role:** operator

This command directs the router to strictly match remote capabilities and local capabilities. If the capabilities are different, the router will issue an "Unsupported Capability" error and will reset the connection.

To set strict capability match:

**Command syntax: strict-capability-match [strict-capability-match]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

- This command cannot be set together with the override-capability configuration. See "bgp neighbor override-capability"

**Parameter table**

+-------------------------+--------------------------------------------------------------+--------------+----------+
| Parameter               | Description                                                  | Range        | Default  |
+=========================+==============================================================+==============+==========+
| strict-capability-match | Strictly compares remote capabilities and local capabilities | | enabled    | disabled |
|                         |                                                              | | disabled   |          |
+-------------------------+--------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# strict-capability-match enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# strict-capability-match enabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# strict-capability-match enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# strict-capability-match disabled

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# override-capability enabled
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# override-capability disabled
    dnRouter(cfg-bgp-group-neighbor)# strict-capability-match enabled


**Removing Configuration**

To remove the strict capability match configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no strict-capability-match

::

    dnRouter(cfg-bgp-group-neighbor)# no strict-capability-match

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/timers.rst

network-services vrf instance protocols bgp neighbor timers
-----------------------------------------------------------

**Minimum user role:** operator

To adjust the interval at which BGP keep-alive and hold-time messages are sent to the neighbor or peer group:

**Command syntax: timers {keep-alive [keep-alive-timer], hold-time [hold-time-timer]}**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group

**Note**

- Setting the timer value to 0 disables the timer.

**Parameter table**

+------------------+------------------+------------+---------+
| Parameter        | Description      | Range      | Default |
+==================+==================+============+=========+
| keep-alive-timer | keep-alive-timer | 0-65535    | 60      |
+------------------+------------------+------------+---------+
| hold-time-timer  | hold-time-timer  | 0, 3-65535 | 180     |
+------------------+------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# timers keep-alive 30 hold-time 90

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# timers hold-time 100

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# timers hold-time 400 keep-alive 100


**Removing Configuration**

To revert all timers to their default values:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no timers

To revert the specified timer to its default value:
::

    dnRouter(cfg-protocols-bgp-group)# no timers keep-alive

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/ttl-security.rst

network-services vrf instance protocols bgp neighbor ttl-security
-----------------------------------------------------------------

**Minimum user role:** operator

Imposes ebgp ttl security per rfc5082.
When ttl-security is set for an EBGP neighbor, the following is expected for the given neighbor bgp IP/TCP session:
- Any egress packet is set with TTL 255.
- Any ingress packet is checked for TTL validity. Only packets with a TTL greater or equal to min-ttl are accepted, otherwise dropped.

The default system behavior is min-ttl = 255, imposing that eBGP neighbor must be directly connected (one hop apart).

The user may impose a different min-ttl value to support the eBGP neighbors that are not directly connected.
If min-ttl = 255 the ttl-security keeps assumption of the eBGP neighbor being directly connected, regardless of the min-ttl value, as such:
- The neighbor address is expected to be a connected route.
- The egress interface is imposed per the neighbor address.
- In case BFD is requested, a single-hop BFD session is requested (unless a specific BFD-type is set).
In case min-ttl < 255 MH-EBGP the session is assumed resulting:
- An update-source is required.
- The neighbor address is not bound to be a connected route.
- The egress interface is selected per the neighbor address routing solution.
- In case BFD is requested, a multi-hop BFD session is requested (unless specific BFD-type is set).

**Command syntax: ttl-security [admin-state]** min-ttl [min-ttl]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- The expected behavior is that both the BGP session sides are configured with ttl-security.

- The configuration is valid only for eBGP neighbors. Commit validation is required (same as impose for eBGP-multihop).

- Configuration is only possible with eBGP-multihop = 1. Commit validation is required.

- Applies for both IPv4 neighbors and IPv6 neighbors. The hop-count is handled instead of TTL for IPv6.

- When applied on a group, this property is inherited by all the group members. Applying this property on a neighbor within a group overrides the group setting.

- Neighbors within a neighbor-group derive the neighbor-group configuration (i.e has no default config) or can have a unique setting from the group.

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                                      | Range        | Default  |
+=============+==================================================================================+==============+==========+
| admin-state | Enable ttl security for a given eBGP neighbor                                    | | enabled    | disabled |
|             |                                                                                  | | disabled   |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+
| min-ttl     | Allow received ttl lower than 255, the allowed received ttl will be              | 1-255        | 255      |
|             | greater-equal to (255-range)                                                     |              |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# ttl-security enabled
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP_GROUP
    dnRouter(cfg-protocols-bgp-group)# ttl-security enabled min-ttl 254

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP_GROUP
    dnRouter(cfg-protocols-bgp-group)# ttl-security enabled min-ttl 252
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-protocols-bgp-neighbor)# ttl-security enabled min-ttl 255


**Removing Configuration**

To revert configuration to default behavior the configuration:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no ttl-security

To revert min-ttl to default behavior
::

    dnRouter(cfg-protocols-bgp-neighbor)# no ttl-security enabled min-ttl 255

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.3    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/update-source.rst

network-services vrf instance protocols bgp neighbor update-source
------------------------------------------------------------------

**Minimum user role:** operator

The update-source parameter is a mandatory configuration for every multihop BGP session. This includes both iBGP and MH-eBGP.

To specify the source address to use for the BGP session to a neighbor, peer group, or neighbor within the peer group:

**Command syntax: update-source [source-address]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- Changing the configuration will cause the BGP session to restart.

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+----------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter      | Description                                                                      | Range | Default |
+================+==================================================================================+=======+=========+
| source-address | specify the source address to use for the BGP session to this neighbor Can       | \-    | \-      |
|                | either be an ipv4|6-address or a loopback interface name when using loopback     |       |         |
|                | interface name, bgp uses the lo ip address                                       |       |         |
+----------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# update-source lo0

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# update-source 1.1.1.1

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# update-source 100.70.1.45

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# update-source 2001:2::65

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# update-source lo1

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# update-source ge100-1/2/1

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# update-source bundle-2

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 2001::66
    dnRouter(cfg-protocols-bgp-neighbor)# update-source bundle-1.1

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# update-source 2001:2::65
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# update-source 1.1.1.1


**Removing Configuration**

To revert the source address to the default value (the BGP router-id):
::

    dnRouter(cfg-protocols-bgp-neighbor)# no update-source

::

    dnRouter(cfg-protocols-bgp-group)# no update-source

::

    dnRouter(cfg-bgp-group-neighbor)# no update-source

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/neighbor/weight.rst

network-services vrf instance protocols bgp neighbor weight
-----------------------------------------------------------

**Minimum user role:** operator

To specify a weight that the BGP router will add to routes that are received from the specified BGP neighbor, BGP peer group, or BGP neighbor in a peer group:

**Command syntax: weight [weight]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp neighbor
- protocols bgp neighbor
- protocols bgp neighbor-group
- protocols bgp neighbor-group neighbor
- network-services vrf instance protocols bgp neighbor-group
- network-services vrf instance protocols bgp neighbor-group neighbor

**Note**

- To apply new neighbor weight settings, restart the bgp neighbor session. A user can invoke clear soft to avoid any traffic impact.

- When applied on a group, this property is inherited by all group members. Applying this property on a neighbor within a group overrides the group setting.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+---------+---------+
| Parameter | Description                                                                      | Range   | Default |
+===========+==================================================================================+=========+=========+
| weight    | Specifies a weight that the device will add to routes that are received from the | 0-65535 | 0       |
|           | specified BGP neighbor.                                                          |         |         |
+-----------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor 12.170.4.1
    dnRouter(cfg-protocols-bgp-neighbor)# weight 50

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# weight 10

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# neighbor-group BGP6:pe2ce:internet
    dnRouter(cfg-protocols-bgp-group)# weight 10
    dnRouter(cfg-protocols-bgp-group)# neighbor 30:128::107
    dnRouter(cfg-bgp-group-neighbor)# weight 50


**Removing Configuration**

To revert to the default weight value:
::

    dnRouter(cfg-protocols-bgp-neighbor)# no weight

::

    dnRouter(cfg-protocols-bgp-group)# no weight

::

    dnRouter(cfg-bgp-group-neighbor)# no weight

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/network_import-check.rst

network-services vrf instance protocols bgp network import-check
----------------------------------------------------------------

**Minimum user role:** operator

This command instructs the BGP process to validate that the BGP route exists in the routing table (RIB) before injecting it into BGP and advertising it to the BGP neighbors.

**Command syntax: network import-check [network-import-check]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Parameter table**

+----------------------+---------------------------------------+--------------+---------+
| Parameter            | Description                           | Range        | Default |
+======================+=======================================+==============+=========+
| network-import-check | Check BGP network route exists in IGP | | enabled    | enabled |
|                      |                                       | | disabled   |         |
+----------------------+---------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# network import-check disabled


**Removing Configuration**

To revert to the default configuration:
::

    dnRouter(cfg-protocols-bgp)# no network import-check

**Command History**

+---------+--------------------------------------------+
| Release | Modification                               |
+=========+============================================+
| 6.0     | Command introduced                         |
+---------+--------------------------------------------+
| 9.0     | Added Enabled/Disabled value to the syntax |
+---------+--------------------------------------------+

---

## vrf/instance/protocols/bgp/nexthop-trigger-delay.rst

network-services vrf instance protocols bgp nexthop-trigger-delay
-----------------------------------------------------------------

**Minimum user role:** operator

If BGP reacts prematurely to IGP updates, traffic may be lost. This command allows you to set a delay in BGP's reaction to IGP updates when IGP convergence is slow.

You can change the delay interval for triggering next-hop calculations when a next-hop address tracking event occurs.

To set the delay:

**Command syntax: nexthop-trigger-delay [nexthop-trigger-delay]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**

- Setting the delay to 0 disables the delay.

**Parameter table**

+-----------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter             | Description                                                                      | Range | Default |
+=======================+==================================================================================+=======+=========+
| nexthop-trigger-delay | Change the delay interval that will trigger the scheduling of next-hop-tracking  | 0-100 | 5       |
|                       | feature                                                                          |       |         |
+-----------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# nexthop-trigger-delay 3


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-protocols-bgp)# no nexthop-trigger-delay

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.5    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/route-distinguisher.rst

network-services vrf instance protocols bgp route-distinguisher
---------------------------------------------------------------

**Minimum user role:** operator

To configure the route-distinguisher to enable the VRF to use a L3VPN service and to support route export and import, to and from the VRF:

**Command syntax: route-distinguisher [route-distinguisher]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp

**Note**

- The route-distinguisher must be unique for different VRFs.

- Reconfiguring the route-distinguisher causes all routes to be withdrawn from the VPN peers in the VPN safi, and then to be re-advertised with an updated route-distinguisher.

- When set to auto, system will generate route-distinguisher in format <router-id>:<16bit>, BGP router-id must be configured and 16 bit are randomnly choosen.

- User cannot configure route-distinguisher value that match a different route-distinguisher regardless how route-distinguisher was generated (manual/auto)

**Parameter table**

+---------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter           | Description                                                                      | Range | Default |
+=====================+==================================================================================+=======+=========+
| route-distinguisher | the route distinguisher for BGP as part VPN service valid only for non-default   | \-    | \-      |
|                     | vrf                                                                              |       |         |
+---------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance customer_vrf_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# bgp 65000
    dnRouter(cfg-inst-protocols-bgp)# route-distinguisher 56335:1


**Removing Configuration**

To remove the route-distinguisher:
::

    dnRouter(cfg-inst-protocols-bgp))# no route-distinguisher

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+
| 19.1    | Add auto option    |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/route-reflection-policy-out-attribute-change.rst

network-services vrf instance protocols bgp route-reflection policy-out attribute-change
----------------------------------------------------------------------------------------

**Minimum user role:** operator

Support modification of the following BGP path attributes by the policy out when acting as a Route-reflector:

NEXT_HOP
AS_PATH
LOCAL_PREF
MED

By default, per RFC4456#10, when acting as a Route-Reflector, for iBGP advertisement, DNOS will not apply any modification for the attributes provided above if the path is an iBGP path. Even if it was explicitly required by the neighbor policy out.
By default, per RFC4456#10, when acting as a Route-Reflector for iBGP advertisement, DNOS will not apply any modification for the attributes provided above if the path is an iBGP path. Even if it was explicitly required by the neighbor policy out.

To enable route-reflector policy-out attribute-change:


**Command syntax: route-reflection policy-out attribute-change [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**
- "Supported for default VRF and non-default VRF"
- "The behavior will apply for any neighbor there is a case of route reflection for and any address-family.
- "Configuration can co-exist with the ‘self-force’ option of policy set ipv4 next-hop / policy set ipv6 next-hop.
-- When the “route-reflector policy-out attribute-change” is enabled, the any next-hop modification option of policy set ipv4 next-hop / policy set ipv6 next-hop is imposed.
-- When the “route-reflector policy-out attribute-change” is disabled (default), only “self-force) the next-hop modification option of policy set ipv4 next-hop / policy set ipv6 next-hop is imposed when the reflecting routes act as the route-reflector.

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                                      | Range        | Default  |
+=============+==================================================================================+==============+==========+
| admin-state | Support modification of NEXT_HOP, AS_PATH, LOCAL_PREF and MED path attributes by | | enabled    | disabled |
|             | policy out when reflecting paths as Route-reflector                              | | disabled   |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# route-reflection policy-out attribute-change enabled


**Removing Configuration**

To disable this option:
::

    dnRouter(cfg-protocols-bgp)# no route-reflection policy-out attribute-change

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/bgp/router-id.rst

network-services vrf instance protocols bgp router-id
-----------------------------------------------------

**Minimum user role:** operator

To set the router-ID of the BGP process:

**Command syntax: router-id [router-id]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols bgp
- protocols bgp

**Note**

- Changing the router-id will cause all BGP sessions to restart.

- When using OSPFv3 or IPv6-based BGP peering within a routing instance, you must explicitly configure a router ID (router-id) for that specific instance. The main routing instance's router ID is not inherited by other instances. Even if only IPv6 protocols are used, a 32-bit router ID is still required, as IPv6 routing protocols rely on it for establishing adjacencies. The router ID must be a non-zero 32-bit (4-octet) unsigned integer. While it's common to use an IPv4 address as the router ID, this is not mandatory - it doesn’t need to be a valid or routable address, just a unique 32-bit value within the routing domain. Failing to configure a router ID in an IPv6 OSPF or BGP instance will result in the protocol defaulting to 0.0.0.0, which is invalid. This will prevent adjacency formation and BGP session establishment.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+---------+---------+
| Parameter | Description                                                                      | Range   | Default |
+===========+==================================================================================+=========+=========+
| router-id | Router id of the router - an unsigned 32-bit integer expressed in dotted quad    | A.B.C.D | \-      |
|           | notation. By default - the ipv4 address of lo0 interface                         |         |         |
+-----------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# bgp 65000
    dnRouter(cfg-protocols-bgp)# router-id 100.70.1.45


**Removing Configuration**

To revert the router-id to default:
::

    dnRouter(cfg-protocols-bgp)# no router-id

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/evpn/evpn.rst

network-services vrf instance protocols evpn
--------------------------------------------

**Minimum user role:** operator

To configure the EVPN information of the VRF

**Command syntax: evpn**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)# instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# evpn
    dnRouter(cfg-vrf-inst-evpn)#


**Removing Configuration**

To remove the EVPN configuration
::

    dnRouter(cfg-netsrv-vrf-inst)# no evpn

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/evpn/export-l2vpn-evpn-policy.rst

network-services vrf instance protocols evpn export-l2vpn-evpn policy
---------------------------------------------------------------------

**Minimum user role:** operator

To export routes from the VRF that comply with the specified policy.
Routes are exported to the L2VPN EVPN SAFI from the private VRF.

**Command syntax: export-l2vpn-evpn policy [export-l2vpn-evpn-policy]** [, export-l2vpn-evpn-policy, export-l2vpn-evpn-policy]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols evpn

**Note**

- Only the best paths are candidates for export.

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| export-l2vpn-evpn-policy | Enable export of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)# instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# evpn
    dnRouter(cfg-protocols-evpn-ip-pfx)# export-l2vpn-evpn route-target 49844:20, 49844:30
    dnRouter(cfg-protocols-evpn-ip-pfx)# export-l2vpn-evpn policy L2VPN_EVPN_EXP_POL1


**Removing Configuration**

To stop the export process using the specified policy:
::

    dnRouter(cfg-protocols-evpn-ip-pfx)# no export-l2vpn-evpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/evpn/export-l2vpn-evpn-route-target.rst

network-services vrf instance protocols evpn export-l2vpn-evpn route-target
---------------------------------------------------------------------------

**Minimum user role:** operator

To export Route Type 5 IP-Prefix routes with the route-target specified towards the VxLAN network:

**Command syntax: export-l2vpn-evpn route-target [export-l2vpn-evpn-route-target]** [, export-l2vpn-evpn-route-target, export-l2vpn-evpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols evpn

**Note**

- You can export different multiple route-target tagged routes.

- All Routes in the VRF are candidates for export, by export-l2vpn-evpn policy and then add teh route-targets specified.

**Parameter table**

+--------------------------------+-----------------------------------------------+-------+---------+
| Parameter                      | Description                                   | Range | Default |
+================================+===============================================+=======+=========+
| export-l2vpn-evpn-route-target | Enable export of routes with route-target tag | \-    | \-      |
+--------------------------------+-----------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)# instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# evpn
    dnRouter(cfg-protocols-evpn-ip-pfx)# import-vpn route-target 49844:20, 49844:30
    dnRouter(cfg-protocols-evpn-ip-pfx)# import-vpn route-target 49844:40


**Removing Configuration**

To stop exporting routes with the specified route-target:
::

    dnRouter(cfg-protocols-evpn-ip-pfx)# no import-vpn route-target 49844:40

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/evpn/import-l2vpn-evpn-policy.rst

network-services vrf instance protocols evpn import-l2vpn-evpn policy
---------------------------------------------------------------------

**Minimum user role:** operator

To import routes from the L2VPN EVPN SAFI that comply with the specified policy.
Routes are imported to the private VRF.

**Command syntax: import-l2vpn-evpn policy [import-l2vpn-evpn-policy]** [, import-l2vpn-evpn-policy, import-l2vpn-evpn-policy]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols evpn

**Note**

- Only the best paths are candidates for import.

**Parameter table**

+--------------------------+----------------------------------------------------------------------------+------------------+---------+
| Parameter                | Description                                                                | Range            | Default |
+==========================+============================================================================+==================+=========+
| import-l2vpn-evpn-policy | Enable import of excommunity routes which comply with the specified policy | | string         | \-      |
|                          |                                                                            | | length 1-255   |         |
+--------------------------+----------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)# instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# evpn
    dnRouter(cfg-protocols-evpn-ip-pfx)# import-l2vpn-evpn route-target 49844:20, 49844:30
    dnRouter(cfg-protocols-evpn-ip-pfx)# import-l2vpn-evpn policy L2VPN_EVPN_EXP_POL1


**Removing Configuration**

To stop the export process using the specified policy:
::

    dnRouter(cfg-protocols-evpn-ip-pfx)# no import-l2vpn-evpn policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/evpn/import-l2vpn-evpn-route-target.rst

network-services vrf instance protocols evpn import-l2vpn-evpn route-target
---------------------------------------------------------------------------

**Minimum user role:** operator

To import BGP routes with the route-target specified in the VRF tables:

**Command syntax: import-l2vpn-evpn route-target [import-l2vpn-evpn-route-target]** [, import-l2vpn-evpn-route-target, import-l2vpn-evpn-route-target]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols evpn

**Note**

- You can import different multiple route-target tagged routes.

- All IP Prefix Routes are candidates for import, filter by route-target and then by import-l2vpn-evpn policy.

**Parameter table**

+--------------------------------+-----------------------------------------------------------------------+-------+---------+
| Parameter                      | Description                                                           | Range | Default |
+================================+=======================================================================+=======+=========+
| import-l2vpn-evpn-route-target | Enable import of routes with route-target specified to the vrf tables | \-    | \-      |
+--------------------------------+-----------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)# instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# evpn
    dnRouter(cfg-protocols-evpn-ip-pfx)# import-l2vpn-evpn route-target 49844:20, 49844:30
    dnRouter(cfg-protocols-evpn-ip-pfx)# import-l2vpn-evpn route-target 49844:40


**Removing Configuration**

To stop importing routes with the specified route-target:
::

    dnRouter(cfg-protocols-evpn-ip-pfx)# no import-l2vpn-evpn route-target 49844:40

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/evpn/transport-protocol/mpls.rst

network-services vrf instance protocols evpn transport-protocol mpls
--------------------------------------------------------------------

**Minimum user role:** operator

Define the mpls Transport.

**Command syntax: mpls**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols evpn transport-protocol

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)# instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# evpn
    dnRouter(cfg-protocols-evpn-ip-pfx)# transport-protocol
    dnRouter(cfg-evpn-ip-pfx-tp)# mpls


**Removing Configuration**

To remove the mpls definition
::

    dnRouter(cfg-evpn-ip-pfx-tp)# no mpls

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/evpn/transport-protocol/mpls/mpls.rst

network-services vrf instance protocols evpn transport-protocol mpls
--------------------------------------------------------------------

**Minimum user role:** operator

Define the mpls Transport.

**Command syntax: mpls**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols evpn transport-protocol

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)# instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# evpn
    dnRouter(cfg-protocols-evpn-ip-pfx)# transport-protocol
    dnRouter(cfg-evpn-ip-pfx-tp)# mpls
    dnRouter(cfg-ip-pfx-tp-mpls)


**Removing Configuration**

To remove the mpls definition
::

    dnRouter(cfg-evpn-ip-pfx-tp)# no mpls

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/evpn/transport-protocol/transport-protocol.rst

network-services vrf instance protocols evpn transport-protocol
---------------------------------------------------------------

**Minimum user role:** operator

The transport-protocol should be set to VxLAN

**Command syntax: transport-protocol**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols evpn

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)# instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# evpn
    dnRouter(cfg-protocols-evpn)# transport-protocol
    dnRouter(cfg-evpn-tp)#


**Removing Configuration**

To remove transport-protocol definitions - reverting then to their default values.
::

    dnRouter(cfg-protocols-evpn)# no transport-protocol

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/evpn/transport-protocol/vxlan/vni.rst

network-services vrf instance protocols evpn transport-protocol vxlan vni
-------------------------------------------------------------------------

**Minimum user role:** operator

Virtual Network Identifier (VNI). This VNI is used for ingress and egress in the EVPN VXLAN domain
To set VNI:

**Command syntax: vni [vni]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols evpn transport-protocol vxlan

**Note**
- Mandatory configuration when vxlan is selected as transport-protocol
- VNI value must be unique among all vxlan vni setting on system
- VNI value require to be coordinated with PEs in same service
- Reconfiguration of vni value is service effecting and may result in traffic loss

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------+---------+
| Parameter | Description                                                                      | Range      | Default |
+===========+==================================================================================+============+=========+
| vni       | Virtual Network Identifier (VNI) associated to the EVI. This VNI is used for     | 1-16777215 | \-      |
|           | ingress and egress in the VXLAN domain.                                          |            |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)# instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# evpn
    dnRouter(cfg-protocols-evpn-ip-pfx)# transport-protocol
    dnRouter(cfg-evpn-ip-pfx-tp)# vxlan
    dnRouter(cfg-ip-pfx-tp-vxlan) vni 3300


**Removing Configuration**

To remove vni configuration
::

    dnRouter(cfg-ip-pfx-tp-vxlan)# no vni

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/evpn/transport-protocol/vxlan/vtep-source-if.rst

network-services vrf instance protocols evpn transport-protocol vxlan vtep-source-if
------------------------------------------------------------------------------------

**Minimum user role:** operator

Specify a local interface from which ip address is taken for egress VTEP (VxLAN) tunnels as outer IP source address
To set source interface:

**Command syntax: vtep-source-if [loopback interface-name]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols evpn transport-protocol vxlan

**Note**
- Mandatory configuration when vxlan is selected as transport-protocol
- Interface must have the desired address-family ip address configure on it
- For proper evpn vxlan signaling is that the evpn nlri nexthop value be equal to address retrieved from configured vtep-source-ip
- Reconfiguration of vni value is service effecting and may result in traffic loss

**Parameter table**

+-------------------------+----------------------------------------------------------------------------------+--------------------------------+---------+
| Parameter               | Description                                                                      | Range                          | Default |
+=========================+==================================================================================+================================+=========+
| loopback interface-name | The name of the loopback interface from which ip address is taken to be used for | | configured interface name.   | \-      |
|                         | vxlan tunnels source address.                                                    | | lo<0-65535>                  |         |
+-------------------------+----------------------------------------------------------------------------------+--------------------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)# instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# evpn
    dnRouter(cfg-protocols-evpn-ip-pfx)# transport-protocol
    dnRouter(cfg-evpn-ip-pfx-tp)# vxlan
    dnRouter(cfg-ip-pfx-tp-vxlan) vtep-source-if lo0


**Removing Configuration**

To remove vtep-source-if configuration
::

    dnRouter(cfg-ip-pfx-tp-vxlan)# no vtep-source-if

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/evpn/transport-protocol/vxlan/vxlan.rst

network-services vrf instance protocols evpn transport-protocol vxlan
---------------------------------------------------------------------

**Minimum user role:** operator

Define the VXLAN Transport and the relevant options - vni and vtep-source-interface and counters.

**Command syntax: vxlan**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols evpn transport-protocol

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)# instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# evpn
    dnRouter(cfg-protocols-evpn-ip-pfx)# transport-protocol
    dnRouter(cfg-evpn-ip-pfx-tp)# vxlan
    dnRouter(cfg-ip-pfx-tp-vxlan)


**Removing Configuration**

To remove the vxlan definition
::

    dnRouter(cfg-evpn-ip-pfx-tp)# no vxlan

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/address-family_ipv4-unicast.rst

network-services vrf instance protocols static address-family ipv4-unicast
--------------------------------------------------------------------------

**Minimum user role:** operator

To enter static route configuration for an address-family:

**Command syntax: address-family ipv4-unicast**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static
- protocols static

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)#


**Removing Configuration**

To remove all address-family static routes:
::

    dnRouter(cfg-inst-protocols-static)# no address-family ipv4-unicast

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 6.0     | Command introduced                              |
+---------+-------------------------------------------------+
| 16.1    | Added command to the network services hierarchy |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/bfd/bfd.rst

network-services vrf instance protocols static address-family ipv4-unicast bfd
------------------------------------------------------------------------------

**Minimum user role:** operator

You can use the following command to enter the BFD configuration level for BFD protection of a static route. A BFD session is created when bfd-nexthop is configured and enabled, and nexthop is used by at least one static route of the same type (single-hop/multi-hop). When a static route nexthop is protected by BFD, it is valid only when BFD is up.

 To configure BFD protection of a static route:

**Command syntax: bfd**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast
- protocols static address-family ipv4-unicast

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)#


**Removing Configuration**

To revert to the default configuration:
::

    dnRouter(cfg-protocols-static-ipv4)# no bfd

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 12.0    | Command introduced                              |
+---------+-------------------------------------------------+
| 16.1    | Added command to the network services hierarchy |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/bfd/next-hop/admin-state.rst

network-services vrf instance protocols static address-family ipv4-unicast bfd next-hop admin-state
---------------------------------------------------------------------------------------------------

**Minimum user role:** operator

You can enable BFD for next-hop protection of a single hop static route. The static route will be valid for FIB installation only when BFD is UP.
When next-hop is used in any of the static routes, a BFD session will be formed to that address in order to protect the next-hop reachability. You can configure multiple BFD next-hops, each with its own BFD session parameters.
When admin-state is disabled, the bfd session is removed.
To enable/disable BFD for next-hop protection:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast bfd next-hop
- protocols static address-family ipv4-unicast bfd next-hop

**Parameter table**

+-------------+--------------------------------------+--------------+---------+
| Parameter   | Description                          | Range        | Default |
+=============+======================================+==============+=========+
| admin-state | set whether bfd protection is in use | | enabled    | enabled |
|             |                                      | | disabled   |         |
+-------------+--------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)# next-hop 1.1.1.1 single-hop
    dnRouter(cfg-static-ipv4-bfd-nh)# admin-state disabled
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)# next-hop 1.1.1.1 single-hop
    dnRouter(cfg-static-ipv4-bfd-nh)# admin-state disabled


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-static-ipv4-bfd-nh)# no admin-state

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 12.0    | Command introduced                              |
+---------+-------------------------------------------------+
| 16.1    | Added command to the network services hierarchy |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/bfd/next-hop/min-rx.rst

network-services vrf instance protocols static address-family ipv4-unicast bfd next-hop min-rx
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the bfd minimum receive interval (min-rx):

**Command syntax: min-rx [min-rx]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast bfd next-hop
- protocols static address-family ipv4-unicast bfd next-hop

**Parameter table**

+-----------+------------------------------------------------------+--------+---------+
| Parameter | Description                                          | Range  | Default |
+===========+======================================================+========+=========+
| min-rx    | set desired minimum receive interval for BFD session | 5-1700 | 300     |
+-----------+------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)# next-hop 1.1.1.1 single-hop
    dnRouter(cfg-static-ipv4-bfd-nh)# min-rx 50
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)# next-hop 1.1.1.1 single-hop
    dnRouter(cfg-static-ipv4-bfd-nh)# min-rx 50


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-static-ipv4-bfd-nh)# no min-rx

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 12.0    | Command introduced                              |
+---------+-------------------------------------------------+
| 15.1    | Added support for 5 msec interval               |
+---------+-------------------------------------------------+
| 16.1    | Added command to the network services hierarchy |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/bfd/next-hop/min-tx.rst

network-services vrf instance protocols static address-family ipv4-unicast bfd next-hop min-tx
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the bfd minimum transmit interval (min-tx):

**Command syntax: min-tx [min-tx]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast bfd next-hop
- protocols static address-family ipv4-unicast bfd next-hop

**Note**

- Due to a hardware limitation, the maximum supported transmit rate is 1700 msec. A negotiated transmit interval higher than 1700 msec will result in an actual transmit rate of 1700 msec.

**Parameter table**

+-----------+-------------------------------------------------------+--------+---------+
| Parameter | Description                                           | Range  | Default |
+===========+=======================================================+========+=========+
| min-tx    | set desired minimum transmit interval for BFD session | 5-1700 | 300     |
+-----------+-------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)# next-hop 1.1.1.1 single-hop
    dnRouter(cfg-static-ipv4-bfd-nh)# min-tx 50
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)# next-hop 1.1.1.1 single-hop
    dnRouter(cfg-static-ipv4-bfd-nh)# min-tx 50


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-static-ipv4-bfd-nh)# no min-tx

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 12.0    | Command introduced                              |
+---------+-------------------------------------------------+
| 15.1    | Added support for 5 msec interval               |
+---------+-------------------------------------------------+
| 16.1    | Added command to the network services hierarchy |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/bfd/next-hop/multiplier.rst

network-services vrf instance protocols static address-family ipv4-unicast bfd next-hop multiplier
--------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the bfd multiplier:

**Command syntax: multiplier [multiplier]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast bfd next-hop
- protocols static address-family ipv4-unicast bfd next-hop

**Parameter table**

+------------+--------------------------+-------+---------+
| Parameter  | Description              | Range | Default |
+============+==========================+=======+=========+
| multiplier | set local BFD multiplier | 2-16  | 3       |
+------------+--------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)# next-hop 1.1.1.1 single-hop
    dnRouter(cfg-static-ipv4-bfd-nh)# multiplier 5
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)# next-hop 1.1.1.1 single-hop
    dnRouter(cfg-static-ipv4-bfd-nh)# multiplier 5


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-static-ipv4-bfd-nh)# no multiplier

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 12.0    | Command introduced                              |
+---------+-------------------------------------------------+
| 16.1    | Added command to the network services hierarchy |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/bfd/next-hop/next-hop.rst

network-services vrf instance protocols static address-family ipv4-unicast bfd next-hop
---------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure BFD for Static route next-hop neighbor. Once next-hop is used in any of the static routes a BFD session will be formed to that address in order to protect the next-hop reachability. You can configure multiple BFD next-hops, each with it's own bfd session parameters.

**Command syntax: next-hop [ip-address]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast bfd
- protocols static address-family ipv4-unicast bfd

**Parameter table**

+------------+-----------------+---------+---------+
| Parameter  | Description     | Range   | Default |
+============+=================+=========+=========+
| ip-address | nexthop address | A.B.C.D | \-      |
+------------+-----------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)# next-hop 1.1.1.1
    dnRouter(cfg-static-ipv4-bfd-nh)#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)# next-hop 1.1.1.1
    dnRouter(cfg-static-ipv4-bfd-nh)#


**Removing Configuration**

To remove the BFD configuration of a specific next-hop:
::

    dnRouter(cfg-static-ipv4-bfd)# no next-hop 1::1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/bfd/next-hop/single-hop.rst

network-services vrf instance protocols static address-family ipv4-unicast bfd next-hop single-hop
--------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To define the next-hop type for the required BFD session type. A single-hop type is for a directly connected next-hop.

**Command syntax: single-hop**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast bfd next-hop
- protocols static address-family ipv4-unicast bfd next-hop

**Note**

- BFD type is a mandatory setting.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)# next-hop 1.1.1.1
    dnRouter(cfg-static-ipv4-bfd-nh)# single-hop
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# bfd
    dnRouter(cfg-static-ipv4-bfd)# next-hop 1.1.1.1
    dnRouter(cfg-static-ipv4-bfd-nh)# single-hop


**Removing Configuration**

To revert to default:
::

    dnRouter(cfg-static-ipv4-bfd-nh)# no single-hop

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 12.0    | Command introduced                              |
+---------+-------------------------------------------------+
| 16.1    | Added command to the network services hierarchy |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/route/description.rst

network-services vrf instance protocols static address-family ipv4-unicast route description
--------------------------------------------------------------------------------------------

**Minimum user role:** operator

Sets a description for the static route. The same route can have only one description, regardless of how many nexthop options it has. The description is visible under 'show config'. To enter a description for the static route:

**Command syntax: description [route-description]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast route
- protocols static address-family ipv4-unicast route

**Parameter table**

+-------------------+--------------------------------------+------------------+---------+
| Parameter         | Description                          | Range            | Default |
+===================+======================================+==================+=========+
| route-description | static-route destination description | | string         | \-      |
|                   |                                      | | length 1-255   |         |
+-------------------+--------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# route 172.16.172.0/24
    dnRouter(cfg-static-ipv4-route)# description "route to cluster 1"
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# route 172.16.172.0/24
    dnRouter(cfg-static-ipv4-route)# description "route to cluster 1"


**Removing Configuration**

To remove the description:
::

    dnRouter(cfg-static-ipv4-route)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 12.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/route/interface-next-hop.rst

network-services vrf instance protocols static address-family ipv4-unicast route next-hop interface
---------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Use this command to configure a static IP routing entry, matching an IP prefix to its designated gateway. The next-hop must be a connected address of the given interface. To set a static route entry:

**Command syntax: next-hop [ip-address] interface [interface]** admin-distance [admin-distance] icmp-echo-track [icmp-echo session name]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast route
- protocols static address-family ipv4-unicast route

**Note**

- The interface must match an attached interface in the same VRF.

- A static route IP must match the address family. E.g., in address family "ipv4 unicast" you can only set IPv4 addresses for route target and route next-hop.

- The next-hop address must be different from the route address.

- When configuring a non /32 ip-prefix, the route installed will be the matching subnet network address. For example, when configuring a route 192.168.1.197/26 next-hop 10.173.2.65, the configured static route will be 192.168.1.192/26. The same rule applies for ipv6 prefixes.

- icmp-echo-track - Condition static-route next-hop reachability on an icmp-echo performance-monitoring session. Next-hop is considered reachable and valid to be used only if icmp-echo session test is completed successfully with no threshold crossed

- You can set multiple next-hops and interfaces for the same route. A route is unique through the next-hop and interface combination.

**Parameter table**

+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter              | Description                                                                      | Range            | Default |
+========================+==================================================================================+==================+=========+
| ip-address             | target route destination                                                         | A.B.C.D          | \-      |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| interface              | target route destination                                                         | | string         | \-      |
|                        |                                                                                  | | length 1-255   |         |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| admin-distance         | administrative-distance for protocol preference when choosing a route for static | 1-255            | 1       |
|                        | ip route administrative distance if 1 by default                                 |                  |         |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| icmp-echo session name | Enable icmp-echo-track to track next-hop reachability using                      | | string         | \-      |
|                        | performance-monitoring icmp-echo session                                         | | length 1-255   |         |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# route 172.16.172.16/32
    dnRouter(cfg-static-ipv4-route)# next-hop 10.173.2.65 interface bundle-2 admin-distance 20
    dnRouter(cfg-static-ipv4-route)# next-hop 10.173.2.63 interface bundle-4 icmp-echo-track ICMP-ECHO-SESSION
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# route 172.16.172.16/32
    dnRouter(cfg-static-ipv4-route)# next-hop 10.173.2.65 interface bundle-2 admin-distance 20
    dnRouter(cfg-static-ipv4-route)# next-hop 10.173.2.63 interface bundle-4 icmp-echo-track ICMP-ECHO-SESSION


**Removing Configuration**

To revert optional parameters to their default values:
::

    dnRouter(cfg-static-ipv4-route)# no next-hop 10.173.2.65 interface bundle-2

**Command History**

+---------+----------------------------+
| Release | Modification               |
+=========+============================+
| 6.0     | Command introduced         |
+---------+----------------------------+
| 25.2    | Add icmp-echo-track option |
+---------+----------------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/route/metric.rst

network-services vrf instance protocols static address-family ipv4-unicast route metric
---------------------------------------------------------------------------------------

**Minimum user role:** operator

Specify a metric value that will be used for RIB route tie-break between routes with similar administrative-distance. Default metric value is 0.
To set route metric:

**Command syntax: metric [metric]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast route
- protocols static address-family ipv4-unicast route

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------+---------+
| Parameter | Description                                                                      | Range      | Default |
+===========+==================================================================================+============+=========+
| metric    | A metric which is utilised to specify the preference of the route entry when it  | 0-16777215 | 0       |
|           | is installed into the RIB.Metric will be taken into account as RIB route         |            |         |
|           | tie-break between routers with similar administrative-distance                   |            |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# route 172.16.172.0/24
    dnRouter(cfg-static-ipv4-route)# metric 10


**Removing Configuration**

To revert metric to default value:
::

    dnRouter(cfg-static-ipv4-route)# no metric

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/route/next-hop.rst

network-services vrf instance protocols static address-family ipv4-unicast route next-hop
-----------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure a static route matching an IP prefix to its designated gateway:

**Command syntax: next-hop [ip-address]** admin-distance [admin-distance] icmp-echo-track [icmp-echo session name]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast route
- protocols static address-family ipv4-unicast route

**Note**

- An static route IP must match the address family. E.g, in address family 'ipv4 unicast' you can only set ipv4 addresses for route target and route next-hop.

- When a non /32 ip-prefix is configured, the installed route will be the matching subnet network address. For example, when configuring a route 192.168.1.197/26 next-hop 10.173.2.65, the configured static route will be 192.168.1.192/26. The same rule applies for ipv6 prefixes.

- The next-hop must be a unicast address.

- The nexthop address must be different from the route address.

- icmp-echo-track - Condition static-route next-hop reachability on an icmp-echo performance-monitoring session. Next-hop is considered reachable and valid to be used only if icmp-echo session test is completed successfully with no threshold crossed

- You can set multiple next-hops for the same route.

**Parameter table**

+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter              | Description                                                                      | Range            | Default |
+========================+==================================================================================+==================+=========+
| ip-address             | target route destination                                                         | A.B.C.D          | \-      |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| admin-distance         | administrative-distance for protocol preference when choosing a route for static | 1-255            | 1       |
|                        | ip route administrative distance if 1 by default                                 |                  |         |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| icmp-echo session name | Enable icmp-echo-track to track next-hop reachability using                      | | string         | \-      |
|                        | performance-monitoring icmp-echo session                                         | | length 1-255   |         |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# route 172.16.172.16/32
    dnRouter(cfg-static-ipv4-route)# next-hop 10.173.2.65 admin-distance 20
    dnRouter(cfg-static-ipv4-route)# next-hop 10.173.2.64 icmp-echo-track ICMP-ECHO-SESSION
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# route 172.16.172.16/32
    dnRouter(cfg-static-ipv4-route)# next-hop 10.173.2.65 admin-distance 20
    dnRouter(cfg-static-ipv4-route)# next-hop 10.173.2.64 icmp-echo-track ICMP-ECHO-SESSION


**Removing Configuration**

To remove a specific next-hop:
::

    dnRouter(cfg-static-ipv4-route)# no next-hop 10.173.2.65

**Command History**

+---------+----------------------------+
| Release | Modification               |
+=========+============================+
| 6.0     | Command introduced         |
+---------+----------------------------+
| 25.2    | Add icmp-echo-track option |
+---------+----------------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/route/next-table.rst

network-services vrf instance protocols static address-family ipv4-unicast route next-table
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

Sets a static IP routing entry, where the next-hop information is taken from another VRF (VRF Leakage). To configure the static IP entry:

**Command syntax: next-table [next-table]** admin-distance [admin-distance]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast route
- protocols static address-family ipv4-unicast route

**Note**

- An IP static route must comply with its address family. e.g, in address family "ipv4-unicast" you can only set ipv4 addresses

- when user sets a non /32 ip-prefix, the route installed will be the matching subnet network address. For example if user set route 192.168.1.19  **7**/26 next-hop 10.173.2.65 the configured static route will be 192.168.1.19  **2**/26. The same rule applies for ipv6-prefix.

- the ip static route cannot be

- -  a limited broadcast address

- -  a multicast address

- route designated to next-table cannot have any other static route configuration that is not also configured to the same next-table vrf.

- no command removes the static route from RIB

**Parameter table**

+----------------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter      | Description                                                                      | Range            | Default |
+================+==================================================================================+==================+=========+
| next-table     | next-hop target is a reference to another vrf - the next hop should be taken     | | string         | \-      |
|                | from that vrf                                                                    | | length 1-255   |         |
+----------------+----------------------------------------------------------------------------------+------------------+---------+
| admin-distance | administrative-distance for protocol preference when choosing a route for static | 1-255            | 1       |
|                | ip route administrative distance if 1 by default                                 |                  |         |
+----------------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# route 172.16.172.16/32
    dnRouter(cfg-static-ipv4-route)# next-table other-vrf admin-distance 20


**Removing Configuration**

::

    dnRouter(cfg-static-ipv4-route)# no next-table other-vrf

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/route/null0.rst

network-services vrf instance protocols static address-family ipv4-unicast route null0
--------------------------------------------------------------------------------------

**Minimum user role:** operator

Sets a static ip routing entry, matching an ip prefix to its designated gateway.

**Command syntax: null0** admin-distance [admin-distance]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast route
- protocols static address-family ipv4-unicast route

**Note**

- A static route IP must match the address family. E.g., in address family "ipv4-unicast" you can only set ipv4 addresses.

- When configuring a non /32 ip-prefix, the route installed will be the matching subnet network address. For example, when configuring a route 192.168.1.197/26 next-hop 10.173.2.65, the configured static route will be 192.168.1.192/26. The same rule applies for ipv6 prefixes.

- The static route IP cannot be a limited broadcast address or a multicast address.

- A route designated to null0 cannot have any other static route configuration.

- tag - specifies a tag value that can be used as a match for controlling redistribution using route policies.

**Parameter table**

+----------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter      | Description                                                                      | Range | Default |
+================+==================================================================================+=======+=========+
| admin-distance | administrative-distance for protocol preference when choosing a route for static | 1-255 | 1       |
|                | ip route administrative distance if 1 by default                                 |       |         |
+----------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# route 172.16.172.16/32
    dnRouter(cfg-static-ipv4-route)# null0 admin-distance 20
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# route 172.16.172.16/32
    dnRouter(cfg-static-ipv4-route)# null0 admin-distance 20


**Removing Configuration**

To revert the static route from RIB to default:
::

    dnRouter(cfg-static-ipv4-route)# no null0

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/route/route.rst

network-services vrf instance protocols static address-family ipv4-unicast route
--------------------------------------------------------------------------------

**Minimum user role:** operator

To configure a static route matching an IP prefix to its designated gateway:

**Command syntax: route [ip-prefix]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast
- protocols static address-family ipv4-unicast

**Note**

- An static route IP must match the address family. E.g, in address family 'ipv4 unicast' you can only set ipv4 addresses for route target and route next-hop.

- When a non /32 ip-prefix is configured, the installed route will be the matching subnet network address. For example, when configuring a route 192.168.1.197/26 next-hop 10.173.2.65, the configured static route will be 192.168.1.192/26. The same rule applies for ipv6 prefixes.

- The next-hop must be a unicast address.

- The nexthop address must be different from the route address.

- You can set multiple next-hops for the same route.

**Parameter table**

+-----------+--------------------------+-----------+---------+
| Parameter | Description              | Range     | Default |
+===========+==========================+===========+=========+
| ip-prefix | target route destination | A.B.C.D/x | \-      |
+-----------+--------------------------+-----------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# route 172.16.172.16/32
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# route 172.16.172.16/32


**Removing Configuration**

To remove a specific next-hop:
::

    dnRouter(cfg-inst-protocols-static)# no route 172.16.172.16/32

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 6.0     | Command introduced                              |
+---------+-------------------------------------------------+
| 16.1    | Added command to the network services hierarchy |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/static/address-family_ipv4-unicast/route/tag.rst

network-services vrf instance protocols static address-family ipv4-unicast route tag
------------------------------------------------------------------------------------

**Minimum user role:** operator

Specify a tag value that can be used as a match for controlling static-route redistribution using route policies
Tag value may be signalled to network in IS-IS

**Command syntax: tag [tag]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv4-unicast route
- protocols static address-family ipv4-unicast route

**Parameter table**

+-----------+---------------+--------------+---------+
| Parameter | Description   | Range        | Default |
+===========+===============+==============+=========+
| tag       | add route tag | 1-4294967295 | \-      |
+-----------+---------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv4-unicast
    dnRouter(cfg-protocols-static-ipv4)# route 172.16.172.0/24
    dnRouter(cfg-static-ipv4-route)# tag 100


**Removing Configuration**

To remove tag:
::

    dnRouter(cfg-static-ipv4-route)# no tag

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/address-family_ipv6-unicast.rst

network-services vrf instance protocols static address-family ipv6-unicast
--------------------------------------------------------------------------

**Minimum user role:** operator

To enter static route configuration for an address-family:

**Command syntax: address-family ipv6-unicast**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static
- protocols static

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)#


**Removing Configuration**

To remove all address-family static routes:
::

    dnRouter(cfg-inst-protocols-static)# no address-family ipv6-unicast

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/bfd/bfd.rst

network-services vrf instance protocols static address-family ipv6-unicast bfd
------------------------------------------------------------------------------

**Minimum user role:** operator

You can use the following command to enter the BFD configuration level for BFD protection of a static route. A BFD session is created when bfd-nexthop is configured and enabled, and nexthop is used by at least one static route of the same type (single-hop/multi-hop). When a static route nexthop is protected by BFD, it is valid only when BFD is up.

To configure BFD protection of a static route:

**Command syntax: bfd**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast
- protocols static address-family ipv6-unicast

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)#


**Removing Configuration**

To remove all BFD configuration of the relevant address-family:
::

    dnRouter(cfg-protocols-static-ipv6)# no bfd

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 12.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/bfd/next-hop/admin-state.rst

network-services vrf instance protocols static address-family ipv6-unicast bfd next-hop admin-state
---------------------------------------------------------------------------------------------------

**Minimum user role:** operator

You can enable BFD for next-hop protection of a single hop static route. The static route will be valid for FIB installation only when BFD is UP.

When next-hop is used in any of the static routes, a BFD session will be formed to that address in order to protect the next-hop reachability. You can configure multiple BFD next-hops, each with its own BFD session parameters.

When admin-state is disabled, the BFD session is removed.

To enable/disable BFD for next-hop protection:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast bfd next-hop
- protocols static address-family ipv6-unicast bfd next-hop

**Parameter table**

+-------------+--------------------------------------+--------------+---------+
| Parameter   | Description                          | Range        | Default |
+=============+======================================+==============+=========+
| admin-state | set whether bfd protection is in use | | enabled    | enabled |
|             |                                      | | disabled   |         |
+-------------+--------------------------------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)# next-hop 1::1 single-hop
    dnRouter(cfg-static-ipv6-bfd-nh)# admin-state disabled
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)# next-hop 1.1.1.1 single-hop
    dnRouter(cfg-static-ipv6-bfd-nh)# admin-state disabled


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-static-ipv6-bfd-nh)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 12.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/bfd/next-hop/min-rx.rst

network-services vrf instance protocols static address-family ipv6-unicast bfd next-hop min-rx
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the bfd minimum receive interval (min-rx):

**Command syntax: min-rx [min-rx]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast bfd next-hop
- protocols static address-family ipv6-unicast bfd next-hop

**Parameter table**

+-----------+------------------------------------------------------+--------+---------+
| Parameter | Description                                          | Range  | Default |
+===========+======================================================+========+=========+
| min-rx    | set desired minimum receive interval for BFD session | 5-1700 | 300     |
+-----------+------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)# next-hop 1::1 single-hop
    dnRouter(cfg-static-ipv6-bfd-nh)# min-rx 50
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)# next-hop 1.1.1.1 single-hop
    dnRouter(cfg-static-ipv6-bfd-nh)# min-rx 50


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-static-ipv6-bfd-nh)# no min-rx

**Command History**

+---------+-----------------------------------+
| Release | Modification                      |
+=========+===================================+
| 12.0    | Command introduced                |
+---------+-----------------------------------+
| 15.1    | Added support for 5 msec interval |
+---------+-----------------------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/bfd/next-hop/min-tx.rst

network-services vrf instance protocols static address-family ipv6-unicast bfd next-hop min-tx
----------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the bfd minimum transmit interval (min-tx):

**Command syntax: min-tx [min-tx]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast bfd next-hop
- protocols static address-family ipv6-unicast bfd next-hop

**Note**

- Due to a hardware limitation, the maximum supported transmit rate is 1700 msec. A negotiated transmit interval higher than 1700 msec will result in an actual transmit rate of 1700 msec.

**Parameter table**

+-----------+-------------------------------------------------------+--------+---------+
| Parameter | Description                                           | Range  | Default |
+===========+=======================================================+========+=========+
| min-tx    | set desired minimum transmit interval for BFD session | 5-1700 | 300     |
+-----------+-------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)# next-hop 1::1 single-hop
    dnRouter(cfg-static-ipv6-bfd-nh)# min-tx 50
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)# next-hop 1.1.1.1 single-hop
    dnRouter(cfg-static-ipv6-bfd-nh)# min-tx 50


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-static-ipv6-bfd-nh)# no min-tx

**Command History**

+---------+-----------------------------------+
| Release | Modification                      |
+=========+===================================+
| 12.0    | Command introduced                |
+---------+-----------------------------------+
| 15.1    | Added support for 5 msec interval |
+---------+-----------------------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/bfd/next-hop/multiplier.rst

network-services vrf instance protocols static address-family ipv6-unicast bfd next-hop multiplier
--------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the bfd multiplier:

**Command syntax: multiplier [multiplier]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast bfd next-hop
- protocols static address-family ipv6-unicast bfd next-hop

**Parameter table**

+------------+--------------------------+-------+---------+
| Parameter  | Description              | Range | Default |
+============+==========================+=======+=========+
| multiplier | set local BFD multiplier | 2-16  | 3       |
+------------+--------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)# next-hop 1::1 single-hop
    dnRouter(cfg-static-ipv6-bfd-nh)# multiplier 5
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)# next-hop 1.1.1.1 single-hop
    dnRouter(cfg-static-ipv6-bfd-nh)# multiplier 5


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-static-ipv6-bfd-nh)# no multiplier

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 12.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/bfd/next-hop/next-hop.rst

network-services vrf instance protocols static address-family ipv6-unicast bfd next-hop
---------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure BFD for Static route next-hop neighbor. Once next-hop is used in any of the static routes a BFD session will be formed to that address in order to protect the next-hop reachability. You can configure multiple BFD next-hops, each with it's own bfd session parameters.

**Command syntax: next-hop [ip-address]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast bfd
- protocols static address-family ipv6-unicast bfd

**Parameter table**

+------------+-----------------+----------+---------+
| Parameter  | Description     | Range    | Default |
+============+=================+==========+=========+
| ip-address | nexthop address | X:X::X:X | \-      |
+------------+-----------------+----------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)# next-hop 1::1
    dnRouter(cfg-static-ipv6-bfd-nh)#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)# next-hop 1::1
    dnRouter(cfg-static-ipv6-bfd-nh)#


**Removing Configuration**

To remove the BFD configuration of a specific next-hop:
::

    dnRouter(cfg-static-ipv6-bfd)# no next-hop 1::1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 12.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/bfd/next-hop/single-hop.rst

network-services vrf instance protocols static address-family ipv6-unicast bfd next-hop single-hop
--------------------------------------------------------------------------------------------------

**Minimum user role:** operator

This command defines the next-hop type required for BFD. A single-hop type is for a directly-connected next-hop. To set the BFD type for BFD protecting a static route:

**Command syntax: single-hop**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast bfd next-hop
- protocols static address-family ipv6-unicast bfd next-hop

**Note**

- BFD type is a mandatory configuration.

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)# next-hop 1::1
    dnRouter(cfg-static-ipv6-bfd-nh)# single-hop
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# bfd
    dnRouter(cfg-static-ipv6-bfd)# next-hop 1::1
    dnRouter(cfg-static-ipv6-bfd-nh)# single-hop


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-static-ipv6-bfd-nh)# no single-hop

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 12.0    | Command introduced                              |
+---------+-------------------------------------------------+
| 16.1    | Added command to the network services hierarchy |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/route/description.rst

network-services vrf instance protocols static address-family ipv6-unicast route description
--------------------------------------------------------------------------------------------

**Minimum user role:** operator

Sets a description for the static route. The same route can have only one description, regardless of how many nexthop options it has. The description is visible under 'show config'. To enter a description for the static route:

**Command syntax: description [route-description]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast route
- protocols static address-family ipv6-unicast route

**Parameter table**

+-------------------+--------------------------------------+------------------+---------+
| Parameter         | Description                          | Range            | Default |
+===================+======================================+==================+=========+
| route-description | static-route destination description | | string         | \-      |
|                   |                                      | | length 1-255   |         |
+-------------------+--------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# route 232:16::8:0/96
    dnRouter(cfg-static-ipv6-route)# description MY_DESCRIPTION
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# route 232:16::8:0/96
    dnRouter(cfg-static-ipv6-route)# description MY_DESCRIPTION


**Removing Configuration**

To remove the description:
::

    dnRouter(cfg-static-ipv6-route)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 12.0    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/route/interface-next-hop.rst

network-services vrf instance protocols static address-family ipv6-unicast route next-hop interface
---------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Use this command to configure a static IP routing entry, matching an IP prefix to its designated gateway. The next-hop must be a connected address of the given interface. To set a static route entry:

**Command syntax: next-hop [ip-address] interface [interface]** admin-distance [admin-distance] icmp-echo-track [icmp-echo session name]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast route
- protocols static address-family ipv6-unicast route

**Note**

- The interface must match an attached interface in the same VRF.

- A static route IP must match the address family. E.g., in address family "ipv6 unicast" you can only set IPv6 addresses for route target and route next-hop.

- The next-hop address must be different from the route address.

- icmp-echo-track - Condition static-route next-hop reachability on an icmp-echo performance-monitoring session. Next-hop is considered reachable and valid to be used only if icmp-echo session test is completed successfully with no threshold crossed

- You can set multiple next-hops and interfaces for the same route. A route is unique through the next-hop and interface combination.

**Parameter table**

+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter              | Description                                                                      | Range            | Default |
+========================+==================================================================================+==================+=========+
| ip-address             | target route destination                                                         | X:X::X:X         | \-      |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| interface              | target route destination                                                         | | string         | \-      |
|                        |                                                                                  | | length 1-255   |         |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| admin-distance         | administrative-distance for protocol preference when choosing a route for static | 1-255            | 1       |
|                        | ip route administrative distance if 1 by default                                 |                  |         |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| icmp-echo session name | Enable icmp-echo-track to track next-hop reachability using                      | | string         | \-      |
|                        | performance-monitoring icmp-echo session                                         | | length 1-255   |         |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# route ::ffff:172.16.172.16/128
    dnRouter(cfg-static-ipv6-route)# next-hop 2001:3::65 interface bundle-3 admin-distance 20
    dnRouter(cfg-static-ipv6-route)# next-hop 2001:3::66 interface bundle-4 icmp-echo-track ICMP-ECHO-SESSION
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# route ::ffff:172.16.172.16/128
    dnRouter(cfg-static-ipv6-route)# next-hop 2001:3::65 interface bundle-3 admin-distance 20
    dnRouter(cfg-static-ipv6-route)# next-hop 2001:3::66 interface bundle-4 icmp-echo-track ICMP-ECHO-SESSION


**Removing Configuration**

To revert optional parameters to their default values:
::

    dnRouter(cfg-static-ipv6-route)# no next-hop 2001:3::65 interface bundle-2 admin-distance 20

**Command History**

+---------+----------------------------+
| Release | Modification               |
+=========+============================+
| 6.0     | Command introduced         |
+---------+----------------------------+
| 25.2    | Add icmp-echo-track option |
+---------+----------------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/route/metric.rst

network-services vrf instance protocols static address-family ipv6-unicast route metric
---------------------------------------------------------------------------------------

**Minimum user role:** operator

Specify a metric value that will be used for RIB route tie-break between routes with similar administrative-distance. Default metric value is 0.
To set route metric:

**Command syntax: metric [metric]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast route
- protocols static address-family ipv6-unicast route

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------+---------+
| Parameter | Description                                                                      | Range      | Default |
+===========+==================================================================================+============+=========+
| metric    | A metric which is utilised to specify the preference of the route entry when it  | 0-16777215 | 0       |
|           | is installed into the RIB.Metric will be taken into account as RIB route         |            |         |
|           | tie-break between routers with similar administrative-distance                   |            |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# route 232:16::8:0/96
    dnRouter(cfg-static-ipv6-route)# metric 10


**Removing Configuration**

To revert metric to default value:
::

    dnRouter(cfg-static-ipv4-route)# no metric

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/route/next-hop.rst

network-services vrf instance protocols static address-family ipv6-unicast route next-hop
-----------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure a static route matching an IP prefix to its designated gateway:

**Command syntax: next-hop [ip-address]** admin-distance [admin-distance] icmp-echo-track [icmp-echo session name]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast route
- protocols static address-family ipv6-unicast route

**Note**

- A static route IP must match the address family. E.g., in address family 'ipv6 unicast' you can only set ipv6 addresses for route target and route next-hop.

- When a non /128 ip-prefix is configured, the route installed will be the matching subnet network address.

- The next-hop must be a unicast address.

- The next-hop address must be different from the route address.

- icmp-echo-track - Condition static-route next-hop reachability on an icmp-echo performance-monitoring session. Next-hop is considered reachable and valid to be used only if icmp-echo session test is completed successfully with no threshold crossed

- You can set multiple next-hops for the same route.

**Parameter table**

+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter              | Description                                                                      | Range            | Default |
+========================+==================================================================================+==================+=========+
| ip-address             | target route destination                                                         | X:X::X:X         | \-      |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| admin-distance         | administrative-distance for protocol preference when choosing a route for static | 1-255            | 1       |
|                        | ip route administrative distance if 1 by default                                 |                  |         |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+
| icmp-echo session name | Enable icmp-echo-track to track next-hop reachability using                      | | string         | \-      |
|                        | performance-monitoring icmp-echo session                                         | | length 1-255   |         |
+------------------------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# route ::ffff:172.16.172.16/128
    dnRouter(cfg-static-ipv6-route)# next-hop 2001:3::65 admin-distance 20
    dnRouter(cfg-static-ipv4-route)# next-hop 2001:3::64 icmp-echo-track ICMP-ECHO-SESSION
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# route ::ffff:172.16.172.16/128
    dnRouter(cfg-static-ipv6-route)# next-hop 2001:3::65 admin-distance 20
    dnRouter(cfg-static-ipv4-route)# next-hop 2001:3::64 icmp-echo-track ICMP-ECHO-SESSION


**Removing Configuration**

To remove a specific next-hop:
::

    dnRouter(cfg-static-ipv6-route)# no next-hop 2001:3::65 admin-distance 20

**Command History**

+---------+----------------------------+
| Release | Modification               |
+=========+============================+
| 6.0     | Command introduced         |
+---------+----------------------------+
| 25.2    | Add icmp-echo-track option |
+---------+----------------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/route/next-table.rst

network-services vrf instance protocols static address-family ipv6-unicast route next-table
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

Sets a static IP routing entry, where the next-hop information is taken from another VRF (VRF Leakage). To configure the static IP entry:

**Command syntax: next-table [next-table]** admin-distance [admin-distance]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast route
- protocols static address-family ipv6-unicast route

**Note**

- An IP static route must comply with its address family. e.g, in address family "ipv6-unicast" you can only set ipv6 addresses

- when user sets a non /128 ip-prefix, the route installed will be the matching subnet network address. For example if user set route 2001:0db8::0000:0370:7334/112 next-table other-vrf the configured static route will be 2001:0db8::0000:0370:0000/112.

- the ip static route cannot be

- -  a limited broadcast address

- -  a multicast address

- route designated to next-table cannot have any other static route configuration that is not also configured to the same next-table vrf.

- no command removes the static route from RIB

**Parameter table**

+----------------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter      | Description                                                                      | Range            | Default |
+================+==================================================================================+==================+=========+
| next-table     | next-hop target is a reference to another vrf - the next hop should be taken     | | string         | \-      |
|                | from that vrf                                                                    | | length 1-255   |         |
+----------------+----------------------------------------------------------------------------------+------------------+---------+
| admin-distance | administrative-distance for protocol preference when choosing a route for static | 1-255            | 1       |
|                | ip route administrative distance if 1 by default                                 |                  |         |
+----------------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# route 2001:0db8:85a3:0000:0000:8a2e:0370:7334/128
    dnRouter(cfg-static-ipv6-route)# next-table other-vrf admin-distance 20


**Removing Configuration**

::

    dnRouter(cfg-static-ipv6-route)# no next-table other-vrf

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/route/null0.rst

network-services vrf instance protocols static address-family ipv6-unicast route null0
--------------------------------------------------------------------------------------

**Minimum user role:** operator

Sets a static ip routing entry, matching an ip prefix to its designated gateway.

**Command syntax: null0** admin-distance [admin-distance]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast route
- protocols static address-family ipv6-unicast route

**Note**

- A static route IP must match the address family. E.g., in address family "ipv4-unicast" you can only set ipv4 addresses.

- When configuring a non /32 ip-prefix, the route installed will be the matching subnet network address. For example, when configuring a route 192.168.1.197/26 next-hop 10.173.2.65, the configured static route will be 192.168.1.192/26. The same rule applies for ipv6 prefixes.

- The static route IP cannot be a limited broadcast address or a multicast address.

- A route designated to null0 cannot have any other static route configuration.

- tag - specifies a tag value that can be used as a match for controlling redistribution using route policies.

**Parameter table**

+----------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter      | Description                                                                      | Range | Default |
+================+==================================================================================+=======+=========+
| admin-distance | administrative-distance for protocol preference when choosing a route for static | 1-255 | 1       |
|                | ip route administrative distance if 1 by default                                 |       |         |
+----------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# route ::ffff:172.16.172.16/128
    dnRouter(cfg-static-ipv6-route)# null0 admin-distance 20
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# route ::ffff:172.16.172.16/128
    dnRouter(cfg-static-ipv6-route)# null0 admin-distance 20


**Removing Configuration**

To revert the static route from RIB to default:
::

    dnRouter(cfg-static-ipv6-route)# no null0

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/route/route.rst

network-services vrf instance protocols static address-family ipv6-unicast route
--------------------------------------------------------------------------------

**Minimum user role:** operator

To configure a static route matching an IP prefix to its designated gateway:

**Command syntax: route [ip-prefix]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast
- protocols static address-family ipv6-unicast

**Note**

- An static route IP must match the address family. E.g, in address family 'ipv4 unicast' you can only set ipv4 addresses for route target and route next-hop.

- When a non /32 ip-prefix is configured, the installed route will be the matching subnet network address. For example, when configuring a route 192.168.1.197/26 next-hop 10.173.2.65, the configured static route will be 192.168.1.192/26. The same rule applies for ipv6 prefixes.

- The next-hop must be a unicast address.

- The nexthop address must be different from the route address.

- You can set multiple next-hops for the same route.

**Parameter table**

+-----------+--------------------------+------------+---------+
| Parameter | Description              | Range      | Default |
+===========+==========================+============+=========+
| ip-prefix | target route destination | X:X::X:X/x | \-      |
+-----------+--------------------------+------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# route 1::/64
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# route 1::/64


**Removing Configuration**

To remove a specific next-hop:
::

    dnRouter(cfg-inst-protocols-static)# no route route 1::/64

**Command History**

+---------+-------------------------------------------------+
| Release | Modification                                    |
+=========+=================================================+
| 6.0     | Command introduced                              |
+---------+-------------------------------------------------+
| 16.1    | Added command to the network services hierarchy |
+---------+-------------------------------------------------+

---

## vrf/instance/protocols/static/address-family_ipv6-unicast/route/tag.rst

network-services vrf instance protocols static address-family ipv6-unicast route tag
------------------------------------------------------------------------------------

**Minimum user role:** operator

Specify a tag value that can be used as a match for controlling static-route redistribution using route policies
Tag value may be signalled to network in IS-IS

**Command syntax: tag [tag]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static address-family ipv6-unicast route
- protocols static address-family ipv6-unicast route

**Parameter table**

+-----------+---------------+--------------+---------+
| Parameter | Description   | Range        | Default |
+===========+===============+==============+=========+
| tag       | add route tag | 1-4294967295 | \-      |
+-----------+---------------+--------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# address-family ipv6-unicast
    dnRouter(cfg-protocols-static-ipv6)# route 232:16::8:0/96
    dnRouter(cfg-static-ipv6-route)# tag 100


**Removing Configuration**

To remove tag:
::

    dnRouter(cfg-static-ipv6-route)# no tag

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/maximum-routes.rst

network-services vrf instance protocols static maximum-routes threshold
-----------------------------------------------------------------------

**Minimum user role:** operator

To configure the system maximum static route limit and threshold: The parameters will be used to invoke a system-event when the limit and threshold are crossed.

**Command syntax: maximum-routes [maximum] threshold [threshold]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols static
- protocols static

**Note**

- The thresholds are for generating system-events only.

- The thresholds are for IPv4 and IPv6 routes combined.

- When the threshold is cleared, a single system-event notification is generated.

- There is no limitation on the number of static routes that you can configure.

**Parameter table**

+-----------+---------------------------------------+---------+---------+
| Parameter | Description                           | Range   | Default |
+===========+=======================================+=========+=========+
| maximum   | Maximum Number of Static Routes       | 1-65535 | 2000    |
+-----------+---------------------------------------+---------+---------+
| threshold | Threshold Percentage for Static Route | 1-100   | 75      |
+-----------+---------------------------------------+---------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)# maximum-routes 2000 threshold 70
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)# maximum-routes 2000 threshold 70


**Removing Configuration**

To revert maximum & threshold to default:
::

    dnRouter(cfg-inst-protocols-static)# no maximum-routes

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/static/static.rst

network-services vrf instance protocols static
----------------------------------------------

**Minimum user role:** operator

Routers forward packets using either route information from route table entries that you manually configure or the route information that is calculated using dynamic routing algorithms. You can supplement dynamic routes with static routes where appropriate. Static routes are useful in environments where network traffic is predictable and where the network design is simple and for specifying a gateway of last resort (a default router to which all unroutable packets are sent).
To configure static routes, enter the static configuration hierarchy:

**Command syntax: static**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols
- protocols

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# static
    dnRouter(cfg-protocols-static)#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-network-services)# vrf
    dnRouter(cfg-network-services-vrf)# instance VRF_1
    dnRouter(cfg-network-services-vrf-inst)# protocols
    dnRouter(cfg-vrf-inst-protocols)# static
    dnRouter(cfg-inst-protocols-static)#


**Removing Configuration**

To remove all static config per vrf instance:
::

    dnRouter(cfg-vrf-inst-protocols)# no static

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 6.0     | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv4/afi_ipv4.rst

network-services vrf instance protocols vrrp interface address-family ipv4
--------------------------------------------------------------------------

**Minimum user role:** operator

To enter the VRRP IPv4 address-family configuration on the interface:

**Command syntax: address-family ipv4**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface
- protocols vrrp interface

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)#


**Removing Configuration**

To remove the address-family configuration:
::

    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# no address-family ipv4

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv4/vrid/accept-mode.rst

network-services vrf instance protocols vrrp interface address-family ipv4 vrid accept-mode admin-state
-------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enable or disable accept mode for the VRRP group:

**Command syntax: accept-mode admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv4 vrid
- protocols vrrp interface address-family ipv4 vrid

**Note**
Enables a backup VRRP device to respond to ping, traceroute, and Telnet packets if the backup device becomes the master VRRP router.

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                                      | Range        | Default  |
+=============+==================================================================================+==============+==========+
| admin-state | Controls whether a virtual router in master state will accept packets addressed  | | enabled    | disabled |
|             | to the address owner's IPvX address as its own if it is not the IPvX address     | | disabled   |          |
|             | owner.  The default is 'false'.  Deployments that rely on, for example, pinging  |              |          |
|             | the address owner's IPvX address may wish to configure accept-mode to 'true'.    |              |          |
|             | Note: IPv6 Neighbor Solicitations and Neighbor Advertisements MUST NOT be        |              |          |
|             | dropped when accept-mode is 'false'.                                             |              |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# accept-mode admin-state enabled


**Removing Configuration**

To return the accept-mode admin-state to its default value:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no accept-mode

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv4/vrid/address.rst

network-services vrf instance protocols vrrp interface address-family ipv4 vrid address
---------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure virtual IP addresses for the VRRP group:

**Command syntax: address [ip-address]** [, ip-address, ip-address]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv4 vrid
- protocols vrrp interface address-family ipv4 vrid

**Note**

- Both IPv4 and IPv6 prefixes are supported, but cannot be mixed in the same group.

- For IPv6 address family IPv6 link local address is auto-generated, configuration applies to IPv6 global unicast addresses

**Parameter table**

+------------+---------------------------------------------------+--------------+---------+
| Parameter  | Description                                       | Range        | Default |
+============+===================================================+==============+=========+
| ip-address | Configure virtual IP addresses for the VRRP group | | A.B.C.D    | \-      |
|            |                                                   | | X:X::X:X   |         |
+------------+---------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# address 200.10.10.6/32

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# address 200.10.10.6/32, 200.10.20.6/32


**Removing Configuration**

To remove all virtual IP addresses from the VRRP group:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no address

To remove a specific virtual IP address from the VRRP group:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no address 200.10.10.6/32

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv4/vrid/admin-state.rst

network-services vrf instance protocols vrrp interface address-family ipv4 vrid admin-state
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the administrative state of the VRRP group:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv4 vrid
- protocols vrrp interface address-family ipv4 vrid

**Parameter table**

+-------------+------------------------+--------------+---------+
| Parameter   | Description            | Range        | Default |
+=============+========================+==============+=========+
| admin-state | VRRP group admin-state | | enabled    | enabled |
|             |                        | | disabled   |         |
+-------------+------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# admin-state enabled


**Removing Configuration**

To return the admin-state to its default value:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv4/vrid/advertisement-timer.rst

network-services vrf instance protocols vrrp interface address-family ipv4 vrid advertisement-timer
---------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the VRRP announcemenets advertiseement timer value for the VRRP group:

**Command syntax: advertisement-timer [advertisement-interval] [units]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv4 vrid
- protocols vrrp interface address-family ipv4 vrid

**Parameter table**

+------------------------+----------------------------------------------------------+------------------+--------------+
| Parameter              | Description                                              | Range            | Default      |
+========================+==========================================================+==================+==============+
| advertisement-interval | Sets the interval between successive VRRP advertisements | 10-40950         | 1000         |
+------------------------+----------------------------------------------------------+------------------+--------------+
| units                  |                                                          | | milliseconds   | milliseconds |
|                        |                                                          | | centiseconds   |              |
|                        |                                                          | | seconds        |              |
+------------------------+----------------------------------------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# advertisement-timer 1000 milliseconds


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no advertisement-timer

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv4/vrid/description.rst

network-services vrf instance protocols vrrp interface address-family ipv4 vrid description
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set a description for the VRRP group:

**Command syntax: description [description]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv4 vrid
- protocols vrrp interface address-family ipv4 vrid

**Parameter table**

+-------------+------------------------+------------------+---------+
| Parameter   | Description            | Range            | Default |
+=============+========================+==================+=========+
| description | VRRP group description | | string         | \-      |
|             |                        | | length 1-255   |         |
+-------------+------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# description MyFirstVirtual_Router-1


**Removing Configuration**

To remove the description:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv4/vrid/preempt-mode_admin_state.rst

network-services vrf instance protocols vrrp interface address-family ipv4 vrid preempt-mode admin-state
--------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enable or disable preeempt mode for the VRRP group:

**Command syntax: preempt-mode admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv4 vrid
- protocols vrrp interface address-family ipv4 vrid

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter   | Description                                                                      | Range        | Default |
+=============+==================================================================================+==============+=========+
| admin-state | When activated enables preemption by a higher priority backup router of a lower  | | enabled    | enabled |
|             | priority master router                                                           | | disabled   |         |
+-------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# preempt-mode admin-state enabled


**Removing Configuration**

To return the preempt-mode admin-state to its default value:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no preempt-mode admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv4/vrid/preempt-mode_delay.rst

network-services vrf instance protocols vrrp interface address-family ipv4 vrid preempt-mode delay
--------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the preeempt delay to wait before a backup router will attempt preempting the master for the VRRP group:

**Command syntax: preempt-mode delay [preempt-delay]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv4 vrid
- protocols vrrp interface address-family ipv4 vrid

**Parameter table**

+---------------+------------------------------------------------------------------+--------+---------+
| Parameter     | Description                                                      | Range  | Default |
+===============+==================================================================+========+=========+
| preempt-delay | Set the delay the higher priority router waits before preempting | 0-3600 | 1       |
+---------------+------------------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# preempt-mode delay 3


**Removing Configuration**

To return the preempt-mode delay to its default value:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no preempt-mode delay

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv4/vrid/priority.rst

network-services vrf instance protocols vrrp interface address-family ipv4 vrid priority
----------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the priority level for the VRRP group:

**Command syntax: priority [priority]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv4 vrid
- protocols vrrp interface address-family ipv4 vrid

**Parameter table**

+-----------+----------------------------------------------------------------------------------+-------+---------+
| Parameter | Description                                                                      | Range | Default |
+===========+==================================================================================+=======+=========+
| priority  | Specifies the sending VRRP interface's priority for the virtual router.  Higher  | 1-254 | 100     |
|           | values equal higher priority                                                     |       |         |
+-----------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# priority 240


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no priority

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv4/vrid/tracking/interface.rst

network-services vrf instance protocols vrrp interface address-family ipv4 vrid tracking interface
--------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure tracking of interface's operational status and reduce priority if it goes down:

**Command syntax: interface [tracked-interface]** priority-decrement [priority-decrement]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv4 vrid tracking
- protocols vrrp interface address-family ipv4 vrid tracking

**Parameter table**

+--------------------+----------------------------------------------------------------------------------+----------------------------------------+---------+
| Parameter          | Description                                                                      | Range                                  | Default |
+====================+==================================================================================+========================================+=========+
| tracked-interface  | Track an interface                                                               | | geX-<f>/<n>/<p>                      | \-      |
|                    |                                                                                  | | geX-<f>/<n>/<p>.<sub-interface-id>   |         |
|                    |                                                                                  | | bundle-<bundle-id>                   |         |
|                    |                                                                                  | | bundle-<bundle-id.sub-bundle-id>     |         |
|                    |                                                                                  | | loX                                  |         |
|                    |                                                                                  | | irb<0-65535>                         |         |
+--------------------+----------------------------------------------------------------------------------+----------------------------------------+---------+
| priority-decrement | Specifies how much to decrement the priority of the VRRP instance if the         | 1-254                                  | 10      |
|                    | interface goes down                                                              |                                        |         |
+--------------------+----------------------------------------------------------------------------------+----------------------------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# tracking
    dnRouter(cfg-afi-vrid-tracking)# interface bundle-2 priority-decrement 25


**Removing Configuration**

To remove a specific interface tracked for the VRRP group:
::

    dnRouter(cfg-afi-vrid-tracking)# no interface bundle-2

To revert the priority-decrement back to its default value for the specified tracked interface:
::

    dnRouter(cfg-afi-vrid-tracking)# no interface bundle-2 priority-decrement 30

**Command History**

+---------+----------------------------------------+
| Release | Modification                           |
+=========+========================================+
| 17.2    | Command introduced                     |
+---------+----------------------------------------+
| 18.0    | Added IRB support to tracked-interface |
+---------+----------------------------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv4/vrid/tracking/route.rst

network-services vrf instance protocols vrrp interface address-family ipv4 vrid tracking route vrf
--------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure tracking of route's reachability and reduce priority if it becomes unreachable:

**Command syntax: route [prefix] vrf [vrf-name]** priority-decrement [priority-decrement]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv4 vrid tracking
- protocols vrrp interface address-family ipv4 vrid tracking

**Parameter table**

+--------------------+----------------------------------------------------------------------------------+-----------+---------+
| Parameter          | Description                                                                      | Range     | Default |
+====================+==================================================================================+===========+=========+
| prefix             | The IPv4 prefix of the network to track.                                         | A.B.C.D/x | \-      |
+--------------------+----------------------------------------------------------------------------------+-----------+---------+
| vrf-name           | Routing instance to which the route belongs, or 'default'                        | \-        | \-      |
+--------------------+----------------------------------------------------------------------------------+-----------+---------+
| priority-decrement | Specifies how much to decrement the priority of the VRRP router if there is a    | 1-254     | 10      |
|                    | failure in the IPv4 network.                                                     |           |         |
+--------------------+----------------------------------------------------------------------------------+-----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# tracking
    dnRouter(cfg-afi-vrid-tracking)# route 1.1.1.1/24 vrf default priority-decrement 35


**Removing Configuration**

To remove a specific route tracked for the VRRP group:
::

    dnRouter(cfg-afi-vrid-tracking)# no route 1.1.1.1/24 vrf default

To revert the priority-decrement back to its default value for the specified tracked route:
::

    dnRouter(cfg-afi-vrid-tracking)# no route 1.1.1.1/24 vrf default priority-decrement 30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv4/vrid/tracking/tracking.rst

network-services vrf instance protocols vrrp interface address-family ipv4 vrid tracking
----------------------------------------------------------------------------------------

**Minimum user role:** operator

To enter VRRP objects tracking configuration hierarchy:

**Command syntax: tracking**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv4 vrid
- protocols vrrp interface address-family ipv4 vrid

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# tracking
    dnRouter(cfg-afi-vrid-tracking)#


**Removing Configuration**

To remove the objects tracking configuration from the VRRP group:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no tracking

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv4/vrid/vrid.rst

network-services vrf instance protocols vrrp interface address-family ipv4 vrid
-------------------------------------------------------------------------------

**Minimum user role:** operator

To configure a VRRP group and enter its configuration hierarchy:

**Command syntax: vrid [virtual-router-id]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv4
- protocols vrrp interface address-family ipv4

**Parameter table**

+-------------------+-----------------------------------------------------------------+-------+---------+
| Parameter         | Description                                                     | Range | Default |
+===================+=================================================================+=======+=========+
| virtual-router-id | References the configured virtual router id for this VRRP group | 1-255 | \-      |
+-------------------+-----------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv4
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)#

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)#


**Removing Configuration**

To remove the VRRP group configuration:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# no vrid 1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv6/afi_ipv6.rst

network-services vrf instance protocols vrrp interface address-family ipv6
--------------------------------------------------------------------------

**Minimum user role:** operator

To enter the VRRP IPv6 address-family configuration on the interface:

**Command syntax: address-family ipv6**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface
- protocols vrrp interface

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# protocols vrrp
    dnRouter(cfg-protocols-vrrp)# interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)#


**Removing Configuration**

To remove the address-family configuration:
::

    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# no address-family ipv6

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv6/vrid/accept-mode.rst

network-services vrf instance protocols vrrp interface address-family ipv6 vrid accept-mode admin-state
-------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enable or disable accept mode for the VRRP group:

**Command syntax: accept-mode admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv6 vrid
- protocols vrrp interface address-family ipv6 vrid

**Note**
Enables a backup VRRP device to respond to ping, traceroute, and Telnet packets if the backup device becomes the master VRRP router.

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                                      | Range        | Default  |
+=============+==================================================================================+==============+==========+
| admin-state | Controls whether a virtual router in master state will accept packets addressed  | | enabled    | disabled |
|             | to the address owner's IPvX address as its own if it is not the IPvX address     | | disabled   |          |
|             | owner.  The default is 'false'.  Deployments that rely on, for example, pinging  |              |          |
|             | the address owner's IPvX address may wish to configure accept-mode to 'true'.    |              |          |
|             | Note: IPv6 Neighbor Solicitations and Neighbor Advertisements MUST NOT be        |              |          |
|             | dropped when accept-mode is 'false'.                                             |              |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# accept-mode admin-state disabled


**Removing Configuration**

To return the accept-mode admin-state to its default value:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no accept-mode

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv6/vrid/address.rst

network-services vrf instance protocols vrrp interface address-family ipv6 vrid address
---------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure virtual IP addresses for the VRRP group:

**Command syntax: address [ip-address]** [, ip-address, ip-address]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv6 vrid
- protocols vrrp interface address-family ipv6 vrid

**Note**

- Both IPv4 and IPv6 prefixes are supported, but cannot be mixed in the same group.

- For IPv6 address family IPv6 link local address is auto-generated, configuration applies to IPv6 global unicast addresses

**Parameter table**

+------------+---------------------------------------------------+--------------+---------+
| Parameter  | Description                                       | Range        | Default |
+============+===================================================+==============+=========+
| ip-address | Configure virtual IP addresses for the VRRP group | | A.B.C.D    | \-      |
|            |                                                   | | X:X::X:X   |         |
+------------+---------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# address 2001:608::/32

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# address 2001:608::/32, 2001:604::/32


**Removing Configuration**

To remove all virtual IP addresses from the VRRP group:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no address

To remove a specific virtual IP address from the VRRP group:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no address 2001:608::/32

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv6/vrid/admin-state.rst

network-services vrf instance protocols vrrp interface address-family ipv6 vrid admin-state
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the administrative state of the VRRP group:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv6 vrid
- protocols vrrp interface address-family ipv6 vrid

**Parameter table**

+-------------+------------------------+--------------+---------+
| Parameter   | Description            | Range        | Default |
+=============+========================+==============+=========+
| admin-state | VRRP group admin-state | | enabled    | enabled |
|             |                        | | disabled   |         |
+-------------+------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# admin-state disabled


**Removing Configuration**

To return the admin-state to its default value:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv6/vrid/advertisement-timer.rst

network-services vrf instance protocols vrrp interface address-family ipv6 vrid advertisement-timer
---------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the VRRP announcemenets advertiseement timer value for the VRRP group:

**Command syntax: advertisement-timer [advertisement-interval] [units]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv6 vrid
- protocols vrrp interface address-family ipv6 vrid

**Parameter table**

+------------------------+----------------------------------------------------------+------------------+--------------+
| Parameter              | Description                                              | Range            | Default      |
+========================+==========================================================+==================+==============+
| advertisement-interval | Sets the interval between successive VRRP advertisements | 10-40950         | 1000         |
+------------------------+----------------------------------------------------------+------------------+--------------+
| units                  |                                                          | | milliseconds   | milliseconds |
|                        |                                                          | | centiseconds   |              |
|                        |                                                          | | seconds        |              |
+------------------------+----------------------------------------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# advertisement-timer 5 seconds


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no advertisement-timer

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv6/vrid/description.rst

network-services vrf instance protocols vrrp interface address-family ipv6 vrid description
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set a description for the VRRP group:

**Command syntax: description [description]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv6 vrid
- protocols vrrp interface address-family ipv6 vrid

**Parameter table**

+-------------+------------------------+------------------+---------+
| Parameter   | Description            | Range            | Default |
+=============+========================+==================+=========+
| description | VRRP group description | | string         | \-      |
|             |                        | | length 1-255   |         |
+-------------+------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# description MyFirstVirtual_Router-1


**Removing Configuration**

To remove the description:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv6/vrid/preempt-mode_admin_state.rst

network-services vrf instance protocols vrrp interface address-family ipv6 vrid preempt-mode admin-state
--------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enable or disable preeempt mode for the VRRP group:

**Command syntax: preempt-mode admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv6 vrid
- protocols vrrp interface address-family ipv6 vrid

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter   | Description                                                                      | Range        | Default |
+=============+==================================================================================+==============+=========+
| admin-state | When activated enables preemption by a higher priority backup router of a lower  | | enabled    | enabled |
|             | priority master router                                                           | | disabled   |         |
+-------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# preempt-mode admin-state disabled


**Removing Configuration**

To return the preempt-mode admin-state to its default value:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no preempt-mode admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv6/vrid/preempt-mode_delay.rst

network-services vrf instance protocols vrrp interface address-family ipv6 vrid preempt-mode delay
--------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the preeempt delay to wait before a backup router will attempt preempting the master for the VRRP group:

**Command syntax: preempt-mode delay [preempt-delay]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv6 vrid
- protocols vrrp interface address-family ipv6 vrid

**Parameter table**

+---------------+------------------------------------------------------------------+--------+---------+
| Parameter     | Description                                                      | Range  | Default |
+===============+==================================================================+========+=========+
| preempt-delay | Set the delay the higher priority router waits before preempting | 0-3600 | 1       |
+---------------+------------------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# preempt-mode delay 1


**Removing Configuration**

To return the preempt-mode delay to its default value:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no preempt-mode delay

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv6/vrid/priority.rst

network-services vrf instance protocols vrrp interface address-family ipv6 vrid priority
----------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the priority level for the VRRP group:

**Command syntax: priority [priority]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv6 vrid
- protocols vrrp interface address-family ipv6 vrid

**Parameter table**

+-----------+----------------------------------------------------------------------------------+-------+---------+
| Parameter | Description                                                                      | Range | Default |
+===========+==================================================================================+=======+=========+
| priority  | Specifies the sending VRRP interface's priority for the virtual router.  Higher  | 1-254 | 100     |
|           | values equal higher priority                                                     |       |         |
+-----------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# priority 240


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no priority

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv6/vrid/tracking/interface.rst

network-services vrf instance protocols vrrp interface address-family ipv6 vrid tracking interface
--------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure tracking of interface's operational status and reduce priority if it goes down:

**Command syntax: interface [tracked-interface]** priority-decrement [priority-decrement]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv6 vrid tracking
- protocols vrrp interface address-family ipv6 vrid tracking

**Parameter table**

+--------------------+----------------------------------------------------------------------------------+----------------------------------------+---------+
| Parameter          | Description                                                                      | Range                                  | Default |
+====================+==================================================================================+========================================+=========+
| tracked-interface  | Track an interface                                                               | | geX-<f>/<n>/<p>                      | \-      |
|                    |                                                                                  | | geX-<f>/<n>/<p>.<sub-interface-id>   |         |
|                    |                                                                                  | | bundle-<bundle-id>                   |         |
|                    |                                                                                  | | bundle-<bundle-id.sub-bundle-id>     |         |
|                    |                                                                                  | | loX                                  |         |
|                    |                                                                                  | | irb<0-65535>                         |         |
+--------------------+----------------------------------------------------------------------------------+----------------------------------------+---------+
| priority-decrement | Specifies how much to decrement the priority of the VRRP instance if the         | 1-254                                  | 10      |
|                    | interface goes down                                                              |                                        |         |
+--------------------+----------------------------------------------------------------------------------+----------------------------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# tracking
    dnRouter(cfg-afi-vrid-tracking)# interface bundle-2 priority-decrement 40


**Removing Configuration**

To remove a specific interface tracked for the VRRP group:
::

    dnRouter(cfg-afi-vrid-tracking)# no interface bundle-2

To revert the priority-decrement back to its default value for the specified tracked interface:
::

    dnRouter(cfg-afi-vrid-tracking)# no interface bundle-2 priority-decrement 30

**Command History**

+---------+----------------------------------------+
| Release | Modification                           |
+=========+========================================+
| 17.2    | Command introduced                     |
+---------+----------------------------------------+
| 18.0    | Added IRB support to tracked-interface |
+---------+----------------------------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv6/vrid/tracking/route.rst

network-services vrf instance protocols vrrp interface address-family ipv6 vrid tracking route vrf
--------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure tracking of route's reachability and reduce priority if it becomes unreachable:

**Command syntax: route [prefix] vrf [vrf-name]** priority-decrement [priority-decrement]

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv6 vrid tracking
- protocols vrrp interface address-family ipv6 vrid tracking

**Parameter table**

+--------------------+----------------------------------------------------------------------------------+------------+---------+
| Parameter          | Description                                                                      | Range      | Default |
+====================+==================================================================================+============+=========+
| prefix             | The IPv6 prefix of the network to track.                                         | X:X::X:X/x | \-      |
+--------------------+----------------------------------------------------------------------------------+------------+---------+
| vrf-name           | Routing instance to which the route belongs, or 'default'                        | \-         | \-      |
+--------------------+----------------------------------------------------------------------------------+------------+---------+
| priority-decrement | Specifies how much to decrement the priority of the VRRP router if there is a    | 1-254      | 10      |
|                    | failure in the IPv6 network.                                                     |            |         |
+--------------------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# tracking
    dnRouter(cfg-afi-vrid-tracking)# route 2000:76CC::12/64 vrf default priority-decrement 100


**Removing Configuration**

To remove a specific route tracked for the VRRP group:
::

    dnRouter(cfg-afi-vrid-tracking)# no route 2000:76CC::12/64 vrf default

To revert the priority-decrement back to its default value for the specified tracked route:
::

    dnRouter(cfg-afi-vrid-tracking)# no route 2000:76CC::12/64 vrf default priority-decrement 30

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv6/vrid/tracking/tracking.rst

network-services vrf instance protocols vrrp interface address-family ipv6 vrid tracking
----------------------------------------------------------------------------------------

**Minimum user role:** operator

To enter VRRP objects tracking configuration hierarchy:

**Command syntax: tracking**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv6 vrid
- protocols vrrp interface address-family ipv6 vrid

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# tracking
    dnRouter(cfg-afi-vrid-tracking)#


**Removing Configuration**

To remove the objects tracking configuration from the VRRP group:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)# no tracking

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/afi_ipv6/vrid/vrid.rst

network-services vrf instance protocols vrrp interface address-family ipv6 vrid
-------------------------------------------------------------------------------

**Minimum user role:** operator

To configure a VRRP group and enter its configuration hierarchy:

**Command syntax: vrid [virtual-router-id]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols vrrp interface address-family ipv6
- protocols vrrp interface address-family ipv6

**Parameter table**

+-------------------+-----------------------------------------------------------------+-------+---------+
| Parameter         | Description                                                     | Range | Default |
+===================+=================================================================+=======+=========+
| virtual-router-id | References the configured virtual router id for this VRRP group | 1-255 | \-      |
+-------------------+-----------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)# address-family ipv6
    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# vrid 1
    dnRouter(cfg-vrrp-ge100-0/0/0-afi-vrid)#


**Removing Configuration**

To remove the VRRP group configuration:
::

    dnRouter(cfg-vrrp-ge100-0/0/0-afi)# no vrid 1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/protocols/vrrp/vrrp.rst

network-services vrf instance protocols vrrp interface
------------------------------------------------------

**Minimum user role:** operator

To enable VRRP on an interface and enter interface configuration mode:


**Command syntax: vrrp interface [interface-name]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance protocols
- protocols

**Parameter table**

+----------------+-----------------------------------------------------+----------------------------------------+---------+
| Parameter      | Description                                         | Range                                  | Default |
+================+=====================================================+========================================+=========+
| interface-name | The name of the interface on which VRRP is enabled. | | geX-<f>/<n>/<p>                      | \-      |
|                |                                                     | | geX-<f>/<n>/<p>.<sub-interface-id>   |         |
|                |                                                     | | bundle-<bundle-id>                   |         |
|                |                                                     | | bundle-<bundle-id.sub-bundle-id>     |         |
|                |                                                     | | irb<0-65535>                         |         |
+----------------+-----------------------------------------------------+----------------------------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# protocols
    dnRouter(cfg-protocols)# vrrp interface ge100-0/0/0
    dnRouter(cfg-protocols-vrrp-ge100-0/0/0)#

    dnRouter(cfg-protocols)# vrrp interface bundle-2.1012
    dnRouter(cfg-protocols-vrrp-bundle-2.1012)#


**Removing Configuration**

To disable the VRRP process on an interface:
::

    dnRouter(cfg-protocols)# no vrrp interface ge100-0/0/0

To remove all VRRP configuration:
::

    dnRouter(cfg-protocols)# no vrrp

**Command History**

+---------+----------------------------------------+
| Release | Modification                           |
+=========+========================================+
| 17.2    | Command introduced                     |
+---------+----------------------------------------+
| 18.0    | Added IRB support to tracked-interface |
+---------+----------------------------------------+
| 19.3    | Add no vrrp command                    |
+---------+----------------------------------------+

---

## vrf/instance/routing-options/maximum-routes/maximum-routes.rst

network-services vrf instance routing-options maximum-routes address-family
---------------------------------------------------------------------------

**Minimum user role:** operator

To configure  maximum number of routes for the address family that  should be allowed within the non default VRF network instance.
When the specified value is reached, no further prefixes should be installed into the system's RIB from this network instance 
In case warning-only is enabled new routes should still be installed. 

**Command syntax: maximum-routes address-family [address-family]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance routing-options

**Note**

- maximum is a mandatory config for a maximum-route address family

- Connected and Static routes are always installed by RIB regardless of maximum route limit. These routes are counted for limit enforcement

- Route installment limit apply for BGP and IGP routes may result in blackholing

- The defined maximum limit is enforce by BGP so that BGP will not accept more then maximum routes and thus will not advertise routes to peers reducing blackholing risk

**Parameter table**

+----------------+-----------------------------------------------------------------------------+----------+---------+
| Parameter      | Description                                                                 | Range    | Default |
+================+=============================================================================+==========+=========+
| address-family | Reference to the address family for which the route limit is being applied. | | ipv4   | \-      |
|                |                                                                             | | ipv6   |         |
+----------------+-----------------------------------------------------------------------------+----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# routing-options
    dnRouter(cfg-vrf-inst-routing-options)# maximum-routes address-family ipv4
    dnRouter(cfg-inst-routing-options-max-routes)#

    dnRouter(cfg-vrf-inst-routing-options)# maximum-routes address-family ipv6
    dnRouter(cfg-inst-routing-options-max-routes)#


**Removing Configuration**

To disable maximum route limit for a given address family:
::

    dnRouter(cfg-vrf-inst-routing-options)# no maximum-routes address-family ipv4

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/routing-options/maximum-routes/maximum.rst

network-services vrf instance routing-options maximum-routes address-family maximum
-----------------------------------------------------------------------------------

**Minimum user role:** operator

The maximum number of routes for the address family. The system should not install more than maximum number of prefixes into the FIB unless the warning-only leaf is specified
To set maximum route limit:

**Command syntax: maximum [max-routes]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance routing-options maximum-routes address-family

**Note**

- In case RIB enforce maximum route limit by not installing to FIB an installed RIB route of a given protocol, blackholing may happen

**Parameter table**

+------------+------------------------------------------------+--------------+---------+
| Parameter  | Description                                    | Range        | Default |
+============+================================================+==============+=========+
| max-routes | The maximum number VRF routes RIB will install | 0-4294967295 | \-      |
+------------+------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# routing-options
    dnRouter(cfg-vrf-inst-routing-options)# maximum-routes address-family ipv4
    dnRouter(cfg-inst-routing-options-max-routes)# maximum 5000


**Removing Configuration**

To revert to the default values:
::

    dnRouter(cfg-inst-routing-options-max-routes)# no maximum

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/routing-options/maximum-routes/threshold.rst

network-services vrf instance routing-options maximum-routes address-family threshold
-------------------------------------------------------------------------------------

**Minimum user role:** operator

Percent of route maximum limit for which an alarm should be generated (when the threshold number of installed routes is crossed).
To set the threshold:

**Command syntax: threshold [threshold]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance routing-options maximum-routes address-family

**Parameter table**

+-----------+----------------------------------------------------------------------------------+-------+---------+
| Parameter | Description                                                                      | Range | Default |
+===========+==================================================================================+=======+=========+
| threshold | A percentage (%) of maximum routes limit to give you advance notice about RIB    | 1-100 | 75      |
|           | route scale.                                                                     |       |         |
+-----------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# routing-options
    dnRouter(cfg-vrf-inst-routing-options)# maximum-routes address-family ipv4
    dnRouter(cfg-inst-routing-options-max-routes)# threshold 85


**Removing Configuration**

To revert to the default values:
::

    dnRouter(cfg-inst-routing-options-max-routes)# no threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/routing-options/maximum-routes/warning-only.rst

network-services vrf instance routing-options maximum-routes address-family warning-only
----------------------------------------------------------------------------------------

**Minimum user role:** operator

When enabled, the route limit specified is considered only as a warning - and routes should continue to be installed into the
RIB over the limit specified in the maximum leaf.
To set warning-only:

**Command syntax: warning-only [warning-only]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance routing-options maximum-routes address-family

**Parameter table**

+--------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter    | Description                                                                      | Range        | Default  |
+==============+==================================================================================+==============+==========+
| warning-only | When enabled, the route limit specified is considered only as a warning - and    | | enabled    | disabled |
|              | routes should continue to be installed into the RIB over the limit specified in  | | disabled   |          |
|              | the maximum leaf.                                                                |              |          |
+--------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# routing-options
    dnRouter(cfg-vrf-inst-routing-options)# maximum-routes address-family ipv4
    dnRouter(cfg-inst-routing-options-max-routes)# warning-only enabled


**Removing Configuration**

To revert behavior to default:
::

    dnRouter(cfg-inst-routing-options-max-routes)# no warning-only

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## vrf/instance/routing-options/next-hop-resolution/ipv4-min-length.rst

network-services vrf instance routing-options next-hop-resolution ipv4 min-length
---------------------------------------------------------------------------------

**Minimum user role:** operator

An operator can set the min-length constraint for the next-hop resolution by RIB. 
A common case is to set a long prefix length to avoid next-hop addresses to be resolved over default-route or summary-route, which may lead to traffic blackholing. 

To configure next-hop-resolution min-length:

**Command syntax: ipv4 min-length [ipv4-min-length]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance routing-options next-hop-resolution
- routing-options next-hop-resolution

**Note**
- For 6PE, mapped IPv6 nexthop addresses ({::ffff:<ipv4-address>}) are handled in RIB as IPv4 address, and will be subjected to IPv4 min-length.

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter       | Description                                                                      | Range | Default |
+=================+==================================================================================+=======+=========+
| ipv4-min-length | Route that resolve a recursive next-hop must comply with the configured prefix   | 1-32  | \-      |
|                 | length minimum value in order to be valid                                        |       |         |
+-----------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# routing-options
    dnRouter(cfg-routing-option)# next-hop-resolution
    dnRouter(cfg-routing-option-nh-resolution)# ipv4 min-length 30

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# routing-options
    dnRouter(cfg-vrf-inst-routing-options)# next-hop-resolution
    dnRouter(cfg-inst-routing-option-nh-resolution)# ipv4 min-length 30


**Removing Configuration**

To remove ipv4 min-length configuration:
::

    dnRouter(cfg-routing-option-nh-resolution)# no ipv4 min-length

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/routing-options/next-hop-resolution/ipv6-min-length.rst

network-services vrf instance routing-options next-hop-resolution ipv6 min-length
---------------------------------------------------------------------------------

**Minimum user role:** operator

An operator can set the min-length constraint for next-hop resolution by RIB. 
A common case is to set a long prefix length to avoid next-hop addresses to be resolved over default-route or summary-route, which may lead to traffic blackholing. 

To configure next-hop-resolution min-length:

**Command syntax: ipv6 min-length [ipv6-min-length]**

**Command mode:** config

**Hierarchies**

- network-services vrf instance routing-options next-hop-resolution
- routing-options next-hop-resolution

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter       | Description                                                                      | Range | Default |
+=================+==================================================================================+=======+=========+
| ipv6-min-length | Route that resolve a recursive next-hop must comply with the configured prefix   | 1-128 | \-      |
|                 | length minimum value in order to be valid                                        |       |         |
+-----------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# routing-options
    dnRouter(cfg-routing-option)# next-hop-resolution
    dnRouter(cfg-routing-option-nh-resolution)# ipv6 min-length 120

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# routing-options
    dnRouter(cfg-vrf-inst-routing-options)# next-hop-resolution
    dnRouter(cfg-inst-routing-option-nh-resolution)# ipv6 min-length 120


**Removing Configuration**

To remove ipv6 min-length configuration:
::

    dnRouter(cfg-routing-option-nh-resolution)# no ipv6 min-length

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/routing-options/next-hop-resolution/next-hop-resolution.rst

network-services vrf instance routing-options next-hop-resolution
-----------------------------------------------------------------

**Minimum user role:** operator

Routing protocols leverage RIBs to find out how their route next-hop is resolved. This behavior is done via a next-hop-tracking mechanism. 
When a recursive route is installed, RIB resolves the route next-hop over its table to provide full route solution to FIB.  This behavior is known as PIC
An operator can configure a next-hop resolution constraint that will be enforced by the RIB. When a next-hop-resolution constraint is configured, the RIB will enforce that the resolving route of a protocol route nexthop must match required constraint. 
In case no route is found that can meet desired constraints: 
* RIB will reply to client protocol that no solution was found for next-hop tracking registration
* RIB will not install a Route path to the FIB for a nexthop with no valid solution.
To enter the mpls-nh-ipv6 routing table configuration level:

**Command syntax: next-hop-resolution**

**Command mode:** config

**Hierarchies**

- network-services vrf instance routing-options
- routing-options

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# routing-options
    dnRouter(cfg-routing-option)# next-hop-resolution
    dnRouter(cfg-routing-option-nh-resolution)#

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# routing-options
    dnRouter(cfg-vrf-inst-routing-options)# next-hop-resolution
    dnRouter(cfg-inst-routing-option-nh-resolution)#


**Removing Configuration**

To revert all next-hop-resolution configurations to default:
::

    dnRouter(cfg-routing-option)# no next-hop-resolution

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/routing-options/qppb-per-vrf.rst

network-services vrf instance routing-options qppb-per-vrf
----------------------------------------------------------

**Minimum user role:** operator

An operator can choose that all IP traffic forwarded in the non-default vrf will be subjected to qppb match, regardless of the traffic ingress interface.
To enable per vrf qppb:

**Command syntax: qppb-per-vrf**

**Command mode:** config

**Hierarchies**

- network-services vrf instance routing-options

**Note**

- When qppb-per-vrf is set for a given vrf, interfaces that belong to that vrf cannot have qppb configuration. The user will not be able have either 'qppb enabled' or 'qppb disabled' for an interface in vrf which has qppb-per-ver.

- Traffic redirected to non-default vrf is subjected to qppb logic

- VPN traffic terminated in non-default vrf is subjected to qppb logic only when qppb-per-vrf is set

- When qppb-per-vrf is set, qppb statistics are provided per qppb rule level without interface granularity.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# qppb-per-vrf enabled


**Removing Configuration**

To revert the behavior to its default:
::

    dnRouter(cfg-netsrv-vrf-inst)# no qppb-per-vrf

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## vrf/instance/routing-options/routing-options.rst

network-services vrf instance routing-options
---------------------------------------------

**Minimum user role:** operator

Enter routing-options configuration level for non default VRF:

**Command syntax: routing-options**

**Command mode:** config

**Hierarchies**

- network-services vrf instance

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf instance customer_vrf_1
    dnRouter(cfg-netsrv-vrf-inst)# routing-options
    dnRouter(cfg-vrf-inst-routing-options)#


**Removing Configuration**

To revert all routing options configuration to default state:
::

    dnRouter(cfg-netsrv-vrf-inst)# no routing-options

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## vrf/vrf.rst

network-services vrf
--------------------

**Minimum user role:** operator

To enter the VRF configuration hierarchy under network-services:

**Command syntax: vrf**

**Command mode:** config

**Hierarchies**

- network-services

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# network-services
    dnRouter(cfg-netsrv)# vrf
    dnRouter(cfg-netsrv-vrf)#


**Removing Configuration**

The remove non-default VRFs and restore default VRFs:
::

    dnRouter(cfg-netsrv)# no vrf

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

---

# SECTION 2: SERVICES

Files from Services folder:      190 files

## ethernet-oam/cfm/cfm.rst

services ethernet-oam connectivity-fault-management
---------------------------------------------------

**Minimum user role:** operator

To enter the CFM OAM configuration mode:

**Command syntax: connectivity-fault-management**

**Command mode:** config

**Hierarchies**

- services ethernet-oam

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-services)# ethernet-oam
    dnRouter(cfg-services-eoam)# connectivity-fault-management


**Removing Configuration**

To remove the CFM OAM service:
::

    dnRouter(cfg-services-eoam)# no connectivity-fault-management

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/global/global.rst

services ethernet-oam connectivity-fault-management global
----------------------------------------------------------

**Minimum user role:** operator

To enter the CFM global configuration:

**Command syntax: global**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# global
    dnRouter(cfg-eoam-cfm-global)#


**Removing Configuration**

To remove the CFM OAM global configuration and revert it to default:
::

    dnRouter(cfg-srv-eoam-cfm)# no global

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/global/maximum-auto-threshold.rst

services ethernet-oam connectivity-fault-management global maximum-auto-threshold
---------------------------------------------------------------------------------

**Minimum user role:** operator

Specifies the percentage of the value specified by *maximum-auto* that causes a syslog message to be generated.

**Command syntax: maximum-auto-threshold [maximum-auto-syslog-threshold]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management global

**Parameter table**

+-------------------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter                     | Description                                                                      | Range | Default |
+===============================+==================================================================================+=======+=========+
| maximum-auto-syslog-threshold | The percentage of the maximum limit of dynamically learned remote MEPs in the    | 1-100 | 75      |
|                               | system to trigger a syslog system event.                                         |       |         |
+-------------------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# global
    dnRouter(cfg-eoam-cfm-global)# maximum-auto-threshold 75


**Removing Configuration**

To revert to the default maximum-auto-threshold value:
::

    dnRouter(cfg-eoam-cfm-global)# no maximum-auto-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/global/maximum-auto.rst

services ethernet-oam connectivity-fault-management global maximum-auto
-----------------------------------------------------------------------

**Minimum user role:** operator

By setting the maximum-auto attribute, you control the number of remote MEPs that can be auto-discovered in the system.

To set the number of auto-discovered remote MEPs that can be learned in the system:

**Command syntax: maximum-auto [maximum-auto]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management global

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

- The maximum-auto configuration affects the total number of dynamically learned remote MEPs, and also the number of static remote MEPs that can be configured in the system (8K - maximum-auto)

**Parameter table**

+--------------+---------------------------------------------------------------------+--------+---------+
| Parameter    | Description                                                         | Range  | Default |
+==============+=====================================================================+========+=========+
| maximum-auto | The maximum limit of dynamically learned remote MEPs in the system. | 0-8191 | 2048    |
+--------------+---------------------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# global
    dnRouter(cfg-eoam-cfm-global)# maximum-auto 4096


**Removing Configuration**

To revert maximum-auto configuration to its default value:
::

    dnRouter(cfg-eoam-cfm-global)# no maximum-auto

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/level.rst

services ethernet-oam connectivity-fault-management maintenance-domains level
-----------------------------------------------------------------------------

**Minimum user role:** operator

To configure the level of the CFM maintenance domain:

**Command syntax: level [md-level]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+-----------+-------------------------------+-------+---------+
| Parameter | Description                   | Range | Default |
+===========+===============================+=======+=========+
| md-level  | The Maintenance Domain level. | 0-7   | \-      |
+-----------+-------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# level 5


**Removing Configuration**

To remove the level for a specific Maintenance Domain:
::

    dnRouter(cfg-eoam-cfm-md)# no level

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/continuity-check/continuity-check.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations continuity-check
-----------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enter the CFM continuity check configuration:

**Command syntax: continuity-check**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# continuity-check
    dnRouter(cfg-md-ma-ccm)#


**Removing Configuration**

To revert the Continuity Check configuration for a specific Maintenance Association to its default values:
::

    dnRouter(cfg-cfm-md-ma)# no continuity-check

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/continuity-check/fault-alarm.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations continuity-check fault-alarm lowest-priority-defect
----------------------------------------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the fault alarm reporting:

**Command syntax: fault-alarm lowest-priority-defect [lowest-priority-defect]** defect-delay [alarm-timer] clear-delay [reset-timer]

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations continuity-check

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+------------------------+----------------------------------------------------------------------+---------------------------+-----------------------+
| Parameter              | Description                                                          | Range                     | Default               |
+========================+======================================================================+===========================+=======================+
| lowest-priority-defect | The lowest priority defect that is allowed to generate fault alarms. | | all-defects             | mac-remote-error-xcon |
|                        |                                                                      | | mac-remote-error-xcon   |                       |
|                        |                                                                      | | remote-error-xcon       |                       |
|                        |                                                                      | | error-xcon              |                       |
|                        |                                                                      | | xcon                    |                       |
|                        |                                                                      | | no-defects              |                       |
+------------------------+----------------------------------------------------------------------+---------------------------+-----------------------+
| alarm-timer            | The time that defect must be present before a Fault Alarm is issued. | 2500-10000                | 2500                  |
+------------------------+----------------------------------------------------------------------+---------------------------+-----------------------+
| reset-timer            | The time that defects must be absent before resetting a Fault Alarm. | 2500-10000                | 10000                 |
+------------------------+----------------------------------------------------------------------+---------------------------+-----------------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# continuity-check
    dnRouter(cfg-md-ma-ccm)# fault-alarm lowest-priority-defect mac-remote-error-xcon


**Removing Configuration**

To revert continuity check fault alarm configuration to its default value:
::

    dnRouter(cfg-md-ma-ccm)# no fault-alarm

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/continuity-check/interval.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations continuity-check interval
--------------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the interval for transmission of continuity check messages:

**Command syntax: interval [ccm-interval]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations continuity-check

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+--------------+----------------------------------------------------------------------------------+-----------+---------+
| Parameter    | Description                                                                      | Range     | Default |
+==============+==================================================================================+===========+=========+
| ccm-interval | The interval between CCM transmissions to be used by all MEPs in the Maintenance | | 3.3ms   | 1sec    |
|              | Association.                                                                     | | 10ms    |         |
|              |                                                                                  | | 100ms   |         |
|              |                                                                                  | | 1sec    |         |
|              |                                                                                  | | 10sec   |         |
|              |                                                                                  | | 1min    |         |
|              |                                                                                  | | 10min   |         |
+--------------+----------------------------------------------------------------------------------+-----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# continuity-check
    dnRouter(cfg-md-ma-ccm)# interval 100ms


**Removing Configuration**

To revert continuity check interval configuration to its default value:
::

    dnRouter(cfg-md-ma-ccm)# no interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/continuity-check/loss-threshold.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations continuity-check loss-threshold
--------------------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Continuity check messages are expected to be received periodically by each remote MEP in the MA. Once the consecutive number of CCM frames
lost, exceeds the loss-threshold, a connectivity loss is declared for a remote MEP.

To configure the loss threshold:

**Command syntax: loss-threshold [loss-threshold]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations continuity-check

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+----------------+-------------------------------------------------------------------------+-------+---------+
| Parameter      | Description                                                             | Range | Default |
+================+=========================================================================+=======+=========+
| loss-threshold | The lost CCMs threshold for declaring connectiviy loss of a remote MEP. | 3-255 | 3       |
+----------------+-------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# continuity-check
    dnRouter(cfg-md-ma-ccm)# loss-threshold 120


**Removing Configuration**

To revert continuity check loss-threshold configuration to its default value:
::

    dnRouter(cfg-md-ma-ccm)# no loss-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/continuity-check/transmit.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations continuity-check transmit
--------------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enable or disable the transmission of CCM messages by the local MEPs:

**Command syntax: transmit [admin-state]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations continuity-check

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter   | Description                                                                      | Range        | Default |
+=============+==================================================================================+==============+=========+
| admin-state | Indicates whether the MEP can generate CCMs. If TRUE, the MEP will generate CCM  | | enabled    | enabled |
|             | PDUs.                                                                            | | disabled   |         |
+-------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# continuity-check
    dnRouter(cfg-md-ma-ccm)# transmit disabled


**Removing Configuration**

To revert continuity check transmit configuration to its default value:
::

    dnRouter(cfg-md-ma-ccm)# no transmit

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/local-mep/admin-state.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations local-mep admin-state
----------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enable or disable CFM on a local MEP:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations local-mep

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter   | Description                                                                      | Range        | Default |
+=============+==================================================================================+==============+=========+
| admin-state | The administrative state of the MEP. TRUE indicates that the MEP is to           | | enabled    | enabled |
|             | functional normally, and FALSE indicates that it is to cease functioning.        | | disabled   |         |
+-------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# local-mep 2
    dnRouter(cfg-md-ma-lmep-2)# admin-state disabled


**Removing Configuration**

To revert continuity check admin-state configuration to its default value:
::

    dnRouter(cfg-md-ma-lmep-2)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/local-mep/direction.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations local-mep direction
--------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the direction of the local MEP:

**Command syntax: direction [direction]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations local-mep

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+-----------+-------------------------------------------------------------------------------+----------+---------+
| Parameter | Description                                                                   | Range    | Default |
+===========+===============================================================================+==========+=========+
| direction | The direction in which the MEP faces on the Bridge Port. Example, up or down. | | down   | \-      |
|           |                                                                               | | up     |         |
+-----------+-------------------------------------------------------------------------------+----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# local-mep 2
    dnRouter(cfg-md-ma-lmep-2)# direction up


**Removing Configuration**

To remove the direction configuration of the local MEP:
::

    dnRouter(cfg-md-ma-lmep-2)# no direction

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/local-mep/interface.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations local-mep interface
--------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the interface of the local MEP:

**Command syntax: interface [interface-name]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations local-mep

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+----------------+--------------------------------------------------------------+------------------+---------+
| Parameter      | Description                                                  | Range            | Default |
+================+==============================================================+==================+=========+
| interface-name | The inband network interface associated with this local MEP. | | string         | \-      |
|                |                                                              | | length 1-255   |         |
+----------------+--------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# local-mep 2
    dnRouter(cfg-md-ma-lmep-2)# interface ge100-0/0/0


**Removing Configuration**

To remove the associated interface of the local MEP:
::

    dnRouter(cfg-md-ma-lmep-2)# no interface

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/local-mep/local-mep.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations local-mep
----------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enter the CFM local MEPs configuration:

**Command syntax: local-mep [mep-id]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+-----------+--------------------------+--------+---------+
| Parameter | Description              | Range  | Default |
+===========+==========================+========+=========+
| mep-id    | Local MEPs configuration | 1-8191 | \-      |
+-----------+--------------------------+--------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# local-mep 2
    dnRouter(cfg-md-ma-lmep-2)#


**Removing Configuration**

To remove a specific local MEP configuration:
::

    dnRouter(cfg-cfm-md-ma)# no local-mep 2

To remove all local MEPs configuration from a specific Maintenance Association:
::

    dnRouter(cfg-cfm-md-ma)# no local-mep

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/local-mep/pcp.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations local-mep pcp
--------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the PCP value for outgoing CFM PDUs on the local MEP:

**Command syntax: pcp [priority]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations local-mep

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+-----------+----------------------------------------------------------------------------------+-------+---------+
| Parameter | Description                                                                      | Range | Default |
+===========+==================================================================================+=======+=========+
| priority  | The priority value for CCMs and LTMs transmitted by the MEP. The default value   | 0-7   | 7       |
|           | is the highest priority allowed to pass through the Bridge Port for any of the   |       |         |
|           | MEPs VID(s).                                                                     |       |         |
+-----------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# local-mep 2
    dnRouter(cfg-md-ma-lmep-2)# pcp 7


**Removing Configuration**

To revert the PCP configuration to its default value:
::

    dnRouter(cfg-md-ma-lmep-2)# no pcp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/maintenance-associations.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations
------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure CFM maintenance associations:

**Command syntax: maintenance-associations [maintenance-association]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+-------------------------+------------------------------------------------+-------+---------+
| Parameter               | Description                                    | Range | Default |
+=========================+================================================+=======+=========+
| maintenance-association | The index to the Maintenance Association list. | \-    | \-      |
+-------------------------+------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)#


**Removing Configuration**

To remove CFM OAM configuration for a specific Maintenance Association:
::

    dnRouter(cfg-eoam-cfm-md)# no maintenance-associations MA1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/mip/admin-state.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations mip admin-state
----------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enable or disable the use of MIP functionality:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations mip

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan.

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter   | Description                                                                      | Range        | Default |
+=============+==================================================================================+==============+=========+
| admin-state | The administrative state of the MMIP. TRUE indicates that the MIP is to          | | enabled    | enabled |
|             | functional normally, and FALSE indicates that it is to cease functioning.        | | disabled   |         |
+-------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# mip Mymip2
    dnRouter(cfg-md-ma-mip-Mymip2)# admin-state disabled


**Removing Configuration**

To revert continuity check admin-state configuration to its default value:
::

    dnRouter(cfg-md-ma-mip-Mymip2)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/mip/interface.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations mip interface
--------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the interface of the MIP:


**Command syntax: interface [interface-name]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations mip

**Note**

1. Multiple interfaces can be set as MIP for same <MA, MD>, same interface can be MIP in different <MA, MD>.   
2. The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan.

**Parameter table**

+----------------+--------------------------------------------------------+------------------+---------+
| Parameter      | Description                                            | Range            | Default |
+================+========================================================+==================+=========+
| interface-name | The inband network interface associated with this MIP. | | string         | \-      |
|                |                                                        | | length 1-255   |         |
+----------------+--------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# mip mymip2
    dnRouter(cfg-md-ma-mip-Mymip2)# interface ge100-0/0/0


**Removing Configuration**

To remove the associated interface of the MIP:
::

    dnRouter(cfg-md-ma-mip-Mymip2)# no interface

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/mip/mip.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations mip
----------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enter the CFM MIPs configuration:

**Command syntax: mip [mip-name]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations

**Note**

1. Multiple interfaces can be set as MIP for same <MA, MD>, same interface can be MIP in different <MA, MD>. 
2. The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan.

**Parameter table**

+-----------+--------------------+------------------+---------+
| Parameter | Description        | Range            | Default |
+===========+====================+==================+=========+
| mip-name  | MIPs configuration | | string         | \-      |
|           |                    | | length 1-255   |         |
+-----------+--------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# mip mymip2
    dnRouter(cfg-md-ma-mip-mymmip2)#


**Removing Configuration**

To remove a specific MIP configuration:
::

    dnRouter(cfg-cfm-md-ma)# no mip mymip2

To remove all MIPs configuration from a specific Maintenance Association:
::

    dnRouter(cfg-cfm-md-ma)# no mip

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/remote-meps/auto-discovery.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations remote-meps auto-discovery
---------------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To dynamically learn of remote MEPs via CCM:

**Command syntax: auto-discovery [admin-state]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations remote-meps

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

- The auto-discovery and the static crosscheck list configuration are mutually exclusive

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                                      | Range        | Default  |
+=============+==================================================================================+==============+==========+
| admin-state | Value indicating whether dynamic discovery of remote MEPs is allowed or not. In  | | enabled    | disabled |
|             | case enabled, the system will learn of remote peers that were not statically     | | disabled   |          |
|             | configured by the reciept of valid CCMs.                                         |              |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# remote-meps
    dnRouter(cfg-md-ma-rmeps)# auto-discovery enabled


**Removing Configuration**

To revert auto-discovery configuration to its default value:
::

    dnRouter(cfg-md-ma-rmeps)# no auto-discovery

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/remote-meps/crosscheck_mep-id.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations remote-meps crosscheck mep-id
------------------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To statically configure remote MEPs to be cross-checked:

**Command syntax: crosscheck mep-id [remote-mep]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations remote-meps

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+------------+--------------------------------------------------------------------------------+--------+---------+
| Parameter  | Description                                                                    | Range  | Default |
+============+================================================================================+========+=========+
| remote-mep | Integer that is unique among all the MEPs in the same Maintenance Association. | 1-8191 | \-      |
+------------+--------------------------------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# remote-meps
    dnRouter(cfg-md-ma-rmeps)# crosscheck mep-id 3, 5


**Removing Configuration**

To remove a specific remote MEP from the crosscheck list:
::

    dnRouter(cfg-md-ma-rmeps)# no crosscheck mep-id 3

To remove the list of remote MEPs altogether:
::

    dnRouter(cfg-md-ma-rmeps)# no crosscheck mep-id

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/remote-meps/remote-meps.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations remote-meps
------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To enter the CFM remote MEPs configuration:

**Command syntax: remote-meps**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# remote-meps
    dnRouter(cfg-md-ma-rmeps)#


**Removing Configuration**

To remove the remote MEPs configuration for a specific Maintenance Association:
::

    dnRouter(cfg-cfm-md-ma)# no remote-meps

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/short-ma-name_icc-based.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations short-ma-name icc-based
------------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the CFM Maintenance Association name:

**Command syntax: short-ma-name icc-based [icc] [umc]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations

**Note**

- The combined length of both ICC and UMC strings is 13 characters (with trailing nulls).
- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan.

**Parameter table**

+-----------+-----------------------------------------------------------------+-----------------+---------+
| Parameter | Description                                                     | Range           | Default |
+===========+=================================================================+=================+=========+
| icc       | ITU Carrier Code (ICC) of the ICC-based short-ma-name format.   | | string        | \-      |
|           |                                                                 | | length 1-6    |         |
+-----------+-----------------------------------------------------------------+-----------------+---------+
| umc       | Unique MEG-ID Code (UMC) of the ICC-based short-ma-name format. | | string        | \-      |
|           |                                                                 | | length 7-12   |         |
+-----------+-----------------------------------------------------------------+-----------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# md-name null
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# short-ma-name icc-based DTAG msa1234


**Removing Configuration**

To remove the short MA name for a specific Maintenance Association:
::

    dnRouter(cfg-cfm-md-ma)# no short-ma-name

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/short-ma-name_number.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations short-ma-name number
---------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the CFM maintenance association name:

**Command syntax: short-ma-name number [2B-integer]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+------------+------------------+---------+---------+
| Parameter  | Description      | Range   | Default |
+============+==================+=========+=========+
| 2B-integer | 2-octet integer. | 0-65535 | \-      |
+------------+------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# short-ma-name number 203


**Removing Configuration**

To remove the short MA name for a specific Maintenance Association:
::

    dnRouter(cfg-cfm-md-ma)# no short-ma-name

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/short-ma-name_string.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations short-ma-name string
---------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the CFM maintenance association name:

**Command syntax: short-ma-name string [char-string]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

- ASCII DEC 34 character " (quotation mark) is not supported

**Parameter table**

+-------------+----------------------------------------------------------------------------------+-----------------+---------+
| Parameter   | Description                                                                      | Range           | Default |
+=============+==================================================================================+=================+=========+
| char-string | RFC2579 DisplayString, except that the character codes 0-31 (decimal) are not    | | string        | \-      |
|             | used.                                                                            | | length 1-45   |         |
+-------------+----------------------------------------------------------------------------------+-----------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# short-ma-name string FirstMA


**Removing Configuration**

To remove the short MA name for a specific Maintenance Association:
::

    dnRouter(cfg-cfm-md-ma)# no short-ma-name

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/short-ma-name_vlan-id.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations short-ma-name vlan-id
----------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the CFM maintenance association name:

**Command syntax: short-ma-name vlan-id [primary-vid]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+-------------+------------------------------------------------------------+--------+---------+
| Parameter   | Description                                                | Range  | Default |
+=============+============================================================+========+=========+
| primary-vid | Primary VLAN ID. 12 bits represented in a 2-octet integer. | 1-4094 | \-      |
+-------------+------------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# short-ma-name vlan-id 100


**Removing Configuration**

To remove the short MA name for a specific Maintenance Association:
::

    dnRouter(cfg-cfm-md-ma)# no short-ma-name

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-associations/short-ma-name_vpn-id.rst

services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations short-ma-name vpn-id
---------------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the CFM maintenance association name:

**Command syntax: short-ma-name vpn-id [vpn-id]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains maintenance-associations

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+-----------+----------------------------------------------------------------------------------+-----------+---------+
| Parameter | Description                                                                      | Range     | Default |
+===========+==================================================================================+===========+=========+
| vpn-id    | RFC2685 VPN ID. 3 octet VPN authority Organizationally Unique Identifier         | OUI:index | \-      |
|           | followed by 4 octet VPN index identifying VPN according to the OUI               |           |         |
+-----------+----------------------------------------------------------------------------------+-----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# maintenance-associations MA1
    dnRouter(cfg-cfm-md-ma)# short-ma-name vpn-id 00164d:aabbccdd


**Removing Configuration**

To remove the short MA name for a specific Maintenance Association:
::

    dnRouter(cfg-cfm-md-ma)# no short-ma-name

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/maintenance-domains.rst

services ethernet-oam connectivity-fault-management maintenance-domains
-----------------------------------------------------------------------

**Minimum user role:** operator

To configure CFM maintenance domains:

**Command syntax: maintenance-domains [maintenance-domain]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+--------------------+-------------------------------------------+-------+---------+
| Parameter          | Description                               | Range | Default |
+====================+===========================================+=======+=========+
| maintenance-domain | The index to the Maintenance Domain list. | \-    | \-      |
+--------------------+-------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)#


**Removing Configuration**

To remove the CFM OAM configuration for a specific Maintenance Domain:
::

    dnRouter(cfg-srv-eoam-cfm)# no maintenance-domains MyFirstMD

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/md-name_dns.rst

services ethernet-oam connectivity-fault-management maintenance-domains md-name dns
-----------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the CFM maintenance domain name in DNS format:

**Command syntax: md-name dns [dns-like-name]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+---------------+-------------------------------------------------------------------------------+-----------------+---------+
| Parameter     | Description                                                                   | Range           | Default |
+===============+===============================================================================+=================+=========+
| dns-like-name | Domain name like string, globally unique text string derived from a DNS name. | | string        | \-      |
|               |                                                                               | | length 1-43   |         |
+---------------+-------------------------------------------------------------------------------+-----------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# md-name dns cfm.drivenets.com


**Removing Configuration**

To remove the MD name for a specific Maintenance Domain:
::

    dnRouter(cfg-eoam-cfm-md)# no md-name

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/md-name_mac.rst

services ethernet-oam connectivity-fault-management maintenance-domains md-name mac-address
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the CFM maintenance domain name in a MAC address + 2 byte unsigned integer format:

**Command syntax: md-name mac-address [mac-address] [integer]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

**Parameter table**

+-------------+--------------------------------------------+-------------------+---------+
| Parameter   | Description                                | Range             | Default |
+=============+============================================+===================+=========+
| mac-address | The MAC address.                           | xx:xx:xx:xx:xx:xx | \-      |
+-------------+--------------------------------------------+-------------------+---------+
| integer     | The additional 2-octet (unsigned) integer. | 0-65535           | \-      |
+-------------+--------------------------------------------+-------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# md-name mac-address 10:22:33:44:55:00 55555


**Removing Configuration**

To remove the MD name for a specific Maintenance Domain:
::

    dnRouter(cfg-eoam-cfm-md)# no md-name

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/md-name_null.rst

services ethernet-oam connectivity-fault-management maintenance-domains md-name null
------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the CFM maintenance domain without a maintenance domain name:

**Command syntax: md-name null**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

- For interoperability with Y.1731 the MD name must be null

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# md-name null


**Removing Configuration**

To remove the MD name for a specific Maintenance Domain:
::

    dnRouter(cfg-eoam-cfm-md)# no md-name

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/cfm/maintenance-domains/md-name_string.rst

services ethernet-oam connectivity-fault-management maintenance-domains md-name string
--------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the CFM maintenance domain name in a string format:

**Command syntax: md-name string [char-string]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam connectivity-fault-management maintenance-domains

**Note**

- The command is applicable to L2-service enabled inband network interfaces of the following types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan

- ASCII DEC 34 character " (quotation mark) is not supported

**Parameter table**

+-------------+----------------------------------------------------------------------------------+-----------------+---------+
| Parameter   | Description                                                                      | Range           | Default |
+=============+==================================================================================+=================+=========+
| char-string | RFC2579 DisplayString, except that the character codes 0-31 (decimal) are not    | | string        | \-      |
|             | used.                                                                            | | length 1-43   |         |
+-------------+----------------------------------------------------------------------------------+-----------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# connectivity-fault-management
    dnRouter(cfg-srv-eoam-cfm)# maintenance-domains MyFirstMD
    dnRouter(cfg-eoam-cfm-md)# md-name string MyFirstMD


**Removing Configuration**

To remove the MD name for a specific Maintenance Domain:
::

    dnRouter(cfg-eoam-cfm-md)# no md-name

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.1    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/ethernet-oam.rst

services ethernet-oam
---------------------

**Minimum user role:** operator

To enter Ethernet OAM configuration mode:

**Command syntax: ethernet-oam**

**Command mode:** config

**Hierarchies**

- services

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-protocols)# ethernet-oam
    dnRouter(cfg-services-eoam)#


**Removing Configuration**

To remove the Ethernet OAM services:
::

    dnRouter(cfg-services)# no ethernet-oam

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/lfm/auto-recovery.rst

services ethernet-oam link-fault-management auto-recovery
---------------------------------------------------------

**Minimum user role:** operator

Sets the automatic interfaces recovery interval time for disabled interfaces due to 802.3ah EFM OAM policies.

**Command syntax: auto-recovery [recovery-interval]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam link-fault-management

**Parameter table**

+-------------------+----------------------------------------------------------------------------------+---------+---------+
| Parameter         | Description                                                                      | Range   | Default |
+===================+==================================================================================+=========+=========+
| recovery-interval | The auto-recovery interval time used to automatically attempt recovering         | 5-86400 | 300     |
|                   | disabled interfaces due to 802.3ah EFM OAM policies.                             |         |         |
+-------------------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# auto-recovery 300


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-eoam-lfm)# no auto-recovery

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/lfm/interfaces/admin-state.rst

services ethernet-oam link-fault-management interface admin-state
-----------------------------------------------------------------

**Minimum user role:** operator

To configure the administrative state of the 802.3ah EFM OAM protocol on the specified interface:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam link-fault-management interface

**Parameter table**

+-------------+-------------------------------------------------------+--------------+----------+
| Parameter   | Description                                           | Range        | Default  |
+=============+=======================================================+==============+==========+
| admin-state | 802.3ah EFM OAM administrative state on the interface | | enabled    | disabled |
|             |                                                       | | disabled   |          |
+-------------+-------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# interface ge100-0/0/0
    dnRouter(cfg-eoam-lfm-if)# admin-state enabled


**Removing Configuration**

To return 802.3ah EFM OAM admin-state on the interface to its default value:
::

    dnRouter(cfg-eoam-lfm-if)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/lfm/interfaces/interfaces.rst

services ethernet-oam link-fault-management interface
-----------------------------------------------------

**Minimum user role:** operator

To configure the 802.3ah EFM OAM protocol on a specific interface:

**Command syntax: interface [interface]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam link-fault-management

**Note**

- support only physical interfaces <geX-X/X/X>

**Parameter table**

+-----------+--------------------------------------------------+------------------+---------+
| Parameter | Description                                      | Range            | Default |
+===========+==================================================+==================+=========+
| interface | 802.3ah EFM OAM protocol on a specific interface | | string         | \-      |
|           |                                                  | | length 1-255   |         |
+-----------+--------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-eoam-lfm)# interface ge100-0/0/0
    dnRouter(cfg-eoam-lfm-if)#


**Removing Configuration**

To remove 802.3ah EFM OAM configuration from a specific interface:
::

    dnRouter(cfg-eoam-lfm)# no interface ge100-0/0/0

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/lfm/interfaces/profile.rst

services ethernet-oam link-fault-management interface profile
-------------------------------------------------------------

**Minimum user role:** operator

To apply the 802.3ah EFM OAM profile to the specified interface:

**Command syntax: profile [profile-name]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam link-fault-management interface

**Parameter table**

+--------------+------------------------------------------------+------------------+---------+
| Parameter    | Description                                    | Range            | Default |
+==============+================================================+==================+=========+
| profile-name | Apply 802.3ah EFM OAM profile to the interface | | string         | \-      |
|              |                                                | | length 1-255   |         |
+--------------+------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# interface ge100-0/0/0
    dnRouter(cfg-eoam-lfm-if)# profile lfm-profile-1


**Removing Configuration**

To remove 802.3ah EFM OAM profile from the interface:
::

    dnRouter(cfg-eoam-lfm-if)# no profile

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/lfm/lfm.rst

services ethernet-oam link-fault-management
-------------------------------------------

**Minimum user role:** operator

To enter the 802.3ah EFM OAM configuration mode:

**Command syntax: link-fault-management**

**Command mode:** config

**Hierarchies**

- services ethernet-oam

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-protocols)# ethernet-oam
    dnRouter(cfg-services-eoam)# link-fault-management


**Removing Configuration**

To remove the 802.3ah EFM OAM service:
::

    dnRouter(cfg-services-eoam)# no link-fault-management

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/lfm/profile/link-monitoring/event-threshold.rst

services ethernet-oam link-fault-management profile link-monitoring event-threshold
-----------------------------------------------------------------------------------

**Minimum user role:** operator

To configure thresholds to trigger local RX/TX link events:

**Command syntax: event-threshold [event-type] [threshold]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam link-fault-management profile link-monitoring

**Parameter table**

+------------+----------------------------------------------------------------------------------+-------------------+---------+
| Parameter  | Description                                                                      | Range             | Default |
+============+==================================================================================+===================+=========+
| event-type | The type of threshold event for which this list entry is specifying the          | | symbol-period   | \-      |
|            | configuration.                                                                   | | frame-period    |         |
|            |                                                                                  | | frame-error     |         |
|            |                                                                                  | | frame-seconds   |         |
+------------+----------------------------------------------------------------------------------+-------------------+---------+
| threshold  | The threshold value to use when determining whether to generate an event given   | 1-4294967295      | \-      |
|            | the number of errors that occurred in a given window. The units depend on the    |                   |         |
|            | threshold type as follows:                                                       |                   |         |
|            | Symbol Period: number of errored symbols                                         |                   |         |
|            | Frame Error: number of errored frames                                            |                   |         |
|            | Frame Period: number of errored frames                                           |                   |         |
|            | Frame Seconds: number of seconds containing at least 1 frame error               |                   |         |
+------------+----------------------------------------------------------------------------------+-------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# profile AH_default1
    dnRouter(cfg-eoam-lfm-profile)# link-monitoring
    dnRouter(cfg-lfm-profile-lm)# event-threshold symbol-period 100


**Removing Configuration**

To delete a certain threshold:
::

    dnRouter(cfg-lfm-profile-lm)# # no event-threshold symbol-period

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/lfm/profile/link-monitoring/link-monitoring.rst

services ethernet-oam link-fault-management profile link-monitoring
-------------------------------------------------------------------

**Minimum user role:** operator

To configure the 802.3ah EFM OAM link-monitoring:"

**Command syntax: link-monitoring**

**Command mode:** config

**Hierarchies**

- services ethernet-oam link-fault-management profile

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-protocols)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# profile AH_default1
    dnRouter(cfg-eoam-lfm-profile)# link-monitoring
    dnRouter(cfg-lfm-profile-lm)#


**Removing Configuration**

To remove the 802.3ah EFM OAM link-monitoring configuration under the specified profile:
::

    dnRouter(cfg-eoam-lfm-profile)# no link-monitoring

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/lfm/profile/mode.rst

services ethernet-oam link-fault-management profile mode
--------------------------------------------------------

**Minimum user role:** operator

To set the OAM mode for the specified profile:

**Command syntax: mode [mode]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam link-fault-management profile

**Parameter table**

+-----------+-------------+-------------+---------+
| Parameter | Description | Range       | Default |
+===========+=============+=============+=========+
| mode      | OAM mode    | | passive   | active  |
|           |             | | active    |         |
+-----------+-------------+-------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# profile AH_default1
    dnRouter(cfg-eoam-lfm-profile)# mode active

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# profile AH_default1
    dnRouter(cfg-eoam-lfm-profile)# mode passive


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-eoam-lfm-profile)# no mode

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/lfm/profile/pdu-interval.rst

services ethernet-oam link-fault-management profile pdu-interval
----------------------------------------------------------------

**Minimum user role:** operator

To set the 802.3ah EFM OAM protocol's hello interval time:

**Command syntax: pdu-interval [pdu-interval]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam link-fault-management profile

**Note**

- The valid range is 100-1000ms in skips of 100ms.

**Parameter table**

+--------------+----------------------------------------------------------------------------------+----------+---------+
| Parameter    | Description                                                                      | Range    | Default |
+==============+==================================================================================+==========+=========+
| pdu-interval | Specifies the periodic OAMPDU sending interval in milliseconds. The interval     | 100-1000 | 1000    |
|              | should be specified in skips of 100 milliseconds.                                |          |         |
+--------------+----------------------------------------------------------------------------------+----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# profile AH_default1
    dnRouter(cfg-eoam-lfm-profile)# pdu-interval 400


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-eoam-lfm-profile)# no pdu-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/lfm/profile/pdu-threshold.rst

services ethernet-oam link-fault-management profile pdu-threshold
-----------------------------------------------------------------

**Minimum user role:** operator

To set the 802.3ah EFM OAM protocol's connection timeout in terms of missed OAMPDUs from the peer:

**Command syntax: pdu-threshold [pdu-threshold]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam link-fault-management profile

**Note**

- The session timeout is calculated as the configured pdu-interval multiplied by the pdu-threshold.

**Parameter table**

+---------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter     | Description                                                                      | Range | Default |
+===============+==================================================================================+=======+=========+
| pdu-threshold | Specifies how many OAMPDUs need to be lost before declaring adjacency loss with  | 3-10  | 3       |
|               | the peer.                                                                        |       |         |
+---------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# profile AH_default1
    dnRouter(cfg-eoam-lfm-profile)# pdu-tthreshold 5


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-eoam-lfm-profile)# no pdu-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/lfm/profile/policy/event.rst

services ethernet-oam link-fault-management profile policy event action
-----------------------------------------------------------------------

**Minimum user role:** operator

To configure a policy for the 802.3ah EFM OAM events:

**Command syntax: event [event-type] action [action]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam link-fault-management profile policy

**Parameter table**

+------------+-------------------------------------------------------------------+--------------------------+---------+
| Parameter  | Description                                                       | Range                    | Default |
+============+===================================================================+==========================+=========+
| event-type | Type of event that occurred.                                      | | adjacency-loss-event   | \-      |
|            |                                                                   | | dying-gasp-event       |         |
|            |                                                                   | | threshold-event        |         |
+------------+-------------------------------------------------------------------+--------------------------+---------+
| action     | The action to execute upon the occurence of the triggering event. | | oper-down              | ignore  |
|            |                                                                   | | ignore                 |         |
+------------+-------------------------------------------------------------------+--------------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# profile AH_default1
    dnRouter(cfg-eoam-lfm-profile)# policy
    dnRouter(cfg-lfm-profile-policies)# event adjacency-loss action oper-down

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# profile AH_default1
    dnRouter(cfg-eoam-lfm-profile)# policy
    dnRouter(cfg-lfm-profile-policies)# event dying-gasp action ignore

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# profile AH_default1
    dnRouter(cfg-eoam-lfm-profile)# policy
    dnRouter(cfg-lfm-profile-policies)# event threshold-event action oper-down


**Removing Configuration**

To delete a policy:
::

    dnRouter(cfg-lfm-profile-policies)# no event adjacency-loss

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/lfm/profile/policy/policy.rst

services ethernet-oam link-fault-management profile policy
----------------------------------------------------------

**Minimum user role:** operator

To configure the 802.3ah EFM OAM policies:"

**Command syntax: policy**

**Command mode:** config

**Hierarchies**

- services ethernet-oam link-fault-management profile

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-protocols)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# profile AH_default1
    dnRouter(cfg-eoam-lfm-profile)# policy
    dnRouter(cfg-lfm-profile-policies)#


**Removing Configuration**

To remove the 802.3ah EFM OAM policies configuration under the specified profile:
::

    dnRouter(cfg-eoam-lfm-profile)# no policy

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## ethernet-oam/lfm/profile/profile.rst

services ethernet-oam link-fault-management profile
---------------------------------------------------

**Minimum user role:** operator

To configure the 802.3ah EFM OAM profiles:

**Command syntax: profile [profile]**

**Command mode:** config

**Hierarchies**

- services ethernet-oam link-fault-management

**Note**

- Up to 5 profiles may be configured.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter | Description                                                                      | Range            | Default |
+===========+==================================================================================+==================+=========+
| profile   | The profile name of the EFM link OAM service. The profile is attached to an OAM  | | string         | \-      |
|           | enabled interface                                                                | | length 1-255   |         |
+-----------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# ethernet-oam
    dnRouter(cfg-srv-eoam)# link-fault-management
    dnRouter(cfg-srv-eoam-lfm)# profile AH_default1
    dnRouter(cfg-eoam-lfm-profile)#


**Removing Configuration**

To delete a certain profile:
::

    dnRouter(cfg-srv-eoam-lfm)# # no profile AH_default1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/cache-events.rst

services flow-monitoring cache-events limit threshold
-----------------------------------------------------

**Minimum user role:** operator

Exported flows are maintained in a flow-cache table on the NCP's local CPU. The size of the table is limited to 8,000,000 flows. When this table is full, flow entries will be aged out to make room for new flows.

You can set thresholds to generate system events notifying you that the table is about to reach its maximum limit.

To configure thresholds for generating cache system events:

In this example, the flow-cache table is configured to hold a maximum of 50,000 flow entries. When the table reaches 45,000 flows (90%), a system event is generated. When the table reaches 50,000 flows, older flows will be aged out to make room for new flows.

**Command syntax: cache-events limit [cache-events-limit] threshold [cache-events-threshold]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring

**Parameter table**

+------------------------+----------------------------------------------------------------------------------+-----------+---------+
| Parameter              | Description                                                                      | Range     | Default |
+========================+==================================================================================+===========+=========+
| cache-events-limit     | The maximum number of allowed flows in the flow-cache table per NCP. When this   | 1-8000000 | 8000000 |
|                        | threshold is crossed, a system event is generated. When the flow-cache table is  |           |         |
|                        | full, flow entries will be aged out to make room for new entries.                |           |         |
+------------------------+----------------------------------------------------------------------------------+-----------+---------+
| cache-events-threshold | A percentage (%) of the limit to give you advance notice that the number of      | 0-100     | 75      |
|                        | flows in the flow-cache table for each NCP is approaching the limit. When this   |           |         |
|                        | threshold is crossed, a system event notification is generated. You will not be  |           |         |
|                        | notified again. If the flow-cache table size reaches 100%, flow entries will be  |           |         |
|                        | aged out to make room for new entries.                                           |           |         |
+------------------------+----------------------------------------------------------------------------------+-----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# cache-events limit 50000 threshold 90


**Removing Configuration**

To revert to the default value::
::

    dnRouter(cfg-srv-port-mirroring)# no cache-events

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/cache-rate-limit.rst

services flow-monitoring cache-rate-limit
-----------------------------------------

**Minimum user role:** operator

You can limit the rate for exporting flow-records from the cache during flush or age-out events.

Any sampled packets beyond 200,000 pps will be disregarded by the control plane and counted as dropped. Note, that this limit is per exporter.

To configure the rate limit:

**Command syntax: cache-rate-limit [cache-rate-limit]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring

**Parameter table**

+------------------+----------------------------------------------------------------------------------+----------+---------+
| Parameter        | Description                                                                      | Range    | Default |
+==================+==================================================================================+==========+=========+
| cache-rate-limit | flow records export rate limit from flow cache table during flush or massive     | 0-200000 | 200000  |
|                  | ageout events                                                                    |          |         |
+------------------+----------------------------------------------------------------------------------+----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# cache-rate-limit 100000


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-port-mirroring)# no cache-rate-limit

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/exporter-profile/collector.rst

services flow-monitoring exporter-profile collector ip-address
--------------------------------------------------------------

**Minimum user role:** operator

The collector is a remote device that maintains a list of all active flows traversing the network. It collects the active IP flow information from all exporters in the network and exposes it to clients for a variety of uses (e.g. DDOS detection and mitigation, monitoring traffic capacity, flows/traffic type mapping, peering reports, troubleshooting, etc.).

You can configure only one collector per exporter profile.

To configure a collector to which to export flow records:

**Command syntax: collector ip-address [destination-address]** transport [transport] port [destination-port] class-of-service [class-of-service] ttl [ttl] vrf [vrf]

**Command mode:** config

**Hierarchies**

- services flow-monitoring exporter-profile

**Parameter table**

+---------------------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter           | Description                                                                      | Range            | Default |
+=====================+==================================================================================+==================+=========+
| destination-address | IP address of the Collection Process to which Flow-monitoring Messages are sent. | | A.B.C.D        | \-      |
|                     |                                                                                  | | X:X::X:X       |         |
+---------------------+----------------------------------------------------------------------------------+------------------+---------+
| transport           | L4 trasport protocol for export packets                                          | udp              | udp     |
+---------------------+----------------------------------------------------------------------------------+------------------+---------+
| destination-port    | If not configured by the user, the Monitoring Device uses the default port       | 1024-65535       | \-      |
|                     | number for Flow-monitoring, which is 4739 for Netflow/ipfix without TLS or DTLS  |                  |         |
|                     | and 6343 for sFlow.                                                              |                  |         |
+---------------------+----------------------------------------------------------------------------------+------------------+---------+
| class-of-service    | This parameter specifies the dscp of IP packets sent to the Collector.           | 0-56             | 0       |
+---------------------+----------------------------------------------------------------------------------+------------------+---------+
| ttl                 | TTL value for generated export packet                                            | 1-255            | 255     |
+---------------------+----------------------------------------------------------------------------------+------------------+---------+
| vrf                 | VRF name to export the packets to                                                | | string         | \-      |
|                     |                                                                                  | | length 1-255   |         |
+---------------------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# exporter-profile myExporter
    dnRouter(cfg-srv-flow-monitoring-myExporter)# collector ip-address 212.51.8.17 transport udp port 2055 class-of-service 16 ttl 1 vrf My_VRF


**Removing Configuration**

To remove the collector configuration:
::

    dnRouter(cfg-srv-flow-monitoring-myExporter)# no collector

To revert an optional parameter to its default value:
::

    dnRouter(cfg-srv-flow-monitoring-myExporter)# no collector ip-address 212.51.8.17 class-of-service

**Command History**

+---------+-----------------------------------------------------------------------+
| Release | Modification                                                          |
+=========+=======================================================================+
| 11.4    | Command introduced                                                    |
+---------+-----------------------------------------------------------------------+
| 25.2    | Add vrf configuration to support exporting packets to non-default vrf |
+---------+-----------------------------------------------------------------------+

---

## flow-monitoring/exporter-profile/counters-polling-interval.rst

services flow-monitoring exporter-profile counters-polling-interval
-------------------------------------------------------------------

**Minimum user role:** operator

Sets the traffic sampling polling interval. '0' means no counters sampling.
Counters-polling-interval configuration is relevant only for sFlow exporters.

**Command syntax: counters-polling-interval [counters-polling-interval]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring exporter-profile

**Parameter table**

+---------------------------+----------------------------------------------------------------------------+---------+---------+
| Parameter                 | Description                                                                | Range   | Default |
+===========================+============================================================================+=========+=========+
| counters-polling-interval | Sets the traffic sampling polling interval. '0' means no counters sampling | 5-65535 | 20      |
+---------------------------+----------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# exporter-profile myExporter
    dnRouter(cfg-srv-flow-monitoring-myExporter)# counters-polling-interval 30


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-flow-monitoring-myExporter)# no counters-polling-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/exporter-profile/data-template-timeout.rst

services flow-monitoring exporter-profile data-template-timeout
---------------------------------------------------------------

**Minimum user role:** operator

The data-template is metadata that defines which parameters are sent for describing IP flows. The data-template-timeout defines how often the flow exporter will retransmit the data-template.

To configure the data-template timeout:

**Command syntax: data-template-timeout [data-template-timeout]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring exporter-profile

**Parameter table**

+-----------------------+----------------------------------------------------------------------------------+---------+---------+
| Parameter             | Description                                                                      | Range   | Default |
+=======================+==================================================================================+=========+=========+
| data-template-timeout | Sets time after which Templates are resent in the UDP Transport Session. Note    | 0-86400 | \-      |
|                       | that the configured lifetime MUST be adapted to the templateLifeTime parameter   |         |         |
|                       | value at the receiving Collecting Process. Note that this parameter corresponds  |         |         |
|                       | to flow-monitoringTransportSessionTemplateRefreshTimeout in the Flow-monitoring  |         |         |
|                       | MIB module.                                                                      |         |         |
+-----------------------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# exporter-profile myExporter
    dnRouter(cfg-srv-flow-monitoring-myExporter)# data-template-timeout 60


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-flow-monitoring-myExporter)# no data-template-timeout

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/exporter-profile/exporter-profile.rst

services flow-monitoring exporter-profile
-----------------------------------------

**Minimum user role:** operator

The exporter profile includes a single collector destination to which IP flow information is exported. The profile includes a list of parameters defining how to export flow records. You can configure up to 4 exporter profiles per system.

To create an exporter profile and enter its configuration hierarchy:

**Command syntax: exporter-profile [export-profile]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring

**Parameter table**

+----------------+--------------------------------------------------------+------------------+---------+
| Parameter      | Description                                            | Range            | Default |
+================+========================================================+==================+=========+
| export-profile | Reference to the configured name of the export-profile | | string         | \-      |
|                |                                                        | | length 1-255   |         |
+----------------+--------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# exporter-profile myExporter
    dnRouter(cfg-srv-flow-monitoring-myExporter)#


**Removing Configuration**

You cannot delete an exporter profile if it is used by a flow-monitoring template. Remove the profile from the template before deleting the profile.
::

    dnRouter(cfg-srv-flow-monitoring)# no exporter-profile myExporter

**Command History**

+---------+----------------------------------------------------+
| Release | Modification                                       |
+=========+====================================================+
| 11.4    | Command introduced                                 |
+---------+----------------------------------------------------+
| 13.1    | Increased support of exporter profiles from 3 to 4 |
+---------+----------------------------------------------------+

---

## flow-monitoring/exporter-profile/options-template-timeout.rst

services flow-monitoring exporter-profile options-template-timeout
------------------------------------------------------------------

**Minimum user role:** operator

The options-template is metadata that defines the parameters that are sent for each option and is sent periodically to the collector.

To configure how often the exporter will retransmit the options-template:

**Command syntax: options-template-timeout [options-template-timeout]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring exporter-profile

**Parameter table**

+--------------------------+----------------------------------------------------------------------------------+---------+---------+
| Parameter                | Description                                                                      | Range   | Default |
+==========================+==================================================================================+=========+=========+
| options-template-timeout | Sets time after which Options Templates are resent in the UDP Transport Session. | 0-86400 | \-      |
|                          | Note that the configured lifetime MUST be adapted to the optionsTemplateLifeTime |         |         |
|                          | parameter value at the receiving Collecting Process. Note that this parameter    |         |         |
|                          | corresponds to flow-monitoringTransportSessionOptionsTemplateRefreshTimeout in   |         |         |
|                          | the Flow-monitoring MIB module.                                                  |         |         |
+--------------------------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# exporter-profile myExporter
    dnRouter(cfg-srv-flow-monitoring-myExporter)# options-template-timeout 60


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-flow-monitoring-myExporter)# no options-template-timeout

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/exporter-profile/options.rst

services flow-monitoring exporter-profile options timeout
---------------------------------------------------------

**Minimum user role:** operator

Options enable to send additional metadata to the collector. These are:

-	Sampler-table - a list of the configured sample profiles configured

-	Interface-table - a list of the router interfaces

-	VRF-table - a list of the configured VRFs

-	SRv6 Endpoints-table - a list of SRv6 Endpoints

The options are sent periodically in a metadata collection on the exported IP flows.

To configure the options-template:

According to the above example, the exporter will send the sampler-table every 60 seconds and the interface-table every 50 seconds, regardless of whether or not there are any statistics information on the forwarded IP-flows.

**Command syntax: options [option] timeout [options-timeout]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring exporter-profile

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+--------------------------+---------+
| Parameter       | Description                                                                      | Range                    | Default |
+=================+==================================================================================+==========================+=========+
| option          | Reference to configured name of the option                                       | | sampler-table          | \-      |
|                 |                                                                                  | | interface-table        |         |
|                 |                                                                                  | | vrf-table              |         |
|                 |                                                                                  | | srv6-endpoints-table   |         |
+-----------------+----------------------------------------------------------------------------------+--------------------------+---------+
| options-timeout | Time interval for periodic export of the options data.  If set to zero, the      | 0-86400                  | \-      |
|                 | export is triggered when the options data has changed.                           |                          |         |
+-----------------+----------------------------------------------------------------------------------+--------------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# exporter-profile myExporter
    dnRouter(cfg-srv-flow-monitoring-myExporter)# options sampler-table timeout 60
    dnRouter(cfg-srv-flow-monitoring-myExporter)# options interface-table timeout 50


**Removing Configuration**

To remove the flow-export options:
::

    dnRouter(cfg-srv-flow-monitoring-myExporter)# no options

To remove a specific option from the options-template:
::

    dnRouter(cfg-srv-flow-monitoring-myExporter)# no options sampler-table

**Command History**

+---------+-----------------------------------+
| Release | Modification                      |
+=========+===================================+
| 11.4    | Command introduced                |
+---------+-----------------------------------+
| 25.2    | Added SRv6 endpoints table option |
+---------+-----------------------------------+

---

## flow-monitoring/exporter-profile/packet-length.rst

services flow-monitoring exporter-profile packet-length
-------------------------------------------------------

**Minimum user role:** operator

Set the maximum IP packet size for the export packet sent towards the collector.

To configure the exporter packet length:

**Command syntax: packet-length [packet-length]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring exporter-profile

**Note**

- The packet-length is L3 MTU including the IPv4/IPv6 header.

- If the packet size exceeds the egress interface MTU size, the flow monitoring exported traffic will be dropped.

**Parameter table**

+---------------+-----------------------------+----------+---------+
| Parameter     | Description                 | Range    | Default |
+===============+=============================+==========+=========+
| packet-length | Export packets maximum size | 522-9286 | 1468    |
+---------------+-----------------------------+----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# exporter-profile myExporter
    dnRouter(cfg-srv-flow-monitoring-myExporter)# packet-length 1000


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-flow-monitoring-myExporter)# no packet-length

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.2.1  | Command introduced |
+---------+--------------------+

---

## flow-monitoring/exporter-profile/source-interface.rst

services flow-monitoring exporter-profile source-interface
----------------------------------------------------------

**Minimum user role:** operator

Optionally, you can set a source-address for exported packets to be any default VRF interface. If you don't set a source interface or the configured source interface has no IP address, the "system in-band-management source-interface" will be used.

To configure the source-interface:

**Command syntax: source-interface [source-interface]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring exporter-profile

**Note**
- The source-ip is derived from the configured source-interface.

- If the source-interface has multiple IP addresses, a primary address will be used.

**Parameter table**

+------------------+---------------------------------------------------------+-------+---------+
| Parameter        | Description                                             | Range | Default |
+==================+=========================================================+=======+=========+
| source-interface | source interface for sending netflow/IPFIX packets from | \-    | \-      |
+------------------+---------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# exporter-profile myExporter
    dnRouter(cfg-srv-flow-monitoring-myExporter)# source-interface bundle-0


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-flow-monitoring-myExporter)# no source-interface

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/exporter-profile/version.rst

services flow-monitoring exporter-profile version
-------------------------------------------------

**Minimum user role:** operator

Exported records are encapsulated and exported as either Netflow v9 or IPFix format.

To configure the version (i.e. encapsulation format):

**Command syntax: version [version]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring exporter-profile

**Parameter table**

+-----------+-------------------------+-----------+---------+
| Parameter | Description             | Range     | Default |
+===========+=========================+===========+=========+
| version   | Export protocol version | | v9      | ipfix   |
|           |                         | | ipfix   |         |
|           |                         | | sflow   |         |
+-----------+-------------------------+-----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# exporter-profile myExporter
    dnRouter(cfg-srv-flow-monitoring-myExporter)# version ipfix


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-flow-monitoring-myExporter)# no version

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/flow-monitoring.rst

services flow-monitoring
------------------------

**Minimum user role:** operator

Flow monitoring enables to track all the IP traffic flows in the network using the following main components:

-	**Exporter**: a network element (e.g. a router) that maintains a list of all active IP flows forwarded by the data plane. The exporter samples the data plane #traffic, classifies it based on 10-tuple flow classification which consist of source and destination IP, source and destination ports, protocol, ingress interface, TOS and MPLS labels 1-3. It maintains statistics on each active IP flow and exports them to a remote collector.
	DNOS serves as a flow monitoring exporter, monitoring IPv4 flows, IPv6 flows, IPv4/IPv6 over MPLS by sampling ingress traffic on monitored interfaces. The DNOS Flow Monitoring supports both IPFIX and NetFlow v9.

-	**Collector**: a remote device that maintains a list of all active flows traversing the network. It collects the active IP flow information from all exporters in the network and exposes it to clients for a variety of uses (e.g. DDOS detection and mitigation, monitoring traffic capacity, flows/traffic type mapping, peering reports, troubleshooting, etc.)

Follow these general steps to configure flow monitoring:

#. Enter the flow-monitoring configuration hierarchy.

#. Set global parameters:

	- Observation domain ID: This ID ensures that all system NCPs’ exported packets to the remote collector are monitored together. See "services flow-monitoring observation-domain-id".

	-	Cache-rate-limit – the rate limit for exporting flow records from the cache during flush or age out events. See "services flow-monitoring cache-rate-limit".

	-	 Cache-events - define thresholds for the flow-cache table, for generating system events. See "services flow-monitoring cache-events".

#. Configure flow-monitoring templates that define how to sample and maintain IP flows on the router. See "services flow-monitoring template".

#. Create exporter profiles that defines how to export IP flow information. See "services flow-monitoring exporter-profile".

#. Create sampler profiles that define how to sample the traffic forwarded to the local CPU. "services flow-monitoring sampler-profile".

#. Attach a flow-monitoring template (or optionally a sampler-profile) to an interface. See "interfaces flow-monitoring".

To enter the flow-monitoring configuration hierarchy:

**Command syntax: flow-monitoring**

**Command mode:** config

**Hierarchies**

- services

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)#


**Removing Configuration**

To revert to the default values:
::

    dnRouter(cfg-srv)# no flow-monitoring

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/observation-domain-id.rst

services flow-monitoring observation-domain-id
----------------------------------------------

**Minimum user role:** operator

Flows are monitored on specific interfaces where traffic is sampled. In IPFIX, these are termed "observation points". An observation domain is the set of observation points for which traffic is sampled and aggregated for monitoring together. 

In DNOS, the entire "system" is a single “observation domain” and the system's sampled interfaces are the "observation points". By globally configuring an observation-domain ID, the packets exported to the remote collector are identified as belonging to the same observation domain even though each cluster NCP acts as an independent exporter maintaining the IP flow information separately.

The value of the observation-domain ID is configurable per system.

To configure the observation domain ID:

**Command syntax: observation-domain-id [observation-domain-id]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring

**Note**
- Without an observation-domain ID, export packets will not be generated.

**Parameter table**

+-----------------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter             | Description                                                                      | Range        | Default |
+=======================+==================================================================================+==============+=========+
| observation-domain-id | A 32-bit identifier of the Observation Domain that is locally unique to the      | 1-4294967295 | 1       |
|                       | Exporting Process.  The Exporting Process uses the Observation Domain ID to      |              |         |
|                       | uniquely identify to the Collecting Process the Observation Domain that metered  |              |         |
|                       | the Flows.                                                                       |              |         |
+-----------------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# observation-domain-id 560


**Removing Configuration**

To remove the observation-domain ID:
::

    dnRouter(cfg-srv-port-mirroring)# no observation-domain-id

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/sampler-profile/sample-rate.rst

services flow-monitoring sampler-profile rate 1-out-of
------------------------------------------------------

**Minimum user role:** operator

The sampling of traffic uses a sequential rate algorithm. The rate defines which packet in a sequence of packets to sample. For example, a sampling rate of 1:2 (1-out-of-2) means that every other packet is sampled; a rate of 1:5 means that every fifth packet is sampled, etc.

To define the rate at which the traffic is sampled:

**Command syntax: rate 1-out-of [sample-rate]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring sampler-profile

**Note**
- A sample rate of 1:1 is possible. However, the total number of sampled packets that can be sent to the local CPU per NCP is limited to 200,000 packets per second.

**Parameter table**

+-------------+----------------------+---------+---------+
| Parameter   | Description          | Range   | Default |
+=============+======================+=========+=========+
| sample-rate | packet sampling rate | 1-65535 | 2048    |
+-------------+----------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# sampler-profile mySampler
    dnRouter(cfg-srv-flow-monitoring-mySampler)# rate 1-out-of 2048


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-flow-monitoring-mySampler)# no rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/sampler-profile/sample-size.rst

services flow-monitoring sampler-profile sample-size
----------------------------------------------------

**Minimum user role:** operator

Sets the maximum number of bytes to be copied from a sampled packet.
Sample-size configuration is relevant only for sFlow samplers.

**Command syntax: sample-size [sample-size]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring sampler-profile

**Parameter table**

+-------------+----------------------------------------------------------------------+--------+---------+
| Parameter   | Description                                                          | Range  | Default |
+=============+======================================================================+========+=========+
| sample-size | Sets the maximum number of bytes to be copied from a sampled packet. | 64-256 | \-      |
+-------------+----------------------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# sampler-profile mySampler
    dnRouter(cfg-srv-flow-monitoring-mySampler)# sample-size 256


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-flow-monitoring-mySampler)# no sample-size

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.1    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/sampler-profile/sampler-profile.rst

services flow-monitoring sampler-profile
----------------------------------------

**Minimum user role:** operator

The sampler profile defines how to sample the traffic forwarded to the local CPU.

You can configure up to 8 sampler profiles per system. These profiles are attached to flow-monitoring interfaces (one sampler profile per interface). Thus, to collect IPv4 traffic and IPv6 traffic (using two different templates) different sampler profiles are defined for each type of traffic on a specific interface.

To create a sampler-profile:

**Command syntax: sampler-profile [sampler-profile]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring

**Parameter table**

+-----------------+---------------------------------------------------------+-----------------+---------+
| Parameter       | Description                                             | Range           | Default |
+=================+=========================================================+=================+=========+
| sampler-profile | Reference to the configured name of the sampler-profile | | string        | \-      |
|                 |                                                         | | length 1-32   |         |
+-----------------+---------------------------------------------------------+-----------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# sampler-profile mySampler


**Removing Configuration**

You cannot delete a sampler-profile if it is used by an interface. Remove the sampler profile from the interface configuration before deleting the profile.
To remove a specific sampler-profile:
::

    dnRouter(cfg-srv-flow-monitoring)# no sampler-profile mySampler

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/template/cache-entries.rst

services flow-monitoring template cache-entries
-----------------------------------------------

**Minimum user role:** operator

Cached flows are stored in the flow-cache table in the NCP's local CPU. The table can store up to 8,000,000 flows. When you configure multiple flow-monitoring templates, you can limit the number of cached flows for each template.

The maximum cache size per NCP is 8,000,000 entries. If multiple templates are configured with a maximum cache-entries value of 8,000,000, the cache tables for the different templates will compete on the same cache budget on a first-come-first-served basis.

To limit the number of cached flows for the specified template:

**Command syntax: cache-entries [cache-entries]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring template

**Parameter table**

+---------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter     | Description                                                                      | Range        | Default |
+===============+==================================================================================+==============+=========+
| cache-entries | This parameter configures the maximum number of Flows in the Cache, which is the | 1000-8000000 | 65535   |
|               | maximum number of Flows that can be measured simultaneously. The Monitoring      |              |         |
|               | Device MUST ensure that sufficient resources are available to store the          |              |         |
|               | configured maximum number of Flows. If the maximum number of Flows is measured,  |              |         |
|               | an additional Flow can be measured only if an existing entry is removed.         |              |         |
|               | However, traffic that pertains to existing Flows can continue to be measured.    |              |         |
+---------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# template myTemplate
    dnRouter(cfg-srv-flow-monitoring-myTemplate)# cache-entries 300000


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-flow-monitoring-myTemplate)# no cache-entries

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/template/exporter-profile.rst

services flow-monitoring template exporter-profile
--------------------------------------------------

**Minimum user role:** operator

The exporter profile includes a single collector destination to which IP flow information is exported. The flow-monitoring template references up to 3 existing exporter profiles.

To configure the exporter profile:

**Command syntax: exporter-profile [export-profile]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring template

**Parameter table**

+----------------+------------------------------------------------------------------------+------------------+---------+
| Parameter      | Description                                                            | Range            | Default |
+================+========================================================================+==================+=========+
| export-profile | defines the list of exporters for the flows collected by the template. | | string         | \-      |
|                |                                                                        | | length 1-255   |         |
+----------------+------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# template myTemplate
    dnRouter(cfg-srv-flow-monitoring-myTemplate)# exporter-profile myExporter,myExporter2


**Removing Configuration**

To remove all exporter profiles from the template:
::

    dnRouter(cfg-srv-flow-monitoring-myTemplate)# no exporter-profile

To remove a specific profile from the template:
::

    dnRouter(cfg-srv-flow-monitoring-myTemplate)# no exporter-profile myExporter

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/template/flow-active-timeout.rst

services flow-monitoring template flow-active-timeout
-----------------------------------------------------

**Minimum user role:** operator

The flow-active-timeout defines how long an active flow can be cached in the flow cache table before it is aged out. In long flows, the flow records are aged out from the cache and the information is sent to the collector, even if packets related to this flow are still being observed. 

To configure the timeout for active flows:

**Command syntax: flow-active-timeout [flow-active-timeout]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring template

**Parameter table**

+---------------------+----------------------------------------------------------------------------------+---------+---------+
| Parameter           | Description                                                                      | Range   | Default |
+=====================+==================================================================================+=========+=========+
| flow-active-timeout | This parameter configures the time in seconds after which a Flow is expired even | 0-86400 | 1800    |
|                     | though packets matching this Flow are still received by the Cache. The parameter |         |         |
|                     | value zero indicates infinity, meaning that there is no active timeout. If not   |         |         |
|                     | configured by the user, the Monitoring Device sets this parameter. Note that     |         |         |
|                     | this parameter corresponds to flow-monitoringMeteringProcessCacheActiveTimeout   |         |         |
|                     | in the Flow-monitoring MIB module.                                               |         |         |
+---------------------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# template myTemplate
    dnRouter(cfg-srv-flow-monitoring-myTemplate)# flow-active-timeout 60


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-flow-monitoring-myTemplate)# no flow-active-timeout

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/template/flow-idle-timeout.rst

services flow-monitoring template flow-idle-timeout
---------------------------------------------------

**Minimum user role:** operator

Flow-idle-timeout defines how long a flow is considered active when no packet related to this flow is observed.

To configure the timeout for idle flows:

**Command syntax: flow-idle-timeout [flow-idle-timeout]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring template

**Parameter table**

+-------------------+----------------------------------------------------------------------------------+---------+---------+
| Parameter         | Description                                                                      | Range   | Default |
+===================+==================================================================================+=========+=========+
| flow-idle-timeout | This parameter configures the time in seconds after which a Flow is expired if   | 0-86400 | 15      |
|                   | no more packets matching this Flow are received by the Cache. The parameter      |         |         |
|                   | value zero indicates infinity, meaning that there is no idle timeout. If not     |         |         |
|                   | configured by the user, the Monitoring Device sets this parameter. Note that     |         |         |
|                   | this parameter corresponds to flow-monitoringMeteringProcessCacheIdleTimeout in  |         |         |
|                   | the Flow-monitoring MIB module.                                                  |         |         |
+-------------------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# template myTemplate
    dnRouter(cfg-srv-flow-monitoring-myTemplate)# flow-idle-timeout 30


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-flow-monitoring-myTemplate)# no flow-idle-timeout

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/template/template.rst

services flow-monitoring template
---------------------------------

**Minimum user role:** operator

A flow monitoring template includes a list of parameters that define how to sample and maintain IP flows for a system. The template defines the following:

-	The type of traffic to monitor (see "services flow-monitoring template type")

-	The size of the flow cache table that maintains the active IP flows (see "services flow-monitoring template cache-entries")

-	How long an active flow can be stored in the flow cache table before it is aged out (see "services flow-monitoring template flow-active-timeout")

-	How long a flow is considered active when no packet is observed (see "services flow-monitoring template flow-idle-timeout")

-	The list of collectors to which IP flow information is exported (see "services flow-monitoring template exporter-profile")

You can create up to 10 different templates per system. Each template can be attached to any data-path interface or sub-interface.

To create a flow-monitoring template:

**Command syntax: template [template]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring

**Parameter table**

+-----------+--------------------------------------------------+------------------+---------+
| Parameter | Description                                      | Range            | Default |
+===========+==================================================+==================+=========+
| template  | Reference to the configured name of the template | | string         | \-      |
|           |                                                  | | length 1-255   |         |
+-----------+--------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# template myTemplate


**Removing Configuration**

You cannot delete a template that is attached to an interface. To delete the template, remove the association with the interface before deleting it.
::

    dnRouter(cfg-srv-flow-monitoring)# no template myTemplate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.4    | Command introduced |
+---------+--------------------+

---

## flow-monitoring/template/type.rst

services flow-monitoring template type
--------------------------------------

**Minimum user role:** operator

To define the type of traffic to monitored using the specified template:

**Command syntax: type [type]**

**Command mode:** config

**Hierarchies**

- services flow-monitoring template

**Note**
-  Traffic flows will not be tracked for ipv4-over-mpls and ipv6-over-mpls templates if speculative parser is off.

**Parameter table**

+-----------+---------------+--------------------+---------+
| Parameter | Description   | Range              | Default |
+===========+===============+====================+=========+
| type      | template type | | ipv4             | \-      |
|           |               | | ipv6             |         |
|           |               | | ipv4-over-mpls   |         |
|           |               | | ipv6-over-mpls   |         |
|           |               | | ipv6-srv6        |         |
+-----------+---------------+--------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# flow-monitoring
    dnRouter(cfg-srv-flow-monitoring)# template myTemplate
    dnRouter(cfg-srv-flow-monitoring-myTemplate)# type ipv4-over-mpls


**Removing Configuration**

To remove the type:
::

    dnRouter(cfg-srv-flow-monitoring-myTemplate)# no type

**Command History**

+---------+------------------------------------------+
| Release | Modification                             |
+=========+==========================================+
| 11.4    | Command introduced                       |
+---------+------------------------------------------+
| 13.2    | Remove 'no command' as type is mandatory |
+---------+------------------------------------------+

---

## l2-cross-connect/admin-state.rst

services l2-cross-connect admin-state
-------------------------------------

**Minimum user role:** operator

To enable/disable an L2 cross-connect service:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services l2-cross-connect

**Parameter table**

+-------------+--------------------------------------+--------------+----------+
| Parameter   | Description                          | Range        | Default  |
+=============+======================================+==============+==========+
| admin-state | L2 cross-connect service admin-state | | enabled    | disabled |
|             |                                      | | disabled   |          |
+-------------+--------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# l2-cross-connect XC-To-Boston-CRS
    dnRouter(cfg-srv-l2xc)# admin-state enabled


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-srv-l2xc)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 12.0    | Command introduced |
+---------+--------------------+

---

## l2-cross-connect/interfaces.rst

services l2-cross-connect interfaces
------------------------------------

**Minimum user role:** operator

To configure the endpoint members of the xConnect service:

**Command syntax: interfaces [first-interface] [second-interface]**

**Command mode:** config

**Hierarchies**

- services l2-cross-connect

**Note**

- The command is applicable to the following interface types:

	- Physical vlan

	- Bundle vlan

- Only sub-interfaces that are defined as L2-service can be defined as L2-cross-connect member interfaces.

- The same interface cannot be configured twice in the same l2-cross-connect service.

- The same interface cannot be configured twice in two different l2-cross-connect services.

- Replacing a configured l2-interface requires configuring both interfaces again.

- Up to 32 cross connects can be configured on the system collectively.

**Parameter table**

+------------------+--------------------------------+------------------+---------+
| Parameter        | Description                    | Range            | Default |
+==================+================================+==================+=========+
| first-interface  | Cross connect first interface  | | string         | \-      |
|                  |                                | | length 1-255   |         |
+------------------+--------------------------------+------------------+---------+
| second-interface | Cross connect second interface | | string         | \-      |
|                  |                                | | length 1-255   |         |
+------------------+--------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# l2-cross-connect XC-To-Boston-CRS
    dnRouter(cfg-srv-l2xc)# interfaces bundle-100.2 bundle-200.3

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# l2-cross-connect XC-To-LA-NVP
    dnRouter(cfg-srv-l2xc)# interfaces ge100-0/0/2.32 ge400-0/0/23.93


**Removing Configuration**

To remove the interface endpoints (both interfaces are removed):
::

    dnRouter(cfg-srv-l2xc)# no interfaces

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 12.0    | Command introduced |
+---------+--------------------+

---

## l2-cross-connect/l2-cross-connect.rst

services l2-cross-connect
-------------------------

**Minimum user role:** operator


Circuit cross-connect allows to configure transparent connections between two circuits for the exchange of L2 data from one circuit to the other, and between two interfaces of the same type on the same router. This local switching connection works like a bridge domain with two bridge ports, where traffic enters from one endpoint of the local connection and leaves through the other.

To configure the l2 cross-connect:

#. Create an L2 cross-connect service.

#. Configure the two endpoints for the xConnect service. See "services l2-cross-connect interfaces".

#. Enable the xConnect service. See "services l2-cross-connect admin-state".

To create an L2 cross-connect service:

**Command syntax: l2-cross-connect [l2-cross-connect]**

**Command mode:** config

**Hierarchies**

- services

**Note**

- You can create up to 32 xConnect services per system.

**Parameter table**

+------------------+---------------------------------------------------------------+------------------+---------+
| Parameter        | Description                                                   | Range            | Default |
+==================+===============================================================+==================+=========+
| l2-cross-connect | Enters the context of L2 cross connect service configuration. | | string         | \-      |
|                  |                                                               | | length 1-255   |         |
+------------------+---------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# l2-cross-connect XC-To-Boston-CRS
    dnRouter(cfg-srv-l2xc)#


**Removing Configuration**

To delete a certain l2-cross-connect:
::

    dnRouter(cfg-srv)# no l2-cross-connect XC-To-Boston-CRS

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 12.0    | Command introduced |
+---------+--------------------+

---

## mpls-oam/mpls-oam.rst

services mpls-oam
-----------------

**Minimum user role:** operator


MPLS Operations, Administration, and Maintenance (OAM) is used for detecting failures in the datapath (e.g. black holes and misrouting). MPLS OAM provides proactive and on-demand troubleshooting tools for MPLS Networks and services by measuring the MPLS network and diagnosing defects that cannot otherwise be detected.

In addition to detecting operational failures, MPLS OAM can also be used for accounting and performance measurement of the MPLS network.

While Internet Control Message Protocol (ICMP) ping and traceroute can assist in diagnosing the root cause of a forwarding failure, they might not detect LSP failures because an ICMP packet can be forwarded via an IP path to the destination when an LSP breakage occurs.

MPLS LSP ping and traceroute are better suited for identifying LSP breakages because:

-	An MPLS echo request packet cannot be forwarded via an IP path because its IP Time to Live (TTL) is set to 1 and its IP destination address field is set to a 127.x.y.z/8 address.

-	The Forwarding Equivalence Class (FEC) being checked is not stored in the IP destination address field (as is the case of ICMP).

-	An LSP can take multiple paths from ingress to egress. This particularly occurs with Equal Cost Multipath (ECMP). The LSP traceroute command can trace all possible paths to an LSP node.

The MPLS OAM includes the following set of protocols for effectively detecting problems in the MPLS network:

-	MPLS LSP ping - checks connectivity of LSPs: An MPLS echo packet is sent through an LSP to validate it. When the packet reaches the end of the path, it is sent to the control plane of the egress LSR. The egress LSR then verifies whether it is indeed an egress for the FEC. 

-	MPLS traceroute - used for hop-by-hop fault localization and/or path tracing: A packet is sent to the control plane of each transit LSR. The transit LSR performs various checks to confirm that it is indeed a transit LSR for this path; this LSR also returns additional information that helps check the control plane against the data plane.

To configure MPLS OAM, enter the services OAM configuration hierarchy:

**Command syntax: mpls-oam**

**Command mode:** config

**Hierarchies**

- services

**Note**

- MPLS OAM supports RSVP tunnels and BGP-LU LSPs only.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-protocols)# mpls-oam
    dnRouter(cfg-srv-mpls-oam)#


**Removing Configuration**

To revert all MPLS-OAM parameters to their default values and remove all configured profiles:
::

    dnRouter(cfg-srv)# no mpls-oam

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.0    | Command introduced |
+---------+--------------------+

---

## mpls-oam/profile/admin-state.rst

services mpls-oam profile admin-state
-------------------------------------

**Minimum user role:** operator


Setting the administrative state of the MPLS-OAM profile determines whether or not periodic LSP ping packets will be sent along the LSP.

To enable or disable the periodic LSP ping probe:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services mpls-oam profile

**Parameter table**

+-------------+------------------------------+--------------+----------+
| Parameter   | Description                  | Range        | Default  |
+=============+==============================+==============+==========+
| admin-state | profile administrative state | | enabled    | disabled |
|             |                              | | disabled   |          |
+-------------+------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# mpls-oam
    dnRouter(cfg-srv-mpls-oam)# profile P_1
    dnRouter(cfg-mpls-oam-profile)# admin-state active

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# mpls-oam
    dnRouter(cfg-srv-mpls-oam)# profile P_1
    dnRouter(cfg-mpls-oam-profile)# admin-state passive


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-mpls-oam-profile)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.0    | Command introduced |
+---------+--------------------+

---

## mpls-oam/profile/count.rst

services mpls-oam profile count
-------------------------------

**Minimum user role:** operator

To configure the number of MPLS-OAM echo request packets that will be transmitted in a single test probe cycle:

**Command syntax: count [count]**

**Command mode:** config

**Hierarchies**

- services mpls-oam profile

**Note**

- The total duration of the MPLS-OAM probe equals count x interval + 1 second. For example, if count = 3 and interval = 5, then the probe's total duration = 3x5+1 = 16 seconds. This in turn defines the rate at which probes are sent (in this example, every 16 seconds).

**Parameter table**

+-----------+--------------------------------+-----------+---------+
| Parameter | Description                    | Range     | Default |
+===========+================================+===========+=========+
| count     | mpls echo request packet count | 1-1000000 | 5       |
+-----------+--------------------------------+-----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# mpls-oam
    dnRouter(cfg-srv-mpls-oam)# profile P_1
    dnRouter(cfg-mpls-oam-profile)# count 400


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-mpls-oam-profile)# no count

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.0    | Command introduced |
+---------+--------------------+

---

## mpls-oam/profile/exp.rst

services mpls-oam profile exp
-----------------------------

**Minimum user role:** operator


You can configure the EXP value that will be set in the EXP field of the topmost label. All inner layers will also be set with the matching CoS value, including IP Precedence field of the IPv4 header. This setting will override any global CoS configuration.

To configure the EXP value for MPLS-OAM echo requests:

**Command syntax: exp [exp]**

**Command mode:** config

**Hierarchies**

- services mpls-oam profile

**Parameter table**

+-----------+-----------------------------------------------------------------+-------+---------+
| Parameter | Description                                                     | Range | Default |
+===========+=================================================================+=======+=========+
| exp       | mpls echo request packet class-of-service, set in the exp field | 0-7   | 0       |
+-----------+-----------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# mpls-oam
    dnRouter(cfg-srv-mpls-oam)# profile P_1
    dnRouter(cfg-mpls-oam-profile)# exp 1


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-mpls-oam-profile)# no exp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.0    | Command introduced |
+---------+--------------------+

---

## mpls-oam/profile/interval.rst

services mpls-oam profile interval
----------------------------------

**Minimum user role:** operator


MPLS-OAM sends MPLS echo requests periodically. You can set an interval between packets within the probe.

To configure the interval between consecutive MPLS echo requests:

**Command syntax: interval [interval]**

**Command mode:** config

**Hierarchies**

- services mpls-oam profile

**Note**

- The total duration of the MPLS-OAM probe equals count x interval + 1 second. For example, if count = 3 and interval = 5, then the probe's total duration = 3x5+1 = 16 seconds. This in turn defines the rate at which probes are sent (in this example, every 16 seconds).

**Parameter table**

+-----------+-----------------------------------+---------+---------+
| Parameter | Description                       | Range   | Default |
+===========+===================================+=========+=========+
| interval  | mpls echo request packet interval | 2-86400 | 5       |
+-----------+-----------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# mpls-oam
    dnRouter(cfg-srv-mpls-oam)# profile P_1
    dnRouter(cfg-mpls-oam-profile)# interval 400


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-mpls-oam-profile)# no interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.0    | Command introduced |
+---------+--------------------+

---

## mpls-oam/profile/probe-loss_consecutive-threshold.rst

services mpls-oam profile probe-loss consecutive-threshold
----------------------------------------------------------

**Minimum user role:** operator


Probes are sent periodically, at a rate of count x interval, where count is the number of packets sent within a probe (see "services mpls-oam profile count") and the interval is the amount of time to wait between the packets within the probe ("services mpls-oam profile interval"). A probe is considered "lost" if all the LSP-ping packets within that probe have failed. You can configure the number of consecutive failed probes before generating a system event.

Only one system event is generated after the probe-loss threshold is crossed. The probe-loss counter is reset when you clear the event or a probe successfully reaches its destination.

To configure the number of consecutive failed probes for which system events will be generated:

**Command syntax: probe-loss consecutive-threshold [consecutive-threshold]**

**Command mode:** config

**Hierarchies**

- services mpls-oam profile

**Parameter table**

+-----------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter             | Description                                                                      | Range | Default |
+=======================+==================================================================================+=======+=========+
| consecutive-threshold | threshold number of failed consecutive probes for which system events will be    | 0-64  | 2       |
|                       | generated                                                                        |       |         |
+-----------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# mpls-oam
    dnRouter(cfg-srv-mpls-oam)# profile P_1
    dnRouter(cfg-mpls-oam-profile)# probe-loss consecutive-threshold 5


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-mpls-oam-profile)# no probe-loss consecutive-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.0    | Command introduced |
+---------+--------------------+

---

## mpls-oam/profile/profile.rst

services mpls-oam profile
-------------------------

**Minimum user role:** operator


An MPLS-OAM profile serves for sending periodic LSP-ping packets as part of a test probe to verify RSVP tunnel functionality. Only one profile may be associated with an LSP. 

To configure a profile, enter profile configuration mode:

**Command syntax: profile [profile]**

**Command mode:** config

**Hierarchies**

- services mpls-oam

**Note**

- Profiles support MPLS-LSP ping only. To run a traceroute, use the "run traceroute mpls rsvp" and "run traceroute mpls bgp-lu" commands.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter | Description                                                                      | Range            | Default |
+===========+==================================================================================+==================+=========+
| profile   | The profile name of the mpls oam service - the profile is atteched for an mpls   | | string         | \-      |
|           | protocol (e.g RSVP)                                                              | | length 1-255   |         |
+-----------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# mpls-oam
    dnRouter(cfg-srv-mpls-oam)# profile P_1
    dnRouter(cfg-mpls-oam-profile)#


**Removing Configuration**

To delete a certain profile:
::

    dnRouter(cfg-srv-mpls-oam)# # no profile P_1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.0    | Command introduced |
+---------+--------------------+

---

## mpls-oam/profile/reply-mode.rst

services mpls-oam profile reply-mode
------------------------------------

**Minimum user role:** operator


Setting the reply-mode sent to the destination. Signals the destination if reply should be sent as ip-udp packet or via the VPWS service as MPLS packet.

To configure the periodic LSP ping reply-mode:

**Command syntax: reply-mode [reply-mode]**

**Command mode:** config

**Hierarchies**

- services mpls-oam profile

**Parameter table**

+------------+--------------------+---------------------------------------+---------+
| Parameter  | Description        | Range                                 | Default |
+============+====================+=======================================+=========+
| reply-mode | profile reply-mode | | ip-udp                              | ip-udp  |
|            |                    | | application-level-control-channel   |         |
+------------+--------------------+---------------------------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# mpls-oam
    dnRouter(cfg-srv-mpls-oam)# profile P_1
    dnRouter(cfg-mpls-oam-profile)# reply-mode ip-udp

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# mpls-oam
    dnRouter(cfg-srv-mpls-oam)# profile P_1
    dnRouter(cfg-mpls-oam-profile)# reply-mode application-level-control-channel


**Removing Configuration**

To delete the reply mode configuration:
::

    dnRouter(cfg-mpls-oam-profile)# no reply-mode

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## mpls-oam/profile/size.rst

services mpls-oam profile size
------------------------------

**Minimum user role:** operator

To set the packet size using the Pad TLV to pad the echo messages

**Command syntax: size [size]**

**Command mode:** config

**Hierarchies**

- services mpls-oam profile

**Parameter table**

+-----------+-------------------------------+----------+---------+
| Parameter | Description                   | Range    | Default |
+===========+===============================+==========+=========+
| size      | mpls echo request packet size | 100-9300 | \-      |
+-----------+-------------------------------+----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# mpls-oam
    dnRouter(cfg-srv-mpls-oam)# profile P_1
    dnRouter(cfg-mpls-oam-profile)# size 400


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-mpls-oam-profile)# no size

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.0    | Command introduced |
+---------+--------------------+

---

## mpls-oam/profile/source-interface.rst

services mpls-oam profile source-interface
------------------------------------------

**Minimum user role:** operator

"To set the source interface from which the source ip-address will be taken for MPLS OAM probing"

**Command syntax: source-interface [source-interface]**

**Command mode:** config

**Hierarchies**

- services mpls-oam profile

**Note**

- The default behavior is to impose IPv4 source address of the egress interface that the probes are sent through.

**Parameter table**

+------------------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter        | Description                                                                      | Range            | Default |
+==================+==================================================================================+==================+=========+
| source-interface | The source-interface from which the source ip-address will be taken for MPLS OAM | | string         | \-      |
|                  | probing.                                                                         | | length 1-255   |         |
+------------------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# mpls-oam
    dnRouter(cfg-srv-mpls-oam)# profile P_1
    dnRouter(cfg-srv-mpls-oam-profile)# source-interface lo0


**Removing Configuration**

To revert to default behavior:
::

    dnRouter(cfg-srv-mpls-oam-profile)# no source-interface

To revert to default behavior:
::

    dnRouter(cfg-srv-mpls-oam-profile)# no source-interface lo0

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## performance-monitoring/icmp-echo-sessions/admin-state.rst

services performance-monitoring icmp-echo session admin-state
-------------------------------------------------------------

**Minimum user role:** operator

To enable or disable a ICMP echo IP performance monitoring session:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring icmp-echo session

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                                      | Range        | Default  |
+=============+==================================================================================+==============+==========+
| admin-state | The administrative state of the ICMP echo IP perforamnce measurement             | | enabled    | disabled |
|             | test-session                                                                     | | disabled   |          |
+-------------+----------------------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# icmp-echo session Session-1
    dnRouter(cfg-srv-pm-icmp-echo-session)# admin-state enabled

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# icmp-echo session Session-1
    dnRouter(cfg-srv-pm-icmp-echo-session)# admin-state disabled


**Removing Configuration**

To revert admin-state to default:
::

    dnRouter(cfg-srv-pm-icmp-echo-session)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/icmp-echo-sessions/destination-address.rst

services performance-monitoring icmp-echo session destination-address
---------------------------------------------------------------------

**Minimum user role:** operator

To configure the destination IP address for the ICMP echo IP performance monitoring session:

**Command syntax: destination-address [ip-address]** vrf [vrf-name]

**Command mode:** config

**Hierarchies**

- services performance-monitoring icmp-echo session

**Parameter table**

+------------+-------------------+------------------+---------+
| Parameter  | Description       | Range            | Default |
+============+===================+==================+=========+
| ip-address | Target IP address | | A.B.C.D        | \-      |
|            |                   | | X:X::X:X       |         |
+------------+-------------------+------------------+---------+
| vrf-name   | Target VRF        | | string         | default |
|            |                   | | length 1-255   |         |
+------------+-------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# icmp-echo session Session-1
    dnRouter(cfg-srv-pm-icmp-echo-session)# destination-address 1.1.1.1

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# icmp-echo session Session-1
    dnRouter(cfg-srv-pm-icmp-echo-session)# destination-address 2.2.2.2 vrf MyVrf-1


**Removing Configuration**

To remove the configured destination IP address:
::

    dnRouter(cfg-srv-pm-icmp-echo-session)# no destination-address

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/icmp-echo-sessions/icmp-echo-sessions.rst

services performance-monitoring icmp-echo session
-------------------------------------------------

**Minimum user role:** operator

To configure an ICMP echo IP performance monitoring session:

**Command syntax: icmp-echo session [test-session]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring

**Parameter table**

+--------------+-------------+------------------+---------+
| Parameter    | Description | Range            | Default |
+==============+=============+==================+=========+
| test-session | a session   | | string         | \-      |
|              |             | | length 1-255   |         |
+--------------+-------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# icmp-echo session Session-1
    dnRouter(cfg-srv-pm-icmp-echo-session)#


**Removing Configuration**

To remove an ICMP echo IP performance monitoring session:
::

    dnRouter(cfg-srv-pm)# no icmp-echo session Session-1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/icmp-echo-sessions/profile.rst

services performance-monitoring icmp-echo session profile
---------------------------------------------------------

**Minimum user role:** operator

To associate a configuration profile for the ICMP echo IP performance monitoring session:

**Command syntax: profile [profile-name]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring icmp-echo session

**Parameter table**

+--------------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter    | Description                                                                      | Range            | Default |
+==============+==================================================================================+==================+=========+
| profile-name | The ICMP echo IP perforamnce measurement profile containing session parameters   | | string         | default |
|              | configuration                                                                    | | length 1-255   |         |
+--------------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# icmp-echo session Session-1
    dnRouter(cfg-srv-pm-icmp-echo-session)# profile Daily-Monitoring


**Removing Configuration**

To revert to the default configuration profile for the ICMP echo IP performance monitoring session:
::

    dnRouter(cfg-srv-pm-icmp-echo-session)# no profile

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/icmp-echo-sessions/source-address.rst

services performance-monitoring icmp-echo session source-address
----------------------------------------------------------------

**Minimum user role:** operator

To configure the source IP address for the ICMP echo IP performance monitoring session:

**Command syntax: source-address [ip-address]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring icmp-echo session

**Parameter table**

+------------+-------------------+--------------+---------+
| Parameter  | Description       | Range        | Default |
+============+===================+==============+=========+
| ip-address | Sender IP address | | A.B.C.D    | \-      |
|            |                   | | X:X::X:X   |         |
+------------+-------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# icmp-echo session Session-1
    dnRouter(cfg-srv-pm-icmp-echo-session)# source-address 1.1.1.1


**Removing Configuration**

To remove the configured source IP address:
::

    dnRouter(cfg-srv-pm-icmp-echo-session)# no source-address

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/interfaces/delay-measurement/delay-measurement.rst

services performance-monitoring interface delay-measurement
-----------------------------------------------------------

**Minimum user role:** operator

Dynamic link delay is calculated by Simple-TWAMP (STAMP) link delay sessions. On a given interface/sub-interface, either an IPv4 Simple-TWAMP session or an IPv6 Simple-TWAMP session can be enabled. 
The sessions' link delay results will feed the ISIS Single-Topology or the ISIS Multi-Topology, for both IPv4 and IPv6 topologies. 
Link delay parameters are advertised under TLV 22 for IPv4 topology, TLV 222 for IPv6 topology, and ASLA sub-TLV, if enabled in ISIS and Flex-Algo is configured. 
The supported parameters are Min/Max unidirectional link delay, average link delay, and unidirectional delay variation.

**Command syntax: delay-measurement**

**Command mode:** config

**Hierarchies**

- services performance-monitoring interface

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# interface ge100-0/0/0
    dnRouter(cfg-srv-pm-ge100-0/0/0)# delay-measurement
    dnRouter(cfg-pm-ge100-0/0/0-dm)#


**Removing Configuration**

To remove the performance monitoring configurations:
::

    dnRouter(cfg-srv-pm-ge100-0/0/0)# no delay-measurement

**Command History**

+---------+------------------------------------+
| Release | Modification                       |
+=========+====================================+
| 16.2    | Command introduced                 |
+---------+------------------------------------+
| 18.2    | removed the 'interfaces' hierarchy |
+---------+------------------------------------+

---

## performance-monitoring/interfaces/delay-measurement/dynamic-delay/admin-state.rst

services performance-monitoring interface delay-measurement dynamic-delay admin-state
-------------------------------------------------------------------------------------

**Minimum user role:** operator

To enable or disable a dynamic link delay monitoring session on an interface:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring interface delay-measurement dynamic-delay

**Parameter table**

+-------------+-------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                 | Range        | Default  |
+=============+=============================================================+==============+==========+
| admin-state | Enable or disable the dynamic link delay monitoring session | | enabled    | disabled |
|             |                                                             | | disabled   |          |
+-------------+-------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# interface ge100-0/0/0
    dnRouter(cfg-srv-pm-ge100-0/0/0)# delay-measurement
    dnRouter(cfg-pm-ge100-0/0/0-dm)# dynamic-delay
    dnRouter(cfg-ge100-0/0/0-dm-dynamic-delay)# admin-state enabled
    dnRouter(cfg-ge100-0/0/0-dm-dynamic-delay)#

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# interface ge100-0/0/0
    dnRouter(cfg-srv-pm-ge100-0/0/0)# delay-measurement
    dnRouter(cfg-pm-ge100-0/0/0-dm)# dynamic-delay
    dnRouter(cfg-ge100-0/0/0-dm-dynamic-delay)# admin-state disabled
    dnRouter(cfg-ge100-0/0/0-dm-dynamic-delay)#


**Removing Configuration**

To revert admin-state to default:
::

    dnRouter(cfg-ge100-0/0/0-dm-dynamic-delay)# no admin-state

**Command History**

+---------+------------------------------------+
| Release | Modification                       |
+=========+====================================+
| 18.0    | Command introduced                 |
+---------+------------------------------------+
| 18.2    | removed the 'interfaces' hierarchy |
+---------+------------------------------------+

---

## performance-monitoring/interfaces/delay-measurement/dynamic-delay/destination-address.rst

services performance-monitoring interface delay-measurement dynamic-delay destination-address
---------------------------------------------------------------------------------------------

**Minimum user role:** operator

To configure the destination IP address for the dynamic link delay monitoring session:

**Command syntax: destination-address [ip-address]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring interface delay-measurement dynamic-delay

**Parameter table**

+------------+--------------------------------------------------------------------+--------------+---------+
| Parameter  | Description                                                        | Range        | Default |
+============+====================================================================+==============+=========+
| ip-address | The destination address for dynamic link delay monitoring session. | | A.B.C.D    | \-      |
|            |                                                                    | | X:X::X:X   |         |
+------------+--------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# interface ge100-0/0/0
    dnRouter(cfg-srv-pm-ge100-0/0/0)# delay-measurement
    dnRouter(cfg-pm-ge100-0/0/0-dm)# dynamic-delay
    dnRouter(cfg-ge100-0/0/0-dm-dynamic-delay)# destination-address 1.1.1.1
    dnRouter(cfg-ge100-0/0/0-dm-dynamic-delay)#


**Removing Configuration**

To remove the configured destination IP address:
::

    dnRouter(cfg-ge100-0/0/0-dm-dynamic-delay)# no destination-address

**Command History**

+---------+------------------------------------+
| Release | Modification                       |
+=========+====================================+
| 18.0    | Command introduced                 |
+---------+------------------------------------+
| 18.2    | removed the 'interfaces' hierarchy |
+---------+------------------------------------+

---

## performance-monitoring/interfaces/delay-measurement/dynamic-delay/dynamic-delay.rst

services performance-monitoring interface delay-measurement dynamic-delay
-------------------------------------------------------------------------

**Minimum user role:** operator

To configure dynamic link delay measurement on an interface:

**Command syntax: dynamic-delay**

**Command mode:** config

**Hierarchies**

- services performance-monitoring interface delay-measurement

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# interface ge100-0/0/0
    dnRouter(cfg-srv-pm-ge100-0/0/0)# delay-measurement
    dnRouter(cfg-pm-ge100-0/0/0-dm)# dynamic-delay
    dnRouter(cfg-ge100-0/0/0-dm-dynamic-delay)#


**Removing Configuration**

To remove the dynamic link delay session on the interface:
::

    dnRouter(cfg-pm-ge100-0/0/0-dm)# no dynamic-delay

**Command History**

+---------+------------------------------------+
| Release | Modification                       |
+=========+====================================+
| 18.0    | Command introduced                 |
+---------+------------------------------------+
| 18.2    | removed the 'interfaces' hierarchy |
+---------+------------------------------------+

---

## performance-monitoring/interfaces/delay-measurement/dynamic-delay/profile.rst

services performance-monitoring interface delay-measurement dynamic-delay profile
---------------------------------------------------------------------------------

**Minimum user role:** operator

To associate a configuration profile for the dynamic link delay monitoring session:

**Command syntax: profile [profile-name]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring interface delay-measurement dynamic-delay

**Parameter table**

+--------------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter    | Description                                                                      | Range            | Default |
+==============+==================================================================================+==================+=========+
| profile-name | The Simple TWAMP link-performance profile containing session parameters          | | string         | default |
|              | configuration                                                                    | | length 1-255   |         |
+--------------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# interface ge100-0/0/0
    dnRouter(cfg-srv-pm-ge100-0/0/0)# delay-measurement
    dnRouter(cfg-pm-ge100-0/0/0-dm)# dynamic-delay
    dnRouter(cfg-ge100-0/0/0-dm-dynamic-delay)# profile daily-monitoring
    dnRouter(cfg-ge100-0/0/0-dm-dynamic-delay)#


**Removing Configuration**

To revert to the default configuration profile for the dynamic link delay monitoring session:
::

    dnRouter(cfg-ge100-0/0/0-dm-dynamic-delay)# no profile

**Command History**

+---------+------------------------------------+
| Release | Modification                       |
+=========+====================================+
| 18.0    | Command introduced                 |
+---------+------------------------------------+
| 18.2    | removed the 'interfaces' hierarchy |
+---------+------------------------------------+

---

## performance-monitoring/interfaces/delay-measurement/static-delay.rst

services performance-monitoring interface delay-measurement static-delay
------------------------------------------------------------------------

**Minimum user role:** operator

Configure the static delay for the interface. This delay may be signaled in routing protocol (example: isis) messages.

**Command syntax: static-delay [static-delay]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring interface delay-measurement

**Note**

- The delay is in the forward direction from the local interface to the remote interface.

**Parameter table**

+--------------+-------------------------------------+------------+---------+
| Parameter    | Description                         | Range      | Default |
+==============+=====================================+============+=========+
| static-delay | The Interface Delay in microseconds | 1-16777215 | \-      |
+--------------+-------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# interface ge100-0/0/0
    dnRouter(cfg-srv-pm-ge100-0/0/0)# delay-measurement
    dnRouter(cfg-pm-ge100-0/0/0-dm)# static-delay 50
    dnRouter(cfg-pm-ge100-0/0/0-dm)#


**Removing Configuration**

To remove the delay, which will then no longer be signaled in the routing protocol (example: isis) messages.
::

    dnRouter(cfg-pm-ge100-0/0/0-dm)# no static-delay

**Command History**

+---------+------------------------------------+
| Release | Modification                       |
+=========+====================================+
| 16.2    | Command introduced                 |
+---------+------------------------------------+
| 18.2    | removed the 'interfaces' hierarchy |
+---------+------------------------------------+

---

## performance-monitoring/interfaces/interfaces.rst

services performance-monitoring interface
-----------------------------------------

**Minimum user role:** operator

Configure the interface to which the Performance Monitoring shall be applied.

**Command syntax: interface [interface]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring

**Note**

- support only interface of type <geX-X/X/X/bundle-X/<geX-X/X/X.Y>/<bundle-X.Y>

**Parameter table**

+-----------+-------------------------------------------------------------+------------------+---------+
| Parameter | Description                                                 | Range            | Default |
+===========+=============================================================+==================+=========+
| interface | The name of the interface -- used to address the interface. | | string         | \-      |
|           |                                                             | | length 1-255   |         |
+-----------+-------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# interface ge100-0/0/0
    dnRouter(cfg-srv-pm-ge100-0/0/0)#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# interface bundle-1
    dnRouter(cfg-srv-pm-bundle-1)#
    dnRouter#
    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# interface ge100-0/0/0.1
    dnRouter(cfg-srv-pm-ge100-0/0/0.1)#


**Removing Configuration**

To remove performance monitoring configuration on a specifice interface
::

    dnRouter(cfg-srv-pm)# no interface ge100-0/0/0

**Command History**

+---------+------------------------------------+
| Release | Modification                       |
+=========+====================================+
| 16.2    | Command introduced                 |
+---------+------------------------------------+
| 18.2    | removed the 'interfaces' hierarchy |
+---------+------------------------------------+

---

## performance-monitoring/performance-monitoring.rst

services performance-monitoring
-------------------------------

**Minimum user role:** operator

DNOS supports performance monitoring.

**Command syntax: performance-monitoring**

**Command mode:** config

**Hierarchies**

- services

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)#


**Removing Configuration**

To remove the performance monitoring configurations:
::

    dnRouter(cfg-srv)# no performance-monitoring

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/dscp-value.rst

services performance-monitoring profiles endpoint-delay dscp-value
------------------------------------------------------------------

**Minimum user role:** operator

To set the DSCP value for transmitted packets:

**Command syntax: dscp-value [class-of-service]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay

**Parameter table**

+------------------+-----------------------------------------------+-------+---------+
| Parameter        | Description                                   | Range | Default |
+==================+===============================================+=======+=========+
| class-of-service | The DSCP value for transmitted STAMP packets. | 0-56  | 48      |
+------------------+-----------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# dscp-value 0


**Removing Configuration**

To return the DSCP value to default:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no dscp-value

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/endpoint-delay.rst

services performance-monitoring profiles endpoint-delay
-------------------------------------------------------

**Minimum user role:** operator

To configure an endpoint delay measurement profile:

**Command syntax: endpoint-delay [profile]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles

**Note**

- Up to 4 profiles may be configured in addition to the predefined `default` profile, the `default` profile can be updated but cannot be deleted.

**Parameter table**

+-----------+---------------------------------------------------------------------+------------------+---------+
| Parameter | Description                                                         | Range            | Default |
+===========+=====================================================================+==================+=========+
| profile   | The profile name. The profile is attached to a Simple TWAMP session | | string         | \-      |
|           |                                                                     | | length 1-255   |         |
+-----------+---------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)#


**Removing Configuration**

To delete a certain profile:
::

    dnRouter(cfg-srv-pm-profiles)# no endpoint-delay MyCustom_profile

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/inform-test-results.rst

services performance-monitoring profiles endpoint-delay inform-test-results
---------------------------------------------------------------------------

**Minimum user role:** operator

To enable or disable the generation of test failure system events for the specified profile:

**Command syntax: inform-test-results [admin-state]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay

**Parameter table**

+-------------+-------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                       | Range        | Default  |
+=============+===================================================================+==============+==========+
| admin-state | Enable or diable the generation of the test failure system event. | | enabled    | disabled |
|             |                                                                   | | disabled   |          |
+-------------+-------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# inform-test-results enabled

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# inform-test-results disabled


**Removing Configuration**

To revert to the inform-test-results configuration to its default value:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no inform-test-results

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/ip-ttl.rst

services performance-monitoring profiles endpoint-delay ip-ttl
--------------------------------------------------------------

**Minimum user role:** operator

To set the IP TTL value for transmitted packets:

**Command syntax: ip-ttl [ip-ttl]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay

**Parameter table**

+-----------+----------------------------------------------+-------+---------+
| Parameter | Description                                  | Range | Default |
+===========+==============================================+=======+=========+
| ip-ttl    | Set the IP TTL value for transmitted packets | 1-255 | 255     |
+-----------+----------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# ip-ttl 60


**Removing Configuration**

To return the IP TTL value to default:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no ip-ttl

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/padding-mode.rst

services performance-monitoring profiles endpoint-delay padding-mode
--------------------------------------------------------------------

**Minimum user role:** operator

To set the packet padding mode for the specified profile:

**Command syntax: padding-mode [mode]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay

**Parameter table**

+-----------+-------------------------+------------+---------+
| Parameter | Description             | Range      | Default |
+===========+=========================+============+=========+
| mode      | The packet padding mode | | zero     | zero    |
|           |                         | | random   |         |
+-----------+-------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# padding-mode zero

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# padding-mode random


**Removing Configuration**

To revert to the padding-mode to its default value:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no padding-mode

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/padding-size.rst

services performance-monitoring profiles endpoint-delay padding-size
--------------------------------------------------------------------

**Minimum user role:** operator

To set the packet padding size value for transmitted packets:

**Command syntax: padding-size [packet-padding-size]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay

**Parameter table**

+---------------------+----------------------------------------------------------------------------------+---------+---------+
| Parameter           | Description                                                                      | Range   | Default |
+=====================+==================================================================================+=========+=========+
| packet-padding-size | Size of the Packet Padding. Suggested to run Path MTU Discovery to avoid packet  | 60-1400 | 60      |
|                     | fragmentation in IPv4 and packet backholing in IPv6                              |         |         |
+---------------------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# padding-size 100


**Removing Configuration**

To revert the packet padding size to its default value:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no padding-size

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/test-duration_non-stop.rst

services performance-monitoring profiles endpoint-delay test-duration non-stop
------------------------------------------------------------------------------

**Minimum user role:** operator

To set a non-stop test:

**Command syntax: test-duration non-stop {probe-interval [probe-interval], computation-interval [computation-interval]}**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay

**Parameter table**

+----------------------+---------------------------------------------------------+--------+---------+
| Parameter            | Description                                             | Range  | Default |
+======================+=========================================================+========+=========+
| probe-interval       | The interval between subsequent probes in the test.     | 1-255  | 1       |
+----------------------+---------------------------------------------------------+--------+---------+
| computation-interval | Periodic computation interval. Valid for non-stop mode. | 1-3600 | 60      |
+----------------------+---------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# test-duration non-stop probe-interval 60

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# test-duration non-stop probe-interval 2 computation-interval 300

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# test-duration non-stop computation-interval 53


**Removing Configuration**

To return the test duration configuration to default:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no test-duration non-stop

To return the probe interval configuration to default:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no test-duration non-stop probe-interval

To return the computation interval configuration to default:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no test-duration non-stop computation-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/test-duration_probe-count.rst

services performance-monitoring profiles endpoint-delay test-duration probes
----------------------------------------------------------------------------

**Minimum user role:** operator

To set the duration of each test in probe-count:

**Command syntax: test-duration probes {probe-count [probe-count], probe-interval [probe-interval], repeat-interval [repeat-interval]}**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay

**Parameter table**

+-----------------+-----------------------------------------------------+--------------+---------+
| Parameter       | Description                                         | Range        | Default |
+=================+=====================================================+==============+=========+
| probe-count     | The number of probes in the test.                   | 1-4294967295 | 60      |
+-----------------+-----------------------------------------------------+--------------+---------+
| probe-interval  | The interval between subsequent probes in the test. | 1-255        | 1       |
+-----------------+-----------------------------------------------------+--------------+---------+
| repeat-interval | The interval between subsequent tests.              | 1-4294967295 | 60      |
+-----------------+-----------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# test-duration probes probe-count 60

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# test-duration probes probe-count 100 probe-interval 2 repeat-interval 300

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# test-duration probes probe-interval 53


**Removing Configuration**

To return the test duration configuration to default:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no test-duration probes

To return the probe count configuration to default:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no test-duration probes probe-count

To return the probe interval configuration to default:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no test-duration probes probe-interval

To return the repeat interval configuration to default:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no test-duration probes repeat-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/test-duration_time-frame.rst

services performance-monitoring profiles endpoint-delay test-duration time-frame
--------------------------------------------------------------------------------

**Minimum user role:** operator

To set the duration of each test in a time frame of minutes:

**Command syntax: test-duration time-frame {minutes [minutes], probe-interval [probe-interval], repeat-interval [repeat-interval]}**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay

**Parameter table**

+-----------------+-----------------------------------------------------+--------------+---------+
| Parameter       | Description                                         | Range        | Default |
+=================+=====================================================+==============+=========+
| minutes         | The duration of the test in minutes.                | 1-4294967295 | 1       |
+-----------------+-----------------------------------------------------+--------------+---------+
| probe-interval  | The interval between subsequent probes in the test. | 1-255        | 1       |
+-----------------+-----------------------------------------------------+--------------+---------+
| repeat-interval | The interval between subsequent tests.              | 1-4294967295 | 60      |
+-----------------+-----------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# test-duration time-frame minutes 60

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# test-duration time-frame minutes 100 probe-interval 2 repeat-interval 300

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# test-duration time-frame probe-interval 53


**Removing Configuration**

To return the test duration configuration to default:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no test-duration time-frame

To return the time frame configuration to default:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no test-duration time-frame minutes

To return the probe interval configuration to default:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no test-duration time-frame probe-interval

To return the repeat interval configuration to default:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no test-duration time-frame repeat-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/thresholds/delay-rtt-avg.rst

services performance-monitoring profiles endpoint-delay thresholds delay-rtt-avg
--------------------------------------------------------------------------------

**Minimum user role:** operator

To set the average round trip delay per test threshold:

**Command syntax: delay-rtt-avg [delay-rtt-avg]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay thresholds

**Parameter table**

+---------------+----------------------------------------------------+------------+---------+
| Parameter     | Description                                        | Range      | Default |
+===============+====================================================+============+=========+
| delay-rtt-avg | Average round trip time per test (in microseconds) | 1-60000000 | \-      |
+---------------+----------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# delay-rtt-avg 1000


**Removing Configuration**

To remove the average round trip delay threshold:
::

    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# no delay-rtt-avg

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/thresholds/delay-rtt-max.rst

services performance-monitoring profiles endpoint-delay thresholds delay-rtt-max
--------------------------------------------------------------------------------

**Minimum user role:** operator

To set the maximum round trip delay per test threshold:

**Command syntax: delay-rtt-max [delay-rtt-max]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay thresholds

**Parameter table**

+---------------+----------------------------------------------------+------------+---------+
| Parameter     | Description                                        | Range      | Default |
+===============+====================================================+============+=========+
| delay-rtt-max | Maximum round trip time per test (in microseconds) | 1-60000000 | \-      |
+---------------+----------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# delay-rtt-max 1000


**Removing Configuration**

To remove the maximum round trip delay threshold:
::

    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# no delay-rtt-max

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/thresholds/delay-rtt-min.rst

services performance-monitoring profiles endpoint-delay thresholds delay-rtt-min
--------------------------------------------------------------------------------

**Minimum user role:** operator

To set the minimum round trip delay per test threshold:

**Command syntax: delay-rtt-min [delay-rtt-min]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay thresholds

**Parameter table**

+---------------+----------------------------------------------------+------------+---------+
| Parameter     | Description                                        | Range      | Default |
+===============+====================================================+============+=========+
| delay-rtt-min | Minimum round trip time per test (in microseconds) | 1-60000000 | \-      |
+---------------+----------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# delay-rtt-min 1000


**Removing Configuration**

To remove the minimum round trip delay threshold:
::

    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# no delay-rtt-min

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/thresholds/delay-uni-avg.rst

services performance-monitoring profiles endpoint-delay thresholds delay-unidirectional-avg
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the average unidirectional delay per test threshold:

**Command syntax: delay-unidirectional-avg [delay-unidirectional-avg]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay thresholds

**Parameter table**

+--------------------------+--------------------------------------------------------------+------------+---------+
| Parameter                | Description                                                  | Range      | Default |
+==========================+==============================================================+============+=========+
| delay-unidirectional-avg | Average unidirectional delay time per test (in microseconds) | 1-60000000 | \-      |
+--------------------------+--------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# delay-unidirectional-avg 1000


**Removing Configuration**

To remove the average unidirectional delay threshold:
::

    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# no delay-unidirectional-avg

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/thresholds/delay-uni-max.rst

services performance-monitoring profiles endpoint-delay thresholds delay-unidirectional-max
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the maximum unidirectional delay per test threshold:

**Command syntax: delay-unidirectional-max [delay-unidirectional-max]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay thresholds

**Parameter table**

+--------------------------+--------------------------------------------------------------+------------+---------+
| Parameter                | Description                                                  | Range      | Default |
+==========================+==============================================================+============+=========+
| delay-unidirectional-max | Maximum unidirectional delay time per test (in microseconds) | 1-60000000 | \-      |
+--------------------------+--------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# delay-unidirectional-max 2000


**Removing Configuration**

To remove the maximum unidirectional delay threshold:
::

    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# no delay-unidirectional-max

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/thresholds/delay-uni-min.rst

services performance-monitoring profiles endpoint-delay thresholds delay-unidirectional-min
-------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the minimum unidirectional delay per test threshold:

**Command syntax: delay-unidirectional-min [delay-unidirectional-min]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay thresholds

**Parameter table**

+--------------------------+--------------------------------------------------------------+------------+---------+
| Parameter                | Description                                                  | Range      | Default |
+==========================+==============================================================+============+=========+
| delay-unidirectional-min | Minimum unidirectional delay time per test (in microseconds) | 1-60000000 | \-      |
+--------------------------+--------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# delay-unidirectional-min 900


**Removing Configuration**

To remove the minimum unidirectional delay threshold:
::

    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# no delay-unidirectional-min

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/thresholds/jitter-egress-max.rst

services performance-monitoring profiles endpoint-delay thresholds jitter-egress-max
------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the maximum source to destination jitter per test threshold:

**Command syntax: jitter-egress-max [jitter-egress-max]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay thresholds

**Parameter table**

+-------------------+-----------------------------------------------------------------+------------+---------+
| Parameter         | Description                                                     | Range      | Default |
+===================+=================================================================+============+=========+
| jitter-egress-max | Maximum source to destination jitter per test (in microseconds) | 1-60000000 | \-      |
+-------------------+-----------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-profile)# thresholds
    dnRouter(cfg-profiles-endpoint-delay-profile-thresholds)# jitter-egress-max 800


**Removing Configuration**

To remove the egress jitter threshold:
::

    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# no jitter-egress-max

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/thresholds/jitter-ingress-max.rst

services performance-monitoring profiles endpoint-delay thresholds jitter-ingress-max
-------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the maximum destination to source jitter per test threshold:

**Command syntax: jitter-ingress-max [jitter-ingress-max]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay thresholds

**Parameter table**

+--------------------+-----------------------------------------------------------------+------------+---------+
| Parameter          | Description                                                     | Range      | Default |
+====================+=================================================================+============+=========+
| jitter-ingress-max | Maximum destination to source jitter per test (in microseconds) | 1-60000000 | \-      |
+--------------------+-----------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# jitter-ingress-max 800


**Removing Configuration**

To remove the ingress jitter threshold:
::

    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# no jitter-ingress-max

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/thresholds/jitter-rtt-max.rst

services performance-monitoring profiles endpoint-delay thresholds jitter-rtt-max
---------------------------------------------------------------------------------

**Minimum user role:** operator

To set the maximum round trip jitter per test threshold:

**Command syntax: jitter-rtt-max [jitter-rtt-max]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay thresholds

**Parameter table**

+----------------+-------------------------------------------+------------+---------+
| Parameter      | Description                               | Range      | Default |
+================+===========================================+============+=========+
| jitter-rtt-max | Maximum jitter per test (in microseconds) | 1-60000000 | \-      |
+----------------+-------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-endpoint-delay-profile-thresholds)# jitter-rtt-max 1000


**Removing Configuration**

To remove the round trip jitter threshold:
::

    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# no jitter-rtt-max

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/thresholds/loss-successive.rst

services performance-monitoring profiles endpoint-delay thresholds loss-successive
----------------------------------------------------------------------------------

**Minimum user role:** operator

To set the successive probe loss per test threshold:

**Command syntax: loss-successive [successive-loss]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay thresholds

**Parameter table**

+-----------------+-----------------------------------------------------+--------------+---------+
| Parameter       | Description                                         | Range        | Default |
+=================+=====================================================+==============+=========+
| successive-loss | Successive probe loss count indicating test failure | 1-4294967295 | \-      |
+-----------------+-----------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# loss-successive 5


**Removing Configuration**

To remove the successive loss threshold:
::

    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# no loss-successive

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/thresholds/loss-total.rst

services performance-monitoring profiles endpoint-delay thresholds loss-total
-----------------------------------------------------------------------------

**Minimum user role:** operator

To set the total probe loss per test threshold:

**Command syntax: loss-total [total-loss]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay thresholds

**Parameter table**

+------------+------------------------------------------------+--------------+---------+
| Parameter  | Description                                    | Range        | Default |
+============+================================================+==============+=========+
| total-loss | Total probe loss count indicating test failure | 1-4294967295 | \-      |
+------------+------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-profile)# thresholds
    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# loss-total 10


**Removing Configuration**

To remove the total loss threshold:
::

    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)# no loss-total

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/endpoint-delay/thresholds/thresholds.rst

services performance-monitoring profiles endpoint-delay thresholds
------------------------------------------------------------------

**Minimum user role:** operator

To configure IP performance monitoring thresholds:

**Command syntax: thresholds**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles endpoint-delay

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# endpoint-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-endpoint-delay-MyCustom_profile-thresholds)#


**Removing Configuration**

To remove the IP performance monitoring thresholds:
::

    dnRouter(cfg-pm-profiles-endpoint-delay-MyCustom_profile)# no thresholds

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/data-size.rst

services performance-monitoring profiles icmp-echo data-size
------------------------------------------------------------

**Minimum user role:** operator

To set the packet payload size value for transmitted packets:

**Command syntax: data-size [data-size]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo

**Note**

- The payload of transmitted packets contains the 64-bytes of system-id in its data portion, followed by padding to the data-size as specified by the user.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+---------+---------+
| Parameter | Description                                                                      | Range   | Default |
+===========+==================================================================================+=========+=========+
| data-size | Size of the Packet Payload. Suggested to run Path MTU Discovery to avoid packet  | 64-1400 | 64      |
|           | fragmentation in IPv4 and packet backholing in IPv6                              |         |         |
+-----------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# data-size 100


**Removing Configuration**

To revert the packet payload size to its default value:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no data-size

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/dscp-value.rst

services performance-monitoring profiles icmp-echo dscp-value
-------------------------------------------------------------

**Minimum user role:** operator

To set the DSCP value for transmitted packets:

**Command syntax: dscp-value [class-of-service]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo

**Parameter table**

+------------------+-----------------------------------------+-------+---------+
| Parameter        | Description                             | Range | Default |
+==================+=========================================+=======+=========+
| class-of-service | The DSCP value for transmitted packets. | 0-56  | 48      |
+------------------+-----------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# dscp-value 0


**Removing Configuration**

To return the DSCP value to default:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no dscp-value

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/icmp-echo.rst

services performance-monitoring profiles icmp-echo
--------------------------------------------------

**Minimum user role:** operator

To configure an ICMP echo IP performance measurement profile:

**Command syntax: icmp-echo [profile]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles

**Note**

- Up to 4 profiles may be configured in addition to the predefined `default` profile, the `default` profile can be updated but cannot be deleted.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter | Description                                                                      | Range            | Default |
+===========+==================================================================================+==================+=========+
| profile   | The profile name. The profile is attached to a ICMP echo IP performance          | | string         | \-      |
|           | measurement session                                                              | | length 1-255   |         |
+-----------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)#


**Removing Configuration**

To delete a certain profile:
::

    dnRouter(cfg-srv-pm-profiles)# no icmp-echo MyCustom_profile

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/inform-test-results.rst

services performance-monitoring profiles icmp-echo inform-test-results
----------------------------------------------------------------------

**Minimum user role:** operator

To enable or disable the generation of test failure system events and SNMP traps for the specified profile:

**Command syntax: inform-test-results [admin-state]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo

**Parameter table**

+-------------+-------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                       | Range        | Default  |
+=============+===================================================================+==============+==========+
| admin-state | Enable or diable the generation of the test failure system event. | | enabled    | disabled |
|             |                                                                   | | disabled   |          |
+-------------+-------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# inform-test-results enabled

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# inform-test-results disabled


**Removing Configuration**

To revert to the inform-test-results configuration to its default value:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no inform-test-results

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/ip-ttl.rst

services performance-monitoring profiles icmp-echo ip-ttl
---------------------------------------------------------

**Minimum user role:** operator

To set the IP TTL value for transmitted packets:

**Command syntax: ip-ttl [ip-ttl]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo

**Parameter table**

+-----------+----------------------------------------------+-------+---------+
| Parameter | Description                                  | Range | Default |
+===========+==============================================+=======+=========+
| ip-ttl    | Set the IP TTL value for transmitted packets | 1-255 | 255     |
+-----------+----------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# ip-ttl 60


**Removing Configuration**

To return the IP TTL value to default:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no ip-ttl

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/padding-mode.rst

services performance-monitoring profiles icmp-echo padding-mode
---------------------------------------------------------------

**Minimum user role:** operator

To set the packet padding mode for the specified profile:

**Command syntax: padding-mode [mode]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo

**Parameter table**

+-----------+-------------------------+------------+---------+
| Parameter | Description             | Range      | Default |
+===========+=========================+============+=========+
| mode      | The packet padding mode | | zero     | zero    |
|           |                         | | random   |         |
+-----------+-------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# padding-mode zero

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# padding-mode random


**Removing Configuration**

To revert the padding-mode to its default value:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no padding-mode

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/test-duration_non-stop.rst

services performance-monitoring profiles icmp-echo test-duration non-stop
-------------------------------------------------------------------------

**Minimum user role:** operator

To set a non-stop test:

**Command syntax: test-duration non-stop {probe-interval [probe-interval], computation-interval [computation-interval]}**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo

**Parameter table**

+----------------------+---------------------------------------------------------+--------+---------+
| Parameter            | Description                                             | Range  | Default |
+======================+=========================================================+========+=========+
| probe-interval       | The interval between subsequent probes in the test.     | 1-255  | 1       |
+----------------------+---------------------------------------------------------+--------+---------+
| computation-interval | Periodic computation interval. Valid for non-stop mode. | 1-3600 | 60      |
+----------------------+---------------------------------------------------------+--------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# test-duration non-stop probe-interval 60

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# test-duration non-stop probe-interval 2 computation-interval 300

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# test-duration non-stop computation-interval 53


**Removing Configuration**

To return the test duration configuration to default:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no test-duration non-stop

To return the probe interval configuration to default:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no test-duration non-stop probe-interval

To return the computation interval configuration to default:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no test-duration non-stop computation-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/test-duration_probe-count.rst

services performance-monitoring profiles icmp-echo test-duration probes
-----------------------------------------------------------------------

**Minimum user role:** operator

To set the duration of each test in probe-count:

**Command syntax: test-duration probes {probe-count [probe-count], probe-interval [probe-interval], repeat-interval [repeat-interval]}**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo

**Parameter table**

+-----------------+-----------------------------------------------------+--------------+---------+
| Parameter       | Description                                         | Range        | Default |
+=================+=====================================================+==============+=========+
| probe-count     | The number of probes in the test.                   | 1-4294967295 | 60      |
+-----------------+-----------------------------------------------------+--------------+---------+
| probe-interval  | The interval between subsequent probes in the test. | 1-255        | 1       |
+-----------------+-----------------------------------------------------+--------------+---------+
| repeat-interval | The interval between subsequent tests.              | 1-4294967295 | 60      |
+-----------------+-----------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# test-duration probes probe-count 60

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# test-duration probes probe-count 100 probe-interval 2 repeat-interval 300

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# test-duration probes probe-interval 53


**Removing Configuration**

To return the test duration configuration to default:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no test-duration probes

To return the probe count configuration to default:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no test-duration probes probe-count

To return the probe interval configuration to default:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no test-duration probes probe-interval

To return the repeat interval configuration to default:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no test-duration probes repeat-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/test-duration_time-frame.rst

services performance-monitoring profiles icmp-echo test-duration time-frame
---------------------------------------------------------------------------

**Minimum user role:** operator

To set the duration of each test in a time frame of minutes:

**Command syntax: test-duration time-frame {minutes [minutes], probe-interval [probe-interval], repeat-interval [repeat-interval]}**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo

**Parameter table**

+-----------------+-----------------------------------------------------+--------------+---------+
| Parameter       | Description                                         | Range        | Default |
+=================+=====================================================+==============+=========+
| minutes         | The duration of the test in minutes.                | 1-4294967295 | 1       |
+-----------------+-----------------------------------------------------+--------------+---------+
| probe-interval  | The interval between subsequent probes in the test. | 1-255        | 1       |
+-----------------+-----------------------------------------------------+--------------+---------+
| repeat-interval | The interval between subsequent tests.              | 1-4294967295 | 60      |
+-----------------+-----------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# test-duration time-frame minutes 60

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# test-duration time-frame minutes 100 probe-interval 2 repeat-interval 300

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# test-duration time-frame probe-interval 53


**Removing Configuration**

To return the test duration configuration to default:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no test-duration time-frame

To return the time frame configuration to default:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no test-duration time-frame minutes

To return the probe interval configuration to default:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no test-duration time-frame probe-interval

To return the repeat interval configuration to default:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no test-duration time-frame repeat-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/thresholds/delay-rtt-avg.rst

services performance-monitoring profiles icmp-echo thresholds delay-rtt-avg
---------------------------------------------------------------------------

**Minimum user role:** operator

To set the average round trip delay per test threshold:

**Command syntax: delay-rtt-avg [delay-rtt-avg]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo thresholds

**Parameter table**

+---------------+----------------------------------------------------+------------+---------+
| Parameter     | Description                                        | Range      | Default |
+===============+====================================================+============+=========+
| delay-rtt-avg | Average round trip time per test (in microseconds) | 1-60000000 | \-      |
+---------------+----------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-icmp-echo-MyCustom_profile-thresholds)# delay-rtt-avg 1000


**Removing Configuration**

To remove the average round trip delay threshold:
::

    dnRouter(cfg-profiles-icmp-echo-MyCustom_profile-thresholds)# no delay-rtt-avg

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/thresholds/delay-rtt-max.rst

services performance-monitoring profiles icmp-echo thresholds delay-rtt-max
---------------------------------------------------------------------------

**Minimum user role:** operator

To set the maximum round trip delay per test threshold:

**Command syntax: delay-rtt-max [delay-rtt-max]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo thresholds

**Parameter table**

+---------------+----------------------------------------------------+------------+---------+
| Parameter     | Description                                        | Range      | Default |
+===============+====================================================+============+=========+
| delay-rtt-max | Maximum round trip time per test (in microseconds) | 1-60000000 | \-      |
+---------------+----------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-icmp-echo-MyCustom_profile-thresholds)# delay-rtt-max 1000


**Removing Configuration**

To remove the maximum round trip delay threshold:
::

    dnRouter(cfg-profiles-icmp-echo-MyCustom_profile-thresholds)# no delay-rtt-max

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/thresholds/delay-rtt-min.rst

services performance-monitoring profiles icmp-echo thresholds delay-rtt-min
---------------------------------------------------------------------------

**Minimum user role:** operator

To set the minimum round trip delay per test threshold:

**Command syntax: delay-rtt-min [delay-rtt-min]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo thresholds

**Parameter table**

+---------------+----------------------------------------------------+------------+---------+
| Parameter     | Description                                        | Range      | Default |
+===============+====================================================+============+=========+
| delay-rtt-min | Minimum round trip time per test (in microseconds) | 1-60000000 | \-      |
+---------------+----------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-icmp-echo-MyCustom_profile-thresholds)# delay-rtt-min 1000


**Removing Configuration**

To remove the minimum round trip delay threshold:
::

    dnRouter(cfg-profiles-icmp-echo-MyCustom_profile-thresholds)# no delay-rtt-min

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/thresholds/jitter-rtt-max.rst

services performance-monitoring profiles icmp-echo thresholds jitter-rtt-max
----------------------------------------------------------------------------

**Minimum user role:** operator

To set the maximum round trip jitter per test threshold:

**Command syntax: jitter-rtt-max [jitter-rtt-max]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo thresholds

**Parameter table**

+----------------+-------------------------------------------+------------+---------+
| Parameter      | Description                               | Range      | Default |
+================+===========================================+============+=========+
| jitter-rtt-max | Maximum jitter per test (in microseconds) | 1-60000000 | \-      |
+----------------+-------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-icmp-echo-profile-thresholds)# jitter-rtt-max 1000


**Removing Configuration**

To remove the round trip jitter threshold:
::

    dnRouter(cfg-profiles-icmp-echo-MyCustom_profile-thresholds)# no jitter-rtt-max

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/thresholds/loss-successive.rst

services performance-monitoring profiles icmp-echo thresholds loss-successive
-----------------------------------------------------------------------------

**Minimum user role:** operator

To set the successive probe loss per test threshold:

**Command syntax: loss-successive [successive-loss]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo thresholds

**Parameter table**

+-----------------+-----------------------------------------------------+--------------+---------+
| Parameter       | Description                                         | Range        | Default |
+=================+=====================================================+==============+=========+
| successive-loss | Successive probe loss count indicating test failure | 1-4294967295 | \-      |
+-----------------+-----------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-icmp-echo-MyCustom_profile-thresholds)# loss-successive 5


**Removing Configuration**

To remove the successive loss threshold:
::

    dnRouter(cfg-profiles-icmp-echo-MyCustom_profile-thresholds)# no loss-successive

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/thresholds/loss-total.rst

services performance-monitoring profiles icmp-echo thresholds loss-total
------------------------------------------------------------------------

**Minimum user role:** operator

To set the total probe loss per test threshold:

**Command syntax: loss-total [total-loss]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo thresholds

**Parameter table**

+------------+------------------------------------------------+--------------+---------+
| Parameter  | Description                                    | Range        | Default |
+============+================================================+==============+=========+
| total-loss | Total probe loss count indicating test failure | 1-4294967295 | \-      |
+------------+------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-profile)# thresholds
    dnRouter(cfg-profiles-icmp-echo-MyCustom_profile-thresholds)# loss-total 10


**Removing Configuration**

To remove the total loss threshold:
::

    dnRouter(cfg-profiles-icmp-echo-MyCustom_profile-thresholds)# no loss-total

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/icmp-echo/thresholds/thresholds.rst

services performance-monitoring profiles icmp-echo thresholds
-------------------------------------------------------------

**Minimum user role:** operator

To configure IP performance monitoring thresholds:

**Command syntax: thresholds**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles icmp-echo

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# icmp-echo MyCustom_profile
    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# thresholds
    dnRouter(cfg-profiles-icmp-echo-MyCustom_profile-thresholds)#


**Removing Configuration**

To remove the IP performance monitoring thresholds:
::

    dnRouter(cfg-pm-profiles-icmp-echo-MyCustom_profile)# no thresholds

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/advertisement_accelerated/admin-state.rst

services performance-monitoring profiles link-delay advertisement accelerated admin-state
-----------------------------------------------------------------------------------------

**Minimum user role:** operator

To enable or disable the accelerated advertisement for the dynamic link delay profile:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles link-delay advertisement accelerated

**Parameter table**

+-------------+-------------------------------------------------+--------------+----------+
| Parameter   | Description                                     | Range        | Default  |
+=============+=================================================+==============+==========+
| admin-state | Enable or disable the accelerated advertisement | | enabled    | disabled |
|             |                                                 | | disabled   |          |
+-------------+-------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# dynamic-link-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-link-delay-MyCustom_profile)# advertisement periodic
    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-accelerated)# admin-state enabled

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# dynamic-link-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-link-delay-MyCustom_profile)# advertisement periodic
    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-accelerated)# admin-state disabled


**Removing Configuration**

To revert admin-state to default:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-accelerated)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/advertisement_accelerated/advertisement_accelerated.rst

services performance-monitoring profiles link-delay advertisement accelerated
-----------------------------------------------------------------------------

**Minimum user role:** operator

To enter the accelerated advertisement configuration level for dynamic link delay measurement profiles:

**Command syntax: advertisement accelerated**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles link-delay

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# dynamic-link-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-link-delay-MyCustom_profile)# advertisement accelerated
    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-accelerated)#


**Removing Configuration**

To revert accelerated advertisement configuration to default values:
::

    dnRouter(cfg-pm-profiles-link-delay-MyCustom_profile)# no advertisement accelerated

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/advertisement_accelerated/threshold_microseconds.rst

services performance-monitoring profiles link-delay advertisement accelerated delay-change-threshold microseconds
-----------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the minimum delay change in microseconds required for accelerated advertisements:

**Command syntax: delay-change-threshold microseconds [minimum-change-microseconds]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles link-delay advertisement accelerated

**Parameter table**

+-----------------------------+------------------------------------------------+----------+---------+
| Parameter                   | Description                                    | Range    | Default |
+=============================+================================================+==========+=========+
| minimum-change-microseconds | Set the delay change threshold in microseconds | 1-100000 | 1000    |
+-----------------------------+------------------------------------------------+----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# dynamic-link-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-link-delay-MyCustom_profile)# advertisement periodic
    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-accelerated)# delay-change-threshold microseconds 2000


**Removing Configuration**

To revert the minimum delay change threshold to its default value:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-accelerated)# no delay-change-threshold

To return the microseconds threshold configuration to default:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-accelerated)# no delay-change-threshold microseconds

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/advertisement_accelerated/threshold_percentages.rst

services performance-monitoring profiles link-delay advertisement accelerated delay-change-threshold percentages
----------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the minimum delay change in percentages required for accelerated advertisements:

**Command syntax: delay-change-threshold percentages [minimum-change-percentages]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles link-delay advertisement accelerated

**Parameter table**

+----------------------------+-----------------------------------------------+-------+---------+
| Parameter                  | Description                                   | Range | Default |
+============================+===============================================+=======+=========+
| minimum-change-percentages | Set the delay change threshold in percentages | 5-100 | 20      |
+----------------------------+-----------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# dynamic-link-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-link-delay-MyCustom_profile)# advertisement accelerated
    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-accelerated)# delay-change-threshold percentages 10


**Removing Configuration**

To revert the minimum delay change threshold to its default value:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-accelerated)# no delay-change-threshold

To return the percentages threshold configuration to default:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-accelerated)# no delay-change-threshold percentages

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/advertisement_periodic/advertisement_periodic.rst

services performance-monitoring profiles link-delay advertisement periodic
--------------------------------------------------------------------------

**Minimum user role:** operator

To enter the periodic advertisement configuration level for dynamic link delay measurement profiles:

**Command syntax: advertisement periodic**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles link-delay

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# dynamic-link-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-link-delay-MyCustom_profile)# advertisement periodic
    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-periodic)#


**Removing Configuration**

To revert periodic advertisement configuration to default values:
::

    dnRouter(cfg-pm-profiles-link-delay-MyCustom_profile)# no advertisement periodic

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/advertisement_periodic/interval.rst

services performance-monitoring profiles link-delay advertisement periodic interval
-----------------------------------------------------------------------------------

**Minimum user role:** operator

To set the periodic advertisement interval:

**Command syntax: interval [interval]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles link-delay advertisement periodic

**Parameter table**

+-----------+-------------------------------------------------+---------+---------+
| Parameter | Description                                     | Range   | Default |
+===========+=================================================+=========+=========+
| interval  | The interval between subsequent advertisements. | 30-3600 | 120     |
+-----------+-------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# dynamic-link-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-link-delay-MyCustom_profile)# advertisement periodic
    dnRouter(cfg-profiles-link-delay-MyCustom_profile-adver-periodic)# interval 60


**Removing Configuration**

To revert the advertisement interval to its default value:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile-adver-periodic)# no interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/advertisement_periodic/threshold_microseconds.rst

services performance-monitoring profiles link-delay advertisement periodic delay-change-threshold microseconds
--------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the minimum delay change in microseconds required for periodic advertisements:

**Command syntax: delay-change-threshold microseconds [minimum-change-microseconds]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles link-delay advertisement periodic

**Parameter table**

+-----------------------------+------------------------------------------------+----------+---------+
| Parameter                   | Description                                    | Range    | Default |
+=============================+================================================+==========+=========+
| minimum-change-microseconds | Set the delay change threshold in microseconds | 1-100000 | 1000    |
+-----------------------------+------------------------------------------------+----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# dynamic-link-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-link-delay-MyCustom_profile)# advertisement periodic
    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-periodic)# delay-change-threshold microseconds 2000


**Removing Configuration**

To revert the minimum delay change threshold to its default value:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-periodic)# no delay-change-threshold

To return the microseconds threshold configuration to default:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-periodic)# no delay-change-threshold microseconds

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/advertisement_periodic/threshold_percentages.rst

services performance-monitoring profiles link-delay advertisement periodic delay-change-threshold percentages
-------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

To set the minimum delay change in percentages required for periodic advertisements:

**Command syntax: delay-change-threshold percentages [minimum-change-percentages]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles link-delay advertisement periodic

**Parameter table**

+----------------------------+-----------------------------------------------+-------+---------+
| Parameter                  | Description                                   | Range | Default |
+============================+===============================================+=======+=========+
| minimum-change-percentages | Set the delay change threshold in percentages | 5-100 | 10      |
+----------------------------+-----------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# dynamic-link-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-link-delay-MyCustom_profile)# advertisement periodic
    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-periodic)# delay-change-threshold percentages 10


**Removing Configuration**

To revert the minimum delay change threshold to its default value:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile-adver-periodic)# no delay-change-threshold

To return the percentages threshold configuration to default:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile-advertisement-periodic)# no delay-change-threshold percentages

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/computation-interval.rst

services performance-monitoring profiles link-delay computation-interval
------------------------------------------------------------------------

**Minimum user role:** operator

To set the periodic IP performance metrics computation interval:

**Command syntax: computation-interval [computation-interval]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles link-delay

**Parameter table**

+----------------------+--------------------------------+--------+---------+
| Parameter            | Description                    | Range  | Default |
+======================+================================+========+=========+
| computation-interval | Periodic computation interval. | 1-3600 | 30      |
+----------------------+--------------------------------+--------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# link-delay MyCustom_profile
    dnRouter(cfg-profiles-link-delay-MyCustom_profile)# computation-interval 300


**Removing Configuration**

To revert the computation interval to its default value:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile)# no computation-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/dscp-value.rst

services performance-monitoring profiles link-delay dscp-value
--------------------------------------------------------------

**Minimum user role:** operator

To set the DSCP value for transmitted packets:

**Command syntax: dscp-value [class-of-service]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles link-delay

**Parameter table**

+------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter        | Description                                                                      | Range | Default |
+==================+==================================================================================+=======+=========+
| class-of-service | The DSCP value for reflected STAMP packets if dscp-handling-mode is set to       | 0-56  | 56      |
|                  | use-configured-value.                                                            |       |         |
+------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# link-delay-measurement
    dnRouter(cfg-pm-profiles-link-delay)# profile MyCustom_profile
    dnRouter(cfg-profiles-link-delay-profile)# dscp-value 0


**Removing Configuration**

To return the DSCP value to default:
::

    dnRouter(cfg-profiles-link-delay-profile)# no dscp-value

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/link-delay.rst

services performance-monitoring profiles link-delay
---------------------------------------------------

**Minimum user role:** operator

To configure a dynamic link delay measurement profile:

**Command syntax: link-delay [profile]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles

**Note**

- Up to 5 profiles may be configured.

**Parameter table**

+-----------+---------------------------------------------------------------------+------------------+---------+
| Parameter | Description                                                         | Range            | Default |
+===========+=====================================================================+==================+=========+
| profile   | The profile name. The profile is attached to a Simple TWAMP session | | string         | \-      |
|           |                                                                     | | length 1-255   |         |
+-----------+---------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# link-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-link-delay-MyCustom_profile)#


**Removing Configuration**

To delete a certain profile:
::

    dnRouter(cfg-pm-profiles)# no link-delay MyCustom_profile

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/padding-mode.rst

services performance-monitoring profiles link-delay padding-mode
----------------------------------------------------------------

**Minimum user role:** operator

To set the packet padding mode for the specified profile:

**Command syntax: padding-mode [mode]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles link-delay

**Parameter table**

+-----------+-------------------------+------------+---------+
| Parameter | Description             | Range      | Default |
+===========+=========================+============+=========+
| mode      | The packet padding mode | | zero     | zero    |
|           |                         | | random   |         |
+-----------+-------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# dynamic-link-delay MyCustom_profile
    dnRouter(cfg-profiles-link-delay-MyCustom_profile)# padding-mode zero

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# link-delay MyCustom_profile
    dnRouter(cfg-pm-profiles-link-delay-MyCustom_profile)# padding-mode random


**Removing Configuration**

To revert to the padding-mode to its default value:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile)# no padding-mode

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/padding-size.rst

services performance-monitoring profiles link-delay padding-size
----------------------------------------------------------------

**Minimum user role:** operator

To set the packet padding size value for transmitted packets:

**Command syntax: padding-size [packet-padding-size]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles link-delay

**Parameter table**

+---------------------+----------------------------------------------------------------------------------+---------+---------+
| Parameter           | Description                                                                      | Range   | Default |
+=====================+==================================================================================+=========+=========+
| packet-padding-size | Size of the Packet Padding. Suggested to run Path MTU Discovery to avoid packet  | 60-1400 | 60      |
|                     | fragmentation in IPv4 and packet backholing in IPv6                              |         |         |
+---------------------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# link-delay MyCustom_profile
    dnRouter(cfg-profiles-link-delay-MyCustom_profile)# padding-size 100


**Removing Configuration**

To revert the packet padding size to its default value:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile)# no padding-size

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/link-delay/probe-interval.rst

services performance-monitoring profiles link-delay probe-interval
------------------------------------------------------------------

**Minimum user role:** operator

To set the interval between subsequent transmitted packets:

**Command syntax: probe-interval [probe-interval]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring profiles link-delay

**Parameter table**

+----------------+-----------------------------------------+-------+---------+
| Parameter      | Description                             | Range | Default |
+================+=========================================+=======+=========+
| probe-interval | The interval between subsequent probes. | 1-255 | 3       |
+----------------+-----------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)# link-delay MyCustom_profile
    dnRouter(cfg-profiles-link-delay-MyCustom_profile)# probe-interval 2


**Removing Configuration**

To revert the probe interval to its default value:
::

    dnRouter(cfg-profiles-link-delay-MyCustom_profile)# no probe-interval

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/profiles/profiles.rst

services performance-monitoring profiles
----------------------------------------

**Minimum user role:** operator

To configure performance monitoring profiles:

**Command syntax: profiles**

**Command mode:** config

**Hierarchies**

- services performance-monitoring

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# profiles
    dnRouter(cfg-srv-pm-profiles)#


**Removing Configuration**

To remove the performance monitoring profiles:
::

    dnRouter(cfg-srv-pm)# no profiles

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/stamp-sessions/admin-state.rst

services performance-monitoring simple-twamp session admin-state
----------------------------------------------------------------

**Minimum user role:** operator

To enable or disable a Simple TWAMP monitoring session:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring simple-twamp session

**Parameter table**

+-------------+-----------------------------------------------------------+--------------+----------+
| Parameter   | Description                                               | Range        | Default  |
+=============+===========================================================+==============+==========+
| admin-state | The administrative state of the Simple TWAMP test-session | | enabled    | disabled |
|             |                                                           | | disabled   |          |
+-------------+-----------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# simple-twamp session Session-1
    dnRouter(cfg-srv-pm-stamp-session)# admin-state enabled

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# simple-twamp session Session-1
    dnRouter(cfg-srv-pm-stamp-session)# admin-state disabled


**Removing Configuration**

To revert admin-state to default:
::

    dnRouter(cfg-srv-pm-stamp-session)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/stamp-sessions/destination-address.rst

services performance-monitoring simple-twamp session destination-address
------------------------------------------------------------------------

**Minimum user role:** operator

To configure the destination IP address for the Simple TWAMP monitoring session:

**Command syntax: destination-address [ip-address]** vrf [vrf-name]

**Command mode:** config

**Hierarchies**

- services performance-monitoring simple-twamp session

**Parameter table**

+------------+----------------------+------------------+---------+
| Parameter  | Description          | Range            | Default |
+============+======================+==================+=========+
| ip-address | Reflector IP address | | A.B.C.D        | \-      |
|            |                      | | X:X::X:X       |         |
+------------+----------------------+------------------+---------+
| vrf-name   | Reflector VRF        | | string         | default |
|            |                      | | length 1-255   |         |
+------------+----------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# simple-twamp session Session-1
    dnRouter(cfg-srv-pm-stamp-session)# destination-address 1.1.1.1

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# simple-twamp session Session-1
    dnRouter(cfg-srv-pm-stamp-session)# destination-address 2.2.2.2 vrf MyVrf-1


**Removing Configuration**

To remove the configured destination IP address:
::

    dnRouter(cfg-srv-pm-stamp-session)# no destination-address

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/stamp-sessions/profile.rst

services performance-monitoring simple-twamp session profile
------------------------------------------------------------

**Minimum user role:** operator

To associate a configuration profile for the Simple TWAMP monitoring session:

**Command syntax: profile [profile-name]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring simple-twamp session

**Parameter table**

+--------------+----------------------------------------------------------------------+------------------+---------+
| Parameter    | Description                                                          | Range            | Default |
+==============+======================================================================+==================+=========+
| profile-name | The Simple TWAMP profile containing session parameters configuration | | string         | default |
|              |                                                                      | | length 1-255   |         |
+--------------+----------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# simple-twamp session Session-1
    dnRouter(cfg-srv-pm-stamp-session)# profile Daily-Monitoring


**Removing Configuration**

To revert to the default configuration profile for the Simple TWAMP monitoring session:
::

    dnRouter(cfg-srv-pm-stamp-session)# no profile

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/stamp-sessions/source-address.rst

services performance-monitoring simple-twamp session source-address
-------------------------------------------------------------------

**Minimum user role:** operator

To configure the source IP address for the Simple TWAMP monitoring session:

**Command syntax: source-address [ip-address]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring simple-twamp session

**Parameter table**

+------------+-------------------+--------------+---------+
| Parameter  | Description       | Range        | Default |
+============+===================+==============+=========+
| ip-address | Sender IP address | | A.B.C.D    | \-      |
|            |                   | | X:X::X:X   |         |
+------------+-------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# simple-twamp session Session-1
    dnRouter(cfg-srv-pm-stamp-session)# source-address 1.1.1.1


**Removing Configuration**

To remove the configured source IP address:
::

    dnRouter(cfg-srv-pm-stamp-session)# no source-address

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## performance-monitoring/stamp-sessions/stamp-sessions.rst

services performance-monitoring simple-twamp session
----------------------------------------------------

**Minimum user role:** operator

To configure a Simple TWAMP monitoring session:

**Command syntax: simple-twamp session [test-session]**

**Command mode:** config

**Hierarchies**

- services performance-monitoring

**Parameter table**

+--------------+-------------+------------------+---------+
| Parameter    | Description | Range            | Default |
+==============+=============+==================+=========+
| test-session | a session   | | string         | \-      |
|              |             | | length 1-255   |         |
+--------------+-------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# performance-monitoring
    dnRouter(cfg-srv-pm)# simple-twamp session Session-1
    dnRouter(cfg-srv-pm-stamp-session)#


**Removing Configuration**

To remove a Simple TWAMP monitoring session:
::

    dnRouter(cfg-srv-pm)# no simple-twamp session Session-1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## port-mirroring/port-mirroring.rst

services port-mirroring
-----------------------

**Minimum user role:** operator

Local Port Mirroring, which is also known as Switched Port Analyzer (SPAN), is a method of monitoring network traffic by sending copies of packets from a selected port on a device, or multiple ports, or entire VLAN to another designated local or remote port. The copied network traffic can then be analyzed for performance, troubleshooting, security or other purposes. The port mirroring doesn't affect the traffic flow on the source ports, and allows the mirrored traffic to be sent to a destination port.

To enter the port mirroring configuration hierarchy:

**Command syntax: port-mirroring**

**Command mode:** config

**Hierarchies**

- services

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)#


**Removing Configuration**

To revert the port mirroring configuration to the default values:
::

    dnRouter(cfg-srv)# no port-mirroring

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 15.1    | Command introduced |
+---------+--------------------+

---

## port-mirroring/session/admin-state.rst

services port-mirroring session admin-state
-------------------------------------------

**Minimum user role:** operator

To enable/disable a specific port-mirroring session:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services port-mirroring session

**Parameter table**

+-------------+---------------------------------------------+--------------+----------+
| Parameter   | Description                                 | Range        | Default  |
+=============+=============================================+==============+==========+
| admin-state | port mirroring session administrative state | | enabled    | disabled |
|             |                                             | | disabled   |          |
+-------------+---------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# admin-state enabled
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# admin-state disabled


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 15.1    | Command introduced |
+---------+--------------------+

---

## port-mirroring/session/description.rst

services port-mirroring session description
-------------------------------------------

**Minimum user role:** operator

To define a description for a specific port-mirroring session:

**Command syntax: description [description]**

**Command mode:** config

**Hierarchies**

- services port-mirroring session

**Parameter table**

+-------------+------------------------------------+------------------+---------+
| Parameter   | Description                        | Range            | Default |
+=============+====================================+==================+=========+
| description | Port mirroring session description | | string         | \-      |
|             |                                    | | length 1-255   |         |
+-------------+------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# description Test_session1


**Removing Configuration**

To remove the description of the session:
::

    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 15.1    | Command introduced |
+---------+--------------------+

---

## port-mirroring/session/destination-interface.rst

services port-mirroring session destination-interface
-----------------------------------------------------

**Minimum user role:** operator

You can configure the destination interfaces for a specific port-mirroring session.

To configure a destination interface for a port-mirroring session:

**Command syntax: destination-interface [destination-interface]**

**Command mode:** config

**Hierarchies**

- services port-mirroring session

**Note**
- The command is applicable to physical interfaces.

- A port-mirroring session can only have a single destination interface, which can only belong to one session.

**Parameter table**

+-----------------------+---------------------------------------------------------------------+------------------+---------+
| Parameter             | Description                                                         | Range            | Default |
+=======================+=====================================================================+==================+=========+
| destination-interface | a unique destination interface for the given port mirroring session | | string         | \-      |
|                       |                                                                     | | length 1-255   |         |
+-----------------------+---------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# destination-interface ge100-1/0/28


**Removing Configuration**

To remove the specified destination-interface from the list of monitored interfaces:
::

    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# no destination-interface

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 15.1    | Command introduced |
+---------+--------------------+

---

## port-mirroring/session/remote-over-gre/destination-address.rst

services port-mirroring session remote-over-gre destination-address
-------------------------------------------------------------------

**Minimum user role:** operator

To configure the destination IP address of the GRE tunnel for the remote monitoring session:

**Command syntax: destination-address [ip-address]** vrf [vrf-name]

**Command mode:** config

**Hierarchies**

- services port-mirroring session remote-over-gre

**Note**
- This is a mandatory parameter for remote mirroring sessions over GRE tunnel.

**Parameter table**

+------------+----------------------------------------------------------------------------------+------------------+---------+
| Parameter  | Description                                                                      | Range            | Default |
+============+==================================================================================+==================+=========+
| ip-address | The destination IP address of the GRE tunnel for the remote port mirroring       | | A.B.C.D        | \-      |
|            | session                                                                          | | X:X::X:X       |         |
+------------+----------------------------------------------------------------------------------+------------------+---------+
| vrf-name   | Destination VRF                                                                  | | string         | default |
|            |                                                                                  | | length 1-255   |         |
+------------+----------------------------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# remote-over-gre
    dnRouter(cfg-port-mirroring-IDS-Debug-GRE)# destination-address 1.1.1.10

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# remote-over-gre
    dnRouter(cfg-port-mirroring-IDS-Debug-GRE)# destination-address 1.1.1.10 vrf MyVrf-1

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# remote-over-gre
    dnRouter(cfg-port-mirroring-IDS-Debug-GRE)# destination-address 2006:18:91::14


**Removing Configuration**

To remove the configured destination IP address:
::

    dnRouter(cfg-port-mirroring-IDS-Debug-GRE)# no destination-address

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.2    | Command introduced |
+---------+--------------------+

---

## port-mirroring/session/remote-over-gre/dscp.rst

services port-mirroring session remote-over-gre dscp
----------------------------------------------------

**Minimum user role:** operator

To set the traffic class value to be set on all traffic mirrored to the destination:

**Command syntax: dscp [class-of-service]**

**Command mode:** config

**Hierarchies**

- services port-mirroring session remote-over-gre

**Parameter table**

+------------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter        | Description                                                                      | Range | Default |
+==================+==================================================================================+=======+=========+
| class-of-service | The DSCP traffic class value to be set on all traffic mirrored to the            | 0-63  | 0       |
|                  | destination                                                                      |       |         |
+------------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# remote-over-gre
    dnRouter(cfg-port-mirroring-IDS-Debug-GRE)# dscp 0


**Removing Configuration**

To return the DSCP value to default:
::

    dnRouter(cfg-port-mirroring-IDS-Debug-GRE)# no dscp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.2    | Command introduced |
+---------+--------------------+

---

## port-mirroring/session/remote-over-gre/ip-ttl.rst

services port-mirroring session remote-over-gre ip-ttl
------------------------------------------------------

**Minimum user role:** operator

To set the IP TTL value to be set on all traffic mirrored to the destination:

**Command syntax: ip-ttl [ip-ttl]**

**Command mode:** config

**Hierarchies**

- services port-mirroring session remote-over-gre

**Parameter table**

+-----------+-----------------------------------------------------------------+-------+---------+
| Parameter | Description                                                     | Range | Default |
+===========+=================================================================+=======+=========+
| ip-ttl    | The IP TTL to be set on all traffic mirrored to the destination | 1-255 | 255     |
+-----------+-----------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# remote-over-gre
    dnRouter(cfg-port-mirroring-IDS-Debug-GRE)# ip-ttl 60


**Removing Configuration**

To return the IP TTL value to default:
::

    dnRouter(cfg-port-mirroring-IDS-Debug-GRE)# no ip-ttl

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.2    | Command introduced |
+---------+--------------------+

---

## port-mirroring/session/remote-over-gre/remote-over-gre.rst

services port-mirroring session remote-over-gre
-----------------------------------------------

**Minimum user role:** operator

To configure a remote mirroring session over a GRE tunnel:

**Command syntax: remote-over-gre**

**Command mode:** config

**Hierarchies**

- services port-mirroring session

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# remote-over-gre
    dnRouter(cfg-port-mirroring-IDS-Debug-GRE)#


**Removing Configuration**

To remove the GRE tunnel configuration:
::

    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# no remote-over-gre

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.2    | Command introduced |
+---------+--------------------+

---

## port-mirroring/session/remote-over-gre/source-address.rst

services port-mirroring session remote-over-gre source-address
--------------------------------------------------------------

**Minimum user role:** operator

To configure the source IP address of the GRE tunnel for the remote monitoring session:

**Command syntax: source-address [ip-address]**

**Command mode:** config

**Hierarchies**

- services port-mirroring session remote-over-gre

**Note**
- This is a mandatory parameter for remote mirroring sessions over GRE tunnel.

**Parameter table**

+------------+-------------------------------------------------------------------------------+--------------+---------+
| Parameter  | Description                                                                   | Range        | Default |
+============+===============================================================================+==============+=========+
| ip-address | The source IP address of the GRE tunnel for the remote port mirroring session | | A.B.C.D    | \-      |
|            |                                                                               | | X:X::X:X   |         |
+------------+-------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# remote-over-gre
    dnRouter(cfg-port-mirroring-IDS-Debug-GRE)# source-address 1.1.1.1

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# remote-over-gre
    dnRouter(cfg-port-mirroring-IDS-Debug-GRE)# source-address 2006:18:91::12


**Removing Configuration**

To remove the configured source IP address:
::

    dnRouter(cfg-port-mirroring-IDS-Debug-GRE)# no source-address

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.2    | Command introduced |
+---------+--------------------+

---

## port-mirroring/session/sampling-probability.rst

services port-mirroring session sampling-probability
----------------------------------------------------

**Minimum user role:** operator

To specify the statistical sampling probability for a specific mirroring session:

**Command syntax: sampling-probability [sampling-probability]**

**Command mode:** config

**Hierarchies**

- services port-mirroring session

**Parameter table**

+----------------------+----------------------------------------------------------------------------------+---------+---------+
| Parameter            | Description                                                                      | Range   | Default |
+======================+==================================================================================+=========+=========+
| sampling-probability | The smapling probability for mirrored traffic from the soruce interfaces for the | 1-65535 | 1       |
|                      | given session. Configured as '1 packet to mirror out of N packets', with N being |         |         |
|                      | the configured number.                                                           |         |         |
+----------------------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# sampling-probability 10


**Removing Configuration**

To revert the sampling-probability value to default:
::

    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# no sampling-probability

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 25.2    | Command introduced |
+---------+--------------------+

---

## port-mirroring/session/session.rst

services port-mirroring session
-------------------------------

**Minimum user role:** operator

A port-mirroring session can be used to replicate traffic from given interfaces for the purpose of debugging, security or performance monitoring.

To configure a new port-mirroring session:

**Command syntax: session [port-mirroring-session]**

**Command mode:** config

**Hierarchies**

- services port-mirroring

**Parameter table**

+------------------------+-----------------------------+------------------+---------+
| Parameter              | Description                 | Range            | Default |
+========================+=============================+==================+=========+
| port-mirroring-session | Port mirroring session name | | string         | \-      |
|                        |                             | | length 1-255   |         |
+------------------------+-----------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)#


**Removing Configuration**

To remove a specific session:
::

    dnRouter(cfg-srv-port-mirroring)# no session IDS-Debug

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 15.1    | Command introduced |
+---------+--------------------+

---

## port-mirroring/session/source-interface/direction.rst

services port-mirroring session source-interface direction
----------------------------------------------------------

**Minimum user role:** operator

To configure source-interface direction:

**Command syntax: direction [direction]**

**Command mode:** config

**Hierarchies**

- services port-mirroring session source-interface

**Parameter table**

+-----------+----------------------------------------------------------------------------------+-------------+---------+
| Parameter | Description                                                                      | Range       | Default |
+===========+==================================================================================+=============+=========+
| direction | replicated traffic direction of the source interface for the given port          | | ingress   | both    |
|           | mirroring session                                                                | | egress    |         |
|           |                                                                                  | | both      |         |
+-----------+----------------------------------------------------------------------------------+-------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# source-interface ge100-1/0/1
    dnRouter(cfg-port-mirroring-IDS-Debug-ge100-1/0/1)# direction ingress


**Removing Configuration**

To remove the specified source-interface from the list of monitored interfaces:
::

    dnRouter(cfg-port-mirroring-IDS-Debug-ge100-1/0/1)# no direction

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 15.1    | Command introduced |
+---------+--------------------+

---

## port-mirroring/session/source-interface/source-interface.rst

services port-mirroring session source-interface
------------------------------------------------

**Minimum user role:** operator

You can configure the source interfaces for a specific port-mirroring session. There are some limitations to the configuration.

-	When a session is not designated as a mirror-on-drop session.

-	Up to 10 source interfaces can be monitored in a given session.

To configure a source interface for a port-mirroring session:

**Command syntax: source-interface [source-interface]**

**Command mode:** config

**Hierarchies**

- services port-mirroring session

**Note**
- The source interfaces that are supported for a port-mirroring session are:

	- Physical

	- Physical vlan

	- Bundle

	- Bundle vlan


- When a physical or bundle interface is selected for the session, then all of the sub-interfaces or bundle members of that interface will be automatically selected for that session as well. 

- Physical or bundle interfaces cannot be specified as source interfaces more than once per session (ingress, egress, or both), nor can their sub-interfaces or bundle members be specified at the same time in a given session. Each may be configured up to twice by two different sessions (ingress by one and egress by another), as long as the physical and bundle interfaces are not configured at the same time.

**Parameter table**

+------------------+---------------------------------------------------------+------------------+---------+
| Parameter        | Description                                             | Range            | Default |
+==================+=========================================================+==================+=========+
| source-interface | source interfaces for a specific port mirroring session | | string         | \-      |
|                  |                                                         | | length 1-255   |         |
+------------------+---------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# port-mirroring
    dnRouter(cfg-srv-port-mirroring)# session IDS-Debug
    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# source-interface ge100-1/0/1 direction ingress


**Removing Configuration**

To remove the specified source-interface from the list of monitored interfaces:
::

    dnRouter(cfg-srv-port-mirroring-IDS-Debug)# no source-interface

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 15.1    | Command introduced |
+---------+--------------------+

---

## service-activation-testing/service-activation-testing.rst

services service-activation-testing
-----------------------------------

**Minimum user role:** operator

To enter the service-activation-testing configuration hierarchy:

**Command syntax: service-activation-testing**

**Command mode:** config

**Hierarchies**

- services

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# service-activation-testing
    dnRouter(cfg-srv-sat)#


**Removing Configuration**

To revert all service-activation-testing configuration to default:
::

    dnRouter(cfg-srv)# no service-activation-testing

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## service-activation-testing/test-name/admin-state.rst

services service-activation-testing test-name admin-state
---------------------------------------------------------

**Minimum user role:** operator

To enable or disable service-activation-testing testing:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services service-activation-testing test-name

**Parameter table**

+-------------+----------------------------------------------------------+--------------+----------+
| Parameter   | Description                                              | Range        | Default  |
+=============+==========================================================+==============+==========+
| admin-state | The default state of service-activation-testing service. | | enabled    | disabled |
|             |                                                          | | disabled   |          |
+-------------+----------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# service
    dnRouter(cfg-srv)# service-activation-testing
    dnRouter(cfg-srv-sat)# test-name test1
    dnRouter(cfg-srv-sat-test1)# admin-state enabled
    dnRouter(cfg-srv-sat-test1)#


**Removing Configuration**

To revert admin-state to default:
::

    dnRouter(cfg-srv-sat-test1)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## service-activation-testing/test-name/test-mode/evpn-vpws-fxc-reflector.rst

services service-activation-testing test-name test-mode evpn-vpws-fxc-reflector evpn-vpws-fxc normalized-stag
-------------------------------------------------------------------------------------------------------------

**Minimum user role:** operator

Configure the service and customer paremeters for reflection per specific test-name.\n\n
Customers are identified by the combination :  {normalized S Vlan ID , C vlan id ,evpn-vpws-fxc instance} \n\n
Supported tests are as defined by RFC2544 and Y.1564 as reflector.\n\n
It is operator responsability to verify \n\n
1. ONLY test traffic is in presence during test \n\n
2. Test traffic rate should be lower of equell the slowest path (up-link \ down link) \n\n
To configure the test mode:

**Command syntax: evpn-vpws-fxc-reflector evpn-vpws-fxc [evpn-vpws-fxc] normalized-stag [normalized-stag]** normalized-ctag [normalized-ctag]

**Command mode:** config

**Hierarchies**

- services service-activation-testing test-name test-mode

**Parameter table**

+-----------------+------------------------------------------------------------+------------------+---------+
| Parameter       | Description                                                | Range            | Default |
+=================+============================================================+==================+=========+
| evpn-vpws-fxc   | Service instance name for the Service Reflector test mode. | | string         | \-      |
|                 |                                                            | | length 1-255   |         |
+-----------------+------------------------------------------------------------+------------------+---------+
| normalized-stag | Identification number for the Service Tag.                 | 1-4094           | \-      |
+-----------------+------------------------------------------------------------+------------------+---------+
| normalized-ctag | Identification number for the customer tag.                | 1-4094           | \-      |
+-----------------+------------------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# service-activation-testing
    dnRouter(cfg-srv-sat)# test-name test1
    dnRouter(cfg-srv-sat-test1)# test-mode
    dnRouter(cfg-srv-sat-test1-test-mode)# evpn-vpws-fxc-reflector evpn-vpws-fxc 10 normalized-stag 2 normalized-ctag 100
    dnRouter(cfg-srv-sat-test1-test-mode)#


**Removing Configuration**

To remove the test mode configuration:
::

    dnRouter(cfg-srv-sat-test1)# no test-mode

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## service-activation-testing/test-name/test-mode/interface-reflector.rst

services service-activation-testing test-name test-mode interface-reflector
---------------------------------------------------------------------------

**Minimum user role:** operator

Configure the type of test and interface to be reflected by service-activation-testing.
The device will reflect all packets that will arrive to this interface as required by standard RFC2544 and Y.1564 
It is assumed that only test traffic will arrive to/from this interface during the test procedure.

To configure the test mode:

**Command syntax: interface-reflector [interface]**

**Command mode:** config

**Hierarchies**

- services service-activation-testing test-name test-mode

**Parameter table**

+-----------+----------------------------------------------------+------------------+---------+
| Parameter | Description                                        | Range            | Default |
+===========+====================================================+==================+=========+
| interface | Select interface reflector test-mode for the test. | | string         | \-      |
|           |                                                    | | length 1-255   |         |
+-----------+----------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# service-activation-testing
    dnRouter(cfg-srv-sat)# test-name test1
    dnRouter(cfg-srv-sat-test1)# test-mode interface-reflector ge400-6/0/1
    dnRouter(cfg-srv-sat-test1)#


**Removing Configuration**

To remove the test mode configuration:
::

    dnRouter(cfg-srv-sat-test1)# no test-mode

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## service-activation-testing/test-name/test-mode/test-mode.rst

services service-activation-testing test-name test-mode
-------------------------------------------------------

**Minimum user role:** operator

Configure the type of test mode to be conducted for service-activation-testing.

To configure the test mode:

**Command syntax: test-mode**

**Command mode:** config

**Hierarchies**

- services service-activation-testing test-name

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# service-activation-testing
    dnRouter(cfg-srv-sat)# test-name test1
    dnRouter(cfg-srv-sat-test1)# test-mode
    dnRouter(cfg-srv-sat-test1-test-mode)#


**Removing Configuration**

To remove the test mode configuration:
::

    dnRouter(cfg-srv-sat-test1)# no test-mode

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## service-activation-testing/test-name/test-name.rst

services service-activation-testing test-name
---------------------------------------------

**Minimum user role:** operator

Set a name for service-activation-testing.
To configure service-activation-testing:

**Command syntax: test-name [tests]**

**Command mode:** config

**Hierarchies**

- services service-activation-testing

**Parameter table**

+-----------+---------------+-------+---------+
| Parameter | Description   | Range | Default |
+===========+===============+=======+=========+
| tests     | Set test name | \-    | \-      |
+-----------+---------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# service-activation-testing
    dnRouter(cfg-srv-sat)# test-name test1
    dnRouter(cfg-srv-sat-test1)#


**Removing Configuration**

To remove a specific test:
::

    dnRouter(cfg-srv-sat)#no test test1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.2    | Command introduced |
+---------+--------------------+

---

## services overview.rst

Services Overview
-----------------
To enter services configuration mode:

::

	dnRouter(cfg)# services
	dnRouter(cfg-srv)#

**Command mode:** services configuration

**Note**

- Notice the change in prompt from dnRouter(cfg)# to dnRouter(cfg-srv)# (services configuration mode).

You can configure the following services:

Two Way Active Measurement Protocol (TWAMP)

services mpls-oam

Flow Monitoring

Local Port Mirroring

services l2-cross-connect
---

## services.rst

services
--------

**Minimum user role:** operator

Enter the services configuration hierarchy.

**Command syntax: services**

**Command mode:** config

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)#


**Removing Configuration**

To remove services:
::

    dnRouter(cfg)# no services

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.0    | Command introduced |
+---------+--------------------+

---

## simple-twamp/session-reflector/admin-state.rst

services simple-twamp session-reflector admin-state
---------------------------------------------------

**Minimum user role:** operator

To enable or disable the Simple TWAMP Session-Reflector:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services simple-twamp session-reflector

**Parameter table**

+-------------+----------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                    | Range        | Default  |
+=============+================================================================+==============+==========+
| admin-state | The administrative state of the Simple TWAMP Session-Reflector | | enabled    | disabled |
|             |                                                                | | disabled   |          |
+-------------+----------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# system
    dnRouter(cfg-srv)# simple-twamp
    dnRouter(cfg-srv-stamp)# session-reflector
    dnRouter(cfg-srv-stamp-reflector)# admin-state enabled


**Removing Configuration**

To revert admin-state to default:
::

    dnRouter(cfg-srv-stamp-reflector)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## simple-twamp/session-reflector/reflector-port.rst

services simple-twamp session-reflector reflector-port
------------------------------------------------------

**Minimum user role:** operator

To configure the local port for the Simple TWAMP Session-Reflector:

**Command syntax: reflector-port [reflector-port]**

**Command mode:** config

**Hierarchies**

- services simple-twamp session-reflector

**Parameter table**

+----------------+--------------------------------------------------------------+---------+---------+
| Parameter      | Description                                                  | Range   | Default |
+================+==============================================================+=========+=========+
| reflector-port | The source port number of the local STAMP Session-Reflector. | 1-65535 | 862     |
+----------------+--------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# system
    dnRouter(cfg-srv)# simple-twamp
    dnRouter(cfg-srv-stamp)# session-reflector
    dnRouter(cfg-srv-stamp-reflector)# reflector-port 863


**Removing Configuration**

To revert reflector-port to default:
::

    dnRouter(cfg-srv-stamp-reflector)# no reflector-port

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## simple-twamp/session-reflector/session-reflector.rst

services simple-twamp session-reflector
---------------------------------------

**Minimum user role:** operator

To enter the Simple TWAMP Session-Reflector configuration hierarchy:

**Command syntax: session-reflector**

**Command mode:** config

**Hierarchies**

- services simple-twamp

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# simple-twamp
    dnRouter(cfg-srv-stamp)# session-reflector
    dnRouter(cfg-srv-stamp-reflector)#


**Removing Configuration**

To revert all Simple TWAMP Session-Reflector configuration to default:
::

    dnRouter(cfg-srv-stamp)# no session-reflector

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## simple-twamp/session-sender/admin-state.rst

services simple-twamp session-sender admin-state
------------------------------------------------

**Minimum user role:** operator

To enable or disable the Simple TWAMP Session-Sender:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services simple-twamp session-sender

**Parameter table**

+-------------+-------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                 | Range        | Default  |
+=============+=============================================================+==============+==========+
| admin-state | The administrative state of the Simple TWAMP Session-Sender | | enabled    | disabled |
|             |                                                             | | disabled   |          |
+-------------+-------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# system
    dnRouter(cfg-srv)# simple-twamp
    dnRouter(cfg-srv-stamp)# session-sender
    dnRouter(cfg-srv-stamp-sender)# admin-state enabled


**Removing Configuration**

To revert admin-state to default:
::

    dnRouter(cfg-srv-stamp-sender)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## simple-twamp/session-sender/reflector-port.rst

services simple-twamp session-sender reflector-port
---------------------------------------------------

**Minimum user role:** operator

To configure the remote port of the target Simple TWAMP Session-Reflector:

**Command syntax: reflector-port [reflector-port]**

**Command mode:** config

**Hierarchies**

- services simple-twamp session-sender

**Parameter table**

+----------------+-----------------------------------------------------------------------------+---------+---------+
| Parameter      | Description                                                                 | Range   | Default |
+================+=============================================================================+=========+=========+
| reflector-port | The destination UDP port number towards the remote STAMP Session-Reflector. | 1-65535 | 862     |
+----------------+-----------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# system
    dnRouter(cfg-srv)# simple-twamp
    dnRouter(cfg-srv-stamp)# session-sender
    dnRouter(cfg-srv-stamp-sender)# reflector-port 863


**Removing Configuration**

To revert reflector-port to default:
::

    dnRouter(cfg-srv-stamp-sender)# no reflector-port

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## simple-twamp/session-sender/session-sender.rst

services simple-twamp session-sender
------------------------------------

**Minimum user role:** operator

To enter the Simple TWAMP Session-Sender configuration hierarchy:

**Command syntax: session-sender**

**Command mode:** config

**Hierarchies**

- services simple-twamp

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# simple-twamp
    dnRouter(cfg-srv-stamp)# session-sender
    dnRouter(cfg-srv-stamp-sender)#


**Removing Configuration**

To revert all Simple TWAMP Session-Sender configuration to default:
::

    dnRouter(cfg-srv-stamp)# no session-sender

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## simple-twamp/simple-twamp.rst

services simple-twamp
---------------------

**Minimum user role:** operator

The Simple Two Way Active Measurement Protocol (STAMP) is an open protocol. An open protocol allows different vendor equipment to work together without any additional proprietary equipment. STAMP is used as a lightweight implementation of the TWAMP protocol to measure network performance between two devices that support the TWAMP-Test protocol by sending probe/data test packets between a session sender and a session reflector, without the need for TWAMP-Control protocol which makes it more scalable.

Unlike standard track TWAMP, Simple TWAMP - Test protocol - sends packets between two devices. This runs between session sender and session reflector

The Simple TWAMP protocol sessions require two end-points with the following roles:

	-	Session-sender - creates TWAMP test packets which are sent to the session-reflector and collects and analyzes packets received.

	-	Session-reflector - returns a test packet when a packet is received from a session-sender. No information is stored but sent back to the session-sender.

DriveNets Simple TWAMP implementation supports both roles of Session-Sender and Session-Reflector:

- As a Session-Reflector DriveNets devices only responds to sessions. This means no result or history information such as statistics are retained other than the counter which displays the reflected packets. The counters can be seen by running the command show services performance-monitoring sessions.

- As a Session-Sender DriveNets aggregates all of the received measurement packets from all configured devices and analyzes the results for quality of data sessions, delay, jitter, or packet loss.

Simple TWAMP features include:

-	DSCP Marking - supports Class-of-Service (CoS) in two modes, either the DSCP value of reflected packets is remarked per configuration or it can be reflected with the same DSCP value received by the Session-Sender.

-	Timestamps - Two timestamps are included in the reply message. The first is the time the packet is received on the ingress interface on the NCP and the second time-stamp refers to the time the packet leaves the NCP on the egress interface. In a standalone scheme the reply is transmitted from the same NCP, but in a cluster , the reply could be transmitted from another NCP within the cluster. The timestamps use the internal NTP clock within the system.

-	Scale - support up to 2K simultaneous test sessions, which can be from the same Session-Sender or different Session-Senders.


To enter the Simple TWAMP configuration hierarchy:

**Command syntax: simple-twamp**

**Command mode:** config

**Hierarchies**

- services

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# simple-twamp
    dnRouter(cfg-srv-stamp)#


**Removing Configuration**

To revert all Simple TWAMP configuration to default:
::

    dnRouter(cfg-srv)# no simple-twamp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.2    | Command introduced |
+---------+--------------------+

---

## twamp/admin-state.rst

services twamp admin-state
--------------------------

**Minimum user role:** operator

To enable or disable the TWAMP service:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- services twamp

**Parameter table**

+-------------+-----------------------------------------+--------------+----------+
| Parameter   | Description                             | Range        | Default  |
+=============+=========================================+==============+==========+
| admin-state | The desired state of the TWAMP service. | | enabled    | disabled |
|             |                                         | | disabled   |          |
+-------------+-----------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# system
    dnRouter(cfg-srv)# twamp
    dnRouter(cfg-srv-twamp)# admin-state enabled
    dnRouter(cfg-srv-twamp)# admin-state disabled


**Removing Configuration**

To revert admin-state to default:
::

    dnRouter(cfg-srv-twamp)# no admin-state

**Command History**

+---------+-------------------------------------------------------------------------------------------------+
| Release | Modification                                                                                    |
+=========+=================================================================================================+
| 5.1.0   | Command introduced                                                                              |
+---------+-------------------------------------------------------------------------------------------------+
| 6.0     | Updated command services TWAMP mode changed to services TWAMP admin-state Applied new hierarchy |
+---------+-------------------------------------------------------------------------------------------------+
| 9.0     | TWAMP not supported                                                                             |
+---------+-------------------------------------------------------------------------------------------------+
| 11.2    | Command re-introduced                                                                           |
+---------+-------------------------------------------------------------------------------------------------+

---

## twamp/data-destination-port.rst

services twamp data-destination-port
------------------------------------

**Minimum user role:** operator

The destination port is the incoming UDP port that the data connection uses to send data packets to the TWAMP server.

By default, the UDP data destination port range is between 10000-20000. You can configure a smaller port range within this range.

To configure the destination port range:

**Command syntax: data-destination-port [data-dst-ports]**

**Command mode:** config

**Hierarchies**

- services twamp

**Parameter table**

+----------------+----------------------------------------------------------------------------------+-------------+---------+
| Parameter      | Description                                                                      | Range       | Default |
+================+==================================================================================+=============+=========+
| data-dst-ports | Minimal value of the UDP destination port range. Maximal value of the UDP        | 10000-20000 | 10000   |
|                | destination port range.                                                          |             |         |
+----------------+----------------------------------------------------------------------------------+-------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# twamp
    dnRouter(cfg-srv-twamp)# data-destination-port 10000-11000
    dnRouter(cfg-srv-twamp)#


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-twamp)# no data-destination-port

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## twamp/data-source-port.rst

services twamp data-source-port
-------------------------------

**Minimum user role:** operator

The source port is the incoming UDP port that the data connection uses to send data packets to the TWAMP server.

By default, the UDP data source port range is between 10000-20000. You can configure a smaller port range within this range.

To configure the source port range:

**Command syntax: data-source-port [data-src-ports]**

**Command mode:** config

**Hierarchies**

- services twamp

**Parameter table**

+----------------+----------------------------------------------------------------------------------+-------------+---------+
| Parameter      | Description                                                                      | Range       | Default |
+================+==================================================================================+=============+=========+
| data-src-ports | Minimal value of the UDP source port range. Maximal value of the UDP source port | 10000-20000 | 10000   |
|                | range.                                                                           |             |         |
+----------------+----------------------------------------------------------------------------------+-------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# twamp
    dnRouter(cfg-srv-twamp)# data-source-port 10000-11000
    dnRouter(cfg-srv-twamp)#


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-twamp)# no data-source-port

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## twamp/timers/server-timeout.rst

services twamp timers server-timeout
------------------------------------

**Minimum user role:** operator

The server timeout parameter enable the system to clear resources, by not allowing inactive control connections or data sessions to remain available indefinitely.

-	Server-timeout - The time-frame to complete the control session negotiation.

To configure the TWAMP timers:

**Command syntax: server-timeout [server-timeout]**

**Command mode:** config

**Hierarchies**

- services twamp timers

**Parameter table**

+----------------+----------------------------------------------------------------------------------+---------+---------+
| Parameter      | Description                                                                      | Range   | Default |
+================+==================================================================================+=========+=========+
| server-timeout | The maximum time the Two-Way Active Measurement Protocol (TWAMP) server has to   | 60-1800 | 900     |
|                | finish the TWAMP control protocol negotiation.                                   |         |         |
+----------------+----------------------------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# twamp
    dnRouter(cfg-srv-twamp)# server-timeout 900


**Removing Configuration**

To revert server-timeout to default:
::

    dnRouter(cfg-srv-twamp)# no server-timeout

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## twamp/timers/session-timeout.rst

services twamp timers session-timeout
-------------------------------------

**Minimum user role:** operator

The session timeout parameter enable the system to clear resources, by not allowing inactive control connections or data sessions to remain available indefinitely.

-	Session-timeout - The time-frame the data session can remain inactive.

To configure the TWAMP timers:

**Command syntax: session-timeout [session-timeout]**

**Command mode:** config

**Hierarchies**

- services twamp timers

**Note**

- session-timeout and session-timeout can be set individually, together and in any order.

**Parameter table**

+-----------------+-------------------------------------------------------------+---------+---------+
| Parameter       | Description                                                 | Range   | Default |
+=================+=============================================================+=========+=========+
| session-timeout | Length of time the session is inactive before it times out. | 60-1800 | 900     |
+-----------------+-------------------------------------------------------------+---------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# twamp
    dnRouter(cfg-srv-twamp)# session-timeout 900


**Removing Configuration**

To revert session-timeout to default:
::

    dnRouter(cfg-srv-twamp)# no session-timeout

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## twamp/timers/timers.rst

services twamp timers
---------------------

**Minimum user role:** operator

The server or session timeout parameters enable the system to clear resources, by not allowing inactive control connections or data sessions to remain available indefinitely.

**Command syntax: timers**

**Command mode:** config

**Hierarchies**

- services twamp

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# twamp
    dnRouter(cfg-srv-twamp)# timers


**Removing Configuration**

To revert all TWAMP timers to default:
::

    dnRouter(cfg-srv-twamp)# no timers

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## twamp/twamp.rst

services twamp
--------------

**Minimum user role:** operator

Two Way Active Measurement Protocol (TWAMP) is an open protocol. An open protocol allows different vendor equipment to work together without any additional proprietary equipment. TWAMP is used to measure network performance between two devices that support the TWAMP protocol by sending probe/data test packets between the devices. TWAMP uses a client-server architecture. There are two protocols used within TWAMP:

-	TWAMP-Control protocol - starts and ends test sessions. This runs between client and server

-	TWAMP - Test protocol - sends packets between two devices. This runs between session sender and session reflector

The TWAMP protocol sessions require two end-points with the following roles:

-	TWAMP client (typically used also as a session-sender)

	-	Control-client initiates, starts, and stops the TWAMP test sessions towards the TWAMP server.

	-	Session-sender creates TWAMP test packets which are sent to the session-reflector (TWAMP server) and collects and analyzes packets received.

-	TWAMP server, each NCE (typically used also as a session-reflector)

	-	Session-reflector returns a test packet when a packet is received from a session-sender. No information is stored but sent back to the client.

	-	Server manages one or more sessions with the TWAMP control-client and listens for control messages on a known TCP port.

DriveNets TWAMP implementation supports TWAMP clients, with the DriveNets NCE as the TWAMP server and Session-Reflector. As DriveNets TWAMP is in server mode, it only responds to sessions. This means no result or history information such as statistics are retained other than the counters which display the RX and TX packets. The counters can be seen by running the command show services twamp sessions in configuration mode. The TWAMP client aggregates all of the received measurement packets from all configured devices and analyzes the results for quality of control traffic, data sessions, jitter, or packet loss. TWAMP features include:

-	Test Packet Frequency - DriveNets TWAMP has a test packet frequency of 100 milliseconds continuously. The statistical distribution packets have an average inter-arrival delay of 3.3 milliseconds.

-	 DSCP Marking - supports, Class-of-Service (CoS), the DSCP value is the same as received by the client messages. This applies to both control packets and data packets.

-	Timestamps - Two timestamps are included in the reply message. The first is the time the packet is received on the ingress interface on the NCP and the second time-stamp refers to the time the packet leaves the NCP on the egress interface. In a standalone scheme the reply is transmitted from the same NCP, but in a cluster , the reply could be transmitted from another NCP within the cluster. The timestamps use the internal NTP clock within the system.

-	Scale- support up to ten simultaneous control sessions, which can be from the same client or different clients. Each control session can support up to ten simultaneous data sessions. This means that in total there can be up to 100 simultaneous data sessions.

To configure the the TWAMP responder (session-reflector) parameters, enter TWAMP configuration hierarchy:

**Command syntax: twamp**

**Command mode:** config

**Hierarchies**

- services

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# twamp
    dnRouter(cfg-srv-twamp)#


**Removing Configuration**

To revert all TWAMP configuration to default:
::

    dnRouter(cfg-srv)# no twamp

**Command History**

+---------+------------------------+
| Release | Modification           |
+=========+========================+
| 11.2    | Command introduced     |
+---------+------------------------+
| 17.0    | Added support for IPv6 |
+---------+------------------------+

---

## twamp/vrf/client-list-type.rst

services twamp vrf client-list type
-----------------------------------

**Minimum user role:** operator

This command defines whether the configured client-list (see "services twamp client-list") is a white list or a black list.

To configure the client list type:

**Command syntax: client-list type [list-type]**

**Command mode:** config

**Hierarchies**

- services twamp vrf

**Note**

- Client lists with type "allow" must contain at least one network-address.

**Parameter table**

+-----------+------------------------------------------------+-----------+---------+
| Parameter | Description                                    | Range     | Default |
+===========+================================================+===========+=========+
| list-type | Defines the type of the configured client list | | allow   | deny    |
|           |                                                | | deny    |         |
+-----------+------------------------------------------------+-----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# twamp vrf default
    dnRouter(cfg-srv-twamp-vrf)# client-list type allow


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-twamp-vrf)# no client-list type

**Command History**

+---------+---------------------------+
| Release | Modification              |
+=========+===========================+
| 6.0     | Command introduced        |
+---------+---------------------------+
| 16.2    | Moved under VRF hierarchy |
+---------+---------------------------+

---

## twamp/vrf/client-list.rst

services twamp vrf client-list
------------------------------

**Minimum user role:** operator

The client-list is used to deny or allow IP addresses. By default, no client-list is configured, so any client can initiate a TWAMP session. When a client-list is configured, the type of list is defined by the client list type parameter. You can add a maximum of 1000 clients.

To configure a black or white list of incoming IP-addresses for the TWAMP service:

**Command syntax: client-list [ip-address]** [, ip-address, ip-address]

**Command mode:** config

**Hierarchies**

- services twamp vrf

**Note**

- Both IPv4 and IPv6 prefixes are supported.

**Parameter table**

+------------+---------------------------------------------------------+----------------+---------+
| Parameter  | Description                                             | Range          | Default |
+============+=========================================================+================+=========+
| ip-address | Configure an incoming IP address for the TWAMP service. | | A.B.C.D/x    | \-      |
|            |                                                         | | X:X::X:X/x   |         |
+------------+---------------------------------------------------------+----------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# twamp vrf default
    dnRouter(cfg-srv-twamp-vrf)# client-list 200.10.10.6/32
    dnRouter(cfg-srv-twamp-vrf)# client-list 50.1.22.0/24, 2001:608::/32


**Removing Configuration**

To remove all IP addresses from the list:
::

    dnRouter(cfg-srv-twamp-vrf)# no client-list

To remove a specific IP address from the list:
::

    dnRouter(cfg-srv-twamp-vrf)# no client-list 50.1.22.0/24

**Command History**

+---------+------------------------------------+
| Release | Modification                       |
+=========+====================================+
| 6.0     | Command introduced                 |
+---------+------------------------------------+
| 9.0     | TWAMP not supported                |
+---------+------------------------------------+
| 11.2    | Command re-introduced              |
+---------+------------------------------------+
| 16.2    | Moved under VRF hierarchy          |
+---------+------------------------------------+
| 17.0    | Extended support for IPv6 prefixes |
+---------+------------------------------------+

---

## twamp/vrf/source-interface.rst

services twamp vrf source-interface
-----------------------------------

**Minimum user role:** operator

Set an existing interface as the source interface for the TWAMP service. The source interface is used to send and receive control and test packets.

To set source interface for the TWAMP service:

**Command syntax: source-interface [interface-name]**

**Command mode:** config

**Hierarchies**

- services twamp vrf

**Note**

- The command is applicable to the following interface types:

  - Physical
  - Physical vlan
  - Bundle
  - Bundle vlan
  - Loopback

- By default the in-band-management source-interface is used within the VRF context. Configuring source-interface will overide the default interface.
- To the extent that the source-interface to be used does not have an IPv4 address configured, then connections over the VRF will not work.

**Parameter table**

+----------------+-----------------------------------------------------+------------------+---------+
| Parameter      | Description                                         | Range            | Default |
+================+=====================================================+==================+=========+
| interface-name | Specify the source interface for the TWAMP service. | | string         | \-      |
|                |                                                     | | length 1-255   |         |
+----------------+-----------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# twamp vrf default
    dnRouter(cfg-srv-twamp-vrf)# source-interface lo5000


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-srv-twamp-vrf)# no source-interface

**Command History**

+---------+---------------------------+
| Release | Modification              |
+=========+===========================+
| 6.0     | Command introduced        |
+---------+---------------------------+
| 16.2    | Moved under VRF hierarchy |
+---------+---------------------------+

---

## twamp/vrf/vrf.rst

services twamp vrf
------------------

**Minimum user role:** operator

To configure a TWAMP server per VRF:

**Command syntax: vrf [vrf-name]**

**Command mode:** config

**Hierarchies**

- services twamp

**Note**

- Only in-band VRFs are supported

**Parameter table**

+-----------+----------------------+------------------+---------+
| Parameter | Description          | Range            | Default |
+===========+======================+==================+=========+
| vrf-name  | The name of the VRF. | | string         | \-      |
|           |                      | | length 1-255   |         |
+-----------+----------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# services
    dnRouter(cfg-srv)# twamp
    dnRouter(cfg-srv-twamp)# vrf default
    dnRouter(cfg-srv-twamp-vrf)#

    dnRouter(cfg-srv)# twamp vrf my_vrf
    dnRouter(cfg-srv-twamp-vrf)#


**Removing Configuration**

To delete the configuration under a specific VRF:
::

    dnRouter(cfg-srv-twamp)# no vrf my_vrf

To delete the configuration for all VRFs:
::

    dnRouter(cfg-srv-twamp)# no vrf

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---


---


---

# SECTION 3: QoS (QUALITY OF SERVICE)

## Added on Mon Sep  8 11:03:40 IDT 2025

Files from QoS folder:      163 files

## deep-buffering.rst

qos deep-buffering
------------------

**Minimum user role:** operator

To configure deep-buffering:

**Command syntax: deep-buffering [deep-buffering]**

**Command mode:** config

**Hierarchies**

- qos

**Parameter table**

+----------------+----------------------------------+----------------+---------+
| Parameter      | Description                      | Range          | Default |
+================+==================================+================+=========+
| deep-buffering | Control deep buffering behavior. | | normal       | normal  |
|                |                                  | | hbm-bypass   |         |
+----------------+----------------------------------+----------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# deep-buffering normal


**Removing Configuration**

To revert to the default state:
::

    dnRouter(cfg-qos)# no deep-buffering

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## ecn-profile/ecn-profile.rst

qos ecn-profile
---------------

**Minimum user role:** operator

The purpose of the Explicit Congestion Notification (ECN) is to mark packets going through a congested path.
When used, ECN signals the sender to slow the transmittion rate.
The packet marking probability is based on a minimum threshold, a maximum threshold and a linear curve that starts at a 0 drop probability and ends at max-drop-probability.
To allow small bursts with no marking, the minimum and maximum thresholds relate to the average queue size and not to the current queue size.

**Command syntax: ecn-profile [ecn-profile]**

**Command mode:** config

**Hierarchies**

- qos

**Note**

- You cannot remove a profile if it is part of qos policy that is attached to an interface.

**Parameter table**

+-------------+-----------------------------------------------+------------------+---------+
| Parameter   | Description                                   | Range            | Default |
+=============+===============================================+==================+=========+
| ecn-profile | References the configured name of the profile | | string         | \-      |
|             |                                               | | length 1-255   |         |
+-------------+-----------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# ecn-profile MyEcnProfile1


**Removing Configuration**

To remove the ECN profile:
::

    dnRouter(cfg-qos)# no ecn-profile MyEcnProfile1

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## ecn-profile/max-probability.rst

qos ecn-profile max-probability
-------------------------------

**Minimum user role:** operator

To configure the ECN profile max-probability which is the maximum marking probability for the profile curve:

**Command syntax: max-probability [max-probability]**

**Command mode:** config

**Hierarchies**

- qos ecn-profile

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+-------+---------+
| Parameter       | Description                                                                      | Range | Default |
+=================+==================================================================================+=======+=========+
| max-probability | marking percentage at the max of the curve. The marking probability curve starts | 1-100 | 100     |
|                 | at 0 marking at min and reaches this marking probability at the max of the       |       |         |
|                 | curve. Beyond max, the marking probability jumps to 100%.                        |       |         |
+-----------------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# ecn-profile MyEcnProfile1
    dnRouter(cfg-qos-MyEcnProfile1)# max-probability 50


**Removing Configuration**

To remove the max probability:
::

    dnRouter(cfg-qos-MyEcnProfile1)# no max-probability

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## ecn-profile/max-threshold.rst

qos ecn-profile max-threshold
-----------------------------

**Minimum user role:** operator

To configure the ECN profile max-threshold which is the upper value for the range of the curve, above which all packets will be marked:

**Command syntax: max-threshold [max-threshold-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos ecn-profile

**Note**

- The ECN profile must be configured with both a min-threshold and max-threshold.

- The min-value must be less or equal to the max-value.

**Parameter table**

+----------------------------+-----------------------------------------------+------------------+--------------+
| Parameter                  | Description                                   | Range            | Default      |
+============================+===============================================+==================+==============+
| max-threshold-microseconds | Queue maximum drop threshold in microseconds. | 1-200000         | \-           |
+----------------------------+-----------------------------------------------+------------------+--------------+
| units                      |                                               | | microseconds   | microseconds |
|                            |                                               | | milliseconds   |              |
+----------------------------+-----------------------------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# ecn-profile MyEcnProfile1
    dnRouter(cfg-qos-MyEcnProfile1)# max-threshold 10000 microseconds


**Removing Configuration**

To remove the max threshold:
::

    dnRouter(cfg-qos-MyEcnProfile1)# no max-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## ecn-profile/min-threshold.rst

qos ecn-profile min-threshold
-----------------------------

**Minimum user role:** operator

To configure the ECN profile min-threshold which is the lower value for the range of the curve, below which no packets will be marked:

**Command syntax: min-threshold [min-threshold-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos ecn-profile

**Note**

- The ECN profile must be configured with a min-threshold and a max-threshold.

- The min-value must be less or equal to the max-value.

**Parameter table**

+----------------------------+-----------------------------------------------+------------------+--------------+
| Parameter                  | Description                                   | Range            | Default      |
+============================+===============================================+==================+==============+
| min-threshold-microseconds | Queue minimum drop threshold in microseconds. | 1-200000         | \-           |
+----------------------------+-----------------------------------------------+------------------+--------------+
| units                      |                                               | | microseconds   | microseconds |
|                            |                                               | | milliseconds   |              |
+----------------------------+-----------------------------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# ecn-profile MyEcnProfile1
    dnRouter(cfg-qos-MyEcnProfile1)# min-threshold 10000 microseconds


**Removing Configuration**

To remove the min threshold:
::

    dnRouter(cfg-qos-MyEcnProfile1)# no min-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## fabric-multicast/fab-to-ncp_max-bandwidth.rst

qos fabric-multicast fab-to-ncp max-bandwidth
---------------------------------------------

**Minimum user role:** operator

The fab-to-ncp shaper ensures that the maximum rate of multicast traffic sent from the fabric to each NCP, through the recycle interface, is limited to the shaper rate. The limit protects against aggregate multicast traffic overwhelming or competing with incoming traffic on the egress NCP.

To configure the rate of the fabric multicast traffic:

**Command syntax: fab-to-ncp max-bandwidth [max-bandwidth-mbits] [units]**

**Command mode:** config

**Hierarchies**

- qos fabric-multicast

**Note**

- The recycle port interface and calendar shaper are always set to 120 Gbps.

**Parameter table**

+---------------------+------------------------------------------------+-----------+---------+
| Parameter           | Description                                    | Range     | Default |
+=====================+================================================+===========+=========+
| max-bandwidth-mbits | Per core fabric multicast shaper rate in mbits | 50-100000 | 20000   |
+---------------------+------------------------------------------------+-----------+---------+
| units               |                                                | | mbps    | mbps    |
|                     |                                                | | gbps    |         |
+---------------------+------------------------------------------------+-----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# fabric-multicast
    dnRouter(cfg-qos-fab-mcast)# fab-to-ncp max-bandwidth 10 Gbps


**Removing Configuration**

To revert the configured rate to the default:
::

    dnRouter(cfg-qos)# no fabric-multicast fab-to-ncp max-bandwidth

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 15.0    | Command introduced |
+---------+--------------------+

---

## fabric-multicast/fabric-multicast.rst

qos fabric-multicast
--------------------

**Minimum user role:** operator

DNOS supports two types of multicast replication schemes: Ingress replication and Fabric replication.

With ingress replication, multicast traffic is replicated at the ingress NCP and placed on the Virtual Output Queues (VoQs) towards the outgoing egress ports, queued together with unicast traffic sent to those egress ports. Traffic is then sent across the fabric, and then through the egress interfaces, scheduled by the end-to-end scheduler, which ensures that traffic is sent only when there are enough resources within the fabric and egress NCP.

With the fabric replication scheme, multicast traffic that needs to be sent to at least one outgoing interface in a remote NCP (i.e., traffic that needs to be sent across the fabric), is not replicated by the ingress NCP. Rather these multicast packets are placed in a Fabric-Multicast-Queue (FMQ) and replicated by the fabric to all NCPs. Each NCP recycles the multicast traffic and then replicates traffic to its local egress ports within the Outgoing Interface List (OIL) and is then placed on the egress NCP’s VoQs, together with unicast traffic. The end-to-end scheduler then schedules these packets to be sent. Multicast traffic replicated on the fabric is unscheduled, i.e. no resources are pre-allocated for this traffic on the fabric or egress NCP.

Fabric-multicast QoS adds two shapers, the ncp-to-fab shaper and the fab-to-ncp shaper. The first, ncp-to-fab shaper, ensures that the rate of unscheduled multicast traffic sent by each NCP core onto the fabric is limited to the shaper rate. The second, fab-to-ncp shaper, ensures that the maximum rate of traffic sent from the fabric to each NCP through the recycle interface is limited to the shaper rate. It protects against aggregate multicast traffic competing or overwhelming incoming traffic on the egress NCP.

For example, in a small cluster containing 4 NCPs, each NCP has two cores. The ncp-to-fab shaper is set to limit the rate to 2.5Gbps. Each NCP can place up to 5Gbps of unscheduled multicast traffic onto the fabric, replicated to each of the outgoing NCPs, i.e. a max total of 20Gbps of traffic placed by all NCPs onto the fabric. Each packet is replicated to all NCPs, delivering a total of 80Gbps of unscheduled traffic on the fabric. Each NCP will receive up to 20Gbps of multicast traffic. If the fab-to-ncp shaper is set to 10Gbps, it ensures that no more than 10Gbps of multicast traffic will be recycled to each NCP. Multicast traffic that does not have OIL members in the NCP will not be recycled to the NCP, hence the fab-to-ncp shaper will only shape traffic destined to the NCP.

**Command syntax: fabric-multicast**

**Command mode:** config

**Hierarchies**

- qos

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# fabric-multicast
    dnRouter(cfg-qos-fab-mcast)#


**Removing Configuration**

To revert the fabric-multicast parameters to the default:
::

    dnRouter(cfg-qos)# no fabric-multicast

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 15.0    | Command introduced |
+---------+--------------------+

---

## fabric-multicast/ncp-to-fab_max-bandwidth.rst

qos fabric-multicast ncp-to-fab max-bandwidth
---------------------------------------------

**Minimum user role:** operator

The ncp-to-fab shaper ensures that the rate of unscheduled multicast traffic sent by each NCP core to the fabric is limited to the shaper rate.

To configure the rate of unscheduled multicast traffic:

**Command syntax: ncp-to-fab max-bandwidth [max-bandwidth-mbits] [units]**

**Command mode:** config

**Hierarchies**

- qos fabric-multicast

**Parameter table**

+---------------------+------------------------------------------------+-----------+---------+
| Parameter           | Description                                    | Range     | Default |
+=====================+================================================+===========+=========+
| max-bandwidth-mbits | Per core fabric multicast shaper rate in mbits | 50-100000 | 20000   |
+---------------------+------------------------------------------------+-----------+---------+
| units               |                                                | | mbps    | mbps    |
|                     |                                                | | gbps    |         |
+---------------------+------------------------------------------------+-----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# fabric-multicast
    dnRouter(cfg-qos-fab-mcast)# ncp-to-fab max-bandwidth 10 Gbps


**Removing Configuration**

To revert the configured rate to the default:
::

    dnRouter(cfg-qos)# no fabric-multicast ncp-to-fab max-bandwidth

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 15.0    | Command introduced |
+---------+--------------------+

---

## hw-mapping/hw-mapping.rst

qos hw-mapping
--------------

**Minimum user role:** operator

To configure rules for mapping QoS policy to hardware settings:


**Command syntax: hw-mapping**

**Command mode:** config

**Hierarchies**

- qos

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# hw-mapping
    dnRouter(cfg-qos-hw-map)#


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-qos)# no hw-mapping

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## hw-mapping/queue-size/queue-size.rst

qos hw-mapping queue-size
-------------------------

**Minimum user role:** operator

To configure rules for mapping queue-size related policies to hardware settings.


**Command syntax: queue-size**

**Command mode:** config

**Hierarchies**

- qos hw-mapping

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# hw-mapping
    dnRouter(cfg-qos-hw-map)# queue-size
    dnRouter(cfg-qos-hw-map-queue)#


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-qos-hw-map)# no queue-size

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## hw-mapping/queue-size/speed/admin-state.rst

qos hw-mapping queue-size speed-ranges admin-state
--------------------------------------------------

**Minimum user role:** operator

To enable/disable speed range conversion table:


**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- qos hw-mapping queue-size speed-ranges

**Parameter table**

+-------------+----------------------------------------------+--------------+---------+
| Parameter   | Description                                  | Range        | Default |
+=============+==============================================+==============+=========+
| admin-state | Set to enable to use the speed range tables. | | enabled    | enabled |
|             |                                              | | disabled   |         |
+-------------+----------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# hw-mapping
    dnRouter(cfg-qos-hw-map)# queue-size
    dnRouter(cfg-qos-hw-map-queue)# speed-ranges
    dnRouter(cfg-hw-map-queue-speed-ranges)# admin-state enabled


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-hw-map-queue-speed-ranges)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## hw-mapping/queue-size/speed/ranges.rst

qos hw-mapping queue-size speed-ranges upto
-------------------------------------------

**Minimum user role:** operator

Ranges are specified by the upper speed limit and the speed value to be used for the conversion. The ranges are ordered by their upper limit in ascending order. The lower range limit is implicitly defined by the upper limit of the predecessing range.

To configure a speed range for unit conversion:

**Command syntax: upto [ranges] [units1] use [use] [units2]**

**Command mode:** config

**Hierarchies**

- qos hw-mapping queue-size speed-ranges

**Parameter table**

+-----------+-----------------------------------------------------+-----------------+---------+
| Parameter | Description                                         | Range           | Default |
+===========+=====================================================+=================+=========+
| ranges    | References the configured lower limit of the range. | 1-1000000000000 | \-      |
+-----------+-----------------------------------------------------+-----------------+---------+
| units1    |                                                     | | kbps          | kbps    |
|           |                                                     | | mbps          |         |
|           |                                                     | | gbps          |         |
+-----------+-----------------------------------------------------+-----------------+---------+
| use       | speed used for unit conversion.                     | 1-1000000000000 | \-      |
+-----------+-----------------------------------------------------+-----------------+---------+
| units2    |                                                     | | kbps          | kbps    |
|           |                                                     | | mbps          |         |
|           |                                                     | | gbps          |         |
+-----------+-----------------------------------------------------+-----------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# hw-mapping
    dnRouter(cfg-qos-hw-map)# queue-size
    dnRouter(cfg-qos-hw-map-queue)# speed-ranges
    dnRouter(cfg-hw-map-queue-speed-ranges)# upto 200 gbps use 100 gbps


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-hw-map-queue-speed-ranges)# no upto 200 gbps use 100 gbps

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 16.1    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 18.0    | Added support for mbps and gbps; with kbps as default |
+---------+-------------------------------------------------------+

---

## hw-mapping/queue-size/speed/speed.rst

qos hw-mapping queue-size speed-ranges
--------------------------------------

**Minimum user role:** operator

Queue sizes are specified in temporal units (e.g. msec) are mapped to absolute units depending on the maximum queue depletion rate, determined by the interface speed or the queue shaper maximum rate. To maintain a small set of possible queue and thresholds sizes, the queue depletion rate is compared against a set of speed ranges, and the matching speed range determines the speed that is used for the conversion.

To configure the speed ranges used for temporal to absolute unit conversion:

**Command syntax: speed-ranges**

**Command mode:** config

**Hierarchies**

- qos hw-mapping queue-size

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# hw-mapping
    dnRouter(cfg-qos-hw-map)# queue-size
    dnRouter(cfg-qos-hw-map-queue)# speed-ranges
    dnRouter(cfg-hw-map-queue-speed-ranges)#


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-qos-hw-map-queue)# no speed-ranges

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## ip-remarking-map/dscp-ipv4.rst

qos ip-remarking-map qos-tag drop-tag dscp-ipv4
-----------------------------------------------

**Minimum user role:** operator

To configure an entry in the qos ip-remarking map:

**Command syntax: qos-tag [qos-tag] drop-tag [drop-tag] dscp-ipv4 [dscp-ipv4]** mpls-imposed-exp [mpls-imposed-exp] imposed-ipp [imposed-ipp]

**Command mode:** config

**Hierarchies**

- qos ip-remarking-map

**Note**

- Cannot configure imposed-ipp and mpls-imposed-exp with different non-default values for the same qos-tag and drop-tag pair.

**Parameter table**

+------------------+----------------------------------------------------+------------+---------+
| Parameter        | Description                                        | Range      | Default |
+==================+====================================================+============+=========+
| qos-tag          | qos-tag identifier.                                | 0-7        | \-      |
+------------------+----------------------------------------------------+------------+---------+
| drop-tag         | drop-tag identifier.                               | | green    | \-      |
|                  |                                                    | | yellow   |         |
+------------------+----------------------------------------------------+------------+---------+
| dscp-ipv4        | the dscp remark value for ipv4 address family.     | 0-63       | \-      |
+------------------+----------------------------------------------------+------------+---------+
| mpls-imposed-exp | the imposed mpls-exp carrying IP remarked traffic. | 0-7        | \-      |
+------------------+----------------------------------------------------+------------+---------+
| imposed-ipp      | the imposed ipp used for ip tunnels.               | 0-7        | \-      |
+------------------+----------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# ip-remarking-map
    dnRouter(cfg-qos-ip-remark)#
    dnRouter(cfg-qos-ip-remark)# qos-tag 4 drop-tag green dscp-ipv4 af11
    dnRouter(cfg-qos-ip-remark)# qos-tag 4 drop-tag yellow dscp-ipv4 af12
    dnRouter(cfg-qos-ip-remark)# qos-tag 4 drop-tag yellow dscp-ipv4 af12 mpls-imposed-exp 3
    dnRouter(cfg-qos-ip-remark)# qos-tag 4 drop-tag yellow dscp-ipv4 af12 mpls-imposed-exp 3 imposed-ipp 3


**Removing Configuration**

To remove the qos ip-remarking-map entry:
::

    dnRouter(cfg-qos-ip-remark)# no qos-tag 4 drop-tag green

**Command History**

+---------+----------------------------------------------+
| Release | Modification                                 |
+=========+==============================================+
| 17.0    | Command introduced                           |
+---------+----------------------------------------------+
| 19.3    | Adding support for imposed-ipp configuration |
+---------+----------------------------------------------+

---

## ip-remarking-map/dscp-ipv6.rst

qos ip-remarking-map qos-tag drop-tag dscp-ipv6
-----------------------------------------------

**Minimum user role:** operator

To configure an entry in the qos ip-remarking map:

**Command syntax: qos-tag [qos-tag] drop-tag [drop-tag] dscp-ipv6 [dscp-ipv6]** mpls-imposed-exp [mpls-imposed-exp] imposed-ipp [imposed-ipp]

**Command mode:** config

**Hierarchies**

- qos ip-remarking-map

**Note**

- Cannot configure imposed-ipp and mpls-imposed-exp with different non-default values for the same qos-tag and drop-tag pair.

**Parameter table**

+------------------+----------------------------------------------------+------------+---------+
| Parameter        | Description                                        | Range      | Default |
+==================+====================================================+============+=========+
| qos-tag          | qos-tag identifier.                                | 0-7        | \-      |
+------------------+----------------------------------------------------+------------+---------+
| drop-tag         | drop-tag identifier.                               | | green    | \-      |
|                  |                                                    | | yellow   |         |
+------------------+----------------------------------------------------+------------+---------+
| dscp-ipv6        | the dscp remark value for ipv6 address family.     | 0-63       | \-      |
+------------------+----------------------------------------------------+------------+---------+
| mpls-imposed-exp | the imposed mpls-exp carrying IP remarked traffic. | 0-7        | \-      |
+------------------+----------------------------------------------------+------------+---------+
| imposed-ipp      | the imposed ipp used for ip tunnels.               | 0-7        | \-      |
+------------------+----------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# ip-remarking-map
    dnRouter(cfg-qos-ip-remark)#
    dnRouter(cfg-qos-ip-remark)# qos-tag 4 drop-tag green dscp-ipv6 af11
    dnRouter(cfg-qos-ip-remark)# qos-tag 4 drop-tag yellow dscp-ipv6 af12
    dnRouter(cfg-qos-ip-remark)# qos-tag 4 drop-tag yellow dscp-ipv6 af12 mpls-imposed-exp 3
    dnRouter(cfg-qos-ip-remark)# qos-tag 4 drop-tag yellow dscp-ipv6 af12 mpls-imposed-exp 3 imposed-ipp 3


**Removing Configuration**

To remove the qos ip-remarking-map entry:
::

    dnRouter(cfg-qos-ip-remark)# no qos-tag 4 drop-tag green

**Command History**

+---------+----------------------------------------------+
| Release | Modification                                 |
+=========+==============================================+
| 17.0    | Command introduced                           |
+---------+----------------------------------------------+
| 19.3    | Adding support for imposed-ipp configuration |
+---------+----------------------------------------------+

---

## ip-remarking-map/dscp.rst

qos ip-remarking-map qos-tag drop-tag dscp
------------------------------------------

**Minimum user role:** operator

To configure an entry in the qos ip-remarking map:

**Command syntax: qos-tag [qos-tag] drop-tag [drop-tag] dscp [dscp]** mpls-imposed-exp [mpls-imposed-exp] imposed-ipp [imposed-ipp]

**Command mode:** config

**Hierarchies**

- qos ip-remarking-map

**Note**

- Cannot configure imposed-ipp and mpls-imposed-exp with different non-default values for the same qos-tag and drop-tag pair.

**Parameter table**

+------------------+----------------------------------------------------------------------------------+------------+---------+
| Parameter        | Description                                                                      | Range      | Default |
+==================+==================================================================================+============+=========+
| qos-tag          | qos-tag identifier.                                                              | 0-7        | \-      |
+------------------+----------------------------------------------------------------------------------+------------+---------+
| drop-tag         | drop-tag identifier.                                                             | | green    | \-      |
|                  |                                                                                  | | yellow   |         |
+------------------+----------------------------------------------------------------------------------+------------+---------+
| dscp             | the dscp remark value for ipv4 address family. the dscp remark value for ipv6    | 0-63       | \-      |
|                  | address family.                                                                  |            |         |
+------------------+----------------------------------------------------------------------------------+------------+---------+
| mpls-imposed-exp | the imposed mpls-exp carrying IP remarked traffic.                               | 0-7        | \-      |
+------------------+----------------------------------------------------------------------------------+------------+---------+
| imposed-ipp      | the imposed ipp used for ip tunnels.                                             | 0-7        | \-      |
+------------------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# ip-remarking-map
    dnRouter(cfg-qos-ip-remark)# qos-tag 4 drop-tag green dscp ef
    dnRouter(cfg-qos-ip-remark)# qos-tag 4 drop-tag all dscp default
    dnRouter(cfg-qos-ip-remark)# qos-tag 4 drop-tag yellow dscp af12 mpls-imposed-exp 3


**Removing Configuration**

To remove the qos ip-remarking-map entry:
::

    dnRouter(cfg-qos-ip-remark)# no qos-tag 4 drop-tag green

**Command History**

+---------+----------------------------------------------+
| Release | Modification                                 |
+=========+==============================================+
| 11.2    | Command introduced                           |
+---------+----------------------------------------------+
| 19.3    | Adding support for imposed-ipp configuration |
+---------+----------------------------------------------+

---

## ip-remarking-map/ip-remarking-map.rst

qos ip-remarking-map
--------------------

**Minimum user role:** operator

The DSCP marking of an IP packet received or sent through an untrusted interface is remarked according to the per-hop-behavior (PHB) it is mapped to, that is, according to the qos-tag and drop-tag the packet is assigned by the qos policy set on the ingress interface.

The remarking map is a global table that specifies the DSCP remarking value for each of the possible combinations of qos-tag and drop-tag tuples.

The default remarking map maps qos-tag value to its IP precedence value. That is, it maps the qos-tag 3 bits to IP precedence 3 bits, which are the 3 most significant bits of the DSCP field, regardless of the assigned color (drop-tag).

When an IP packet received from an untrusted interface is placed on an MPLS tunnel, the imposed MPLS exp value is not inferred from the incoming untrusted DSCP value, rather is set according to the assigned qos-tag and drop-tag tuple, as defined in the mpls imposed exp column of the ip remarking-map table. The imposed mpls exp values are set by default to equal the assigned qos-tag.

The following is the default mapping:

+----------+----------+------------+-------------------+-------------+
| qos-tag  | drop-tag | dscp       | mpls imposed exp  | imposed ipp |
+----------+----------+------------+-------------------+-------------+
| 0        | green    | default(0) | 0                 | 0           |
+----------+----------+------------+-------------------+-------------+
| 1        | green    | cs1 (8)    | 1                 | 1           |
+----------+----------+------------+-------------------+-------------+
| 2        | green    | cs2(16)    | 2                 | 2           |
+----------+----------+------------+-------------------+-------------+
| 3        | green    | cs3(24)    | 3                 | 3           |
+----------+----------+------------+-------------------+-------------+
| 4        | green    | cs4(32)    | 4                 | 4           |
+----------+----------+------------+-------------------+-------------+
| 5        | green    | cs5(40)    | 5                 | 5           |
+----------+----------+------------+-------------------+-------------+
| 6        | green    | cs6(48)    | 6                 | 6           |
+----------+----------+------------+-------------------+-------------+
| 7        | green    | cs7(56)    | 7                 | 7           |
+----------+----------+------------+-------------------+-------------+
| 0        | yellow   | default(0) | 0                 | 0           |
+----------+----------+------------+-------------------+-------------+
| 1        | yellow   | cs1 (8)    | 1                 | 1           |
+----------+----------+------------+-------------------+-------------+
| 2        | yellow   | cs2(16)    | 2                 | 2           |
+----------+----------+------------+-------------------+-------------+
| 3        | yellow   | cs3(24)    | 3                 | 3           |
+----------+----------+------------+-------------------+-------------+
| 4        | yellow   | cs4(32)    | 4                 | 4           |
+----------+----------+------------+-------------------+-------------+
| 5        | yellow   | cs5(40)    | 5                 | 5           |
+----------+----------+------------+-------------------+-------------+
| 6        | yellow   | cs6(48)    | 6                 | 6           |
+----------+----------+------------+-------------------+-------------+
| 7        | yellow   | cs7(56)    | 7                 | 7           |
+----------+----------+------------+-------------------+-------------+

To configure the QoS ip-remarking-map

**Command syntax: ip-remarking-map**

**Command mode:** config

**Hierarchies**

- qos

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# ip-remarking-map
    dnRouter(cfg-qos-ip-remark)#


**Removing Configuration**

To revert to the default ip-remarking-map:
::

    dnRouter(cfg-qos)# no ip-remarking-map

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 13.2    | Command introduced |
+---------+--------------------+

---

## policy/description.rst

qos policy description
----------------------

**Minimum user role:** operator

To add a meaningful description for a policy:

**Command syntax: description [descr]**

**Command mode:** config

**Hierarchies**

- qos policy

**Parameter table**

+-----------+--------------------+------------------+---------+
| Parameter | Description        | Range            | Default |
+===========+====================+==================+=========+
| descr     | Policy description | | string         | \-      |
|           |                    | | length 1-255   |         |
+-----------+--------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy MyQoSPolicy1
    dnRouter(cfg-policy-MyQoSPOlicy1)# description "Ingress peer 1 policy"


**Removing Configuration**

To remove the description from the policy
::

    dnRouter(cfg-policy-MyQoSPOlicy1)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 15.0    | Command introduced |
+---------+--------------------+

---

## policy/policy.rst

qos policy
----------

**Minimum user role:** operator

A QoS policy is a set of rules and is identified by a unique name.

To create a QoS policy:

**Command syntax: policy [policy]**

**Command mode:** config

**Hierarchies**

- qos

**Note**

- You cannot remove a policy if it is attached to an interface.

- A policy must include a rule with an action. The action can be configured on any rule, including the default.

**Parameter table**

+-----------+----------------------------------------------+------------------+---------+
| Parameter | Description                                  | Range            | Default |
+===========+==============================================+==================+=========+
| policy    | References the configured name of the policy | | string         | \-      |
|           |                                              | | length 1-255   |         |
+-----------+----------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy MyQoSPolicy1


**Removing Configuration**

To remove the policy
::

    dnRouter(cfg-qos)# no policy MyQoSPolicy1

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+

---

## policy/rule/action/action.rst

qos policy rule action
----------------------

**Minimum user role:** operator

To enter the action configuration hierarchy:

**Command syntax: action**

**Command mode:** config

**Hierarchies**

- qos policy rule

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1)# no action

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+

---

## policy/rule/action/child-policy/policy-name.rst

qos policy rule action child-policy policy-name
-----------------------------------------------

**Minimum user role:** operator

Attach a child policy to a hierarchical policy.

 The child policy action can be applied on rule default of a hierarchical policy, to specify a classification or queuing policy. 

**Command syntax: policy-name [policy-name]**

**Command mode:** config

**Hierarchies**

- qos policy rule action child-policy

**Parameter table**

+-------------+-------------+------------------+---------+
| Parameter   | Description | Range            | Default |
+=============+=============+==================+=========+
| policy-name | policy name | | string         | \-      |
|             |             | | length 1-255   |         |
+-------------+-------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy MyQoSPolicy1
    dnRouter(cfg-qos-policy-MyQoSPOlicy1)# rule default
    dnRouter(cfg-policy-MyQoSPOlicy1-rule-default)# action
    dnRouter(cfg-myPolicy1-rule-default-action)# child-policy
    dnRouter(cfg-rule-default-action-child-policy)# policy-name MyPolicyA


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-rule-default-action-child-policy)# no policy-name

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/police/police.rst

qos policy rule action police
-----------------------------

**Minimum user role:** operator

Traffic policing limits the rate of traffic that enters a network device according to the traffic classification. Matching traffic is metered against rate specification.

The following policing meters are supported:

- sr2cm - single-rate two color meter

- sr3cm - single-rate three color meter

- tr3ccm - two rates three color coupled meter

- tr3cm - two rates three color meter.

The policer enforces a confirm, exceed or violate action according to the marker's output.

The in color represents the color of the traffic class matched by the rule, and is determined by the explicit or implicit set drop-tag action. Traffic is matched against a meter, either ignoring in-color (color-blind meter) or taking color into account (color-aware meter), and the meter assigns a marker color to the packet. The in color and marker color are combined according to the table below to form the final color that is used for queue admission decisions, e.g. to select whether to use the wred green or yellow curves for wred admission.

+--------------------------+--------------------------+--------------------------+
| In color (set drop-tag)  | Marker color (police)    | Final-color (admission)  |
+--------------------------+--------------------------+--------------------------+
| green                    | green                    | green                    |
+--------------------------+--------------------------+--------------------------+
| green                    | yellow                   | yellow                   |
+--------------------------+--------------------------+--------------------------+
| green                    | red                      | red (drop)               |
+--------------------------+--------------------------+--------------------------+
| yellow                   | green                    | yellow                   |
+--------------------------+--------------------------+--------------------------+
| yellow                   | yellow                   | yellow                   |
+--------------------------+--------------------------+--------------------------+
| yellow                   | red                      | red (drop)               |
+--------------------------+--------------------------+--------------------------+

To configure a police action:

**Command syntax: police**

**Command mode:** config

**Hierarchies**

- qos policy rule action

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-myPolicy1-rule-1-action-police)#


**Removing Configuration**

To remove the policing action:
::

    dnRouter(cfg-myPolicy1-rule-1-action)# no police

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/shared/rule-id_default.rst

qos policy rule action police meter-type shared rule-id default
---------------------------------------------------------------

**Minimum user role:** operator



Indicates the rule in which the shared policer is defined. 

**Command syntax: rule-id default**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type shared

**Note**

- Validate that the rule references includes a policer definition.

- Validate that only rules within the same policy can be referenced.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type shared
    dnRouter(cfg-action-police-shared)# rule-id default


**Removing Configuration**

To remove the policer shared rule id:
::

    dnRouter(cfg-action-police-shared)# no rule-id default

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 18.0    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/police/shared/rule-id.rst

qos policy rule action police meter-type shared rule-id
-------------------------------------------------------

**Minimum user role:** operator



Indicate the rule in which the shared policer is defined. 

**Command syntax: rule-id [rule-id]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type shared

**Note**

- Validate that rule references include a policer definition

- Validate that only rules within the same policy can be referenced

**Parameter table**

+-----------+------------------------------------------------+-------+---------+
| Parameter | Description                                    | Range | Default |
+===========+================================================+=======+=========+
| rule-id   | Reference a meter defined in a different rule. | \-    | \-      |
+-----------+------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type shared
    dnRouter(cfg-action-police-shared)# rule-id 4


**Removing Configuration**

To remove the policer shared rule id:
::

    dnRouter(cfg-action-police-shared)# no rule-id

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/police/shared/shared.rst

qos policy rule action police meter-type shared
-----------------------------------------------

**Minimum user role:** operator

To configure an ingress shared meter traffic policing action:

**Command syntax: meter-type shared**

**Command mode:** config

**Hierarchies**

- qos policy rule action police

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-policy-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type shared


**Removing Configuration**

To remove the meter-type:
::

    dnRouter(cfg-myPolicy1-rule-1-action-police)# no meter-type

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/police/sr2cm/burst_kbytes.rst

qos policy rule action police meter-type sr2cm burst
----------------------------------------------------

**Minimum user role:** operator

To configure the policer committed burst in kbytes or mbytes:

**Command syntax: burst [cbs-kbytes] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type sr2cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------+--------------------------------------------------+------------+---------+
| Parameter  | Description                                      | Range      | Default |
+============+==================================================+============+=========+
| cbs-kbytes | committed burst size in killo bytes (1000 bytes) | 50-255000  | 200     |
+------------+--------------------------------------------------+------------+---------+
| units      |                                                  | | kbytes   | kbytes  |
|            |                                                  | | mbytes   |         |
+------------+--------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# burst 1000 kbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# burst 1000 kbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# burst 200 mbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# burst 200 mbytes


**Removing Configuration**

To remove the burst rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no burst 200 mbytes

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/sr2cm/burst_microseconds.rst

qos policy rule action police meter-type sr2cm burst
----------------------------------------------------

**Minimum user role:** operator

To configure the policer committed burst in microseconds or milliseconds:

**Command syntax: burst [cbs-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type sr2cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------------+-------------+------------------+--------------+
| Parameter        | Description | Range            | Default      |
+==================+=============+==================+==============+
| cbs-microseconds | burst rate  | 1-200000         | \-           |
+------------------+-------------+------------------+--------------+
| units            |             | | microseconds   | microseconds |
|                  |             | | milliseconds   |              |
+------------------+-------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# burst 10000 microseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# burst 10000 microseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# burst 100 milliseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# burst 100 milliseconds


**Removing Configuration**

To remove the burst rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no burst 100 milliseconds

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/sr2cm/rank.rst

qos policy rule action police meter-type sr2cm rank
---------------------------------------------------

**Minimum user role:** operator



Policer rank in hierarchy. Policer with higher rank share unused tokens with lower rank policers. Rank 1 is not configured directly, rather derived from parent policer. 

 A hierarchical policer can be configured to enforce strict policing, according to its CIR (and EIR) settings, and never use tokens from higher rank policers. The hierarchical policer does pass unused tokens to lower rank policers regardless of the strict setting.

**Command syntax: rank [rank]** strict

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type sr2cm

**Parameter table**

+-----------+----------------------------------------------------------------------------------+-------+---------+
| Parameter | Description                                                                      | Range | Default |
+===========+==================================================================================+=======+=========+
| rank      | Policer rank in hierarchy. Policer with higher rank share unused tokens with     | 2-4   | \-      |
|           | lower rank policers. Rank 1 is not configured directly, rather derived from      |       |         |
|           | parent policer.                                                                  |       |         |
+-----------+----------------------------------------------------------------------------------+-------+---------+
| strict    | A strict hierarchical policer does not use tokens from higher rank meters, hence | \-    | \-      |
|           | enforce the CIR (and EIR) rates strictly. The hierarchical policer does pass     |       |         |
|           | unused tokens to lower rank policers regardless of the strict setting.           |       |         |
+-----------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# rank 2
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# rank 2 strict


**Removing Configuration**

To remove the policer rank:
::

    dnRouter(cfg-action-police-tr3ccm)# no rank

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/police/sr2cm/rate_kbits.rst

qos policy rule action police meter-type sr2cm rate
---------------------------------------------------

**Minimum user role:** operator

To configure the policer rate in kbps, mbps, or gbps:

**Command syntax: rate [cir-kbits] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type sr2cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+-----------+-----------------------------------------+---------------+---------+
| Parameter | Description                             | Range         | Default |
+===========+=========================================+===============+=========+
| cir-kbits | committed rate in killo bits per second | 64-1000000000 | \-      |
+-----------+-----------------------------------------+---------------+---------+
| units     |                                         | | kbps        | kbps    |
|           |                                         | | mbps        |         |
|           |                                         | | gbps        |         |
+-----------+-----------------------------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# rate 64000 kbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# rate 64000 mbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# rate 800 gbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# rate 64000 kbps


**Removing Configuration**

To remove the policer rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no rate 64000 kbps

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/sr2cm/rate_percent.rst

qos policy rule action police meter-type sr2cm rate percent
-----------------------------------------------------------

**Minimum user role:** operator

To configure the policer rate by percentage:

**Command syntax: rate [cir-percent] percent**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type sr2cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+-------------+---------------------------+-------+---------+
| Parameter   | Description               | Range | Default |
+=============+===========================+=======+=========+
| cir-percent | committed rate in percent | 0-100 | \-      |
+-------------+---------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# rate 30 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# rate 30 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# rate 30 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# rate 30 percent


**Removing Configuration**

To remove the policer rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no rate 30 percent

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/sr2cm/sr2cm.rst

qos policy rule action police meter-type sr2cm
----------------------------------------------

**Minimum user role:** operator

To configure an ingress single rate two color meter traffic policing action.

**Command syntax: meter-type sr2cm**

**Command mode:** config

**Hierarchies**

- qos policy rule action police

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-policy-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm


**Removing Configuration**

To remove the meter-type:
::

    dnRouter(cfg-myPolicy1-rule-1-action-police)# no meter-type

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/sr3cm/burst_kbytes.rst

qos policy rule action police meter-type sr3cm burst
----------------------------------------------------

**Minimum user role:** operator

To configure the policer committed burst in kbytes or mbytes:

**Command syntax: burst [cbs-kbytes] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type sr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------+--------------------------------------------------+------------+---------+
| Parameter  | Description                                      | Range      | Default |
+============+==================================================+============+=========+
| cbs-kbytes | committed burst size in killo bytes (1000 bytes) | 50-255000  | 200     |
+------------+--------------------------------------------------+------------+---------+
| units      |                                                  | | kbytes   | kbytes  |
|            |                                                  | | mbytes   |         |
+------------+--------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# burst 1000 kbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# burst 1000 kbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# burst 200 mbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# burst 200 mbytes


**Removing Configuration**

To remove the burst rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no burst 200 mbytes

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/sr3cm/burst_microseconds.rst

qos policy rule action police meter-type sr3cm burst
----------------------------------------------------

**Minimum user role:** operator

To configure the policer committed burst in microseconds or milliseconds:

**Command syntax: burst [cbs-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type sr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------------+-------------+------------------+--------------+
| Parameter        | Description | Range            | Default      |
+==================+=============+==================+==============+
| cbs-microseconds | burst rate  | 1-200000         | \-           |
+------------------+-------------+------------------+--------------+
| units            |             | | microseconds   | microseconds |
|                  |             | | milliseconds   |              |
+------------------+-------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# burst 10000 microseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# burst 10000 microseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# burst 100 milliseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# burst 100 milliseconds


**Removing Configuration**

To remove the burst rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no burst 100 milliseconds

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/sr3cm/color-mode.rst

qos policy rule action police meter-type sr3cm color-mode
---------------------------------------------------------

**Minimum user role:** operator

To configure the policer color mode:

**Command syntax: color-mode [color-mode]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type sr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------+-------------------------------------------------------------------+-----------------+-------------+
| Parameter  | Description                                                       | Range           | Default     |
+============+===================================================================+=================+=============+
| color-mode | Take in-color into account, or treat all matched traffic as green | | color-blind   | color-blind |
|            |                                                                   | | color-aware   |             |
+------------+-------------------------------------------------------------------+-----------------+-------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# color-mode color-aware
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# color-mode color-blind
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# color-mode color-blind


**Removing Configuration**

To remove color mode:
::

    dnRouter(cfg-action-police-tr3ccm)# no color-mode

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/sr3cm/excess-burst_kbytes.rst

qos policy rule action police meter-type sr3cm excess-burst
-----------------------------------------------------------

**Minimum user role:** operator

To configure the excess-burst rate in kbytes or mbytes:

**Command syntax: excess-burst [ebs-kbytes] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type sr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------+-----------------------------------------------+------------+---------+
| Parameter  | Description                                   | Range      | Default |
+============+===============================================+============+=========+
| ebs-kbytes | excess burst size in killo bytes (1000 bytes) | 50-255000  | 200     |
+------------+-----------------------------------------------+------------+---------+
| units      |                                               | | kbytes   | kbytes  |
|            |                                               | | mbytes   |         |
+------------+-----------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# excess-burst 100 kbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# excess-burst 100 mbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# excess-burst 100 kbytes


**Removing Configuration**

To remove excess burst mode:
::

    dnRouter(cfg-action-police-tr3ccm)# no excess-burst 100 kbytes

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/sr3cm/excess-burst_microseconds.rst

qos policy rule action police meter-type sr3cm excess-burst
-----------------------------------------------------------

**Minimum user role:** operator

To configure the excess-burst rate in milliseconds or microseconds:

**Command syntax: excess-burst [ebs-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type sr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------------+-----------------------------------+------------------+--------------+
| Parameter        | Description                       | Range            | Default      |
+==================+===================================+==================+==============+
| ebs-microseconds | excess burst size in microseconds | 1-200000         | \-           |
+------------------+-----------------------------------+------------------+--------------+
| units            |                                   | | microseconds   | microseconds |
|                  |                                   | | milliseconds   |              |
+------------------+-----------------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# excess-burst 1000 microseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# excess-burst 100 milliseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# excess-burst 1000 microseconds


**Removing Configuration**

To remove excess burst mode:
::

    dnRouter(cfg-action-police-tr3ccm)# no excess-burst 1000 microseconds

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/sr3cm/rate_kbits.rst

qos policy rule action police meter-type sr3cm rate
---------------------------------------------------

**Minimum user role:** operator

To configure the policer rate in kbps, mbps, or gbps:

**Command syntax: rate [cir-kbits] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type sr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+-----------+-----------------------------------------+---------------+---------+
| Parameter | Description                             | Range         | Default |
+===========+=========================================+===============+=========+
| cir-kbits | committed rate in killo bits per second | 64-1000000000 | \-      |
+-----------+-----------------------------------------+---------------+---------+
| units     |                                         | | kbps        | kbps    |
|           |                                         | | mbps        |         |
|           |                                         | | gbps        |         |
+-----------+-----------------------------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# rate 64000 kbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# rate 64000 mbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# rate 800 gbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# rate 64000 kbps


**Removing Configuration**

To remove the policer rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no rate 64000 kbps

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/sr3cm/rate_percent.rst

qos policy rule action police meter-type sr3cm rate percent
-----------------------------------------------------------

**Minimum user role:** operator

To configure the policer rate by percentage:

**Command syntax: rate [cir-percent] percent**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type sr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+-------------+---------------------------+-------+---------+
| Parameter   | Description               | Range | Default |
+=============+===========================+=======+=========+
| cir-percent | committed rate in percent | 0-100 | \-      |
+-------------+---------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# rate 30 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# rate 30 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# rate 30 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# rate 30 percent


**Removing Configuration**

To remove the policer rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no rate 30 percent

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/sr3cm/sr3cm.rst

qos policy rule action police meter-type sr3cm
----------------------------------------------

**Minimum user role:** operator

To configure an ingress single rate three color meter traffic policing action.

**Command syntax: meter-type sr3cm**

**Command mode:** config

**Hierarchies**

- qos policy rule action police

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-myPolicy1-rule-1-action-police)# meter-type sr3cm


**Removing Configuration**

To remove the meter-type:
::

    dnRouter(cfg-myPolicy1-rule-1-action-police)# no meter-type

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3ccm/burst_kbytes.rst

qos policy rule action police meter-type tr3ccm burst
-----------------------------------------------------

**Minimum user role:** operator

To configure the policer committed burst in kbytes or mbytes:

**Command syntax: burst [cbs-kbytes] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3ccm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------+--------------------------------------------------+------------+---------+
| Parameter  | Description                                      | Range      | Default |
+============+==================================================+============+=========+
| cbs-kbytes | committed burst size in killo bytes (1000 bytes) | 50-255000  | 200     |
+------------+--------------------------------------------------+------------+---------+
| units      |                                                  | | kbytes   | kbytes  |
|            |                                                  | | mbytes   |         |
+------------+--------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# burst 1000 kbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# burst 1000 kbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# burst 200 mbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# burst 200 mbytes


**Removing Configuration**

To remove the burst rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no burst 200 mbytes

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3ccm/burst_microseconds.rst

qos policy rule action police meter-type tr3ccm burst
-----------------------------------------------------

**Minimum user role:** operator

To configure the policer committed burst in microseconds or milliseconds:

**Command syntax: burst [cbs-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3ccm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------------+-------------+------------------+--------------+
| Parameter        | Description | Range            | Default      |
+==================+=============+==================+==============+
| cbs-microseconds | burst rate  | 1-200000         | \-           |
+------------------+-------------+------------------+--------------+
| units            |             | | microseconds   | microseconds |
|                  |             | | milliseconds   |              |
+------------------+-------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# burst 10000 microseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# burst 10000 microseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# burst 100 milliseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# burst 100 milliseconds


**Removing Configuration**

To remove the burst rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no burst 100 milliseconds

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3ccm/color-mode.rst

qos policy rule action police meter-type tr3ccm color-mode
----------------------------------------------------------

**Minimum user role:** operator

To configure the policer color mode:

**Command syntax: color-mode [color-mode]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3ccm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------+-------------------------------------------------------------------+-----------------+-------------+
| Parameter  | Description                                                       | Range           | Default     |
+============+===================================================================+=================+=============+
| color-mode | Take in-color into account, or treat all matched traffic as green | | color-blind   | color-blind |
|            |                                                                   | | color-aware   |             |
+------------+-------------------------------------------------------------------+-----------------+-------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# color-mode color-aware
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# color-mode color-blind
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# color-mode color-blind


**Removing Configuration**

To remove color mode:
::

    dnRouter(cfg-action-police-tr3ccm)# no color-mode

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3ccm/excess-burst_auto.rst

qos policy rule action police meter-type tr3ccm excess-burst auto
-----------------------------------------------------------------

**Minimum user role:** operator

To automatically calculate the policer excess-burst:

**Command syntax: excess-burst auto**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3ccm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# excess-burst auto
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# excess-burst auto


**Removing Configuration**

To remove excess burst auto value:
::

    dnRouter(cfg-action-police-tr3ccm)# no excess-burst auto

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3ccm/excess-burst_kbytes.rst

qos policy rule action police meter-type tr3ccm excess-burst
------------------------------------------------------------

**Minimum user role:** operator

To configure the excess-burst rate in kbytes or mbytes:

**Command syntax: excess-burst [ebs-kbytes] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3ccm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------+-----------------------------------------------+------------+---------+
| Parameter  | Description                                   | Range      | Default |
+============+===============================================+============+=========+
| ebs-kbytes | excess burst size in killo bytes (1000 bytes) | 50-255000  | 200     |
+------------+-----------------------------------------------+------------+---------+
| units      |                                               | | kbytes   | kbytes  |
|            |                                               | | mbytes   |         |
+------------+-----------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# excess-burst 100 kbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# excess-burst 100 mbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# excess-burst 100 kbytes


**Removing Configuration**

To remove excess burst mode:
::

    dnRouter(cfg-action-police-tr3ccm)# no excess-burst 100 kbytes

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3ccm/excess-burst_microseconds.rst

qos policy rule action police meter-type tr3ccm excess-burst
------------------------------------------------------------

**Minimum user role:** operator

To configure the excess-burst rate in milliseconds or microseconds:

**Command syntax: excess-burst [ebs-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3ccm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------------+-----------------------------------+------------------+--------------+
| Parameter        | Description                       | Range            | Default      |
+==================+===================================+==================+==============+
| ebs-microseconds | excess burst size in microseconds | 1-200000         | \-           |
+------------------+-----------------------------------+------------------+--------------+
| units            |                                   | | microseconds   | microseconds |
|                  |                                   | | milliseconds   |              |
+------------------+-----------------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# excess-burst 1000 microseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# excess-burst 100 milliseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# excess-burst 1000 microseconds


**Removing Configuration**

To remove excess burst mode:
::

    dnRouter(cfg-action-police-tr3ccm)# no excess-burst 1000 microseconds

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3ccm/excess-rate_kbits.rst

qos policy rule action police meter-type tr3ccm excess-rate
-----------------------------------------------------------

**Minimum user role:** operator

To configure the excess rate of the policer in kbps, mbps, or gbps:

**Command syntax: excess-rate [eir-kbits] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3ccm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+-----------+--------------------------------------+--------------+---------+
| Parameter | Description                          | Range        | Default |
+===========+======================================+==============+=========+
| eir-kbits | excess rate in killo bits per second | 0-1000000000 | \-      |
+-----------+--------------------------------------+--------------+---------+
| units     |                                      | | kbps       | kbps    |
|           |                                      | | mbps       |         |
|           |                                      | | gbps       |         |
+-----------+--------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# excess-rate 10000 kbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3ccm)# excess-rate 10000 mbps


**Removing Configuration**

To remove the policer rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no excess-rate 10000 mbps

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3ccm/excess-rate_percent.rst

qos policy rule action police meter-type tr3ccm excess-rate percent
-------------------------------------------------------------------

**Minimum user role:** operator

To configure the policer excess rate by percentage:

**Command syntax: excess-rate [eir-percent] percent**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3ccm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+-------------+-------------+-------+---------+
| Parameter   | Description | Range | Default |
+=============+=============+=======+=========+
| eir-percent | burst rate  | 0-100 | 2       |
+-------------+-------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# excess-rate 50 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3ccm)# excess-rate 50 percent


**Removing Configuration**

To remove the policer rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no excess-rate 50 percent

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3ccm/rate_kbits.rst

qos policy rule action police meter-type tr3ccm rate
----------------------------------------------------

**Minimum user role:** operator

To configure the policer rate in kbps, mbps, or gbps:

**Command syntax: rate [cir-kbits] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3ccm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+-----------+-----------------------------------------+---------------+---------+
| Parameter | Description                             | Range         | Default |
+===========+=========================================+===============+=========+
| cir-kbits | committed rate in killo bits per second | 64-1000000000 | \-      |
+-----------+-----------------------------------------+---------------+---------+
| units     |                                         | | kbps        | kbps    |
|           |                                         | | mbps        |         |
|           |                                         | | gbps        |         |
+-----------+-----------------------------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# rate 64000 kbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# rate 64000 mbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# rate 800 gbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# rate 64000 kbps


**Removing Configuration**

To remove the policer rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no rate 64000 kbps

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3ccm/rate_percent.rst

qos policy rule action police meter-type tr3ccm rate percent
------------------------------------------------------------

**Minimum user role:** operator

To configure the policer rate by percentage:

**Command syntax: rate [cir-percent] percent**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3ccm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+-------------+---------------------------+-------+---------+
| Parameter   | Description               | Range | Default |
+=============+===========================+=======+=========+
| cir-percent | committed rate in percent | 0-100 | \-      |
+-------------+---------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# rate 30 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# rate 30 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# rate 30 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# rate 30 percent


**Removing Configuration**

To remove the policer rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no rate 30 percent

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3ccm/tr3ccm.rst

qos policy rule action police meter-type tr3ccm
-----------------------------------------------

**Minimum user role:** operator

To configure an ingress two rate three color coupled meter traffic policing action.

**Command syntax: meter-type tr3ccm**

**Command mode:** config

**Hierarchies**

- qos policy rule action police

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-myPolicy1-rule-1-action-police)# meter-type tr3ccm


**Removing Configuration**

To remove the meter-type:
::

    dnRouter(cfg-myPolicy1-rule-1-action-police)# no meter-type

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3cm/burst_kbytes.rst

qos policy rule action police meter-type tr3cm burst
----------------------------------------------------

**Minimum user role:** operator

To configure the policer committed burst in kbytes or mbytes:

**Command syntax: burst [cbs-kbytes] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------+--------------------------------------------------+------------+---------+
| Parameter  | Description                                      | Range      | Default |
+============+==================================================+============+=========+
| cbs-kbytes | committed burst size in killo bytes (1000 bytes) | 50-255000  | 200     |
+------------+--------------------------------------------------+------------+---------+
| units      |                                                  | | kbytes   | kbytes  |
|            |                                                  | | mbytes   |         |
+------------+--------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# burst 1000 kbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# burst 1000 kbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# burst 200 mbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# burst 200 mbytes


**Removing Configuration**

To remove the burst rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no burst 200 mbytes

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3cm/burst_microseconds.rst

qos policy rule action police meter-type tr3cm burst
----------------------------------------------------

**Minimum user role:** operator

To configure the policer committed burst in microseconds or milliseconds:

**Command syntax: burst [cbs-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------------+-------------+------------------+--------------+
| Parameter        | Description | Range            | Default      |
+==================+=============+==================+==============+
| cbs-microseconds | burst rate  | 1-200000         | \-           |
+------------------+-------------+------------------+--------------+
| units            |             | | microseconds   | microseconds |
|                  |             | | milliseconds   |              |
+------------------+-------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# burst 10000 microseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# burst 10000 microseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# burst 100 milliseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# burst 100 milliseconds


**Removing Configuration**

To remove the burst rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no burst 100 milliseconds

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3cm/color-mode.rst

qos policy rule action police meter-type tr3cm color-mode
---------------------------------------------------------

**Minimum user role:** operator

To configure the policer color mode:

**Command syntax: color-mode [color-mode]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------+-------------------------------------------------------------------+-----------------+-------------+
| Parameter  | Description                                                       | Range           | Default     |
+============+===================================================================+=================+=============+
| color-mode | Take in-color into account, or treat all matched traffic as green | | color-blind   | color-blind |
|            |                                                                   | | color-aware   |             |
+------------+-------------------------------------------------------------------+-----------------+-------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# color-mode color-aware
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# color-mode color-blind
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# color-mode color-blind


**Removing Configuration**

To remove color mode:
::

    dnRouter(cfg-action-police-tr3ccm)# no color-mode

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3cm/excess-burst_auto.rst

qos policy rule action police meter-type tr3cm excess-burst auto
----------------------------------------------------------------

**Minimum user role:** operator

To automatically calculate the policer excess-burst:

**Command syntax: excess-burst auto**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# excess-burst auto
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# excess-burst auto


**Removing Configuration**

To remove excess burst auto value:
::

    dnRouter(cfg-action-police-tr3ccm)# no excess-burst auto

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3cm/excess-burst_kbytes.rst

qos policy rule action police meter-type tr3cm excess-burst
-----------------------------------------------------------

**Minimum user role:** operator

To configure the excess-burst rate in kbytes or mbytes:

**Command syntax: excess-burst [ebs-kbytes] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------+-----------------------------------------------+------------+---------+
| Parameter  | Description                                   | Range      | Default |
+============+===============================================+============+=========+
| ebs-kbytes | excess burst size in killo bytes (1000 bytes) | 50-255000  | 200     |
+------------+-----------------------------------------------+------------+---------+
| units      |                                               | | kbytes   | kbytes  |
|            |                                               | | mbytes   |         |
+------------+-----------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# excess-burst 100 kbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# excess-burst 100 mbytes
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# excess-burst 100 kbytes


**Removing Configuration**

To remove excess burst mode:
::

    dnRouter(cfg-action-police-tr3ccm)# no excess-burst 100 kbytes

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3cm/excess-burst_microseconds.rst

qos policy rule action police meter-type tr3cm excess-burst
-----------------------------------------------------------

**Minimum user role:** operator

To configure the excess-burst rate in milliseconds or microseconds:

**Command syntax: excess-burst [ebs-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+------------------+-----------------------------------+------------------+--------------+
| Parameter        | Description                       | Range            | Default      |
+==================+===================================+==================+==============+
| ebs-microseconds | excess burst size in microseconds | 1-200000         | \-           |
+------------------+-----------------------------------+------------------+--------------+
| units            |                                   | | microseconds   | microseconds |
|                  |                                   | | milliseconds   |              |
+------------------+-----------------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# excess-burst 1000 microseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# excess-burst 100 milliseconds
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# excess-burst 1000 microseconds


**Removing Configuration**

To remove excess burst mode:
::

    dnRouter(cfg-action-police-tr3ccm)# no excess-burst 1000 microseconds

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3cm/excess-rate_kbits.rst

qos policy rule action police meter-type tr3cm excess-rate
----------------------------------------------------------

**Minimum user role:** operator

To configure the excess rate of the policer in kbps, mbps, or gbps:

**Command syntax: excess-rate [eir-kbits] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+-----------+--------------------------------------+--------------+---------+
| Parameter | Description                          | Range        | Default |
+===========+======================================+==============+=========+
| eir-kbits | excess rate in killo bits per second | 0-1000000000 | \-      |
+-----------+--------------------------------------+--------------+---------+
| units     |                                      | | kbps       | kbps    |
|           |                                      | | mbps       |         |
|           |                                      | | gbps       |         |
+-----------+--------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# excess-rate 10000 kbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3ccm)# excess-rate 10000 mbps


**Removing Configuration**

To remove the policer rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no excess-rate 10000 mbps

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3cm/excess-rate_percent.rst

qos policy rule action police meter-type tr3cm excess-rate percent
------------------------------------------------------------------

**Minimum user role:** operator

To configure the policer excess rate by percentage:

**Command syntax: excess-rate [eir-percent] percent**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+-------------+-------------+-------+---------+
| Parameter   | Description | Range | Default |
+=============+=============+=======+=========+
| eir-percent | burst rate  | 0-100 | 2       |
+-------------+-------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# excess-rate 50 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3ccm)# excess-rate 50 percent


**Removing Configuration**

To remove the policer rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no excess-rate 50 percent

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3cm/rank.rst

qos policy rule action police meter-type tr3cm rank
---------------------------------------------------

**Minimum user role:** operator



Policer rank in hierarchy. Policer with higher rank share unused tokens with lower rank policers. Rank 1 is not configured directly, rather derived from parent policer. 

 A hierarchical policer can be configured to enforce strict policing, according to its CIR (and EIR) settings, and never use tokens from higher rank policers. The hierarchical policer does pass unused tokens to lower rank policers regardless of the strict setting.

**Command syntax: rank [rank]** strict

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3cm

**Parameter table**

+-----------+----------------------------------------------------------------------------------+-------+---------+
| Parameter | Description                                                                      | Range | Default |
+===========+==================================================================================+=======+=========+
| rank      | Policer rank in hierarchy. Policer with higher rank share unused tokens with     | 2-4   | \-      |
|           | lower rank policers. Rank 1 is not configured directly, rather derived from      |       |         |
|           | parent policer.                                                                  |       |         |
+-----------+----------------------------------------------------------------------------------+-------+---------+
| strict    | A strict hierarchical policer does not use tokens from higher rank meters, hence | \-    | \-      |
|           | enforce the CIR (and EIR) rates strictly. The hierarchical policer does pass     |       |         |
|           | unused tokens to lower rank policers regardless of the strict setting.           |       |         |
+-----------+----------------------------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# rank 2
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# rank 2 strict


**Removing Configuration**

To remove the policer rank:
::

    dnRouter(cfg-action-police-tr3ccm)# no rank

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/police/tr3cm/rate_kbits.rst

qos policy rule action police meter-type tr3cm rate
---------------------------------------------------

**Minimum user role:** operator

To configure the policer rate in kbps, mbps, or gbps:

**Command syntax: rate [cir-kbits] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+-----------+-----------------------------------------+---------------+---------+
| Parameter | Description                             | Range         | Default |
+===========+=========================================+===============+=========+
| cir-kbits | committed rate in killo bits per second | 64-1000000000 | \-      |
+-----------+-----------------------------------------+---------------+---------+
| units     |                                         | | kbps        | kbps    |
|           |                                         | | mbps        |         |
|           |                                         | | gbps        |         |
+-----------+-----------------------------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# rate 64000 kbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# rate 64000 mbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# rate 800 gbps
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# rate 64000 kbps


**Removing Configuration**

To remove the policer rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no rate 64000 kbps

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3cm/rate_percent.rst

qos policy rule action police meter-type tr3cm rate percent
-----------------------------------------------------------

**Minimum user role:** operator

To configure the policer rate by percentage:

**Command syntax: rate [cir-percent] percent**

**Command mode:** config

**Hierarchies**

- qos policy rule action police meter-type tr3cm

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Parameter table**

+-------------+---------------------------+-------+---------+
| Parameter   | Description               | Range | Default |
+=============+===========================+=======+=========+
| cir-percent | committed rate in percent | 0-100 | \-      |
+-------------+---------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3ccm
    dnRouter(cfg-action-police-tr3ccm)# rate 30 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type tr3cm
    dnRouter(cfg-action-police-tr3cm)# rate 30 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr2cm
    dnRouter(cfg-action-police-sr2cm)# rate 30 percent
    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-rule-1-action-police)# meter-type sr3cm
    dnRouter(cfg-action-police-sr3cm)# rate 30 percent


**Removing Configuration**

To remove the policer rate:
::

    dnRouter(cfg-action-police-tr3ccm)# no rate 30 percent

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/police/tr3cm/tr3cm.rst

qos policy rule action police meter-type tr3cm
----------------------------------------------

**Minimum user role:** operator

To configure an ingress two rate three color meter traffic policing action.

**Command syntax: meter-type tr3cm**

**Command mode:** config

**Hierarchies**

- qos policy rule action police

**Note**

- You can view the policer rate and bucket size parameters in the 'show qos interface' command.

- The policer bucket size that can be set in the hardware is 50 KB, even if the relative settings calculation arrives at a smaller value. The policer's largest size is set to 255 MB, even if the relative calculation is a larger value. The actual settable values are displayed in the 'show qos interfaces' command.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# police
    dnRouter(cfg-myPolicy1-rule-1-action-police)# meter-type tr3cm


**Removing Configuration**

To remove the meter-type:
::

    dnRouter(cfg-myPolicy1-rule-1-action-police)# no meter-type

**Command History**

+---------+--------------------------------------------------------------+
| Release | Modification                                                 |
+=========+==============================================================+
| 13.1    | Command introduced                                           |
+---------+--------------------------------------------------------------+
| 16.1    | Split from the generic qos-policy-action-police-rate command |
+---------+--------------------------------------------------------------+

---

## policy/rule/action/queue/af/af.rst

qos policy rule action queue forwarding-class af
------------------------------------------------

**Minimum user role:** operator

To configure the af queue forwarding-class for the matched traffic:

**Command syntax: forwarding-class af**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue

**Note**

- Up to 6 af forwarding-class queues can be used, with a total of 8 queues.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af


**Removing Configuration**

To remove the queue configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue)# no af

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/af/bandwidth_percent.rst

qos policy rule action queue forwarding-class af bandwidth percent
------------------------------------------------------------------

**Minimum user role:** operator

Queue actions create a queue through which to send traffic that meet the rule's matching criteria. For additional information on queues, see "Forwarding Classes and Queues". This command creates a queue for the specified traffic-class with specific bandwidth values. For priority queues (ef, hp, and sef), the "max-bandwidth" parameter is configured to prevent starvation of the lower priority queues. For af and df queues, the "bandwidth" parameter determines the ratio of the shared bandwidth that each queue can use.

For the af and df queues, if the total bandwidth does not equal 100%, the remaining bandwidth that is not configured, is distributed among the queues according to their relative weight.

For example if the bandwidth allocations of the af and df queues are set to 5%, 10%, 20%, and 40% (total of 75%), the remaining 25% of the bandwidth will be shared in proportion among the queues, as if the queues were configured with 6.66%, 13.33%, 26.66%, 53.33% bandwidth settings.

To create a queue per traffic-class:

**Command syntax: bandwidth [bandwidth-percent] percent**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class af

**Note**

- max-bandwidth is applicable to sef, hp, and ef forwarding classes only. When the maximum rate is crossed, packets will be dropped to avoid starvation of the lower priority queues.

- bandwidth is applicable to the af and df forwarding classes only. The queue action for the df forwarding-class is available for the default rule only.

- The burst-value is configured implicitly by the system when configuring "max-bandwidth" with a value of 20% of max-bandwidth.

- Up to 6 af forwarding-class queues can be used, with a total of 8 queues.

- Only one queue action for super-ef forwarding-class is allowed per policy.

- Only one queue action for ef forwarding-class is allowed per policy.

- Only one queue action for hp forwarding-class is allowed per policy.

- Queue action for df forwarding-class is available in rule default only.

**Parameter table**

+-------------------+---------------------------------+-------+---------+
| Parameter         | Description                     | Range | Default |
+===================+=================================+=======+=========+
| bandwidth-percent | scheduler WRR weight in precent | 1-100 | \-      |
+-------------------+---------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# bandwidth 20 percent


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no bandwidth

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 11.2    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 15.1    | Added support for hp (high-priority) forwarding class |
+---------+-------------------------------------------------------+

---

## policy/rule/action/queue/af/delay-behavior.rst

qos policy rule action queue forwarding-class af delay-behavior
---------------------------------------------------------------

**Minimum user role:** operator

To configure the delay behavior of a specific queue:

**Command syntax: delay-behavior [delay-behavior]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class af

**Parameter table**

+----------------+----------------------+---------------+---------+
| Parameter      | Description          | Range         | Default |
+================+======================+===============+=========+
| delay-behavior | queue delay behavior | | low-delay   | \-      |
|                |                      | | normal      |         |
+----------------+----------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# delay-behavior low-delay


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no delay-behavior

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/af/ecn-profile.rst

qos policy rule action queue forwarding-class af ecn-profile
------------------------------------------------------------

**Minimum user role:** operator

To attach an existing profile to a specific queue:

**Command syntax: ecn-profile [ecn-profile]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class af

**Parameter table**

+-------------+---------------------------------+------------------+---------+
| Parameter   | Description                     | Range            | Default |
+=============+=================================+==================+=========+
| ecn-profile | References the ecn-profile name | | string         | \-      |
|             |                                 | | length 1-255   |         |
+-------------+---------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# ecn-profile my_profile


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no ecn-profile

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/af/low-delay-priority.rst

qos policy rule action queue forwarding-class af low-delay-priority
-------------------------------------------------------------------

**Minimum user role:** operator

To configure the low-delay-priority of a specific queue:

**Command syntax: low-delay-priority [low-delay-priority]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class af

**Parameter table**

+--------------------+--------------------------+----------+---------+
| Parameter          | Description              | Range    | Default |
+====================+==========================+==========+=========+
| low-delay-priority | queue low-delay-priority | | high   | \-      |
|                    |                          | | low    |         |
+--------------------+--------------------------+----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# low-delay-priority high


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no low-delay-priority

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/af/size_microseconds.rst

qos policy rule action queue forwarding-class af size
-----------------------------------------------------

**Minimum user role:** operator

The configured size of the queue determines when packets (marked as either green or yellow) are tail-dropped once the queue reaches the configured queue size.

You can optionally set a smaller tail-drop threshold for yellow packets.

The queue size is configured in either milliseconds or microseconds. The actual size of the queue is measured in bytes. The conversion is calculated as follows:

For af/df forwarding classes: - according to port speed

[(port speed x queue-size) x (knob-unit)]/8

Example 1 - for milliseconds:

port speed = 100 Gbps

queue-size = 20 milliseconds => knob-unit 1/1000

[(100 Gbps x 20 ms) x 1/1000] / 8 = 0.25 GB (= 250 MB)

Example 2 - for microseconds:

port speed = 100 Gbps

queue-size = 20,000 microseconds => knob-unit 1/1,000,000

[(100 Gbps x 20 s) x 1/1,000,000] / 8 = 0.25 GB (= 250 MB)

For sef/ef forwarding classes: - according to max bandwidth

Same calculation as for af/df queues, multiplied by the shaper value (max-bandwidth).

port speed = 100 Gbps

queue-size = 20 milliseconds => knob-unit 1/1000

max-bandwidth = 25%

[(100 Gbps x 2 ms) x 1/1000] / 8 = 0.025 GB (= 25 MB) x 25% = 6.25 MB

To configure the queue size for the rule, use the following command:

**Command syntax: size [queue-size-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class af

**Note**

- If not explicitly set, the yellow-size tail-drop threshold is equal to total queue size.

**Parameter table**

+-------------------------+----------------------------+------------------+--------------+
| Parameter               | Description                | Range            | Default      |
+=========================+============================+==================+==============+
| queue-size-microseconds | queue size in microseconds | 1-80000          | 50000        |
+-------------------------+----------------------------+------------------+--------------+
| units                   |                            | | microseconds   | microseconds |
|                         |                            | | milliseconds   |              |
+-------------------------+----------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# size 500 milliseconds


**Removing Configuration**

To revert ot the default value:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no size

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 11.2    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 15.1    | Added support for hp (high-priority) forwarding class |
+---------+-------------------------------------------------------+

---

## policy/rule/action/queue/af/wred-profile.rst

qos policy rule action queue forwarding-class af wred-profile
-------------------------------------------------------------

**Minimum user role:** operator

To attach an existing profile to a specific queue:

**Command syntax: wred-profile [wred-profile]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class af

**Parameter table**

+--------------+----------------------------------+------------------+---------+
| Parameter    | Description                      | Range            | Default |
+==============+==================================+==================+=========+
| wred-profile | References the wred-profile name | | string         | \-      |
|              |                                  | | length 1-255   |         |
+--------------+----------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# wred-profile my_profile


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no wred-profile

**Command History**

+---------+----------------------------------------------------------+
| Release | Modification                                             |
+=========+==========================================================+
| 11.4    | Command introduced                                       |
+---------+----------------------------------------------------------+
| 15.1    | Added support for hp, ef and super-ef forwarding classes |
+---------+----------------------------------------------------------+

---

## policy/rule/action/queue/af/yellow_size_microseconds.rst

qos policy rule action queue forwarding-class af yellow-size
------------------------------------------------------------

**Minimum user role:** operator

The configured size of the queue determines when packets (marked as either green or yellow) are tail-dropped once the queue reaches the configured queue size.

You can optionally set a smaller tail-drop threshold for yellow packets.

The queue size is configured in either milliseconds or microseconds.

To configure the queue size for the rule, use the following command:

**Command syntax: yellow-size [yellow-tail-drop-threshold-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class af

**Note**

- If not explicitly set, the yellow-size tail-drop threshold is equal to total queue size.

**Parameter table**

+-----------------------------------------+---------------------------------------+------------------+--------------+
| Parameter                               | Description                           | Range            | Default      |
+=========================================+=======================================+==================+==============+
| yellow-tail-drop-threshold-microseconds | yellow drop threshold in microseconds | 1-80000          | \-           |
+-----------------------------------------+---------------------------------------+------------------+--------------+
| units                                   |                                       | | microseconds   | microseconds |
|                                         |                                       | | milliseconds   |              |
+-----------------------------------------+---------------------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# yellow-size 500 milliseconds


**Removing Configuration**

To revert ot the default value:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no yellow-size

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 11.2    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 15.1    | Added support for hp (high-priority) forwarding class |
+---------+-------------------------------------------------------+

---

## policy/rule/action/queue/df/bandwidth_percent.rst

qos policy rule action queue forwarding-class df bandwidth percent
------------------------------------------------------------------

**Minimum user role:** operator

Queue actions create a queue through which to send traffic that meet the rule's matching criteria. For additional information on queues, see "Forwarding Classes and Queues". This command creates a queue for the specified traffic-class with specific bandwidth values. For priority queues (ef, hp, and sef), the "max-bandwidth" parameter is configured to prevent starvation of the lower priority queues. For af and df queues, the "bandwidth" parameter determines the ratio of the shared bandwidth that each queue can use.

For the af and df queues, if the total bandwidth does not equal 100%, the remaining bandwidth that is not configured, is distributed among the queues according to their relative weight.

For example if the bandwidth allocations of the af and df queues are set to 5%, 10%, 20%, and 40% (total of 75%), the remaining 25% of the bandwidth will be shared in proportion among the queues, as if the queues were configured with 6.66%, 13.33%, 26.66%, 53.33% bandwidth settings.

To create a queue per traffic-class:

**Command syntax: bandwidth [bandwidth-percent] percent**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class df

**Note**

- max-bandwidth is applicable to sef, hp, and ef forwarding classes only. When the maximum rate is crossed, packets will be dropped to avoid starvation of the lower priority queues.

- bandwidth is applicable to the af and df forwarding classes only. The queue action for the df forwarding-class is available for the default rule only.

- The burst-value is configured implicitly by the system when configuring "max-bandwidth" with a value of 20% of max-bandwidth.

- Up to 6 af forwarding-class queues can be used, with a total of 8 queues.

- Only one queue action for super-ef forwarding-class is allowed per policy.

- Only one queue action for ef forwarding-class is allowed per policy.

- Only one queue action for hp forwarding-class is allowed per policy.

- Queue action for df forwarding-class is available in rule default only.

**Parameter table**

+-------------------+---------------------------------+-------+---------+
| Parameter         | Description                     | Range | Default |
+===================+=================================+=======+=========+
| bandwidth-percent | scheduler WRR weight in precent | 1-100 | 5       |
+-------------------+---------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# bandwidth 20 percent


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no bandwidth

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 11.2    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 15.1    | Added support for hp (high-priority) forwarding class |
+---------+-------------------------------------------------------+

---

## policy/rule/action/queue/df/delay-behavior.rst

qos policy rule action queue forwarding-class df delay-behavior
---------------------------------------------------------------

**Minimum user role:** operator

To configure delay behavior of a specific queue:

**Command syntax: delay-behavior [delay-behavior]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class df

**Parameter table**

+----------------+----------------------+---------------+---------+
| Parameter      | Description          | Range         | Default |
+================+======================+===============+=========+
| delay-behavior | queue delay behavior | | low-delay   | \-      |
|                |                      | | normal      |         |
+----------------+----------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# delay-behavior low-delay


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no delay-behavior

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/df/df.rst

qos policy rule action queue forwarding-class df
------------------------------------------------

**Minimum user role:** operator

To configure the df queue forwarding-class for the matched traffic.

**Command syntax: forwarding-class df**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue

**Note**

- Queue action for df forwarding-class is available in rule default only.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# df


**Removing Configuration**

To remove the queue configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue)# no df

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/df/ecn-profile.rst

qos policy rule action queue forwarding-class df ecn-profile
------------------------------------------------------------

**Minimum user role:** operator

To attach an existing profile to a specific queue:

**Command syntax: ecn-profile [ecn-profile]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class df

**Parameter table**

+-------------+---------------------------------+------------------+---------+
| Parameter   | Description                     | Range            | Default |
+=============+=================================+==================+=========+
| ecn-profile | References the ecn-profile name | | string         | \-      |
|             |                                 | | length 1-255   |         |
+-------------+---------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# df
    dnRouter(cfg-myPolicy1-rule-1-action-queue-df)# ecn-profile my_profile


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-df)# no ecn-profile

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/df/low-delay-priority.rst

qos policy rule action queue forwarding-class df low-delay-priority
-------------------------------------------------------------------

**Minimum user role:** operator

To configure the low-delay-priority of a specific queue:

**Command syntax: low-delay-priority [low-delay-priority]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class df

**Parameter table**

+--------------------+--------------------------+----------+---------+
| Parameter          | Description              | Range    | Default |
+====================+==========================+==========+=========+
| low-delay-priority | queue low-delay-priority | | high   | \-      |
|                    |                          | | low    |         |
+--------------------+--------------------------+----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# low-delay-priority high


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no low-delay-priority

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/df/size_microseconds.rst

qos policy rule action queue forwarding-class df size
-----------------------------------------------------

**Minimum user role:** operator

The configured size of the queue determines when packets (marked as either green or yellow) are tail-dropped once the queue reaches the configured queue size.

You can optionally set a smaller tail-drop threshold for yellow packets.

The queue size is configured in either milliseconds or microseconds. The actual size of the queue is measured in bytes. The conversion is calculated as follows:

For af/df forwarding classes: - according to port speed

[(port speed x queue-size) x (knob-unit)]/8

Example 1 - for milliseconds:

port speed = 100 Gbps

queue-size = 20 milliseconds => knob-unit 1/1000

[(100 Gbps x 20 ms) x 1/1000] / 8 = 0.25 GB (= 250 MB)

Example 2 - for microseconds:

port speed = 100 Gbps

queue-size = 20,000 microseconds => knob-unit 1/1,000,000

[(100 Gbps x 20 s) x 1/1,000,000] / 8 = 0.25 GB (= 250 MB)

For sef/ef forwarding classes: - according to max bandwidth

Same calculation as for af/df queues, multiplied by the shaper value (max-bandwidth).

port speed = 100 Gbps

queue-size = 20 milliseconds => knob-unit 1/1000

max-bandwidth = 25%

[(100 Gbps x 2 ms) x 1/1000] / 8 = 0.025 GB (= 25 MB) x 25% = 6.25 MB

To configure the queue size for the rule, use the following command:

**Command syntax: size [queue-size-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class df

**Note**

- If not explicitly set, the yellow-size tail-drop threshold is equal to total queue size.

**Parameter table**

+-------------------------+----------------------------+------------------+--------------+
| Parameter               | Description                | Range            | Default      |
+=========================+============================+==================+==============+
| queue-size-microseconds | queue size in microseconds | 1-80000          | 50000        |
+-------------------------+----------------------------+------------------+--------------+
| units                   |                            | | microseconds   | microseconds |
|                         |                            | | milliseconds   |              |
+-------------------------+----------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# size 500 milliseconds


**Removing Configuration**

To revert ot the default value:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no size

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 11.2    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 15.1    | Added support for hp (high-priority) forwarding class |
+---------+-------------------------------------------------------+

---

## policy/rule/action/queue/df/wred-profile.rst

qos policy rule action queue forwarding-class df wred-profile
-------------------------------------------------------------

**Minimum user role:** operator

To attach an existing profile to a specific queue:

**Command syntax: wred-profile [wred-profile]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class df

**Parameter table**

+--------------+----------------------------------+------------------+---------+
| Parameter    | Description                      | Range            | Default |
+==============+==================================+==================+=========+
| wred-profile | References the wred-profile name | | string         | \-      |
|              |                                  | | length 1-255   |         |
+--------------+----------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# wred-profile my_profile


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no wred-profile

**Command History**

+---------+----------------------------------------------------------+
| Release | Modification                                             |
+=========+==========================================================+
| 11.4    | Command introduced                                       |
+---------+----------------------------------------------------------+
| 15.1    | Added support for hp, ef and super-ef forwarding classes |
+---------+----------------------------------------------------------+

---

## policy/rule/action/queue/df/yellow_size_microseconds.rst

qos policy rule action queue forwarding-class df yellow-size
------------------------------------------------------------

**Minimum user role:** operator

The configured size of the queue determines when packets (marked as either green or yellow) are tail-dropped once the queue reaches the configured queue size.

You can optionally set a smaller tail-drop threshold for yellow packets.

The queue size is configured in either milliseconds or microseconds.

To configure the queue size for the rule, use the following command:

**Command syntax: yellow-size [yellow-tail-drop-threshold-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class df

**Note**

- If not explicitly set, the yellow-size tail-drop threshold is equal to total queue size.

**Parameter table**

+-----------------------------------------+---------------------------------------+------------------+--------------+
| Parameter                               | Description                           | Range            | Default      |
+=========================================+=======================================+==================+==============+
| yellow-tail-drop-threshold-microseconds | yellow drop threshold in microseconds | 1-80000          | \-           |
+-----------------------------------------+---------------------------------------+------------------+--------------+
| units                                   |                                       | | microseconds   | microseconds |
|                                         |                                       | | milliseconds   |              |
+-----------------------------------------+---------------------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# yellow-size 500 milliseconds


**Removing Configuration**

To revert ot the default value:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no yellow-size

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 11.2    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 15.1    | Added support for hp (high-priority) forwarding class |
+---------+-------------------------------------------------------+

---

## policy/rule/action/queue/ef/delay-behavior.rst

qos policy rule action queue forwarding-class ef delay-behavior
---------------------------------------------------------------

**Minimum user role:** operator

To configure the delay behavior of a specific queue:

**Command syntax: delay-behavior [delay-behavior]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class ef

**Parameter table**

+----------------+----------------------+---------------+---------+
| Parameter      | Description          | Range         | Default |
+================+======================+===============+=========+
| delay-behavior | queue delay behavior | | low-delay   | \-      |
|                |                      | | normal      |         |
+----------------+----------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# delay-behavior low-delay


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no delay-behavior

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/ef/ecn-profile.rst

qos policy rule action queue forwarding-class ef ecn-profile
------------------------------------------------------------

**Minimum user role:** operator

To attach an existing profile to a specific queue:

**Command syntax: ecn-profile [ecn-profile]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class ef

**Parameter table**

+-------------+---------------------------------+------------------+---------+
| Parameter   | Description                     | Range            | Default |
+=============+=================================+==================+=========+
| ecn-profile | References the ecn-profile name | | string         | \-      |
|             |                                 | | length 1-255   |         |
+-------------+---------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# ef
    dnRouter(cfg-myPolicy1-rule-1-action-queue-ef)# ecn-profile my_profile


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-ef)# no ecn-profile

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/ef/ef.rst

qos policy rule action queue forwarding-class ef
------------------------------------------------

**Minimum user role:** operator

To configure the ef queue forwarding-class for the matched traffic.

**Command syntax: forwarding-class ef**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue

**Note**

- Only one queue action for ef forwarding-class is allowed per policy.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# ef


**Removing Configuration**

To remove the queue configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue)# no ef

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/ef/low-delay-priority.rst

qos policy rule action queue forwarding-class ef low-delay-priority
-------------------------------------------------------------------

**Minimum user role:** operator

To configure the low-delay-priority of a specific queue:

**Command syntax: low-delay-priority [low-delay-priority]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class ef

**Parameter table**

+--------------------+--------------------------+----------+---------+
| Parameter          | Description              | Range    | Default |
+====================+==========================+==========+=========+
| low-delay-priority | queue low-delay-priority | | high   | \-      |
|                    |                          | | low    |         |
+--------------------+--------------------------+----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# low-delay-priority high


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no low-delay-priority

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/ef/max-bandwidth_precent.rst

qos policy rule action queue forwarding-class ef max-bandwidth percent
----------------------------------------------------------------------

**Minimum user role:** operator

Queue actions create a queue through which to send traffic that meet the rule's matching criteria. For additional information on queues, see "Forwarding Classes and Queues". This command creates a queue for the specified traffic-class with specific bandwidth values. For priority queues (ef, hp, and sef), the "max-bandwidth" parameter is configured to prevent starvation of the lower priority queues. For af and df queues, the "bandwidth" parameter determines the ratio of the shared bandwidth that each queue can use.

For the af and df queues, if the total bandwidth does not equal 100%, the remaining bandwidth that is not configured, is distributed among the queues according to their relative weight.

 For example if the bandwidth allocations of the af and df queues are set to 5%, 10%, 20%, and 40% (total of 75%), the remaining 25% of the bandwidth will be shared in proportion among the queues, as if the queues were configured with 6.66%, 13.33%, 26.66%, 53.33% bandwidth settings.

To create a queue per traffic-class:

**Command syntax: max-bandwidth [max-bandwidth-percent] percent**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class ef

**Note**

- max-bandwidth is applicable to sef, hp, and ef forwarding classes only. When the maximum rate is crossed, packets will be dropped to avoid starvation of the lower priority queues.

- bandwidth is applicable to the af and df forwarding classes only. The queue action for the df forwarding-class is available for the default rule only.

- The burst-value is configured implicitly by the system when configuring "max-bandwidth" with a value of 20% of max-bandwidth.

**Parameter table**

+-----------------------+------------------------+-------+---------+
| Parameter             | Description            | Range | Default |
+=======================+========================+=======+=========+
| max-bandwidth-percent | shaper rate in precent | 0-100 | \-      |
+-----------------------+------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# max-bandwidth 20 percent


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no max-bandwidth

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/ef/size_microseconds.rst

qos policy rule action queue forwarding-class ef size
-----------------------------------------------------

**Minimum user role:** operator

The configured size of the queue determines when packets (marked as either green or yellow) are tail-dropped once the queue reaches the configured queue size.

You can optionally set a smaller tail-drop threshold for yellow packets.

The queue size is configured in either milliseconds or microseconds. The actual size of the queue is measured in bytes. The conversion is calculated as follows:

For af/df forwarding classes: - according to port speed

[(port speed x queue-size) x (knob-unit)]/8

Example 1 - for milliseconds:

port speed = 100 Gbps

queue-size = 20 milliseconds => knob-unit 1/1000

[(100 Gbps x 20 ms) x 1/1000] / 8 = 0.25 GB (= 250 MB)

Example 2 - for microseconds:

port speed = 100 Gbps

queue-size = 20,000 microseconds => knob-unit 1/1,000,000

[(100 Gbps x 20 s) x 1/1,000,000] / 8 = 0.25 GB (= 250 MB)

For sef/ef forwarding classes: - according to max bandwidth

Same calculation as for af/df queues, multiplied by the shaper value (max-bandwidth).

port speed = 100 Gbps

queue-size = 20 milliseconds => knob-unit 1/1000

max-bandwidth = 25%

[(100 Gbps x 2 ms) x 1/1000] / 8 = 0.025 GB (= 25 MB) x 25% = 6.25 MB

To configure the queue size for the rule, use the following command:

**Command syntax: size [queue-size-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class ef

**Note**

- If not explicitly set, the yellow-size tail-drop threshold is equal to total queue size.

**Parameter table**

+-------------------------+----------------------------+------------------+--------------+
| Parameter               | Description                | Range            | Default      |
+=========================+============================+==================+==============+
| queue-size-microseconds | queue size in microseconds | 1-80000          | 10000        |
+-------------------------+----------------------------+------------------+--------------+
| units                   |                            | | microseconds   | microseconds |
|                         |                            | | milliseconds   |              |
+-------------------------+----------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# size 500 milliseconds


**Removing Configuration**

To revert ot the default value:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no size

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 11.2    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 15.1    | Added support for hp (high-priority) forwarding class |
+---------+-------------------------------------------------------+

---

## policy/rule/action/queue/ef/wred-profile.rst

qos policy rule action queue forwarding-class ef wred-profile
-------------------------------------------------------------

**Minimum user role:** operator

To attach an existing profile to a specific queue:

**Command syntax: wred-profile [wred-profile]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class ef

**Parameter table**

+--------------+----------------------------------+------------------+---------+
| Parameter    | Description                      | Range            | Default |
+==============+==================================+==================+=========+
| wred-profile | References the wred-profile name | | string         | \-      |
|              |                                  | | length 1-255   |         |
+--------------+----------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# wred-profile my_profile


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no wred-profile

**Command History**

+---------+----------------------------------------------------------+
| Release | Modification                                             |
+=========+==========================================================+
| 11.4    | Command introduced                                       |
+---------+----------------------------------------------------------+
| 15.1    | Added support for hp, ef and super-ef forwarding classes |
+---------+----------------------------------------------------------+

---

## policy/rule/action/queue/ef/yellow_size_microseconds.rst

qos policy rule action queue forwarding-class ef yellow-size
------------------------------------------------------------

**Minimum user role:** operator

The configured size of the queue determines when packets (marked as either green or yellow) are tail-dropped once the queue reaches the configured queue size.

You can optionally set a smaller tail-drop threshold for yellow packets.

The queue size is configured in either milliseconds or microseconds.

To configure the queue size for the rule, use the following command:

**Command syntax: yellow-size [yellow-tail-drop-threshold-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class ef

**Note**

- If not explicitly set, the yellow-size tail-drop threshold is equal to total queue size.

**Parameter table**

+-----------------------------------------+---------------------------------------+------------------+--------------+
| Parameter                               | Description                           | Range            | Default      |
+=========================================+=======================================+==================+==============+
| yellow-tail-drop-threshold-microseconds | yellow drop threshold in microseconds | 1-80000          | \-           |
+-----------------------------------------+---------------------------------------+------------------+--------------+
| units                                   |                                       | | microseconds   | microseconds |
|                                         |                                       | | milliseconds   |              |
+-----------------------------------------+---------------------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# yellow-size 500 milliseconds


**Removing Configuration**

To revert ot the default value:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no yellow-size

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 11.2    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 15.1    | Added support for hp (high-priority) forwarding class |
+---------+-------------------------------------------------------+

---

## policy/rule/action/queue/hp/delay-behavior.rst

qos policy rule action queue forwarding-class hp delay-behavior
---------------------------------------------------------------

**Minimum user role:** operator

To configure the delay behavior of a specific queue:

**Command syntax: delay-behavior [delay-behavior]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class hp

**Parameter table**

+----------------+----------------------+---------------+---------+
| Parameter      | Description          | Range         | Default |
+================+======================+===============+=========+
| delay-behavior | queue delay behavior | | low-delay   | \-      |
|                |                      | | normal      |         |
+----------------+----------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# delay-behavior low-delay


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no delay-behavior

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/hp/ecn-profile.rst

qos policy rule action queue forwarding-class hp ecn-profile
------------------------------------------------------------

**Minimum user role:** operator

To attach an existing profile to a specific queue:

**Command syntax: ecn-profile [ecn-profile]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class hp

**Parameter table**

+-------------+---------------------------------+------------------+---------+
| Parameter   | Description                     | Range            | Default |
+=============+=================================+==================+=========+
| ecn-profile | References the ecn-profile name | | string         | \-      |
|             |                                 | | length 1-255   |         |
+-------------+---------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# hp
    dnRouter(cfg-myPolicy1-rule-1-action-queue-hp)# ecn-profile my_profile


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-hp)# no ecn-profile

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/hp/hp.rst

qos policy rule action queue forwarding-class hp
------------------------------------------------

**Minimum user role:** operator

To configure the hp queue forwarding-class for the matched traffic.

**Command syntax: forwarding-class hp**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue

**Note**

- Only one queue action for an hp forwarding-class is allowed per policy.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# hp


**Removing Configuration**

To remove the queue configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue)# no hp

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 11.2    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 15.1    | Added support for hp (high-priority) forwarding class |
+---------+-------------------------------------------------------+

---

## policy/rule/action/queue/hp/low-delay-priority.rst

qos policy rule action queue forwarding-class hp low-delay-priority
-------------------------------------------------------------------

**Minimum user role:** operator

To configure the low-delay-priority of a specific queue:

**Command syntax: low-delay-priority [low-delay-priority]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class hp

**Parameter table**

+--------------------+--------------------------+----------+---------+
| Parameter          | Description              | Range    | Default |
+====================+==========================+==========+=========+
| low-delay-priority | queue low-delay-priority | | high   | \-      |
|                    |                          | | low    |         |
+--------------------+--------------------------+----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# low-delay-priority high


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no low-delay-priority

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/hp/max-bandwidth_precent.rst

qos policy rule action queue forwarding-class hp max-bandwidth percent
----------------------------------------------------------------------

**Minimum user role:** operator

Queue actions create a queue through which to send traffic that meet the rule's matching criteria. For additional information on queues, see "Forwarding Classes and Queues". This command creates a queue for the specified traffic-class with specific bandwidth values. For priority queues (ef, hp, and sef), the "max-bandwidth" parameter is configured to prevent starvation of the lower priority queues. For af and df queues, the "bandwidth" parameter determines the ratio of the shared bandwidth that each queue can use.

For the af and df queues, if the total bandwidth does not equal 100%, the remaining bandwidth that is not configured, is distributed among the queues according to their relative weight.

 For example if the bandwidth allocations of the af and df queues are set to 5%, 10%, 20%, and 40% (total of 75%), the remaining 25% of the bandwidth will be shared in proportion among the queues, as if the queues were configured with 6.66%, 13.33%, 26.66%, 53.33% bandwidth settings.

To create a queue per traffic-class:

**Command syntax: max-bandwidth [max-bandwidth-percent] percent**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class hp

**Note**

- max-bandwidth is applicable to sef, hp, and ef forwarding classes only. When the maximum rate is crossed, packets will be dropped to avoid starvation of the lower priority queues.

- bandwidth is applicable to the af and df forwarding classes only. The queue action for the df forwarding-class is available for the default rule only.

- The burst-value is configured implicitly by the system when configuring "max-bandwidth" with a value of 20% of max-bandwidth.

**Parameter table**

+-----------------------+------------------------+-------+---------+
| Parameter             | Description            | Range | Default |
+=======================+========================+=======+=========+
| max-bandwidth-percent | shaper rate in precent | 0-100 | \-      |
+-----------------------+------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# max-bandwidth 20 percent


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no max-bandwidth

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/hp/size_microseconds.rst

qos policy rule action queue forwarding-class hp size
-----------------------------------------------------

**Minimum user role:** operator

The configured size of the queue determines when packets (marked as either green or yellow) are tail-dropped once the queue reaches the configured queue size.

You can optionally set a smaller tail-drop threshold for yellow packets.

The queue size is configured in either milliseconds or microseconds. The actual size of the queue is measured in bytes. The conversion is calculated as follows:

For af/df forwarding classes: - according to port speed

[(port speed x queue-size) x (knob-unit)]/8

Example 1 - for milliseconds:

port speed = 100 Gbps

queue-size = 20 milliseconds => knob-unit 1/1000

[(100 Gbps x 20 ms) x 1/1000] / 8 = 0.25 GB (= 250 MB)

Example 2 - for microseconds:

port speed = 100 Gbps

queue-size = 20,000 microseconds => knob-unit 1/1,000,000

[(100 Gbps x 20 s) x 1/1,000,000] / 8 = 0.25 GB (= 250 MB)

For sef/ef forwarding classes: - according to max bandwidth

Same calculation as for af/df queues, multiplied by the shaper value (max-bandwidth).

port speed = 100 Gbps

queue-size = 20 milliseconds => knob-unit 1/1000

max-bandwidth = 25%

[(100 Gbps x 2 ms) x 1/1000] / 8 = 0.025 GB (= 25 MB) x 25% = 6.25 MB

To configure the queue size for the rule, use the following command:

**Command syntax: size [queue-size-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class hp

**Note**

- If not explicitly set, the yellow-size tail-drop threshold is equal to total queue size.

**Parameter table**

+-------------------------+----------------------------+------------------+--------------+
| Parameter               | Description                | Range            | Default      |
+=========================+============================+==================+==============+
| queue-size-microseconds | queue size in microseconds | 1-80000          | 10000        |
+-------------------------+----------------------------+------------------+--------------+
| units                   |                            | | microseconds   | microseconds |
|                         |                            | | milliseconds   |              |
+-------------------------+----------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# size 500 milliseconds


**Removing Configuration**

To revert ot the default value:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no size

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 11.2    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 15.1    | Added support for hp (high-priority) forwarding class |
+---------+-------------------------------------------------------+

---

## policy/rule/action/queue/hp/wred-profile.rst

qos policy rule action queue forwarding-class hp wred-profile
-------------------------------------------------------------

**Minimum user role:** operator

To attach an existing profile to a specific queue:

**Command syntax: wred-profile [wred-profile]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class hp

**Parameter table**

+--------------+----------------------------------+------------------+---------+
| Parameter    | Description                      | Range            | Default |
+==============+==================================+==================+=========+
| wred-profile | References the wred-profile name | | string         | \-      |
|              |                                  | | length 1-255   |         |
+--------------+----------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# wred-profile my_profile


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no wred-profile

**Command History**

+---------+----------------------------------------------------------+
| Release | Modification                                             |
+=========+==========================================================+
| 11.4    | Command introduced                                       |
+---------+----------------------------------------------------------+
| 15.1    | Added support for hp, ef and super-ef forwarding classes |
+---------+----------------------------------------------------------+

---

## policy/rule/action/queue/hp/yellow_size_microseconds.rst

qos policy rule action queue forwarding-class hp yellow-size
------------------------------------------------------------

**Minimum user role:** operator

The configured size of the queue determines when packets (marked as either green or yellow) are tail-dropped once the queue reaches the configured queue size.

You can optionally set a smaller tail-drop threshold for yellow packets.

The queue size is configured in either milliseconds or microseconds.

To configure the queue size for the rule, use the following command:

**Command syntax: yellow-size [yellow-tail-drop-threshold-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class hp

**Note**

- If not explicitly set, the yellow-size tail-drop threshold is equal to total queue size.

**Parameter table**

+-----------------------------------------+---------------------------------------+------------------+--------------+
| Parameter                               | Description                           | Range            | Default      |
+=========================================+=======================================+==================+==============+
| yellow-tail-drop-threshold-microseconds | yellow drop threshold in microseconds | 1-80000          | \-           |
+-----------------------------------------+---------------------------------------+------------------+--------------+
| units                                   |                                       | | microseconds   | microseconds |
|                                         |                                       | | milliseconds   |              |
+-----------------------------------------+---------------------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# yellow-size 500 milliseconds


**Removing Configuration**

To revert ot the default value:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no yellow-size

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 11.2    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 15.1    | Added support for hp (high-priority) forwarding class |
+---------+-------------------------------------------------------+

---

## policy/rule/action/queue/queue.rst

qos policy rule action queue
----------------------------

**Minimum user role:** operator

To configure the queue for the matched traffic class.

**Command syntax: queue**

**Command mode:** config

**Hierarchies**

- qos policy rule action

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)#


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action)# no queue

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/super-ef/delay-behavior.rst

qos policy rule action queue forwarding-class super-ef delay-behavior
---------------------------------------------------------------------

**Minimum user role:** operator

To configure the delay behavior of a specific queue:

**Command syntax: delay-behavior [delay-behavior]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class super-ef

**Parameter table**

+----------------+----------------------+---------------+---------+
| Parameter      | Description          | Range         | Default |
+================+======================+===============+=========+
| delay-behavior | queue delay behavior | | low-delay   | \-      |
|                |                      | | normal      |         |
+----------------+----------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# delay-behavior low-delay


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no delay-behavior

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/super-ef/ecn-profile.rst

qos policy rule action queue forwarding-class super-ef ecn-profile
------------------------------------------------------------------

**Minimum user role:** operator

To attach an existing profile to a specific queue:

**Command syntax: ecn-profile [ecn-profile]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class super-ef

**Parameter table**

+-------------+---------------------------------+------------------+---------+
| Parameter   | Description                     | Range            | Default |
+=============+=================================+==================+=========+
| ecn-profile | References the ecn-profile name | | string         | \-      |
|             |                                 | | length 1-255   |         |
+-------------+---------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# sef
    dnRouter(cfg-myPolicy1-rule-1-action-queue-sef)# ecn-profile my_profile


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-sef)# no ecn-profile

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/super-ef/low-delay-priority.rst

qos policy rule action queue forwarding-class super-ef low-delay-priority
-------------------------------------------------------------------------

**Minimum user role:** operator

To configure the low-delay-priority of a specific queue:

**Command syntax: low-delay-priority [low-delay-priority]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class super-ef

**Parameter table**

+--------------------+--------------------------+----------+---------+
| Parameter          | Description              | Range    | Default |
+====================+==========================+==========+=========+
| low-delay-priority | queue low-delay-priority | | high   | \-      |
|                    |                          | | low    |         |
+--------------------+--------------------------+----------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# low-delay-priority high


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no low-delay-priority

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/super-ef/max-bandwidth_precent.rst

qos policy rule action queue forwarding-class super-ef max-bandwidth percent
----------------------------------------------------------------------------

**Minimum user role:** operator

Queue actions create a queue through which to send traffic that meet the rule's matching criteria. For additional information on queues, see "Forwarding Classes and Queues". This command creates a queue for the specified traffic-class with specific bandwidth values. For priority queues (ef, hp, and sef), the "max-bandwidth" parameter is configured to prevent starvation of the lower priority queues. For af and df queues, the "bandwidth" parameter determines the ratio of the shared bandwidth that each queue can use.

For the af and df queues, if the total bandwidth does not equal 100%, the remaining bandwidth that is not configured, is distributed among the queues according to their relative weight.

 For example if the bandwidth allocations of the af and df queues are set to 5%, 10%, 20%, and 40% (total of 75%), the remaining 25% of the bandwidth will be shared in proportion among the queues, as if the queues were configured with 6.66%, 13.33%, 26.66%, 53.33% bandwidth settings.

To create a queue per traffic-class:

**Command syntax: max-bandwidth [max-bandwidth-percent] percent**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class super-ef

**Note**

- max-bandwidth is applicable to sef, hp, and ef forwarding classes only. When the maximum rate is crossed, packets will be dropped to avoid starvation of the lower priority queues.

- bandwidth is applicable to the af and df forwarding classes only. The queue action for the df forwarding-class is available for the default rule only.

- The burst-value is configured implicitly by the system when configuring "max-bandwidth" with a value of 20% of max-bandwidth.

**Parameter table**

+-----------------------+------------------------+-------+---------+
| Parameter             | Description            | Range | Default |
+=======================+========================+=======+=========+
| max-bandwidth-percent | shaper rate in precent | 0-100 | \-      |
+-----------------------+------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# max-bandwidth 20 percent


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no max-bandwidth

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/super-ef/size_microseconds.rst

qos policy rule action queue forwarding-class super-ef size
-----------------------------------------------------------

**Minimum user role:** operator

The configured size of the queue determines when packets (marked as either green or yellow) are tail-dropped once the queue reaches the configured queue size.

You can optionally set a smaller tail-drop threshold for yellow packets.

The queue size is configured in either milliseconds or microseconds. The actual size of the queue is measured in bytes. The conversion is calculated as follows:

For af/df forwarding classes: - according to port speed

[(port speed x queue-size) x (knob-unit)]/8

Example 1 - for milliseconds:

port speed = 100 Gbps

queue-size = 20 milliseconds => knob-unit 1/1000

[(100 Gbps x 20 ms) x 1/1000] / 8 = 0.25 GB (= 250 MB)

Example 2 - for microseconds:

port speed = 100 Gbps

queue-size = 20,000 microseconds => knob-unit 1/1,000,000

[(100 Gbps x 20 s) x 1/1,000,000] / 8 = 0.25 GB (= 250 MB)

For sef/ef forwarding classes: - according to max bandwidth

Same calculation as for af/df queues, multiplied by the shaper value (max-bandwidth).

port speed = 100 Gbps

queue-size = 20 milliseconds => knob-unit 1/1000

max-bandwidth = 25%

[(100 Gbps x 2 ms) x 1/1000] / 8 = 0.025 GB (= 25 MB) x 25% = 6.25 MB

To configure the queue size for the rule, use the following command:

**Command syntax: size [queue-size-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class super-ef

**Note**

- If not explicitly set, the yellow-size tail-drop threshold is equal to total queue size.

**Parameter table**

+-------------------------+----------------------------+------------------+--------------+
| Parameter               | Description                | Range            | Default      |
+=========================+============================+==================+==============+
| queue-size-microseconds | queue size in microseconds | 1-80000          | 10000        |
+-------------------------+----------------------------+------------------+--------------+
| units                   |                            | | microseconds   | microseconds |
|                         |                            | | milliseconds   |              |
+-------------------------+----------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# size 500 milliseconds


**Removing Configuration**

To revert ot the default value:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no size

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 11.2    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 15.1    | Added support for hp (high-priority) forwarding class |
+---------+-------------------------------------------------------+

---

## policy/rule/action/queue/super-ef/super-ef.rst

qos policy rule action queue forwarding-class super-ef
------------------------------------------------------

**Minimum user role:** operator

To configure the super-ef queue forwarding-class for the matched traffic.

**Command syntax: forwarding-class super-ef**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue

**Note**

- Only one queue action for a super-ef forwarding-class is allowed per policy.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# super-ef


**Removing Configuration**

To remove the queue configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue)# no super-ef

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/queue/super-ef/wred-profile.rst

qos policy rule action queue forwarding-class super-ef wred-profile
-------------------------------------------------------------------

**Minimum user role:** operator

To attach an existing profile to a specific queue:

**Command syntax: wred-profile [wred-profile]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class super-ef

**Parameter table**

+--------------+----------------------------------+------------------+---------+
| Parameter    | Description                      | Range            | Default |
+==============+==================================+==================+=========+
| wred-profile | References the wred-profile name | | string         | \-      |
|              |                                  | | length 1-255   |         |
+--------------+----------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# wred-profile my_profile


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no wred-profile

**Command History**

+---------+----------------------------------------------------------+
| Release | Modification                                             |
+=========+==========================================================+
| 11.4    | Command introduced                                       |
+---------+----------------------------------------------------------+
| 15.1    | Added support for hp, ef and super-ef forwarding classes |
+---------+----------------------------------------------------------+

---

## policy/rule/action/queue/super-ef/yellow_size_microseconds.rst

qos policy rule action queue forwarding-class super-ef yellow-size
------------------------------------------------------------------

**Minimum user role:** operator

The configured size of the queue determines when packets (marked as either green or yellow) are tail-dropped once the queue reaches the configured queue size.

You can optionally set a smaller tail-drop threshold for yellow packets.

The queue size is configured in either milliseconds or microseconds.

To configure the queue size for the rule, use the following command:

**Command syntax: yellow-size [yellow-tail-drop-threshold-microseconds] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action queue forwarding-class super-ef

**Note**

- If not explicitly set, the yellow-size tail-drop threshold is equal to total queue size.

**Parameter table**

+-----------------------------------------+---------------------------------------+------------------+--------------+
| Parameter                               | Description                           | Range            | Default      |
+=========================================+=======================================+==================+==============+
| yellow-tail-drop-threshold-microseconds | yellow drop threshold in microseconds | 1-80000          | \-           |
+-----------------------------------------+---------------------------------------+------------------+--------------+
| units                                   |                                       | | microseconds   | microseconds |
|                                         |                                       | | milliseconds   |              |
+-----------------------------------------+---------------------------------------+------------------+--------------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# queue forwarding-class
    dnRouter(cfg-myPolicy1-rule-1-action-queue)# af
    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# yellow-size 500 milliseconds


**Removing Configuration**

To revert ot the default value:
::

    dnRouter(cfg-myPolicy1-rule-1-action-queue-af)# no yellow-size

**Command History**

+---------+-------------------------------------------------------+
| Release | Modification                                          |
+=========+=======================================================+
| 11.2    | Command introduced                                    |
+---------+-------------------------------------------------------+
| 15.1    | Added support for hp (high-priority) forwarding class |
+---------+-------------------------------------------------------+

---

## policy/rule/action/set/drop-tag.rst

qos policy rule action set drop-tag
-----------------------------------

**Minimum user role:** operator

Actions set a new value for specific parameters. If a set drop-tag is not configured, a drop priority green is assigned.

To create a set action:

**Command syntax: drop-tag [drop-tag]**

**Command mode:** config

**Hierarchies**

- qos policy rule action set

**Note**

- You can define multiple set actions per rule.

**Parameter table**

+-----------+---------------------+------------+---------+
| Parameter | Description         | Range      | Default |
+===========+=====================+============+=========+
| drop-tag  | Drop priority color | | green    | \-      |
|           |                     | | yellow   |         |
+-----------+---------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# set
    dnRouter(cfg-myPolicy1-rule-1-action-set)# drop-tag yellow


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-set)# no drop-tag

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+
| 16.1    | Split from the generic QoS Policy Action Set command            |
+---------+-----------------------------------------------------------------+

---

## policy/rule/action/set/dscp-ipv4.rst

qos policy rule action set dscp-ipv4
------------------------------------

**Minimum user role:** operator

To set the DSCP-IPV4 value on egress according to the qos-tag and color:

**Command syntax: dscp-ipv4 [qos-tag] [drop-tag] [dscp-ipv4]**

**Command mode:** config

**Hierarchies**

- qos policy rule action set

**Note**

- You can define multiple set actions per rule.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------+---------+
| Parameter | Description                                                                      | Range      | Default |
+===========+==================================================================================+============+=========+
| qos-tag   | qos-tag identifier or all. usefull when more than one qos-tag is mapped to the   | \-         | \-      |
|           | rule.                                                                            |            |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+
| drop-tag  | drop-tag identifier or all. usefull when more than one color is mapped to the    | | green    | \-      |
|           | rule.                                                                            | | yellow   |         |
|           |                                                                                  | | all      |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+
| dscp-ipv4 | the dscp remark value.                                                           | 0-63       | \-      |
+-----------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# set
    dnRouter(cfg-myPolicy1-rule-1-action-set)# dscp-ipv4 5 green af12


**Removing Configuration**

To remove a set action:
::

    dnRouter(cfg-myPolicy1-rule-1-action-set)# no dscp-ipv4 5 green

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/set/dscp-ipv6.rst

qos policy rule action set dscp-ipv6
------------------------------------

**Minimum user role:** operator

To set the DSCP-IPV6 value on egress according to the qos-tag and color:

**Command syntax: dscp-ipv6 [qos-tag] [drop-tag] [dscp-ipv6]**

**Command mode:** config

**Hierarchies**

- qos policy rule action set

**Note**

- You can define multiple set actions per rule.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------+---------+
| Parameter | Description                                                                      | Range      | Default |
+===========+==================================================================================+============+=========+
| qos-tag   | qos-tag identifier or all. usefull when more than one qos-tag is mapped to the   | \-         | \-      |
|           | rule.                                                                            |            |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+
| drop-tag  | drop-tag identifier or all. usefull when more than one color is mapped to the    | | green    | \-      |
|           | rule.                                                                            | | yellow   |         |
|           |                                                                                  | | all      |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+
| dscp-ipv6 | the dscp remark value.                                                           | 0-63       | \-      |
+-----------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# set
    dnRouter(cfg-myPolicy1-rule-1-action-set)# dscp-ipv6 5 green af12


**Removing Configuration**

To remove a set action:
::

    dnRouter(cfg-myPolicy1-rule-1-action-set)# no dscp-ipv6 5 green

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/set/dscp.rst

qos policy rule action set dscp
-------------------------------

**Minimum user role:** operator

To set the DSCP value on egress according to the qos-tag and color.

**Command syntax: dscp [qos-tag] [drop-tag] [dscp]**

**Command mode:** config

**Hierarchies**

- qos policy rule action set

**Note**

- You can define multiple set actions per rule.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------+---------+
| Parameter | Description                                                                      | Range      | Default |
+===========+==================================================================================+============+=========+
| qos-tag   | qos-tag identifier or all. usefull when more than one qos-tag is mapped to the   | \-         | \-      |
|           | rule.                                                                            |            |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+
| drop-tag  | drop-tag identifier or all. usefull when more than one color is mapped to the    | | green    | \-      |
|           | rule.                                                                            | | yellow   |         |
|           |                                                                                  | | all      |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+
| dscp      | the dscp remark value.                                                           | 0-63       | \-      |
+-----------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# set
    dnRouter(cfg-myPolicy1-rule-1-action-set)# dscp 5 green af12


**Removing Configuration**

To remove a set action:
::

    dnRouter(cfg-myPolicy1-rule-1-action-set)# no dscp 5 green

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+
| 13.0    | Added support for egress and ingress DSCP marking               |
+---------+-----------------------------------------------------------------+
| 16.1    | Split from the generic QoS Policy Action Set command            |
+---------+-----------------------------------------------------------------+

---

## policy/rule/action/set/imposed-ipp.rst

qos policy rule action set imposed-ipp
--------------------------------------

**Minimum user role:** operator

To configure a set action for the matched traffic class.

**Command syntax: imposed-ipp [imposed-ipp]**

**Command mode:** config

**Hierarchies**

- qos policy rule action set

**Note**

- The imposed-ipp is an ingress action only which modifies the IPP bits of an outgoing IP tunnel header.

- You can define multiple set actions per rule.

- Cannot use both set imposed-ipp and set mpls-exp with different values on the same rule.

**Parameter table**

+-------------+---------------------------------------+-------+---------+
| Parameter   | Description                           | Range | Default |
+=============+=======================================+=======+=========+
| imposed-ipp | Imposed-ipp bits to set on ip tunnels | 0-7   | \-      |
+-------------+---------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# set
    dnRouter(cfg-myPolicy1-rule-1-action-set)# imposed-ipp 3


**Removing Configuration**

To remove a set action:
::

    dnRouter(cfg-myPolicy1-rule-1-action-set)# no imposed-ipp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.3    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/set/ipp-ipv4.rst

qos policy rule action set ipp-ipv4
-----------------------------------

**Minimum user role:** operator

To set the IP Precedence-ipv4 value on egress according to the qos-tag and color:

**Command syntax: ipp-ipv4 [qos-tag] [drop-tag] [precedence-ipv4]**

**Command mode:** config

**Hierarchies**

- qos policy rule action set

**Note**

- This action is identical to the set dscp action

- You can define multiple set actions per rule.

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+------------+---------+
| Parameter       | Description                                                                      | Range      | Default |
+=================+==================================================================================+============+=========+
| qos-tag         | qos-tag identifier or all. usefull when more than one qos-tag is mapped to the   | \-         | \-      |
|                 | rule.                                                                            |            |         |
+-----------------+----------------------------------------------------------------------------------+------------+---------+
| drop-tag        | drop-tag identifier or all. usefull when more than one color is mapped to the    | | green    | \-      |
|                 | rule.                                                                            | | yellow   |         |
|                 |                                                                                  | | all      |         |
+-----------------+----------------------------------------------------------------------------------+------------+---------+
| precedence-ipv4 | the ip precedence remark value.                                                  | 0-7        | \-      |
+-----------------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# set
    dnRouter(cfg-myPolicy1-rule-1-action-set)# ipp-ipv4 6 green 0


**Removing Configuration**

To remove a set action:
::

    dnRouter(cfg-myPolicy1-rule-1-action-set)# no ipp-ipv4 6 green

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/set/ipp-ipv6.rst

qos policy rule action set ipp-ipv6
-----------------------------------

**Minimum user role:** operator

To set the IP Precedence-ipv6 value on egress according to the qos-tag and color:

**Command syntax: ipp-ipv6 [qos-tag] [drop-tag] [precedence-ipv6]**

**Command mode:** config

**Hierarchies**

- qos policy rule action set

**Note**

- This action is identical to the set dscp action

- You can define multiple set actions per rule.

**Parameter table**

+-----------------+----------------------------------------------------------------------------------+------------+---------+
| Parameter       | Description                                                                      | Range      | Default |
+=================+==================================================================================+============+=========+
| qos-tag         | qos-tag identifier or all. usefull when more than one qos-tag is mapped to the   | \-         | \-      |
|                 | rule.                                                                            |            |         |
+-----------------+----------------------------------------------------------------------------------+------------+---------+
| drop-tag        | drop-tag identifier or all. usefull when more than one color is mapped to the    | | green    | \-      |
|                 | rule.                                                                            | | yellow   |         |
|                 |                                                                                  | | all      |         |
+-----------------+----------------------------------------------------------------------------------+------------+---------+
| precedence-ipv6 | the ip precedence remark value.                                                  | 0-7        | \-      |
+-----------------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# set
    dnRouter(cfg-myPolicy1-rule-1-action-set)# ipp-ipv6 6 green 0


**Removing Configuration**

To remove a set action:
::

    dnRouter(cfg-myPolicy1-rule-1-action-set)# no ipp-ipv6 6 green

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/set/ipp.rst

qos policy rule action set ipp
------------------------------

**Minimum user role:** operator

To set the IP Precedence value on egress according to the qos-tag and color.

**Command syntax: ipp [qos-tag] [drop-tag] [precedence]**

**Command mode:** config

**Hierarchies**

- qos policy rule action set

**Note**

- This action is identical to set dscp action.

- You can define multiple set actions per rule.

**Parameter table**

+------------+----------------------------------------------------------------------------------+------------+---------+
| Parameter  | Description                                                                      | Range      | Default |
+============+==================================================================================+============+=========+
| qos-tag    | qos-tag identifier or all. usefull when more than one qos-tag is mapped to the   | \-         | \-      |
|            | rule.                                                                            |            |         |
+------------+----------------------------------------------------------------------------------+------------+---------+
| drop-tag   | drop-tag identifier or all. usefull when more than one color is mapped to the    | | green    | \-      |
|            | rule.                                                                            | | yellow   |         |
|            |                                                                                  | | all      |         |
+------------+----------------------------------------------------------------------------------+------------+---------+
| precedence | the ip precedence remark value.                                                  | 0-7        | \-      |
+------------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# set
    dnRouter(cfg-myPolicy1-rule-1-action-set)# ipp 6 green 0


**Removing Configuration**

To remove a set action:
::

    dnRouter(cfg-myPolicy1-rule-1-action-set)# no ipp 6 green

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+
| 16.1    | Split from the generic QoS Policy Action Set command            |
+---------+-----------------------------------------------------------------+

---

## policy/rule/action/set/mpls-exp.rst

qos policy rule action set mpls-exp
-----------------------------------

**Minimum user role:** operator

To configure a set action for the matched traffic class.

**Command syntax: mpls-exp [mpls-exp]**

**Command mode:** config

**Hierarchies**

- qos policy rule action set

**Note**

- The mpls-exp action modifies the EXP bits of an incoming topmost swapped MPLS header. The action can only be set if mpls-swap-exp-edit-mode parameter is set to copy. The MPLS EXP bits are set on the outgoing swapped MPLS header, as well as any additional pushed MPLS headers added at egress.

- You can define multiple set actions per rule.

**Parameter table**

+-----------+----------------------------------+-------+---------+
| Parameter | Description                      | Range | Default |
+===========+==================================+=======+=========+
| mpls-exp  | MPLS topmost EXP bits (TC field) | 0-7   | \-      |
+-----------+----------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# set
    dnRouter(cfg-myPolicy1-rule-1-action-set)# mpls-exp 3


**Removing Configuration**

To remove a set action:
::

    dnRouter(cfg-myPolicy1-rule-1-action-set)# no mpls-exp

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+
| 15.0    | Added support for set mpls-exp                                  |
+---------+-----------------------------------------------------------------+
| 16.1    | Split from the generic QoS Policy Action Set command            |
+---------+-----------------------------------------------------------------+

---

## policy/rule/action/set/pcp-dei.rst

qos policy rule action set pcp-dei
----------------------------------

**Minimum user role:** operator

To set pcp-dei 4 bits in 802.1Q header according to qos-tag and color. The qos-tag is either one of the qos-tag 0..7 assigned to the rule or 'all', to apply to all qos-tags assigned to the rule.

The drop-tag is either green or yellow or all to indicate both.

**Command syntax: pcp-dei [qos-tag] [drop-tag] [pcp-dei]**

**Command mode:** config

**Hierarchies**

- qos policy rule action set

**Note**

- You can define multiple set actions per rule.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------+---------+
| Parameter | Description                                                                      | Range      | Default |
+===========+==================================================================================+============+=========+
| qos-tag   | qos-tag identifier or all. usefull when more than one qos-tag is mapped to the   | \-         | \-      |
|           | rule.                                                                            |            |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+
| drop-tag  | drop-tag identifier or all. usefull when more than one color is mapped to the    | | green    | \-      |
|           | rule.                                                                            | | yellow   |         |
|           |                                                                                  | | all      |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+
| pcp-dei   | the pcp-dei marking value.                                                       | 0-15       | \-      |
+-----------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# set
    dnRouter(cfg-myPolicy1-rule-1-action-set)# pcp-dei all all 15


**Removing Configuration**

To remove a set action:
::

    dnRouter(cfg-myPolicy1-rule-1-action-set)# no pcp-dei

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+
| 15.1    | Added support for pcp-dei (drop eligible indicator)             |
+---------+-----------------------------------------------------------------+
| 16.1    | Split from the generic QoS Policy Action Set command            |
+---------+-----------------------------------------------------------------+

---

## policy/rule/action/set/pcp.rst

qos policy rule action set pcp
------------------------------

**Minimum user role:** operator

To configure the priority code point (pcp) in IEEE 802.1Q header. The qos-tag is either one of the qos-tag 0..7 assigned to the rule or 'all', to apply to all qos-tags assigned to the rule.

The drop-tag is either green or yellow or all to indicate both.

**Command syntax: pcp [qos-tag] [drop-tag] [pcp]**

**Command mode:** config

**Hierarchies**

- qos policy rule action set

**Note**

- You can define multiple set actions per rule.

**Parameter table**

+-----------+----------------------------------------------------------------------------------+------------+---------+
| Parameter | Description                                                                      | Range      | Default |
+===========+==================================================================================+============+=========+
| qos-tag   | qos-tag identifier or all. usefull when more than one qos-tag is mapped to the   | \-         | \-      |
|           | rule.                                                                            |            |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+
| drop-tag  | drop-tag identifier or all. usefull when more than one color is mapped to the    | | green    | \-      |
|           | rule.                                                                            | | yellow   |         |
|           |                                                                                  | | all      |         |
+-----------+----------------------------------------------------------------------------------+------------+---------+
| pcp       | the pcp marking value.                                                           | 0-7        | \-      |
+-----------+----------------------------------------------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# set
    dnRouter(cfg-myPolicy1-rule-1-action-set)# pcp 6 green 0


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-set)# no pcp 6 green

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+
| 16.1    | Split from the generic QoS Policy Action Set command            |
+---------+-----------------------------------------------------------------+

---

## policy/rule/action/set/qos-tag.rst

qos policy rule action set qos-tag
----------------------------------

**Minimum user role:** operator

To classify traffic to a Per Hop Behavior (PHB). The qos-tag 0 is assigned by default if set qos-tag action is not configured.

**Command syntax: qos-tag [qos-tag]**

**Command mode:** config

**Hierarchies**

- qos policy rule action set

**Note**

- You can define multiple set actions per rule.

**Parameter table**

+-----------+------------------------+-------+---------+
| Parameter | Description            | Range | Default |
+===========+========================+=======+=========+
| qos-tag   | QoS-tag priority level | 0-7   | \-      |
+-----------+------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# set
    dnRouter(cfg-myPolicy1-rule-1-action-set)# qos-tag 5


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action-set)# no qos-tag

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+
| 16.1    | Split from the generic QoS Policy Action Set command            |
+---------+-----------------------------------------------------------------+

---

## policy/rule/action/set/set.rst

qos policy rule action set
--------------------------

**Minimum user role:** operator

To configure a set action for the matched traffic class. The actions you can configure are:

Ingress policy actions:
- set qos-tag
- set drop-tag
- set mpls-exp

Egress policy actions:
- set pcp
- set pcp-dei
- set dscp (untrusted interfaces only)
- set ipp (untrusted interfaces only)
- set dscp and set ipp can only be set on egress policies attached to ip-marking untrusted (peering) interfaces. The IP DSCP field is remarked on ingress and egress according to the global qos remarking-map and the qos-tag and drop-tag assigned to the packet. set dscp and set ipp overrides the remarking table on egress. Either set dscp or set ipp actions can be used within the same rule.

Each ingress policy rule must include a set qos-tag action. Rule default sets qos-tag to 0 by default. If set drop-tag is not specified, set drop-tag green is implicitly assumed. Each rule within the policy must specify a different (qos-tag, drop-tag) tuple. This implies that the maximum number of rules configurable in any ingress policy, including rule default, is 16.

The command set mpls-exp modifies the EXP bits of incoming topmost swapped MPLS header. Set mpls-exp action can only be set if mpls-swap-exp-edit-mode parameter is set to copy. The MPLS EXP bits are set on the outgoing swapped MPLS header, as well as any additional pushed MPLS headers added at egress.

**Command syntax: set**

**Command mode:** config

**Hierarchies**

- qos policy rule action

**Note**

- no set removes whole selected action set. For dscp or ipp action, it is possible to remove a set command for a particular dscp (ipp) only, or to a particular dscp (ipp) and color only.

- set pcp is applied on all sub-interfaces of the interface the policy is attached to.

- set actions must be unambiguous and not dependent on order of actions. In particular, you cannot define both an action with all qualifier, e.g. **set dscp all all 5** and another similar set action with specific qos-tag or drop-tag qualifiers, e.g. also dscp 33 all 6, within the same rule.

- You can define multiple set actions per rule.

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy myPolicy1
    dnRouter(cfg-qos-policy-myPolicy1)# rule 1
    dnRouter(cfg-policy-myPolicy1-rule-1)# match traffic-class myTrafficClassMap1
    dnRouter(cfg-policy-myPolicy1-rule-1)# action
    dnRouter(cfg-myPolicy1-rule-1-action)# set
    dnRouter(cfg-myPolicy1-rule-1-action-set)#


**Removing Configuration**

To remove the set configuration:
::

    dnRouter(cfg-myPolicy1-rule-1-action)# no set

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+
| 13.0    | Added support for egress and ingress DSCP marking               |
+---------+-----------------------------------------------------------------+
| 16.1    | Split from the generic QoS Policy Action Set command            |
+---------+-----------------------------------------------------------------+

---

## policy/rule/action/shape/average-rate_kbps.rst

qos policy rule action shape average-rate
-----------------------------------------

**Minimum user role:** operator

Shape the output of an interface or sub-interface to the specified rate. The shape action should be applied on rule default, in a hierarchical policy, and may be used in combination with child-policy action to control queuing and remarking on egress.

**Command syntax: average-rate [average-rate-kbps] [units]**

**Command mode:** config

**Hierarchies**

- qos policy rule action shape

**Parameter table**

+-------------------+---------------------+---------------+---------+
| Parameter         | Description         | Range         | Default |
+===================+=====================+===============+=========+
| average-rate-kbps | shaper average-rate | 64-1000000000 | \-      |
+-------------------+---------------------+---------------+---------+
| units             |                     | | kbps        | kbps    |
|                   |                     | | mbps        |         |
|                   |                     | | gbps        |         |
+-------------------+---------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy MyQoSPolicy1
    dnRouter(cfg-qos-policy-MyQoSPOlicy1)# rule default
    dnRouter(cfg-policy-MyQoSPOlicy1-rule-default)# action
    dnRouter(cfg-MyQSPOlicy1-rule-default-action)# shape
    dnRouter(cfg-rule-default-action-shape)# average-rate 10 gbps


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-rule-default-action-shape)# no average-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/action/shape/average-rate_percent.rst

qos policy rule action shape average-rate percent
-------------------------------------------------

**Minimum user role:** operator

Shape the output of an interface or sub-interface to the specified rate. The shape action should be applied on rule default, in a hierarchical policy, and may be used in combination with child-policy action to control queuing and remarking on egress.

**Command syntax: average-rate [average-rate-percent] percent**

**Command mode:** config

**Hierarchies**

- qos policy rule action shape

**Parameter table**

+----------------------+------------------------+-------+---------+
| Parameter            | Description            | Range | Default |
+======================+========================+=======+=========+
| average-rate-percent | shaper rate in percent | 0-100 | \-      |
+----------------------+------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy MyQoSPolicy1
    dnRouter(cfg-qos-policy-MyQoSPOlicy1)# rule default
    dnRouter(cfg-policy-MyQoSPOlicy1-rule-default)# action
    dnRouter(cfg-MyQSPOlicy1-rule-default-action)# shape
    dnRouter(cfg-rule-default-action-shape)# average-rate 10 percent


**Removing Configuration**

To remove the configuration:
::

    dnRouter(cfg-rule-default-action-shape)# no average-rate

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.1    | Command introduced |
+---------+--------------------+

---

## policy/rule/description.rst

qos policy rule description
---------------------------

**Minimum user role:** operator

You may want to add a meaningful description for the rule. To add a description for the rule:

Make sure that you are within the rule mode (check for the rule ID in the prompt), and use the following command:

**Command syntax: description [rule-descr]**

**Command mode:** config

**Hierarchies**

- qos policy rule

**Parameter table**

+------------+------------------+------------------+---------+
| Parameter  | Description      | Range            | Default |
+============+==================+==================+=========+
| rule-descr | rule description | | string         | \-      |
|            |                  | | length 1-255   |         |
+------------+------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy MyQoSPolicy1
    dnRouter(cfg-qos-policy-MyQoSPolicy1)# rule 1
    dnRouter(cfg-policy-MyQoSPolicy1-rule-1)# description "real time service"


**Removing Configuration**

To remove the description
::

    dnRouter(cfg-policy-MyQoSPolicy1-rule-1)# no description

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+

---

## policy/rule/match_traffic-class.rst

qos policy rule match traffic-class
-----------------------------------

**Minimum user role:** operator

Each rule (except the default rule) has matching criteria against which traffic is checked. If the traffic meets the matching criteria, then actions are applied on the traffic. The matching criteria are defined in traffic-class maps.

For each rule, you need to specify the traffic-class map using the following command:

**Command syntax: match traffic-class [traffic-class-map]**

**Command mode:** config

**Hierarchies**

- qos policy rule

**Parameter table**

+-------------------+--------------------------------------+----------------+---------+
| Parameter         | Description                          | Range          | Default |
+===================+======================================+================+=========+
| traffic-class-map | References the classifier entry name | string         | \-      |
|                   |                                      | length         |         |
|                   |                                      | 1-255          |         |
+-------------------+--------------------------------------+----------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy MyQoSPolicy1
    dnRouter(cfg-qos-policy-MyQoSPOlicy1)# rule 1
    dnRouter(cfg-policy-MyQoSPOlicy1-rule-1)# match traffic-class myTrafficClassMap


**Removing Configuration**

To remove the matching criterion
::

    dnRouter(cfg-qos-policy-MyQoSPOlicy1)# no match traffic-class

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+

---

## policy/rule/match.rst

qos policy rule match traffic-class
-----------------------------------

**Minimum user role:** operator

Each rule (except the default rule) has matching criteria against which traffic is checked. If the traffic meets the matching criteria, then actions are applied on the traffic. The matching criteria are defined in traffic-class maps.

For each rule, you need to specify the traffic-class map using the following command:

**Command syntax: match traffic-class [traffic-class-map]**

**Command mode:** config

**Hierarchies**

- qos policy rule

**Parameter table**

+-------------------+--------------------------------------+------------------+---------+
| Parameter         | Description                          | Range            | Default |
+===================+======================================+==================+=========+
| traffic-class-map | References the classifier entry name | | string         | \-      |
|                   |                                      | | length 1-255   |         |
+-------------------+--------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy MyQoSPolicy1
    dnRouter(cfg-qos-policy-MyQoSPOlicy1)# rule 1
    dnRouter(cfg-policy-MyQoSPOlicy1-rule-1)# match traffic-class myTrafficClassMap


**Removing Configuration**

To remove the matching criterion
::

    dnRouter(cfg-qos-policy-MyQoSPOlicy1)# no match traffic-class

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+

---

## policy/rule/rule.rst

qos policy rule
---------------

**Minimum user role:** operator

You can create multiple rules per policy and one default rule. After you create a rule, you enter the rule configuration mode indicated by the prompt for either the rule id or the default rule) and you can proceed to add a description and configure actions for the specific rule. See "qos policy rule description" and "qos policy rule action".

To create a rule, make sure that you are in QoS policy configuration mode:

**Command syntax: rule [rule]**

**Command mode:** config

**Hierarchies**

- qos policy

**Parameter table**

+-----------+------------------------------------------+-------+---------+
| Parameter | Description                              | Range | Default |
+===========+==========================================+=======+=========+
| rule      | References the configured id of the rule | \-    | \-      |
+-----------+------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# policy MyQoSPolicy1
    dnRouter(cfg-qos-policy-MyQoSPOlicy1)# rule 1


**Removing Configuration**

To delete the rule:
::

    dnRouter(cfg-qos-policy-MyQoSPOlicy1)# no rule 1

**Command History**

+---------+-----------------------------------------------------------------+
| Release | Modification                                                    |
+=========+=================================================================+
| 5.1.0   | Command introduced                                              |
+---------+-----------------------------------------------------------------+
| 6.0     | When moving into different modes, higher mode names are removed |
+---------+-----------------------------------------------------------------+
| 9.0     | QoS not supported                                               |
+---------+-----------------------------------------------------------------+
| 11.2    | Command re-introduced                                           |
+---------+-----------------------------------------------------------------+
| 15.0    | Updated rule-id range                                           |
+---------+-----------------------------------------------------------------+

---

## port-mirroring/max-bandwidth.rst

qos port-mirroring max-bandwidth
--------------------------------

**Minimum user role:** operator

The port mirroring shaper ensures that the rate of unscheduled port mirroring traffic recycled by each NCP core is limited to the shaper rate.

To configure the rate of unscheduled port mirroring traffic:

**Command syntax: max-bandwidth [max-bandwidth-mbits] [units]**

**Command mode:** config

**Hierarchies**

- qos port-mirroring

**Parameter table**

+---------------------+---------------------------------------------+------------+---------+
| Parameter           | Description                                 | Range      | Default |
+=====================+=============================================+============+=========+
| max-bandwidth-mbits | Per NCP Port Mirroring shaper rate in mbits | 50-1200000 | 1200000 |
+---------------------+---------------------------------------------+------------+---------+
| units               |                                             | | mbps     | mbps    |
|                     |                                             | | gbps     |         |
+---------------------+---------------------------------------------+------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# port-mirroring
    dnRouter(cfg-qos-port-mirroring)# max-bandwidth 10 Gbps


**Removing Configuration**

To revert the configured rate back to its default value:
::

    dnRouter(cfg-qos)# no port-mirroring max-bandwidth

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## port-mirroring/port-mirroring.rst

qos port-mirroring
------------------

**Minimum user role:** operator

Port mirroring QoS adds a shaper for recycled port mirroring traffic and ensures that it is limited to the specified shaper rate.

To enter the Port Mirroring QoS configuration hierarchy:

**Command syntax: port-mirroring**

**Command mode:** config

**Hierarchies**

- qos

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# port-mirroring
    dnRouter(cfg-qos-port-mirroring)#


**Removing Configuration**

To revert the port mirroring parameters back to default:
::

    dnRouter(cfg-qos)# no port-mirroring

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## priority-flow-control/admin-state.rst

qos priority-flow-control admin-state
-------------------------------------

**Minimum user role:** operator

To enable/disable priority-based flow control:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- qos priority-flow-control

**Parameter table**

+-------------+----------------------------------------------------------------------+--------------+----------+
| Parameter   | Description                                                          | Range        | Default  |
+=============+======================================================================+==============+==========+
| admin-state | The administrative state of the priority-based flow control feature. | | enabled    | disabled |
|             |                                                                      | | disabled   |          |
+-------------+----------------------------------------------------------------------+--------------+----------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# priority-flow-control
    dnRouter(cfg-qos-pfc)# admin-state enabled
    dnRouter(cfg-qos-pfc)#


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-qos-pfc)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## priority-flow-control/global-clear-threshold.rst

qos priority-flow-control global-clear-threshold
------------------------------------------------

**Minimum user role:** operator

If VSQ size for a particular queue is less than the clear-threshold value, the transmission of PFC pause frames will be stopped. Lower hierarchies use global thresholds unless they have their own specific configuration. To configure the global PFC clear threshold on the interface that shall apply for each traffic class:

**Command syntax: global-clear-threshold [global-clear-threshold] [units]**

**Command mode:** config

**Hierarchies**

- qos priority-flow-control

**Note**

- Default clear-threshold is 80kbytes. An explicit configuration for a specific traffic class takes precendence over the inherited global configuration.

- Clear-threshold must be lower than the global pause-threshold or the traffic class specific pause-threshold

**Parameter table**

+------------------------+-----------------------------------------------------------------------------+-------------+---------+
| Parameter              | Description                                                                 | Range       | Default |
+========================+=============================================================================+=============+=========+
| global-clear-threshold | The PFC clear-threshold value is the VSQ size to stop sending pause frames. | 0-199999744 | 80000   |
+------------------------+-----------------------------------------------------------------------------+-------------+---------+
| units                  |                                                                             | | bytes     | bytes   |
|                        |                                                                             | | kbytes    |         |
|                        |                                                                             | | mbytes    |         |
+------------------------+-----------------------------------------------------------------------------+-------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# priority-flow-control
    dnRouter(cfg-qos-pfc)# global-clear-threshold 100 kbytes


**Removing Configuration**

To revert to the default value
::

    dnRouter(cfg-qos-pfc)# no clear-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## priority-flow-control/global-pause-threshold.rst

qos priority-flow-control global-pause-threshold max-threshold
--------------------------------------------------------------

**Minimum user role:** operator

The global pause threshold is set dynamically between a minimum and maximum value, proportional to the amount of free buffer resources. The slope between the minimum and maximum values is determined by the alpha parameter. As the amount of free buffer resources increases, the pause threshold increases. When the size of a VSQ exceeds the PFC pause threshold, PFC pause frames are sent to the peer until the queue size falls below the clear threshold. Lower hierarchies use global thresholds unless they have their own specific configuration. to configure the global pause threshold:

**Command syntax: global-pause-threshold max-threshold [global-max-pause-threshold] [units1] min-threshold [global-min-pause-threshold] [units2] alpha [global-alpha]**

**Command mode:** config

**Hierarchies**

- qos priority-flow-control

**Note**

- The default pause-threshold is 200KB. An explicit configuration for a specific traffic class takes precedence over the inherited global configuration. To use dynamic PFC set the global-min-pause-threshold to be lower than the global-max-pause-threshold and add the global-alpha.

- The clear-threshold must be lower than the global pause-threshold or the traffic class specific pause-threshold.

- The dynamic PFC formula (FADT): 

- If a free resource/(2^alpha) is bigger than the max-threshold => threshold=max-threshold

- If a free resource/(2^alpha) is smaller than min-threshold (low resources) => threshold=min-threshold

- If the max-threshold > free-resource/(2^alpha) > min-threshold => threshold=free-resource/(2^alpha)

**Parameter table**

+----------------------------+----------------------------------------------------------------------------------+---------------+---------+
| Parameter                  | Description                                                                      | Range         | Default |
+============================+==================================================================================+===============+=========+
| global-max-pause-threshold | The PFC max pause threshold is the max VSQ size to start triggering pause        | 256-200000000 | 200000  |
|                            | frames.                                                                          |               |         |
+----------------------------+----------------------------------------------------------------------------------+---------------+---------+
| units1                     |                                                                                  | | bytes       | bytes   |
|                            |                                                                                  | | kbytes      |         |
|                            |                                                                                  | | mbytes      |         |
+----------------------------+----------------------------------------------------------------------------------+---------------+---------+
| global-min-pause-threshold | The PFC min pause threshold is the min VSQ size to start triggering pause        | 256-200000000 | 200000  |
|                            | frames.                                                                          |               |         |
+----------------------------+----------------------------------------------------------------------------------+---------------+---------+
| units2                     |                                                                                  | | bytes       | bytes   |
|                            |                                                                                  | | kbytes      |         |
|                            |                                                                                  | | mbytes      |         |
+----------------------------+----------------------------------------------------------------------------------+---------------+---------+
| global-alpha               | PFC alpha sets the dynamic threshold slope.                                      | 0-8           | 4       |
+----------------------------+----------------------------------------------------------------------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# priority-flow-control
    dnRouter(cfg-qos-pfc)# global-pause-threshold max-threshold 300 kbytes min-threshold 150 kbytes global-alpha 4
    dnRouter(cfg-qos-pfc)#


**Removing Configuration**

To revert to the default value
::

    dnRouter(cfg-qos-pfc)# no pause-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## priority-flow-control/global-traffic-class/global-clear-threshold.rst

qos priority-flow-control global-traffic-class global-clear-threshold
---------------------------------------------------------------------

**Minimum user role:** operator

If the VSQ size for a particular queue is less than the global-clear-threshold value the transmission of PFC pause frames stops. Lower hierarchies use global thresholds unless they have their own specific configuration. To configure the PFC global-clear-threshold for a specific traffic class for all interfaces:

**Command syntax: global-clear-threshold [global-clear-threshold] [units]**

**Command mode:** config

**Hierarchies**

- qos priority-flow-control global-traffic-class

**Note**

- The default clear-threshold is 80kbytes. An explicit configuration under a certain traffic class takes precedence over the inherited global configuration.

- The global-clear-threshold must be lower than the global-pause-threshold or the traffic class specific pause-threshold.

**Parameter table**

+------------------------+----------------------------------------------------------------------------------+-------------+---------+
| Parameter              | Description                                                                      | Range       | Default |
+========================+==================================================================================+=============+=========+
| global-clear-threshold | The PFC clear-threshold value is the VSQ size to stop sending pause frames for a | 0-199999744 | \-      |
|                        | specific traffic class.                                                          |             |         |
+------------------------+----------------------------------------------------------------------------------+-------------+---------+
| units                  |                                                                                  | | bytes     | bytes   |
|                        |                                                                                  | | kbytes    |         |
|                        |                                                                                  | | mbytes    |         |
+------------------------+----------------------------------------------------------------------------------+-------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# priority-flow-control
    dnRouter(cfg-qos-pfc)# traffic-class 3
    dnRouter(cfg-qos-pfc-tc3)# global-clear-threshold 100 kbytes


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-qos-pfc-tc3)# no clear-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## priority-flow-control/global-traffic-class/global-pause-threshold.rst

qos priority-flow-control global-traffic-class global-pause-threshold max-threshold
-----------------------------------------------------------------------------------

**Minimum user role:** operator

The global pause threshold is set dynamically between a minimum and maximum value, proportional to the amount of free buffer resources. The slope between the minimum and maximum values is determined by the alpha parameter. As the amount of free buffer resources increases, the pause threshold increases. When the size of a VSQ exceeds the PFC pause threshold, PFC pause frames are sent to the peer until the queue size falls below the clear threshold. Lower hierarchies use global thresholds unless they have their own specific configuration. to configure the global pause threshold:

**Command syntax: global-pause-threshold max-threshold [global-max-pause-threshold] [units1] min-threshold [global-min-pause-threshold] [units2] alpha [global-alpha]**

**Command mode:** config

**Hierarchies**

- qos priority-flow-control global-traffic-class

**Note**

- The default minimum and maximum global-pause-threshold is 200KB. An explicit configuration for a specific traffic class takes precedence over the inherited global configuration. To use dynamic PFC set the global-min-pause-threshold to be lower than the global-max-pause-threshold and add the global-alpha.

- The clear-threshold must be lower than the global pause-threshold or the traffic class specific pause-threshold.

- The dynamic PFC formula (FADT): 

- If a free resource/(2^alpha) is bigger than the max-threshold => threshold=max-threshold

- If a free resource/(2^alpha) is smaller than min-threshold (low resources) => threshold=min-threshold

- If the max-threshold > free-resource/(2^alpha) > min-threshold => threshold=free-resource/(2^alpha)

**Parameter table**

+----------------------------+----------------------------------------------------------------------------------+---------------+---------+
| Parameter                  | Description                                                                      | Range         | Default |
+============================+==================================================================================+===============+=========+
| global-max-pause-threshold | The PFC max pause threshold is the max VSQ size to start triggering pause frames | 256-200000000 | \-      |
|                            | per traffic-class.                                                               |               |         |
+----------------------------+----------------------------------------------------------------------------------+---------------+---------+
| units1                     |                                                                                  | | bytes       | bytes   |
|                            |                                                                                  | | kbytes      |         |
|                            |                                                                                  | | mbytes      |         |
+----------------------------+----------------------------------------------------------------------------------+---------------+---------+
| global-min-pause-threshold | The PFC min pause threshold is the min VSQ size to start triggering pause frames | 256-200000000 | \-      |
|                            | per traffic-class.                                                               |               |         |
+----------------------------+----------------------------------------------------------------------------------+---------------+---------+
| units2                     |                                                                                  | | bytes       | bytes   |
|                            |                                                                                  | | kbytes      |         |
|                            |                                                                                  | | mbytes      |         |
+----------------------------+----------------------------------------------------------------------------------+---------------+---------+
| global-alpha               | PFC alpha sets the dynamic threshold slope for a specific traffic class.         | 0-8           | \-      |
+----------------------------+----------------------------------------------------------------------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# priority-flow-control
    dnRouter(cfg-qos-pfc)# traffic-class 3
    dnRouter(cfg-qos-pfc-tc3)# global-pause-threshold max-threshold 300 kbytes min-threshold 150 kbytes global-alpha 4
    dnRouter(cfg-qos-pfc-tc3)#


**Removing Configuration**

To revert to the default value
::

    dnRouter(cfg-qos-pfc)# no pause-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## priority-flow-control/global-traffic-class/global-traffic-class.rst

qos priority-flow-control global-traffic-class
----------------------------------------------

**Minimum user role:** operator

To enter the Priority Flow Control configuration on an interface for a specific traffic class:

**Command syntax: global-traffic-class [global-traffic-class]**

**Command mode:** config

**Hierarchies**

- qos priority-flow-control

**Parameter table**

+----------------------+---------------------------------------+-------+---------+
| Parameter            | Description                           | Range | Default |
+======================+=======================================+=======+=========+
| global-traffic-class | thresholds per specific traffic class | 0-7   | \-      |
+----------------------+---------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# interfaces
    dnRouter(cfg-qos)# priority-flow-control
    dnRouter(cfg-qos-pfc)# traffic-class 2
    dnRouter(cfg-qos-pfc-tc2)#


**Removing Configuration**

To revert to the default value for a specific traffic class (inherited from global configuration):
::

    dnRouter(cfg-qos-pfc)# no traffic-class 2

To revert to the default value for all traffic classes on the interface (inherited from global configuration):
::

    dnRouter(cfg-qos-pfc)# no traffic-class

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## priority-flow-control/lossless-threshold.rst

qos priority-flow-control lossless-pause-threshold lossless-clear-threshold
---------------------------------------------------------------------------

**Minimum user role:** operator

When the size of a global-VSQ exceeds the PFC pause threshold (in percentages), PFC pause frames are sent to all PFC enabled peers until the global-VSQ size falls below the lossless-clear threshold.

**Command syntax: lossless-pause-threshold [lossless-pause-threshold] lossless-clear-threshold [lossless-clear-threshold]**

**Command mode:** config

**Hierarchies**

- qos priority-flow-control

**Note**

- There are no default values because the values depend on HBM/SRAM size and states that may vary between installations and devices.

- This command is only active after setting pause-threshold and clear-threshold.

- This command is only active after it was configured even if the priority-flow-control admin-state is enabled.

- When configured, priority-flow-control admin-state enables and disables this command without loosing the configured values.

**Parameter table**

+--------------------------+-------------+-------+---------+
| Parameter                | Description | Range | Default |
+==========================+=============+=======+=========+
| lossless-pause-threshold | percentage  | 0-100 | \-      |
+--------------------------+-------------+-------+---------+
| lossless-clear-threshold | percentage  | 1-100 | \-      |
+--------------------------+-------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# priority-flow-control
    dnRouter(cfg-qos-pfc)# lossless-pause-threshold 10 lossless-clear-threshold 11
    dnRouter(cfg-qos-pfc)#


**Removing Configuration**

To remove the command:
::

    dnRouter(cfg-qos-pfc)# no lossless-pause-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## priority-flow-control/lossy-threshold.rst

qos priority-flow-control lossy-threshold
-----------------------------------------

**Minimum user role:** operator

When the lossy global VSQ size is above the lossy-threshold value, lossy packets are dropped. To configure the lossy global VSQ size threshold:

**Command syntax: lossy-threshold [lossy-threshold]**

**Command mode:** config

**Hierarchies**

- qos priority-flow-control

**Note**

- This command has no defaults.

- This command is only active once the threshold is set.

- This command is active ONLY after it has been configured even if the priority-flow-control admin-state is enabled.

- When configured, priority-flow-control admin-state enables and disables this command without loosing the configured values.

- When a lossy threshold is triggered, tail-drop will apply to all interfaces on all traffic-classes except traffic-classes that are set as lossless on all interfaces.

**Parameter table**

+-----------------+-------------+-------+---------+
| Parameter       | Description | Range | Default |
+=================+=============+=======+=========+
| lossy-threshold | percentage  | 0-100 | \-      |
+-----------------+-------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# priority-flow-control
    dnRouter(cfg-qos-pfc)# lossy-threshold 10


**Removing Configuration**

To remove the command:
::

    dnRouter(cfg-qos-pfc)# no lossy-threshold

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## priority-flow-control/priority-flow-control.rst

qos priority-flow-control
-------------------------

**Minimum user role:** operator

Priority Flow Control (PFC; IEEE 802.1Qbb), also referred to as Class-based Flow Control (CBFC) or Per Priority Pause (PPP), is a mechanism that prevents frame loss due to congestion.
PFC is similar to 802.3x Flow Control (pause frames) or Link-level Flow Control (LFC), however, PFC functions on a per class-of-service (CoS) basis.
To enter the global PFC configuration:"

**Command syntax: priority-flow-control**

**Command mode:** config

**Hierarchies**

- qos

**Note**
- Enter this hierarchy to set PFC configuration that will be inherited by all physical interfaces running PFC when no explicit configuration is specified per interface to override the global configuration.

- You can view the PFC administrative state on an interface using the show interfaces detail command. See "show interfaces detail".

- To view PFC counters use the show PFC counters command. See "show priority-flow-control interfaces counters".

- To view PFC queues use the show PFC queues command. See "show priority-flow-control interfaces queues".

**Example**
::

    dnRouter# configure
    dnRouter(cfg-qos)# priority-flow-control
    dnRouter(cfg-qos-pfc)#


**Removing Configuration**

To revert all PFC settings to their default values:
::

    dnRouter(cfg-qos)# no priority-flow-control

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## priority-flow-control/traffic-class-admin-state.rst

qos priority-flow-control global-traffic-class admin-state
----------------------------------------------------------

**Minimum user role:** operator

To enable/disable priority-based flow control on a traffic-class:

**Command syntax: admin-state [admin-state]**

**Command mode:** config

**Hierarchies**

- qos priority-flow-control global-traffic-class

**Parameter table**

+-------------+----------------------------------------------------------------------------------+--------------+---------+
| Parameter   | Description                                                                      | Range        | Default |
+=============+==================================================================================+==============+=========+
| admin-state | The administrative state of the priority-based flow control feature for the      | | enabled    | \-      |
|             | specific Traffic-class.                                                          | | disabled   |         |
+-------------+----------------------------------------------------------------------------------+--------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# priority-flow-control
    dnRouter(cfg-qos-pfc)# admin-state enabled
    dnRouter(cfg-qos-pfc)#


**Removing Configuration**

To revert to the default value:
::

    dnRouter(cfg-qos-pfc)# no admin-state

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 19.10   | Command introduced |
+---------+--------------------+

---

## qos  mpls-swap-exp-edit-mode.rst

mpls-swap-exp-edit-mode
-----------------------

**Minimum user role:** operator

You can use this command to control whether the MPLS EXP top most label bits (the Traffic Class field) of the swapped header are preserved. 

When the mode is set to **preserve**, EXP bits are always preserved.

When the mode is set to **copy**, the EXP bits are copied from the incoming topmost MPLS header. 

To allow the set mpl-exp command to modify EXP bits, the edit mode must be set to **copy**.

To configure the MPLS swap-exp edit mode:


**Command syntax: mpls-swap-exp-edit-mode [mode]**

**Command mode:** config

**Hierarchies**

- qos

**Parameter table**

+---------------+---------------------------------------------------------------------------------+-----------+-------------+
|               |                                                                                 |           |             |
| Parameter     | Description                                                                     | Range     | Default     |
+===============+=================================================================================+===========+=============+
|               |                                                                                 |           |             |
| mode          | Define the mode to control the action on the   swapped MPLS header EXP bits.    | Preserve  | Preserve    |
|               |                                                                                 |           |             |
|               |                                                                                 | Copy      |             |
+---------------+---------------------------------------------------------------------------------+-----------+-------------+

**Example**
::

	dnRouter# configure
	dnRouter(cfg)# qos
	dnRouter(cfg-qos)# mpls-swap-exp-preserve copy


**Removing Configuration**

To return the parameter to the default:
::

	dnRouter(cfg-qos)# no mpls-swap-exp-preserve

.. **Help line:** rule identifier

**Command History**

+-------------+-----------------------+
|             |                       |
| Release     | Modification          |
+=============+=======================+
|             |                       |
| 15.0        | Command introduced    |
+-------------+-----------------------+
---

## qos global-policy-map default-ip dscp.rst

qos global-policy-map default-ip dscp
-------------------------------------

**Minimum user role:** operator

To change the default PHB selection for IP traffic:

**Command syntax: dscp [dscp] qos-tag [gos-tag]** drop-tag [drop-tag]

**Command mode:** config

**Hierarchies**

- qos global-policy-map default-ip 

**Parameter table**

+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+
|               |                       |                                                                                                                                                                                                                                  |             |
| Parameter     | Description           | Range                                                                                                                                                                                                                            | Default     |
+===============+=======================+==================================================================================================================================================================================================================================+=============+
|               |                       |                                                                                                                                                                                                                                  |             |
| dscp          | The DSCP value        | 0..63 or named DSCP value:                                                                                                                                                                                                       | \-          |
|               |                       |                                                                                                                                                                                                                                  |             |
|               |                       | DEFAULT(0), CS1(8), CS2(16), CS3(24), CS4(32),   CS5(40), CS6(48), CS7(56), AF11(10), AF12(12), AF13(14), AF21(18),   AF22(20),AF23(22),AF31(26), AF32(28), AF33(30), AF41(34), AF42(36), AF43(38),   EF(46), VOICE-ADMIT(44)    |             |
+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+
|               |                       |                                                                                                                                                                                                                                  |             |
| qos-tag       | The QoS-tag value     | 0..7                                                                                                                                                                                                                             | \-          |
+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+
|               |                       |                                                                                                                                                                                                                                  |             |
| drop-tag      | The drop-tag value    | green                                                                                                                                                                                                                            | green       |
|               |                       |                                                                                                                                                                                                                                  |             |
|               |                       | yellow                                                                                                                                                                                                                           |             |
+---------------+-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------+

**Example**
::

  dnRouter# configure
  dnRouter(cfg)# qos
  dnRouter(cfg-qos)# global-policy-map default-ip
  dnRouter(cfg-qos-default-ip)#
  dnRouter(cfg-qos-default-ip)# dscp cs1 qos-tag 2 drop-tag yellow
  dnRouter(cfg-qos-default-ip)# dscp 1 qos-tag 2


**Removing Configuration**

To revert to the default value:
::

  dnRouter(cfg-qos-default-ip)# no dscp cs1


.. **Help line:** configure qos IP default phb selection

**Command History**

+-------------+-----------------------+
|             |                       |
| Release     | Modification          |
+=============+=======================+
|             |                       |
| 13.0        | Command introduced    |
+-------------+-----------------------+
---

## qos global-policy-map default-ip ipp.rst

qos global-policy-map default-ip ipp
------------------------------------

**Minimum user role:** operator

This command sets all the default calss map entries corresponding to the IP precedence bits to a specified common qos-tag and drop-tag tuple.

For example, **ipp 1 qos-tag 3** will set dscp 8,9,10,11,12,13,14,15 entries in the map to qos-tag 3 and drop-tag green.

To change the default PHB selection for IP traffic based on IP precedence:

**Command syntax: ipp [ipp] qos-tag [gos-tag]** drop-tag [drop-tag]

**Command mode:** config

**Hierarchies**

- qos global-policy-map default-ip

**Parameter table**

+---------------+----------------------------+-----------+-------------+
|               |                            |           |             |
| Parameter     | Description                | Range     | Default     |
+===============+============================+===========+=============+
|               |                            |           |             |
| ipp           | The IP precedence value    | 0..7      | \-          |
+---------------+----------------------------+-----------+-------------+
|               |                            |           |             |
| qos-tag       | The QoS-tag value          | 0..7      | \-          |
+---------------+----------------------------+-----------+-------------+
|               |                            |           |             |
| drop-tag      | The drop-tag value         | green     | green       |
|               |                            |           |             |
|               |                            | yellow    |             |
+---------------+----------------------------+-----------+-------------+

**Example**
::

  dnRouter# configure
  dnRouter(cfg)# qos
  dnRouter(cfg-qos)# global-policy-map default-ip
  dnRouter(cfg-qos-default-ip)#
  dnRouter(cfg-qos-default-ip)# ipp 4 qos-tag 2 drop-tag yellow

The following example the command will set the DSCP 8, 9, 10, 11, 12, 13, 14, and 15 entries in the map to qos-tag 3 and drop-tag green:
::

  dnRouter(cfg-qos-default-ip)# ipp 5 qos-tag 3


**Removing Configuration**

To revert to the default value:
::

  dnRouter(cfg-qos-default-ip)#no ipp 4


.. **Help line:** configure qos IP default phb selection

**Command History**

+-------------+-----------------------+
|             |                       |
| Release     | Modification          |
+=============+=======================+
|             |                       |
| 13.0        | Command introduced    |
+-------------+-----------------------+
---

## qos global-policy-map default-l2.rst

qos global-policy-map default-l2
--------------------------------

**Minimum user role:** operator

To configure a default qos-tag and drop-tag tuple for L2 traffic:

**Command syntax: qos-tag [gos-tag]** drop-tag [drop-tag]

**Command mode:** config

**Hierarchies**

- qos global-policy-map default-l2 

**Parameter table**

+---------------+-----------------------+-----------+-------------+
|               |                       |           |             |
| Parameter     | Description           | Range     | Default     |
+===============+=======================+===========+=============+
|               |                       |           |             |
| qos-tag       | The QoS-tag value     | 0..7      | \-          |
+---------------+-----------------------+-----------+-------------+
|               |                       |           |             |
| drop-tag      | The drop-tag value    | green     | green       |
|               |                       |           |             |
|               |                       | yellow    |             |
+---------------+-----------------------+-----------+-------------+

**Example**
::

  dnRouter# configure
  dnRouter(cfg)# qos
  dnRouter(cfg-qos)# global-policy-map default-l2
  dnRouter(cfg-qos-default-l2)#
  dnRouter(cfg-qos-default-l2)# qos-tag 6
  dnRouter(cfg-qos-default-l2)# qos-tag 6 drop-tag green

**Removing Configuration**

To revert the map configuration to default:
::

  dnRouter(cfg-qos-default-l2)#no qos-tag

.. **Help line:** configure qos layer 2 default-class map entry

**Command History**

+-------------+-----------------------+
|             |                       |
| Release     | Modification          |
+=============+=======================+
|             |                       |
| 13.0        | Command introduced    |
+-------------+-----------------------+
---

## qos global-policy-map default-mpls mpls-exp.rst

qos global-policy-map default-mpls mpls-exp
-------------------------------------------

**Minimum user role:** operator

To configure the default QoS MPLS PHB selection:

**Command syntax: mpls-exp [mpls-exp] qos-tag [gos-tag]** drop-tag [drop-tag]

**Command mode:** config

**Hierarchies**

- qos global-policy-map default-ip

**Parameter table**

+---------------+-----------------------+-----------+-------------+
|               |                       |           |             |
| Parameter     | Description           | Range     | Default     |
+===============+=======================+===========+=============+
|               |                       |           |             |
| mpls-exp      | The MPLS exp value    | 0..7      | \-          |
+---------------+-----------------------+-----------+-------------+
|               |                       |           |             |
| qos-tag       | The QoS-tag value     | 0..7      | \-          |
+---------------+-----------------------+-----------+-------------+
|               |                       |           |             |
| drop-tag      | The drop-tag value    | green     | green       |
|               |                       |           |             |
|               |                       | yellow    |             |
+---------------+-----------------------+-----------+-------------+

**Example**
::

  dnRouter# configure
  dnRouter(cfg)# qos
  dnRouter(cfg-qos)# global-policy-map default-mpls
  dnRouter(cfg-qos-default-mpls)#
  dnRouter(cfg-qos-default-mpls)# mpls-exp 2 qos-tag 3
  dnRouter(cfg-qos-default-mpls)# mpls-exp 2 qos-tag 3 drop-tag yellow


**Removing Configuration**

To revert the default-mpls entry to its default value:
::

  dnRouter(cfg-qos-default-mpls)# no mpls-exp 2

.. **Help line:** configure qos MPLS default phb selection

**Command History**

+-------------+-----------------------+
|             |                       |
| Release     | Modification          |
+=============+=======================+
|             |                       |
| 13.0        | Command introduced    |
+-------------+-----------------------+
---

## qos global-policy-map.rst

qos global-policy-map
---------------------

**Minimum user role:** operator

Global policy maps control the traffic's mapping of QoS attributes to per-hop behavior (PHB), i.e. to qos-tag and drop-tag for IP, MPLS and layer-2 traffic not controlled by an interface ingress QoS policy.

You can configure the following global policy maps:

• Default-IP global map: 

  The qos-tag and drop-tag assigned to IP traffic originated and sent from the system to the network ("from-me" traffic) is controlled globally by this map. The mapping is also used as the ingress policy on all interfaces which are not assigned any user policy.

  For example, BGP traffic sent from the NCC will use the assigned BGP DSCP value (configured using the  "protocols bgp class-of-service" command), and will be mapped to qos-tag and drop-tag specified by this map.

  The following table describes the default mapping of DSCP to qos-tag, with drop-tag set to yellow for qos-tags 1 and 3:

  ::

    +-------------+----------+----------+           +-------------+----------+----------+
    | dscp        | qos-tag  | drop-tag |           | dscp        | qos-tag  | drop-tag |
    +-------------+----------+----------+           +-------------+----------+----------+
    | default     | 0        | green    |           | cs4         | 4        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 1           | 0        | green    |           | 33          | 4        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 2           | 0        | green    |           | af41        | 4        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 3           | 0        | green    |           | 35          | 4        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 4           | 0        | green    |           | af42        | 4        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 5           | 0        | green    |           | 37          | 4        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 6           | 0        | green    |           | af43        | 4        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 7           | 0        | green    |           | 39          | 4        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | cs1         | 1        | yellow   |           | cs5         | 5        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 9           | 1        | yellow   |           | 41          | 5        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | af11        | 1        | yellow   |           | 42          | 5        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 11          | 1        | yellow   |           | 43          | 5        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | af12        | 1        | yellow   |           | voice-admit | 5        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 13          | 1        | yellow   |           | 45          | 5        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | af13        | 1        | yellow   |           | ef          | 5        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 15          | 1        | yellow   |           | 47          | 5        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | cs2         | 2        | green    |           | cs6         | 6        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 17          | 2        | green    |           | 49          | 6        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | af21        | 2        | green    |           | 50          | 6        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 19          | 2        | green    |           | 51          | 6        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | af22        | 2        | green    |           | 52          | 6        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 21          | 2        | green    |           | 53          | 6        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | af23        | 2        | green    |           | 54          | 6        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 23          | 2        | green    |           | 55          | 6        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | cs3         | 3        | yellow   |           | cs7         | 7        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 25          | 3        | yellow   |           | 57          | 7        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | af31        | 3        | yellow   |           | 58          | 7        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 27          | 3        | yellow   |           | 59          | 7        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | af32        | 3        | yellow   |           | 60          | 7        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 29          | 3        | yellow   |           | 61          | 7        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | af33        | 3        | yellow   |           | 62          | 7        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    | 31          | 3        | yellow   |           | 63          | 7        | green    |
    +-------------+----------+----------+           +-------------+----------+----------+
    
• Default-MPLS global map:

  The qos-tag and drop-tag assigned to MPLS traffic originated and sent from the system to the network ("from-me" traffic) is controlled globally by this map. The mapping is also used as the ingress policy on all interfaces which are not assigned any user policy.

  For example, MPLS Ping packets sent from the NCC will use the assigned BGP exp value (e.g. using the  "run ping" mpls bgp-lu 1.2.3.4/32 count 10 exp 4 command), and will be mapped to qos-tag and drop-tag specified by this map.

  The qos-tag and drop-tag assigned to incoming MPLS packets at tunnel termination, when termination with explicit-null label is used, is also controlled globally by this map. Mapping of all other MPLS traffic, either mid tunnel (swap) or at the penultimate-hop-popping (PHP) tunnel edge are controlled per QoS policy attached to the ingress interface.

  The pipe model requires that the PHB will be selected according to the mpls-exp value of the top-most label, and in particular, when the tunnel is terminated using the explicit-null label (reserved labels 0 or 3 for Ipv6), the PHB is determined from the mpls-exp carried by the explicit null label.

  The following table describes the default mapping of the MPLS exp value to qos-tag, with drop-tag set to yellow for qos-tags 1 and 3:
  ::

    +----------+----------+----------+
    | mpls-exp | qos-tag  | drop-tag |
    +----------+----------+----------+
    | 0        | 0        | green    |
    +----------+----------+----------+
    | 1        | 1        | yellow   |
    +----------+----------+----------+
    | 2        | 2        | green    |
    +----------+----------+----------+
    | 3        | 3        | yellow   |
    +----------+----------+----------+
    | 4        | 4        | green    |
    +----------+----------+----------+
    | 5        | 5        | green    |
    +----------+----------+----------+
    | 6        | 6        | green    |
    +----------+----------+----------+
    | 7        | 7        | green    |
    +----------+----------+----------+

• Default-L2 global map:
  
  The qos-tag and drop-tag assigned to layer 2 traffic originated and sent from the system to the network ("from-me" traffic) is controlled globally by this map. For example, ARP, IS-IS, LLDP, etc.
  
  By default, L2 traffic is assigned qos-tag 6 and drop-tag green.

To configure a QoS global policy map, enter the policy's configuration mode:

**Command syntax: qos global-policy-map [global-policy-map-name]**

**Command mode:** config

**Hierarchies**

- qos

**Parameter table**

+---------------------------+---------------------------------------------------+------------------------------------------------------------------------------------+-------------+
|                           |                                                   |                                                                                    |             |
| Parameter                 | Description                                       | Range                                                                              | Default     |
+===========================+===================================================+====================================================================================+=============+
|                           |                                                   |                                                                                    |             |
| global-policy-map-name    | The name of the global policy map to configure    | default-ip: default mapping applicable to from-me   IP traffic                     | \-          |
|                           |                                                   |                                                                                    |             |
|                           |                                                   | default-mpls: default mapping applicable to   from-me / Explicit NULL MPLS traffic |             |
|                           |                                                   |                                                                                    |             |
|                           |                                                   | default-l2: Default mapping. Applicable to   from-me L2 traffic                    |             |
+---------------------------+---------------------------------------------------+------------------------------------------------------------------------------------+-------------+

**Example**
::

  dnRouter# configure
  dnRouter(cfg)# qos
  dnRouter(cfg-qos)# global-policy-map default-ip
  dnRouter(cfg-qos-default-ip)#

  dnRouter(cfg-qos)# global-policy-map default-mpls
  dnRouter(cfg-qos-default-mpls)#

  dnRouter(cfg-qos)# global-policy-map default-l2
  dnRouter(cfg-qos-default-l2)#


**Removing Configuration**

To remove the global-policy-map configuration:
::

  dnRouter(cfg-qos)# no global-policy-map default-ip
  dnRouter(cfg-qos)# no global-policy-map

.. **Help line:** configure qos global-policy-map

**Command History**

+-------------+-----------------------+
|             |                       |
| Release     | Modification          |
+=============+=======================+
|             |                       |
| 13.0        | Command introduced    |
+-------------+-----------------------+
---

## qos mib-enable.rst

qos mib-enable
-------------------

**Minimum user role:** operator

The QoS MIB describes the names and optional description strings of policies, rules and traffic classes, and how the three are combined together. The MIB models the hierarchy between configuration objects (not instances). This has two advantages: it allows the QoS hierarchy to be queried even if no policy is provisioned (attached to an interface), and it ensures that the hierarchy table scale does not increase linearly with the number of provisioned interfaces, therefore requiring less resources for querying all tables when the number of interfaces is large.

To enable QoS telemetry via SNMP:

**Command syntax: qos mib [mib-enable]**

**Command mode:** config

**Hierarchies**

- qos

**Parameter table**

+---------------+---------------------------------------------+-------------+-------------+
|               |                                             |             |             |
| Parameter     | Description                                 | Range       | Default     |
+===============+=============================================+=============+=============+
|               |                                             |             |             |
| mib-enable    | To enable/disable QoS telemetry via SNMP    | Enabled     | Disabled    |
|               |                                             |             |             |
|               |                                             | Disabled    |             |
+---------------+---------------------------------------------+-------------+-------------+

**Example**
::

	dnRouter# configure
	dnRouter(cfg)# qos
	dnRouter(cfg-qos)# mib enabled


**Removing Configuration**

To revert to the default value:
::

	dnRouter(cfg-qos)# no mib

.. **Help line:** Enable QoS telemetry via SNMP

**Command History**

+-------------+-----------------------+
|             |                       |
| Release     | Modification          |
+=============+=======================+
|             |                       |
| 15.0        | Command introduced    |
+-------------+-----------------------+

---

## qos overview.rst

Quality of Service (QoS) Overview
---------------------------------
QoS manages data traffic types and guarantees that high-priority traffic is successfully sent across a congested network with enough bandwidth allowance and without experiencing delay, jitter, or packet loss. For example, QoS can prioritize packets in real-time applications like video and VOIP over FTP or email traffic.

Quality of Service achieves data priority with policies, which are rules to manage network traffic. A rule comprises a traffic-class to match and a list of actions to perform if the traffic-class condition is met. Within a QoS policy, rules are defined in order of execution. Each rule has an ID, which is executed in ascending order. A default rule is implicitly created for each policy, so traffic that does not match any defined rule will match the default rule.

QoS policies are triggered only when the network is congested. Once created, the QoS policy is attached to an ingress or egress interface. For further details, refer to the QOS Feature Guide in the DriveNets Documentation portal https://docs.drivenets.com.
---

## qos policy rule default.rst

qos policy rule default
-----------------------

**Minimum user role:** operator

A single default rule is automatically created for each policy. This is the rule that is applied when no other rule matches the traffic, so it can only be configured with actions, and not with match criteria. The default rule has the lowest rule priority.

On an ingress policy, rule default sets the qos-tag to 0 and drop-tag to green by default.

On an egress policy, rule default uses the df (Default Forwarding) queue by default.

To configure the default rule for the policy:


**Command syntax: rule default**

**Command mode:** config

**Hierarchies**

- qos policy

**Example**
::

	dnRouter# configure
	dnRouter(cfg)# qos
	dnRouter(cfg-qos)# policy MyQoSPolicy1
	dnRouter(cfg-qos-policy-MyQoSPOlicy1)# rule default
	dnRouter(cfg-policy-MyQoSPOlicy1-rule-default)#


**Removing Configuration**

To revert the default rule to its default value:
::

	dnRouter(cfg-qos-policy-MyQoSPOlicy1)# no rule default


.. **Help line:** rule default


**Command History**

+-------------+-----------------------+
|             |                       |
| Release     | Modification          |
+=============+=======================+
|             |                       |
| 11.2        | Command introduced    |
+-------------+-----------------------+
---

## qos wred-profile.rst

qos wred-profile
-----------------

**Minimum user role:** operator

The purpose of the Weighted Random Early Detection (WRED) profile is to avoid congestion on the queue by starting to drop packets randomly before the queue reaches its maximum limit. By dropping packets randomly, WRED signals to the sender to slow down the transmission rate (the mechanism accompanies a transport-layer congestion control protocol such as TCP).

The packet drop probability is based on a minimum threshold, a maximum threshold and a linear curve that starts at 0 drop probability and crosses the maximum drop probability threshold at 10%. You can set up to two curves (yellow/green) for AF/DF forwarding classes and up to a total of 16 WRED profiles. 

When configuring the curves for each forwarding class, you should take into account the queue's size (see "qos policy rule action queue size"). You can then decide when each curve should start dropping packets. You should set the minimum threshold high enough to maximize the utilization of the queue capacity. The minimum threshold should not be higher than the queue size configured for the forwarding class.

When the average queue size crosses the min-threshold, WRED begins to drop packets randomly. The drop probability increases until the average queue size reaches the maximum threshold. When the average queue size exceeds the maximum threshold, all packets are dropped.


.. The average queue size is calculated as follows:

To configure a WRED profile:

#.	Enter WRED profile configuration hierarchy (see below)
#.	Configure a curve.

**Command syntax: wred-profile [profile-name]**
**Command syntax: wred-profile [profile-name] curve {green|yellow}** min [min-value] [min-knob] max [max-value] [max-knob] max-drop [max-drop]

**Command mode:** config

**Hierarchies**

- qos 

**Note**

- The average queue size refers to the (ingress) virtual output queue (VOQ). 

- To allow small bursts with no drops, the min- and max-values relate to the average queue size and not to the current queue size.

**Parameter table**

+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------+-------------+
|                 |                                                                                                                                                                                                                                |                           |             |
| Parameter       | Description                                                                                                                                                                                                                    | Range                     | Default     |
+=================+================================================================================================================================================================================================================================+===========================+=============+
|                 |                                                                                                                                                                                                                                |                           |             |
| profile-name    | The name of the profile. If the profile name   already exists, the command will update the values of the parameters. If the   profile name does not exist, a new profile is created with the configured   parameter values.    | String                    |  \-         |
+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------+-------------+
|                 |                                                                                                                                                                                                                                |                           |             |
| min-value       | Specify the lower value for the range of the   curve, below which no packets will be dropped.                                                                                                                                  | 1..2000000 (microseconds) | \-          |
|                 |                                                                                                                                                                                                                                |                           |             |
|                 | The min-value must be less or equal to the   max-value                                                                                                                                                                         | 1..200 (milliseconds)     |             |
+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------+-------------+
|                 |                                                                                                                                                                                                                                |                           |             |
| min-knob        | Set the unit of measurement for the min value                                                                                                                                                                                  | microseconds              | \-          |
|                 |                                                                                                                                                                                                                                |                           |             |
|                 |                                                                                                                                                                                                                                | milliseconds              |             |
+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------+-------------+
|                 |                                                                                                                                                                                                                                |                           |             |
| max-value       | Specify the upper value for the range of the curve,   above which all packets will be dropped.                                                                                                                                 | 1..2000000 (microseconds) | \-          |
|                 |                                                                                                                                                                                                                                |                           |             |
|                 | The max-value must be equal or greater than   min-value.                                                                                                                                                                       | 1..200 (milliseconds)     |             |
+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------+-------------+
|                 |                                                                                                                                                                                                                                |                           |             |
| max-knob        | Set the unit of measurement for the max value                                                                                                                                                                                  | microseconds              | \-          |
|                 |                                                                                                                                                                                                                                |                           |             |
|                 |                                                                                                                                                                                                                                | milliseconds              |             |
+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------+-------------+
|                 |                                                                                                                                                                                                                                |                           |             |
| max-drop        | The maximum drop probability per curve                                                                                                                                                                                         | 1..100%                   | 10%         |
+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------+-------------+

**Example**
::

	dnRouter# configure
	dnRouter(cfg)# qos
	dnRouter(cfg-qos)# wred-profile my_profile
	dnRouter(cfg-qos-wred-profile-my_profile)# curve green min 500 milliseconds max 1000 milliseconds
	dnRouter(cfg-qos-wred-profile-my_profile)# curve yellow min 100 milliseconds max 800 milliseconds

	dnRouter(cfg-qos)# wred-profile my_profile2
	dnRouter(cfg-qos-wred-profile-my_profile2)# curve green min 10 milliseconds max 100 milliseconds


**Removing Configuration**

You cannot delete a WRED profile if it is attached to a queue. You must first delete the profile from the queue. See "qos policy rule action queue wred-profile".

To remove the WRED profile configuration:
::

	dnRouter(cfg-qos)# no wred-profile
	dnRouter(cfg-qos)# no wred-profile my_profile


To remove a curve from the profile:
::

	dnRouter(cfg-qos-wred-profile-default)# no curve green


.. **Help line:** Configure wred curves per drop priority

**Command History**

+-------------+-----------------------------------------+
|             |                                         |
| Release     | Modification                            |
+=============+=========================================+
|             |                                         |
| 5.1.0       | Command introduced                      |
+-------------+-----------------------------------------+
|             |                                         |
| 6.0         | Applied   new hierarchy                 |
+-------------+-----------------------------------------+
|             |                                         |
| 9.0         | Command not supported                   |
+-------------+-----------------------------------------+
|             |                                         |
| 11.4        | Command reintroduced with new syntax    |
+-------------+-----------------------------------------+
|             |                                         |
| 15.1        | Added support for max-drop              |
+-------------+-----------------------------------------+
|             |                                         |
| 18.3        | Added min-threshold knob                |
+-------------+-----------------------------------------+
| 25.2        | Command syntax change                   |
+-------------+-----------------------------------------+
---

## qos.rst

qos
----

**Minimum user role:** operator

A Quality of Service (QoS) policy is a set of rules used for managing network bandwidth, delay, jitter, and packet loss. A rule comprises a traffic-class to match and a list of actions to perform if the traffic-class condition is met. Within a QoS policy, rules are defined in order of execution. Each rule has an ID and the rules are executed in ascending order. A default rule is implicitly created for each policy, such that traffic that does not match any of the defined rules will match the default rule.

The QoS policy is attached to interfaces. See "interfaces qos policy".

To enter the qos configuration hierarchy:

**Command syntax: qos**

**Command mode:** config


**Example**
::

	dnRouter# configure
	dnRouter(cfg)# qos


.. **Removing Configuration**


.. **Help line:**

**Command History**

+-------------+-----------------------------------------+
|             |                                         |
| Release     | Modification                            |
+=============+=========================================+
|             |                                         |
| 6.0         | Command introduced for new hierarchy    |
+-------------+-----------------------------------------+
|             |                                         |
| 9.0         | QoS not supported                       |
+-------------+-----------------------------------------+
|             |                                         |
| 11.0        | Command reintroduced                    |
+-------------+-----------------------------------------+
---

## traffic-class-map/description.rst

qos traffic-class-map description
---------------------------------

**Minimum user role:** operator

To add a meaningful description for a traffic-class-map:

**Command syntax: description [descr]**

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+-----------+-------------------------------+------------------+---------+
| Parameter | Description                   | Range            | Default |
+===========+===============================+==================+=========+
| descr     | Traffic class map description | | string         | \-      |
|           |                               | | length 1-255   |         |
+-----------+-------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-traffic-class-map-MyTrafficClass1)# description "Emergency Traffic"


**Removing Configuration**

To remove the description from the traffic-class-map:
::

    dnRouter(cfg-traffic-class-map-MyTrafficClass1)# no description

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## traffic-class-map/dscp-ipv4.rst

qos traffic-class-map dscp-ipv4
-------------------------------

**Minimum user role:** operator

To Configure the traffic-class map dscp-ipv4:

**Command syntax: dscp-ipv4 [dscp-ipv4]**

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+-----------+---------------------+-------+---------+
| Parameter | Description         | Range | Default |
+===========+=====================+=======+=========+
| dscp-ipv4 | Match DSCP for IPv4 | 0-63  | \-      |
+-----------+---------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# dscp-ipv4 10,12,14


**Removing Configuration**

To remove the dscp-ipv4 from the traffic-class-map:
::

    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# no dscp-ipv4

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## traffic-class-map/dscp-ipv6.rst

qos traffic-class-map dscp-ipv6
-------------------------------

**Minimum user role:** operator

To Configure the traffic-class map dscp-ipv6:

**Command syntax: dscp-ipv6 [dscp-ipv6]**

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+-----------+---------------------+-------+---------+
| Parameter | Description         | Range | Default |
+===========+=====================+=======+=========+
| dscp-ipv6 | Match DSCP for IPv6 | 0-63  | \-      |
+-----------+---------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# dscp-ipv6 10,12,14


**Removing Configuration**

To remove the dscp-ipv6 from the traffic-class-map:
::

    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# no dscp-ipv6

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## traffic-class-map/dscp.rst

qos traffic-class-map dscp
--------------------------

**Minimum user role:** operator

To Configure the traffic-class map dscp:

**Command syntax: dscp [dscp]**

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+-----------+-------------+-------+---------+
| Parameter | Description | Range | Default |
+===========+=============+=======+=========+
| dscp      | Match DSCP  | 0-63  | \-      |
+-----------+-------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# dscp 10,12,14


**Removing Configuration**

To remove the dscp from the traffic-class-map:
::

    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# no dscp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## traffic-class-map/dual-pcp-dei.rst

qos traffic-class-map dual-pcp-dei outer-pcp-dei inner-pcp-dei
--------------------------------------------------------------

**Minimum user role:** operator

To configure IEEE 802.1p Priority Code Point (PCP-DEI) bits match criteria on dual VLAN

**Command syntax: dual-pcp-dei outer-pcp-dei [outer-pcp-dei] inner-pcp-dei [inner-pcp-dei]**

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+---------------+--------------------------------------+-------+---------+
| Parameter     | Description                          | Range | Default |
+===============+======================================+=======+=========+
| outer-pcp-dei | Outer VLAN Priority Code Point value | \-    | \-      |
+---------------+--------------------------------------+-------+---------+
| inner-pcp-dei | Inner VLAN Priority Code Point value | \-    | \-      |
+---------------+--------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# dual-pcp-dei outer-pcp-dei 2 inner-pcp-dei 1


**Removing Configuration**

To remove a specific dual-pcp-dei entry from the traffic-class-map:
::

    dnRouter(cfg-traffic-class-map-MyTrafficClass1)# no dual-pcp-dei outer-pcp-dei OUTER-PCP-DEI inner-pcp-dei INNER-PCP-DEI

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## traffic-class-map/dual-pcp.rst

qos traffic-class-map dual-pcp outer-pcp inner-pcp
--------------------------------------------------

**Minimum user role:** operator

To configure IEEE 802.1p Priority Code Point (PCP) bits match criteria on dual VLAN

**Command syntax: dual-pcp outer-pcp [outer-pcp] inner-pcp [inner-pcp]**

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+-----------+--------------------------------------+-------+---------+
| Parameter | Description                          | Range | Default |
+===========+======================================+=======+=========+
| outer-pcp | Outer VLAN Priority Code Point value | \-    | \-      |
+-----------+--------------------------------------+-------+---------+
| inner-pcp | Inner VLAN Priority Code Point value | \-    | \-      |
+-----------+--------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# dual-pcp outer-pcp 2 inner-pcp 1


**Removing Configuration**

To remove a specific dual-pcp entry from the traffic-class-map:
::

    dnRouter(cfg-traffic-class-map-MyTrafficClass1)# no dual-pcp outer-pcp OUTER-PCP inner-pcp INNER-PCP

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| TBD     | Command introduced |
+---------+--------------------+

---

## traffic-class-map/match.rst

qos traffic-class-map match
---------------------------

**Minimum user role:** operator

To configure the match type:

**Command syntax: match [match-type]**

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+------------+----------------------------------------------------+-------+---------+
| Parameter  | Description                                        | Range | Default |
+============+====================================================+=======+=========+
| match-type | Define how multiple match criteria will be handled | any   | any     |
+------------+----------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-traffic-class-map-MyTrafficClass1)# match any


**Removing Configuration**

To remove the match type from the traffic-class-map:
::

    dnRouter(cfg-traffic-class-map-MyTrafficClass1)# no match

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## traffic-class-map/mpls-exp.rst

qos traffic-class-map mpls-exp
------------------------------

**Minimum user role:** operator

To configure the MPLS experimental bits match criteria:

**Command syntax: mpls-exp [mpls-exp]** [, mpls-exp, mpls-exp]

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+-----------+--------------------------+-------+---------+
| Parameter | Description              | Range | Default |
+===========+==========================+=======+=========+
| mpls-exp  | MPLS EXP bits (TC field) | 0-7   | \-      |
+-----------+--------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# mpls-exp 1,3,5


**Removing Configuration**

To remove the mpls-exp from the traffic-class-map:
::

    dnRouter(cfg-traffic-class-map-MyTrafficClass1)# no mpls-exp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## traffic-class-map/pcp-dei.rst

qos traffic-class-map pcp-dei
-----------------------------

**Minimum user role:** operator

To configure IEEE 802.1p Priority Code Point (PCP) and Drop Eligible Indicator (DEI) bits match criteria:

**Command syntax: pcp-dei [pcp-dei]** [, pcp-dei, pcp-dei]

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+-----------+--------------------------------------------------------------+-------+---------+
| Parameter | Description                                                  | Range | Default |
+===========+==============================================================+=======+=========+
| pcp-dei   | IEEE 802.1Q Priority Code Point and Drop eligible indicator. | 0-15  | \-      |
+-----------+--------------------------------------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# pcp-dei 1,3,5


**Removing Configuration**

To remove the pcp-dei from the traffic-class-map:
::

    dnRouter(cfg-traffic-class-map-MyTrafficClass1)# no pcp-dei

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## traffic-class-map/pcp.rst

qos traffic-class-map pcp
-------------------------

**Minimum user role:** operator

To configure IEEE 802.1p Priority Code Point (PCP) bits match criteria:

**Command syntax: pcp [pcp]** [, pcp, pcp]

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+-----------+---------------------------------+-------+---------+
| Parameter | Description                     | Range | Default |
+===========+=================================+=======+=========+
| pcp       | IEEE 802.1Q Priority Code Point | 0-7   | \-      |
+-----------+---------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# pcp 1,3,5


**Removing Configuration**

To remove the pcp from the traffic-class-map:
::

    dnRouter(cfg-traffic-class-map-MyTrafficClass1)# no pcp

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## traffic-class-map/precedence-ipv4.rst

qos traffic-class-map precedence-ipv4
-------------------------------------

**Minimum user role:** operator

To configure IP precedence-ipv4 bits match criteria:

**Command syntax: precedence-ipv4 [precedence-ipv4]** [, precedence-ipv4, precedence-ipv4]

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+-----------------+------------------------------+-------+---------+
| Parameter       | Description                  | Range | Default |
+=================+==============================+=======+=========+
| precedence-ipv4 | Match IP precedence for IPv4 | 0-7   | \-      |
+-----------------+------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# precedence-ipv4 1,3,5


**Removing Configuration**

To remove the precedence-ipv4 from the traffic-class-map:
::

    dnRouter(cfg-traffic-class-map-MyTrafficClass1)# no precedence-ipv4

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## traffic-class-map/precedence-ipv6.rst

qos traffic-class-map precedence-ipv6
-------------------------------------

**Minimum user role:** operator

To configure IP precedence-ipv6 bits match criteria:

**Command syntax: precedence-ipv6 [precedence-ipv6]** [, precedence-ipv6, precedence-ipv6]

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+-----------------+------------------------------+-------+---------+
| Parameter       | Description                  | Range | Default |
+=================+==============================+=======+=========+
| precedence-ipv6 | Match IP precedence for IPv6 | 0-7   | \-      |
+-----------------+------------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# precedence-ipv6 1,3,5


**Removing Configuration**

To remove the precedence-ipv6 from the traffic-class-map:
::

    dnRouter(cfg-traffic-class-map-MyTrafficClass1)# no precedence-ipv6

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 17.0    | Command introduced |
+---------+--------------------+

---

## traffic-class-map/precedence.rst

qos traffic-class-map precedence
--------------------------------

**Minimum user role:** operator

To configure IP precedence bits match criteria:

**Command syntax: precedence [precedence]** [, precedence, precedence]

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+------------+---------------------+-------+---------+
| Parameter  | Description         | Range | Default |
+============+=====================+=======+=========+
| precedence | Match IP precedence | 0-7   | \-      |
+------------+---------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# precedence 1,3,5


**Removing Configuration**

To remove the precedence from the traffic-class-map:
::

    dnRouter(cfg-traffic-class-map-MyTrafficClass1)# no precedence

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## traffic-class-map/qos-tag.rst

qos traffic-class-map qos-tag
-----------------------------

**Minimum user role:** operator

To Configure QoS tag match criteria:

**Command syntax: qos-tag [qos-tag]** [, qos-tag, qos-tag]

**Command mode:** config

**Hierarchies**

- qos traffic-class-map

**Parameter table**

+-----------+------------------------+-------+---------+
| Parameter | Description            | Range | Default |
+===========+========================+=======+=========+
| qos-tag   | QoS-tag priority level | 0-7   | \-      |
+-----------+------------------------+-------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1
    dnRouter(cfg-qos-traffic-class-map-MyTrafficMap1)# qos-tag 1,3,5


**Removing Configuration**

To remove the qos-tag from the traffic-class-map:
::

    dnRouter(cfg-traffic-class-map-MyTrafficClass1)# no qos-tag

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 11.2    | Command introduced |
+---------+--------------------+

---

## traffic-class-map/traffic-class-map.rst

qos traffic-class-map
---------------------

**Minimum user role:** operator

A QoS traffic-class-map is a set of packet attributes that match criteria identified by a unique name.

To create a QoS traffic-class-map:

**Command syntax: traffic-class-map [traffic-class-map]**

**Command mode:** config

**Hierarchies**

- qos

**Note**

- You cannot remove a traffic-class-map if it is used in a policy.

**Parameter table**

+-------------------+--------------------------------------------------+------------------+---------+
| Parameter         | Description                                      | Range            | Default |
+===================+==================================================+==================+=========+
| traffic-class-map | References the configured name of the classifier | | string         | \-      |
|                   |                                                  | | length 1-255   |         |
+-------------------+--------------------------------------------------+------------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# traffic-class-map MyTrafficClass1


**Removing Configuration**

To remove the traffic-class-map:
::

    dnRouter(cfg-qos)# no traffic-class-map MyTrafficClass1

**Command History**

+---------+-----------------------+
| Release | Modification          |
+=========+=======================+
| 11.2    | Command re-introduced |
+---------+-----------------------+

---

## vrf-redirect/vrf-redirect-0-max-bandwidth.rst

qos vrf-redirect vrf-redirect-0 max-bandwidth
---------------------------------------------

**Minimum user role:** operator

The vrf-redirect-0 shaper ensures that the maximum rate of static route vrf redirect traffic, sent through the recycle interface, is limited to the shaper rate.
The limit protects against vrf redirect traffic overwhelming or competing with incoming traffic at each NCP.
To configure the rate of the vrf-redireect-0 traffic:

**Command syntax: vrf-redirect-0 max-bandwidth [max-bandwidth-mbits] [units]**

**Command mode:** config

**Hierarchies**

- qos vrf-redirect

**Parameter table**

+---------------------+-------------------------------------------+---------------+---------+
| Parameter           | Description                               | Range         | Default |
+=====================+===========================================+===============+=========+
| max-bandwidth-mbits | Per NCP VRF redirect shaper rate in mbits | 100000-400000 | 100000  |
+---------------------+-------------------------------------------+---------------+---------+
| units               |                                           | | mbps        | mbps    |
|                     |                                           | | gbps        |         |
+---------------------+-------------------------------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# vrf-redirect
    dnRouter(cfg-qos-vrf-red)# vrf-redirect-0 max-bandwidth 110 Gbps


**Removing Configuration**

To revert the configured rate to the default value:
::

    dnRouter(cfg-qos)# no vrf-redirect vrf-redirect-0 max-bandwidth

**Command History**

+---------+-----------------------------------------+
| Release | Modification                            |
+=========+=========================================+
| 16.2    | Command introduced                      |
+---------+-----------------------------------------+
| 17.1    | Default units changed from gbps to mbps |
+---------+-----------------------------------------+

---

## vrf-redirect/vrf-redirect-1-max-bandwidth.rst

qos vrf-redirect vrf-redirect-1 max-bandwidth
---------------------------------------------

**Minimum user role:** operator

The vrf-redirect-1 shaper ensures that the maximum rate of flowspec and/or ABF vrf redirect traffic, sent through the recycle interface, is limited to the shaper rate.
The limit protects against vrf redirect traffic overwhelming or competing with incoming traffic at each NCP.
To configure the rate of the vrf-redireect-1 traffic:

**Command syntax: vrf-redirect-1 max-bandwidth [max-bandwidth-mbits] [units]**

**Command mode:** config

**Hierarchies**

- qos vrf-redirect

**Parameter table**

+---------------------+-------------------------------------------+---------------+---------+
| Parameter           | Description                               | Range         | Default |
+=====================+===========================================+===============+=========+
| max-bandwidth-mbits | Per NCP VRF redirect shaper rate in mbits | 100000-400000 | 100000  |
+---------------------+-------------------------------------------+---------------+---------+
| units               |                                           | | mbps        | mbps    |
|                     |                                           | | gbps        |         |
+---------------------+-------------------------------------------+---------------+---------+

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# vrf-redirect
    dnRouter(cfg-qos-vrf-red)# vrf-redirect-1 max-bandwidth 110 Gbps


**Removing Configuration**

To revert the configured rate to the default value:
::

    dnRouter(cfg-qos)# no vrf-redirect vrf-redirect-0 max-bandwidth

**Command History**

+---------+-----------------------------------------+
| Release | Modification                            |
+=========+=========================================+
| 16.2    | Command introduced                      |
+---------+-----------------------------------------+
| 17.1    | Default units changed from gbps to mbps |
+---------+-----------------------------------------+

---

## vrf-redirect/vrf-redirect.rst

qos vrf-redirect
----------------

**Minimum user role:** operator

DNOS supports three types of VRF redirect schemes: static routes redirecting to another VRF, flowspec redirection and ABF redirection to another VRF.
VRF QoS adds two shapers, the vrf-redirect-0 shaper and the vrf-redirect-1 shaper.
vrf-redirect-0 ensures that the maximum rate of static-route redirected traffic is limited to the specified shaper rate.
vrf-redirect-1 ensures that the maximum rate of flowpsec redirect and ABF redirect traffic sent is limited to the specified shaper rate.

**Command syntax: vrf-redirect**

**Command mode:** config

**Hierarchies**

- qos

**Example**
::

    dnRouter# configure
    dnRouter(cfg)# qos
    dnRouter(cfg-qos)# vrf-redirect
    dnRouter(cfg-qos-vrfr)#


**Removing Configuration**

To revert the vrf-redirect parameters to the default value:
::

    dnRouter(cfg-qos)# no vrf-redirect

**Command History**

+---------+--------------------+
| Release | Modification       |
+=========+====================+
| 16.2    | Command introduced |
+---------+--------------------+

---


---

Total files: 983 (Network-services: 630 + Services: 190 + QoS: 163)
